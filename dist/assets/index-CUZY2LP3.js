(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function zh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var zg={exports:{}},rh={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function GC(){if(IE)return rh;IE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:l}}return rh.Fragment=e,rh.jsx=t,rh.jsxs=t,rh}var kE;function ZC(){return kE||(kE=1,zg.exports=GC()),zg.exports}var T=ZC(),Hg={exports:{}},yt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NE;function KC(){if(NE)return yt;NE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function b(H){return H===null||typeof H!="object"?null:(H=E&&H[E]||H["@@iterator"],typeof H=="function"?H:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,O={};function M(H,ne,le){this.props=H,this.context=ne,this.refs=O,this.updater=le||C}M.prototype.isReactComponent={},M.prototype.setState=function(H,ne){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,ne,"setState")},M.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function z(){}z.prototype=M.prototype;function Y(H,ne,le){this.props=H,this.context=ne,this.refs=O,this.updater=le||C}var K=Y.prototype=new z;K.constructor=Y,I(K,M.prototype),K.isPureReactComponent=!0;var J=Array.isArray,oe={H:null,A:null,T:null,S:null,V:null},W=Object.prototype.hasOwnProperty;function q(H,ne,le,se,he,ue){return le=ue.ref,{$$typeof:n,type:H,key:ne,ref:le!==void 0?le:null,props:ue}}function S(H,ne){return q(H.type,ne,void 0,void 0,void 0,H.props)}function x(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function N(H){var ne={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(le){return ne[le]})}var j=/\/+/g;function B(H,ne){return typeof H=="object"&&H!==null&&H.key!=null?N(""+H.key):ne.toString(36)}function D(){}function Q(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(D,D):(H.status="pending",H.then(function(ne){H.status==="pending"&&(H.status="fulfilled",H.value=ne)},function(ne){H.status==="pending"&&(H.status="rejected",H.reason=ne)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ae(H,ne,le,se,he){var ue=typeof H;(ue==="undefined"||ue==="boolean")&&(H=null);var ye=!1;if(H===null)ye=!0;else switch(ue){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(H.$$typeof){case n:case e:ye=!0;break;case _:return ye=H._init,ae(ye(H._payload),ne,le,se,he)}}if(ye)return he=he(H),ye=se===""?"."+B(H,0):se,J(he)?(le="",ye!=null&&(le=ye.replace(j,"$&/")+"/"),ae(he,ne,le,"",function(De){return De})):he!=null&&(x(he)&&(he=S(he,le+(he.key==null||H&&H.key===he.key?"":(""+he.key).replace(j,"$&/")+"/")+ye)),ne.push(he)),1;ye=0;var Fe=se===""?".":se+":";if(J(H))for(var ke=0;ke<H.length;ke++)se=H[ke],ue=Fe+B(se,ke),ye+=ae(se,ne,le,ue,he);else if(ke=b(H),typeof ke=="function")for(H=ke.call(H),ke=0;!(se=H.next()).done;)se=se.value,ue=Fe+B(se,ke++),ye+=ae(se,ne,le,ue,he);else if(ue==="object"){if(typeof H.then=="function")return ae(Q(H),ne,le,se,he);throw ne=String(H),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ye}function U(H,ne,le){if(H==null)return H;var se=[],he=0;return ae(H,se,"","",function(ue){return ne.call(le,ue,he++)}),se}function F(H){if(H._status===-1){var ne=H._result;ne=ne(),ne.then(function(le){(H._status===0||H._status===-1)&&(H._status=1,H._result=le)},function(le){(H._status===0||H._status===-1)&&(H._status=2,H._result=le)}),H._status===-1&&(H._status=0,H._result=ne)}if(H._status===1)return H._result.default;throw H._result}var X=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function ee(){}return yt.Children={map:U,forEach:function(H,ne,le){U(H,function(){ne.apply(this,arguments)},le)},count:function(H){var ne=0;return U(H,function(){ne++}),ne},toArray:function(H){return U(H,function(ne){return ne})||[]},only:function(H){if(!x(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},yt.Component=M,yt.Fragment=t,yt.Profiler=s,yt.PureComponent=Y,yt.StrictMode=i,yt.Suspense=p,yt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,yt.__COMPILER_RUNTIME={__proto__:null,c:function(H){return oe.H.useMemoCache(H)}},yt.cache=function(H){return function(){return H.apply(null,arguments)}},yt.cloneElement=function(H,ne,le){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var se=I({},H.props),he=H.key,ue=void 0;if(ne!=null)for(ye in ne.ref!==void 0&&(ue=void 0),ne.key!==void 0&&(he=""+ne.key),ne)!W.call(ne,ye)||ye==="key"||ye==="__self"||ye==="__source"||ye==="ref"&&ne.ref===void 0||(se[ye]=ne[ye]);var ye=arguments.length-2;if(ye===1)se.children=le;else if(1<ye){for(var Fe=Array(ye),ke=0;ke<ye;ke++)Fe[ke]=arguments[ke+2];se.children=Fe}return q(H.type,he,void 0,void 0,ue,se)},yt.createContext=function(H){return H={$$typeof:c,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:l,_context:H},H},yt.createElement=function(H,ne,le){var se,he={},ue=null;if(ne!=null)for(se in ne.key!==void 0&&(ue=""+ne.key),ne)W.call(ne,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(he[se]=ne[se]);var ye=arguments.length-2;if(ye===1)he.children=le;else if(1<ye){for(var Fe=Array(ye),ke=0;ke<ye;ke++)Fe[ke]=arguments[ke+2];he.children=Fe}if(H&&H.defaultProps)for(se in ye=H.defaultProps,ye)he[se]===void 0&&(he[se]=ye[se]);return q(H,ue,void 0,void 0,null,he)},yt.createRef=function(){return{current:null}},yt.forwardRef=function(H){return{$$typeof:f,render:H}},yt.isValidElement=x,yt.lazy=function(H){return{$$typeof:_,_payload:{_status:-1,_result:H},_init:F}},yt.memo=function(H,ne){return{$$typeof:m,type:H,compare:ne===void 0?null:ne}},yt.startTransition=function(H){var ne=oe.T,le={};oe.T=le;try{var se=H(),he=oe.S;he!==null&&he(le,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ee,X)}catch(ue){X(ue)}finally{oe.T=ne}},yt.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},yt.use=function(H){return oe.H.use(H)},yt.useActionState=function(H,ne,le){return oe.H.useActionState(H,ne,le)},yt.useCallback=function(H,ne){return oe.H.useCallback(H,ne)},yt.useContext=function(H){return oe.H.useContext(H)},yt.useDebugValue=function(){},yt.useDeferredValue=function(H,ne){return oe.H.useDeferredValue(H,ne)},yt.useEffect=function(H,ne,le){var se=oe.H;if(typeof le=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(H,ne)},yt.useId=function(){return oe.H.useId()},yt.useImperativeHandle=function(H,ne,le){return oe.H.useImperativeHandle(H,ne,le)},yt.useInsertionEffect=function(H,ne){return oe.H.useInsertionEffect(H,ne)},yt.useLayoutEffect=function(H,ne){return oe.H.useLayoutEffect(H,ne)},yt.useMemo=function(H,ne){return oe.H.useMemo(H,ne)},yt.useOptimistic=function(H,ne){return oe.H.useOptimistic(H,ne)},yt.useReducer=function(H,ne,le){return oe.H.useReducer(H,ne,le)},yt.useRef=function(H){return oe.H.useRef(H)},yt.useState=function(H){return oe.H.useState(H)},yt.useSyncExternalStore=function(H,ne,le){return oe.H.useSyncExternalStore(H,ne,le)},yt.useTransition=function(){return oe.H.useTransition()},yt.version="19.1.0",yt}var OE;function uv(){return OE||(OE=1,Hg.exports=KC()),Hg.exports}var te=uv();const Kt=zh(te);var qg={exports:{}},sh={},Gg={exports:{}},Zg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PE;function $C(){return PE||(PE=1,function(n){function e(U,F){var X=U.length;U.push(F);e:for(;0<X;){var ee=X-1>>>1,H=U[ee];if(0<s(H,F))U[ee]=F,U[X]=H,X=ee;else break e}}function t(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var F=U[0],X=U.pop();if(X!==F){U[0]=X;e:for(var ee=0,H=U.length,ne=H>>>1;ee<ne;){var le=2*(ee+1)-1,se=U[le],he=le+1,ue=U[he];if(0>s(se,X))he<H&&0>s(ue,se)?(U[ee]=ue,U[he]=X,ee=he):(U[ee]=se,U[le]=X,ee=le);else if(he<H&&0>s(ue,X))U[ee]=ue,U[he]=X,ee=he;else break e}}return F}function s(U,F){var X=U.sortIndex-F.sortIndex;return X!==0?X:U.id-F.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],m=[],_=1,E=null,b=3,C=!1,I=!1,O=!1,M=!1,z=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;function J(U){for(var F=t(m);F!==null;){if(F.callback===null)i(m);else if(F.startTime<=U)i(m),F.sortIndex=F.expirationTime,e(p,F);else break;F=t(m)}}function oe(U){if(O=!1,J(U),!I)if(t(p)!==null)I=!0,W||(W=!0,B());else{var F=t(m);F!==null&&ae(oe,F.startTime-U)}}var W=!1,q=-1,S=5,x=-1;function N(){return M?!0:!(n.unstable_now()-x<S)}function j(){if(M=!1,W){var U=n.unstable_now();x=U;var F=!0;try{e:{I=!1,O&&(O=!1,Y(q),q=-1),C=!0;var X=b;try{t:{for(J(U),E=t(p);E!==null&&!(E.expirationTime>U&&N());){var ee=E.callback;if(typeof ee=="function"){E.callback=null,b=E.priorityLevel;var H=ee(E.expirationTime<=U);if(U=n.unstable_now(),typeof H=="function"){E.callback=H,J(U),F=!0;break t}E===t(p)&&i(p),J(U)}else i(p);E=t(p)}if(E!==null)F=!0;else{var ne=t(m);ne!==null&&ae(oe,ne.startTime-U),F=!1}}break e}finally{E=null,b=X,C=!1}F=void 0}}finally{F?B():W=!1}}}var B;if(typeof K=="function")B=function(){K(j)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Q=D.port2;D.port1.onmessage=j,B=function(){Q.postMessage(null)}}else B=function(){z(j,0)};function ae(U,F){q=z(function(){U(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(U){switch(b){case 1:case 2:case 3:var F=3;break;default:F=b}var X=b;b=F;try{return U()}finally{b=X}},n.unstable_requestPaint=function(){M=!0},n.unstable_runWithPriority=function(U,F){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var X=b;b=U;try{return F()}finally{b=X}},n.unstable_scheduleCallback=function(U,F,X){var ee=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,U){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=X+H,U={id:_++,callback:F,priorityLevel:U,startTime:X,expirationTime:H,sortIndex:-1},X>ee?(U.sortIndex=X,e(m,U),t(p)===null&&U===t(m)&&(O?(Y(q),q=-1):O=!0,ae(oe,X-ee))):(U.sortIndex=H,e(p,U),I||C||(I=!0,W||(W=!0,B()))),U},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(U){var F=b;return function(){var X=b;b=F;try{return U.apply(this,arguments)}finally{b=X}}}}(Zg)),Zg}var ME;function YC(){return ME||(ME=1,Gg.exports=$C()),Gg.exports}var Kg={exports:{}},Ci={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function QC(){if(DE)return Ci;DE=1;var n=uv();function e(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,m,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:m,implementation:_}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Ci.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Ci.createPortal=function(p,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(p,m,null,_)},Ci.flushSync=function(p){var m=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=m,i.p=_,i.d.f()}},Ci.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(p,m))},Ci.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Ci.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var _=m.as,E=f(_,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,C=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:b,fetchPriority:C}):_==="script"&&i.d.X(p,{crossOrigin:E,integrity:b,fetchPriority:C,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Ci.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=f(m.as,m.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(p)},Ci.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,E=f(_,m.crossOrigin);i.d.L(p,_,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Ci.preloadModule=function(p,m){if(typeof p=="string")if(m){var _=f(m.as,m.crossOrigin);i.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(p)},Ci.requestFormReset=function(p){i.d.r(p)},Ci.unstable_batchedUpdates=function(p,m){return p(m)},Ci.useFormState=function(p,m,_){return c.H.useFormState(p,m,_)},Ci.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ci.version="19.1.0",Ci}var LE;function uT(){if(LE)return Kg.exports;LE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Kg.exports=QC(),Kg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jE;function WC(){if(jE)return sh;jE=1;var n=YC(),e=uv(),t=uT();function i(r){var a="https://react.dev/errors/"+r;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function c(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function f(r){if(l(r)!==r)throw Error(i(188))}function p(r){var a=r.alternate;if(!a){if(a=l(r),a===null)throw Error(i(188));return a!==r?null:r}for(var u=r,d=a;;){var y=u.return;if(y===null)break;var w=y.alternate;if(w===null){if(d=y.return,d!==null){u=d;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===u)return f(y),r;if(w===d)return f(y),a;w=w.sibling}throw Error(i(188))}if(u.return!==d.return)u=y,d=w;else{for(var V=!1,Z=y.child;Z;){if(Z===u){V=!0,u=y,d=w;break}if(Z===d){V=!0,d=y,u=w;break}Z=Z.sibling}if(!V){for(Z=w.child;Z;){if(Z===u){V=!0,u=w,d=y;break}if(Z===d){V=!0,d=w,u=y;break}Z=Z.sibling}if(!V)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:a}function m(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r;for(r=r.child;r!==null;){if(a=m(r),a!==null)return a;r=r.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),Y=Symbol.for("react.consumer"),K=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),oe=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=j&&r[j]||r["@@iterator"],typeof r=="function"?r:null)}var D=Symbol.for("react.client.reference");function Q(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===D?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case I:return"Fragment";case M:return"Profiler";case O:return"StrictMode";case oe:return"Suspense";case W:return"SuspenseList";case x:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case C:return"Portal";case K:return(r.displayName||"Context")+".Provider";case Y:return(r._context.displayName||"Context")+".Consumer";case J:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case q:return a=r.displayName||null,a!==null?a:Q(r.type)||"Memo";case S:a=r._payload,r=r._init;try{return Q(r(a))}catch{}}return null}var ae=Array.isArray,U=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},ee=[],H=-1;function ne(r){return{current:r}}function le(r){0>H||(r.current=ee[H],ee[H]=null,H--)}function se(r,a){H++,ee[H]=r.current,r.current=a}var he=ne(null),ue=ne(null),ye=ne(null),Fe=ne(null);function ke(r,a){switch(se(ye,a),se(ue,r),se(he,null),a.nodeType){case 9:case 11:r=(r=a.documentElement)&&(r=r.namespaceURI)?iE(r):0;break;default:if(r=a.tagName,a=a.namespaceURI)a=iE(a),r=rE(a,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}le(he),se(he,r)}function De(){le(he),le(ue),le(ye)}function qe(r){r.memoizedState!==null&&se(Fe,r);var a=he.current,u=rE(a,r.type);a!==u&&(se(ue,r),se(he,u))}function je(r){ue.current===r&&(le(he),le(ue)),Fe.current===r&&(le(Fe),Jc._currentValue=X)}var Ze=Object.prototype.hasOwnProperty,Et=n.unstable_scheduleCallback,be=n.unstable_cancelCallback,Ne=n.unstable_shouldYield,Oe=n.unstable_requestPaint,Le=n.unstable_now,Me=n.unstable_getCurrentPriorityLevel,Qe=n.unstable_ImmediatePriority,it=n.unstable_UserBlockingPriority,_t=n.unstable_NormalPriority,Vt=n.unstable_LowPriority,kt=n.unstable_IdlePriority,rt=n.log,Ht=n.unstable_setDisableYieldValue,Je=null,tt=null;function mt(r){if(typeof rt=="function"&&Ht(r),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(Je,r)}catch{}}var qt=Math.clz32?Math.clz32:Ut,on=Math.log,mn=Math.LN2;function Ut(r){return r>>>=0,r===0?32:31-(on(r)/mn|0)|0}var ln=256,gn=4194304;function Sn(r){var a=r&42;if(a!==0)return a;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Lr(r,a,u){var d=r.pendingLanes;if(d===0)return 0;var y=0,w=r.suspendedLanes,V=r.pingedLanes;r=r.warmLanes;var Z=d&134217727;return Z!==0?(d=Z&~w,d!==0?y=Sn(d):(V&=Z,V!==0?y=Sn(V):u||(u=Z&~r,u!==0&&(y=Sn(u))))):(Z=d&~w,Z!==0?y=Sn(Z):V!==0?y=Sn(V):u||(u=d&~r,u!==0&&(y=Sn(u)))),y===0?0:a!==0&&a!==y&&(a&w)===0&&(w=y&-y,u=a&-a,w>=u||w===32&&(u&4194048)!==0)?a:y}function Li(r,a){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&a)===0}function is(r,a){switch(r){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Is(){var r=ln;return ln<<=1,(ln&4194048)===0&&(ln=256),r}function Ki(){var r=gn;return gn<<=1,(gn&62914560)===0&&(gn=4194304),r}function $i(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function Mn(r,a){r.pendingLanes|=a,a!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function yi(r,a,u,d,y,w){var V=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var Z=r.entanglements,re=r.expirationTimes,ge=r.hiddenUpdates;for(u=V&~u;0<u;){var Ae=31-qt(u),Ce=1<<Ae;Z[Ae]=0,re[Ae]=-1;var _e=ge[Ae];if(_e!==null)for(ge[Ae]=null,Ae=0;Ae<_e.length;Ae++){var ve=_e[Ae];ve!==null&&(ve.lane&=-536870913)}u&=~Ce}d!==0&&Kn(r,d,0),w!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=w&~(V&~a))}function Kn(r,a,u){r.pendingLanes|=a,r.suspendedLanes&=~a;var d=31-qt(a);r.entangledLanes|=a,r.entanglements[d]=r.entanglements[d]|1073741824|u&4194090}function cr(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var d=31-qt(u),y=1<<d;y&a|r[d]&a&&(r[d]|=a),u&=~y}}function hr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ei(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Jn(){var r=F.p;return r!==0?r:(r=window.event,r===void 0?32:TE(r.type))}function Ha(r,a){var u=F.p;try{return F.p=r,a()}finally{F.p=u}}var un=Math.random().toString(36).slice(2),Dn="__reactFiber$"+un,xn="__reactProps$"+un,Yi="__reactContainer$"+un,bi="__reactEvents$"+un,Ke="__reactListeners$"+un,rs="__reactHandles$"+un,al="__reactResources$"+un,ks="__reactMarker$"+un;function ss(r){delete r[Dn],delete r[xn],delete r[bi],delete r[Ke],delete r[rs]}function dr(r){var a=r[Dn];if(a)return a;for(var u=r.parentNode;u;){if(a=u[Yi]||u[Dn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=lE(r);r!==null;){if(u=r[Dn])return u;r=lE(r)}return a}r=u,u=r.parentNode}return null}function fr(r){if(r=r[Dn]||r[Yi]){var a=r.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return r}return null}function ui(r){var a=r.tag;if(a===5||a===26||a===27||a===6)return r.stateNode;throw Error(i(33))}function ei(r){var a=r[al];return a||(a=r[al]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function bn(r){r[ks]=!0}var ol=new Set,qa={};function pr(r,a){jr(r,a),jr(r+"Capture",a)}function jr(r,a){for(qa[r]=a,r=0;r<a.length;r++)ol.add(a[r])}var nu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sa={},aa={};function iu(r){return Ze.call(aa,r)?!0:Ze.call(sa,r)?!1:nu.test(r)?aa[r]=!0:(sa[r]=!0,!1)}function Ns(r,a,u){if(iu(a))if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(a);return;case"boolean":var d=a.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){r.removeAttribute(a);return}}r.setAttribute(a,""+u)}}function Vr(r,a,u){if(u===null)r.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttribute(a,""+u)}}function $n(r,a,u,d){if(d===null)r.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(a,u,""+d)}}var as,Os;function Ur(r){if(as===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);as=a&&a[1]||"",Os=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+as+r+Os}var oa=!1;function Br(r,a){if(!r||oa)return"";oa=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(a){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ve){var _e=ve}Reflect.construct(r,[],Ce)}else{try{Ce.call()}catch(ve){_e=ve}r.call(Ce.prototype)}}else{try{throw Error()}catch(ve){_e=ve}(Ce=r())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ve){if(ve&&_e&&typeof ve.stack=="string")return[ve.stack,_e.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),V=w[0],Z=w[1];if(V&&Z){var re=V.split(`
`),ge=Z.split(`
`);for(y=d=0;d<re.length&&!re[d].includes("DetermineComponentFrameRoot");)d++;for(;y<ge.length&&!ge[y].includes("DetermineComponentFrameRoot");)y++;if(d===re.length||y===ge.length)for(d=re.length-1,y=ge.length-1;1<=d&&0<=y&&re[d]!==ge[y];)y--;for(;1<=d&&0<=y;d--,y--)if(re[d]!==ge[y]){if(d!==1||y!==1)do if(d--,y--,0>y||re[d]!==ge[y]){var Ae=`
`+re[d].replace(" at new "," at ");return r.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",r.displayName)),Ae}while(1<=d&&0<=y);break}}}finally{oa=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Ur(u):""}function At(r){switch(r.tag){case 26:case 27:case 5:return Ur(r.type);case 16:return Ur("Lazy");case 13:return Ur("Suspense");case 19:return Ur("SuspenseList");case 0:case 15:return Br(r.type,!1);case 11:return Br(r.type.render,!1);case 1:return Br(r.type,!0);case 31:return Ur("Activity");default:return""}}function Gt(r){try{var a="";do a+=At(r),r=r.return;while(r);return a}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function Bn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Fr(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Ps(r){var a=Fr(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),d=""+r[a];if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var y=u.get,w=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return y.call(this)},set:function(V){d=""+V,w.call(this,V)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(V){d=""+V},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function Ms(r){r._valueTracker||(r._valueTracker=Ps(r))}function ht(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),d="";return r&&(d=Fr(r)?r.checked?"true":"false":r.value),r=d,r!==u?(a.setValue(r),!0):!1}function Yt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var ll=/[\n"\\]/g;function _n(r){return r.replace(ll,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function cn(r,a,u,d,y,w,V,Z){r.name="",V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"?r.type=V:r.removeAttribute("type"),a!=null?V==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+Bn(a)):r.value!==""+Bn(a)&&(r.value=""+Bn(a)):V!=="submit"&&V!=="reset"||r.removeAttribute("value"),a!=null?mr(r,V,Bn(a)):u!=null?mr(r,V,Bn(u)):d!=null&&r.removeAttribute("value"),y==null&&w!=null&&(r.defaultChecked=!!w),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?r.name=""+Bn(Z):r.removeAttribute("name")}function la(r,a,u,d,y,w,V,Z){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.type=w),a!=null||u!=null){if(!(w!=="submit"&&w!=="reset"||a!=null))return;u=u!=null?""+Bn(u):"",a=a!=null?""+Bn(a):u,Z||a===r.value||(r.value=a),r.defaultValue=a}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,r.checked=Z?r.checked:!!d,r.defaultChecked=!!d,V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(r.name=V)}function mr(r,a,u){a==="number"&&Yt(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function ci(r,a,u,d){if(r=r.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<r.length;u++)y=a.hasOwnProperty("$"+r[u].value),r[u].selected!==y&&(r[u].selected=y),y&&d&&(r[u].defaultSelected=!0)}else{for(u=""+Bn(u),a=null,y=0;y<r.length;y++){if(r[y].value===u){r[y].selected=!0,d&&(r[y].defaultSelected=!0);return}a!==null||r[y].disabled||(a=r[y])}a!==null&&(a.selected=!0)}}function at(r,a,u){if(a!=null&&(a=""+Bn(a),a!==r.value&&(r.value=a),u==null)){r.defaultValue!==a&&(r.defaultValue=a);return}r.defaultValue=u!=null?""+Bn(u):""}function ji(r,a,u,d){if(a==null){if(d!=null){if(u!=null)throw Error(i(92));if(ae(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),a=u}u=Bn(a),r.defaultValue=u,d=r.textContent,d===u&&d!==""&&d!==null&&(r.value=d)}function ti(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var gr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ga(r,a,u){var d=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?r.setProperty(a,""):a==="float"?r.cssFloat="":r[a]="":d?r.setProperty(a,u):typeof u!="number"||u===0||gr.has(a)?a==="float"?r.cssFloat=u:r[a]=(""+u).trim():r[a]=u+"px"}function os(r,a,u){if(a!=null&&typeof a!="object")throw Error(i(62));if(r=r.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||a!=null&&a.hasOwnProperty(d)||(d.indexOf("--")===0?r.setProperty(d,""):d==="float"?r.cssFloat="":r[d]="");for(var y in a)d=a[y],a.hasOwnProperty(y)&&u[y]!==d&&Ga(r,y,d)}else for(var w in a)a.hasOwnProperty(w)&&Ga(r,w,a[w])}function ua(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ul=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Za=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ds(r){return Za.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var _r=null;function hi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var zr=null,vr=null;function cl(r){var a=fr(r);if(a&&(r=a.stateNode)){var u=r[xn]||null;e:switch(r=a.stateNode,a.type){case"input":if(cn(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+_n(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var d=u[a];if(d!==r&&d.form===r.form){var y=d[xn]||null;if(!y)throw Error(i(90));cn(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<u.length;a++)d=u[a],d.form===r.form&&ht(d)}break e;case"textarea":at(r,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&ci(r,!!u.multiple,a,!1)}}}var et=!1;function Vi(r,a,u){if(et)return r(a,u);et=!0;try{var d=r(a);return d}finally{if(et=!1,(zr!==null||vr!==null)&&(Kd(),zr&&(a=zr,r=vr,vr=zr=null,cl(a),r)))for(a=0;a<r.length;a++)cl(r[a])}}function Dt(r,a){var u=r.stateNode;if(u===null)return null;var d=u[xn]||null;if(d===null)return null;u=d[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,a,typeof u));return u}var Qi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wi=!1;if(Qi)try{var ls={};Object.defineProperty(ls,"passive",{get:function(){wi=!0}}),window.addEventListener("test",ls,ls),window.removeEventListener("test",ls,ls)}catch{wi=!1}var Wi=null,Ti=null,yr=null;function us(){if(yr)return yr;var r,a=Ti,u=a.length,d,y="value"in Wi?Wi.value:Wi.textContent,w=y.length;for(r=0;r<u&&a[r]===y[r];r++);var V=u-r;for(d=1;d<=V&&a[u-d]===y[w-d];d++);return yr=y.slice(r,1<d?1-d:void 0)}function en(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function ni(){return!0}function Ka(){return!1}function Ln(r){function a(u,d,y,w,V){this._reactName=u,this._targetInst=y,this.type=d,this.nativeEvent=w,this.target=V,this.currentTarget=null;for(var Z in r)r.hasOwnProperty(Z)&&(u=r[Z],this[Z]=u?u(w):w[Z]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?ni:Ka,this.isPropagationStopped=Ka,this}return _(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),a}var Bt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Ln(Bt),cs=_({},Bt,{view:0,detail:0}),ru=Ln(cs),ha,vt,Hr,Yn=_({},cs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Hr&&(Hr&&r.type==="mousemove"?(ha=r.screenX-Hr.screenX,vt=r.screenY-Hr.screenY):vt=ha=0,Hr=r),ha)},movementY:function(r){return"movementY"in r?r.movementY:vt}}),ii=Ln(Yn),hl=_({},Yn,{dataTransfer:0}),gc=Ln(hl),hs=_({},cs,{relatedTarget:0}),$a=Ln(hs),Ya=_({},Bt,{animationName:0,elapsedTime:0,pseudoElement:0}),Qa=Ln(Ya),su=_({},Bt,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Ls=Ln(su),_c=_({},Bt,{data:0}),Ai=Ln(_c),da={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wa(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=Er[r])?!!a[r]:!1}function js(){return Wa}var Xa=_({},cs,{key:function(r){if(r.key){var a=da[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=en(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?dl[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(r){return r.type==="keypress"?en(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?en(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Ja=Ln(Xa),fl=_({},Yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),eo=Ln(fl),ds=_({},cs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),au=Ln(ds),to=_({},Bt,{propertyName:0,elapsedTime:0,pseudoElement:0}),ou=Ln(to),pl=_({},Yn,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),fa=Ln(pl),Fn=_({},Bt,{newState:0,oldState:0}),qr=Ln(Fn),lu=[9,13,27,32],Si=Qi&&"CompositionEvent"in window,g=null;Qi&&"documentMode"in document&&(g=document.documentMode);var R=Qi&&"TextEvent"in window&&!g,P=Qi&&(!Si||g&&8<g&&11>=g),$=" ",fe=!1;function we(r,a){switch(r){case"keyup":return lu.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pe(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Nt=!1;function Cn(r,a){switch(r){case"compositionend":return Pe(a);case"keypress":return a.which!==32?null:(fe=!0,$);case"textInput":return r=a.data,r===$&&fe?null:r;default:return null}}function Ot(r,a){if(Nt)return r==="compositionend"||!Si&&we(r,a)?(r=us(),yr=Ti=Wi=null,Nt=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return P&&a.locale!=="ko"?null:a.data;default:return null}}var Zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hn(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Zt[r.type]:a==="textarea"}function fs(r,a,u,d){zr?vr?vr.push(d):vr=[d]:zr=d,a=Jd(a,"onChange"),0<a.length&&(u=new ca("onChange","change",null,u,d),r.push({event:u,listeners:a}))}var sn=null,Gr=null;function Zr(r){X1(r,0)}function uu(r){var a=ui(r);if(ht(a))return r}function no(r,a){if(r==="change")return a}var vc=!1;if(Qi){var io;if(Qi){var yc="oninput"in document;if(!yc){var ps=document.createElement("div");ps.setAttribute("oninput","return;"),yc=typeof ps.oninput=="function"}io=yc}else io=!1;vc=io&&(!document.documentMode||9<document.documentMode)}function ml(){sn&&(sn.detachEvent("onpropertychange",dd),Gr=sn=null)}function dd(r){if(r.propertyName==="value"&&uu(Gr)){var a=[];fs(a,Gr,r,hi(r)),Vi(Zr,a)}}function Ec(r,a,u){r==="focusin"?(ml(),sn=a,Gr=u,sn.attachEvent("onpropertychange",dd)):r==="focusout"&&ml()}function dm(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return uu(Gr)}function ms(r,a){if(r==="click")return uu(a)}function fm(r,a){if(r==="input"||r==="change")return uu(a)}function ro(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Ui=typeof Object.is=="function"?Object.is:ro;function Bi(r,a){if(Ui(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),d=Object.keys(a);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var y=u[d];if(!Ze.call(a,y)||!Ui(r[y],a[y]))return!1}return!0}function gl(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function bc(r,a){var u=gl(r);r=0;for(var d;u;){if(u.nodeType===3){if(d=r+u.textContent.length,r<=a&&d>=a)return{node:u,offset:a-r};r=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=gl(u)}}function cu(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?cu(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function _l(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var a=Yt(r.document);a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=Yt(r.document)}return a}function vl(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}var hu=Qi&&"documentMode"in document&&11>=document.documentMode,br=null,so=null,pa=null,du=!1;function fd(r,a,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;du||br==null||br!==Yt(d)||(d=br,"selectionStart"in d&&vl(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),pa&&Bi(pa,d)||(pa=d,d=Jd(so,"onSelect"),0<d.length&&(a=new ca("onSelect","select",null,a,u),r.push({event:a,listeners:d}),a.target=br)))}function Kr(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var ao={animationend:Kr("Animation","AnimationEnd"),animationiteration:Kr("Animation","AnimationIteration"),animationstart:Kr("Animation","AnimationStart"),transitionrun:Kr("Transition","TransitionRun"),transitionstart:Kr("Transition","TransitionStart"),transitioncancel:Kr("Transition","TransitionCancel"),transitionend:Kr("Transition","TransitionEnd")},fu={},pd={};Qi&&(pd=document.createElement("div").style,"AnimationEvent"in window||(delete ao.animationend.animation,delete ao.animationiteration.animation,delete ao.animationstart.animation),"TransitionEvent"in window||delete ao.transitionend.transition);function Vs(r){if(fu[r])return fu[r];if(!ao[r])return r;var a=ao[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in pd)return fu[r]=a[u];return r}var md=Vs("animationend"),wr=Vs("animationiteration"),yl=Vs("animationstart"),pm=Vs("transitionrun"),pu=Vs("transitionstart"),mm=Vs("transitioncancel"),wc=Vs("transitionend"),gd=new Map,ma="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ma.push("scrollEnd");function Tr(r,a){gd.set(r,a),pr(a,[r])}var ga=new WeakMap;function Fi(r,a){if(typeof r=="object"&&r!==null){var u=ga.get(r);return u!==void 0?u:(a={value:r,source:a,stack:Gt(a)},ga.set(r,a),a)}return{value:r,source:a,stack:Gt(a)}}var zi=[],oo=0,Ar=0;function El(){for(var r=oo,a=Ar=oo=0;a<r;){var u=zi[a];zi[a++]=null;var d=zi[a];zi[a++]=null;var y=zi[a];zi[a++]=null;var w=zi[a];if(zi[a++]=null,d!==null&&y!==null){var V=d.pending;V===null?y.next=y:(y.next=V.next,V.next=y),d.pending=y}w!==0&&wl(u,y,w)}}function bl(r,a,u,d){zi[oo++]=r,zi[oo++]=a,zi[oo++]=u,zi[oo++]=d,Ar|=d,r.lanes|=d,r=r.alternate,r!==null&&(r.lanes|=d)}function _a(r,a,u,d){return bl(r,a,u,d),Us(r)}function lo(r,a){return bl(r,null,null,a),Us(r)}function wl(r,a,u){r.lanes|=u;var d=r.alternate;d!==null&&(d.lanes|=u);for(var y=!1,w=r.return;w!==null;)w.childLanes|=u,d=w.alternate,d!==null&&(d.childLanes|=u),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(y=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,y&&a!==null&&(y=31-qt(u),r=w.hiddenUpdates,d=r[y],d===null?r[y]=[a]:d.push(a),a.lane=u|536870912),w):null}function Us(r){if(50<Gc)throw Gc=0,dg=null,Error(i(185));for(var a=r.return;a!==null;)r=a,a=r.return;return r.tag===3?r.stateNode:null}var va={};function _d(r,a,u,d){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(r,a,u,d){return new _d(r,a,u,d)}function mu(r){return r=r.prototype,!(!r||!r.isReactComponent)}function $r(r,a){var u=r.alternate;return u===null?(u=Hi(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function Tc(r,a){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=a,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,a=u.dependencies,r.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),r}function Tl(r,a,u,d,y,w){var V=0;if(d=r,typeof r=="function")mu(r)&&(V=1);else if(typeof r=="string")V=OC(r,u,he.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case x:return r=Hi(31,u,a,y),r.elementType=x,r.lanes=w,r;case I:return Bs(u.children,y,w,a);case O:V=8,y|=24;break;case M:return r=Hi(12,u,a,y|2),r.elementType=M,r.lanes=w,r;case oe:return r=Hi(13,u,a,y),r.elementType=oe,r.lanes=w,r;case W:return r=Hi(19,u,a,y),r.elementType=W,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:case K:V=10;break e;case Y:V=9;break e;case J:V=11;break e;case q:V=14;break e;case S:V=16,d=null;break e}V=29,u=Error(i(130,r===null?"null":typeof r,"")),d=null}return a=Hi(V,u,a,y),a.elementType=r,a.type=d,a.lanes=w,a}function Bs(r,a,u,d){return r=Hi(7,r,d,a),r.lanes=u,r}function Ac(r,a,u){return r=Hi(6,r,null,a),r.lanes=u,r}function gu(r,a,u){return a=Hi(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}var ya=[],uo=0,o=null,h=0,v=[],A=0,k=null,G=1,ie="";function pe(r,a){ya[uo++]=h,ya[uo++]=o,o=r,h=a}function Ee(r,a,u){v[A++]=G,v[A++]=ie,v[A++]=k,k=r;var d=G;r=ie;var y=32-qt(d)-1;d&=~(1<<y),u+=1;var w=32-qt(a)+y;if(30<w){var V=y-y%5;w=(d&(1<<V)-1).toString(32),d>>=V,y-=V,G=1<<32-qt(a)+y|u<<y|d,ie=w+r}else G=1<<w|u<<y|d,ie=r}function Ie(r){r.return!==null&&(pe(r,1),Ee(r,1,0))}function Ue(r){for(;r===o;)o=ya[--uo],ya[uo]=null,h=ya[--uo],ya[uo]=null;for(;r===k;)k=v[--A],v[A]=null,ie=v[--A],v[A]=null,G=v[--A],v[A]=null}var ze=null,Ge=null,ct=!1,dn=null,wn=!1,ri=Error(i(519));function Xi(r){var a=Error(i(418,""));throw ho(Fi(a,r)),ri}function vd(r){var a=r.stateNode,u=r.type,d=r.memoizedProps;switch(a[Dn]=r,a[xn]=d,u){case"dialog":Rt("cancel",a),Rt("close",a);break;case"iframe":case"object":case"embed":Rt("load",a);break;case"video":case"audio":for(u=0;u<Kc.length;u++)Rt(Kc[u],a);break;case"source":Rt("error",a);break;case"img":case"image":case"link":Rt("error",a),Rt("load",a);break;case"details":Rt("toggle",a);break;case"input":Rt("invalid",a),la(a,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Ms(a);break;case"select":Rt("invalid",a);break;case"textarea":Rt("invalid",a),ji(a,d.value,d.defaultValue,d.children),Ms(a)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||d.suppressHydrationWarning===!0||nE(a.textContent,u)?(d.popover!=null&&(Rt("beforetoggle",a),Rt("toggle",a)),d.onScroll!=null&&Rt("scroll",a),d.onScrollEnd!=null&&Rt("scrollend",a),d.onClick!=null&&(a.onclick=ef),a=!0):a=!1,a||Xi(r)}function yd(r){for(ze=r.return;ze;)switch(ze.tag){case 5:case 13:wn=!1;return;case 27:case 3:wn=!0;return;default:ze=ze.return}}function Al(r){if(r!==ze)return!1;if(!ct)return yd(r),ct=!0,!1;var a=r.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Rg(r.type,r.memoizedProps)),u=!u),u&&Ge&&Xi(r),yd(r),a===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8)if(u=r.data,u==="/$"){if(a===0){Ge=ys(r.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++;r=r.nextSibling}Ge=null}}else a===27?(a=Ge,Co(r.type)?(r=Og,Og=null,Ge=r):Ge=a):Ge=ze?ys(r.stateNode.nextSibling):null;return!0}function co(){Ge=ze=null,ct=!1}function Ed(){var r=dn;return r!==null&&(tr===null?tr=r:tr.push.apply(tr,r),dn=null),r}function ho(r){dn===null?dn=[r]:dn.push(r)}var vn=ne(null),Yr=null,gs=null;function Fs(r,a,u){se(vn,a._currentValue),a._currentValue=u}function _s(r){r._currentValue=vn.current,le(vn)}function Sl(r,a,u){for(;r!==null;){var d=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,d!==null&&(d.childLanes|=a)):d!==null&&(d.childLanes&a)!==a&&(d.childLanes|=a),r===u)break;r=r.return}}function _u(r,a,u,d){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var w=y.dependencies;if(w!==null){var V=y.child;w=w.firstContext;e:for(;w!==null;){var Z=w;w=y;for(var re=0;re<a.length;re++)if(Z.context===a[re]){w.lanes|=u,Z=w.alternate,Z!==null&&(Z.lanes|=u),Sl(w.return,u,r),d||(V=null);break e}w=Z.next}}else if(y.tag===18){if(V=y.return,V===null)throw Error(i(341));V.lanes|=u,w=V.alternate,w!==null&&(w.lanes|=u),Sl(V,u,r),V=null}else V=y.child;if(V!==null)V.return=y;else for(V=y;V!==null;){if(V===r){V=null;break}if(y=V.sibling,y!==null){y.return=V.return,V=y;break}V=V.return}y=V}}function xl(r,a,u,d){r=null;for(var y=a,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var V=y.alternate;if(V===null)throw Error(i(387));if(V=V.memoizedProps,V!==null){var Z=y.type;Ui(y.pendingProps.value,V.value)||(r!==null?r.push(Z):r=[Z])}}else if(y===Fe.current){if(V=y.alternate,V===null)throw Error(i(387));V.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(Jc):r=[Jc])}y=y.return}r!==null&&_u(a,r,u,d),a.flags|=262144}function bd(r){for(r=r.firstContext;r!==null;){if(!Ui(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Cl(r){Yr=r,gs=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function xi(r){return zy(Yr,r)}function wd(r,a){return Yr===null&&Cl(r),zy(r,a)}function zy(r,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},gs===null){if(r===null)throw Error(i(308));gs=a,r.dependencies={lanes:0,firstContext:a},r.flags|=524288}else gs=gs.next=a;return u}var Nx=typeof AbortController<"u"?AbortController:function(){var r=[],a=this.signal={aborted:!1,addEventListener:function(u,d){r.push(d)}};this.abort=function(){a.aborted=!0,r.forEach(function(u){return u()})}},Ox=n.unstable_scheduleCallback,Px=n.unstable_NormalPriority,Qn={$$typeof:K,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gm(){return{controller:new Nx,data:new Map,refCount:0}}function Sc(r){r.refCount--,r.refCount===0&&Ox(Px,function(){r.controller.abort()})}var xc=null,_m=0,vu=0,yu=null;function Mx(r,a){if(xc===null){var u=xc=[];_m=0,vu=yg(),yu={status:"pending",value:void 0,then:function(d){u.push(d)}}}return _m++,a.then(Hy,Hy),a}function Hy(){if(--_m===0&&xc!==null){yu!==null&&(yu.status="fulfilled");var r=xc;xc=null,vu=0,yu=null;for(var a=0;a<r.length;a++)(0,r[a])()}}function Dx(r,a){var u=[],d={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return r.then(function(){d.status="fulfilled",d.value=a;for(var y=0;y<u.length;y++)(0,u[y])(a)},function(y){for(d.status="rejected",d.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),d}var qy=U.S;U.S=function(r,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&Mx(r,a),qy!==null&&qy(r,a)};var Rl=ne(null);function vm(){var r=Rl.current;return r!==null?r:fn.pooledCache}function Td(r,a){a===null?se(Rl,Rl.current):se(Rl,a.pool)}function Gy(){var r=vm();return r===null?null:{parent:Qn._currentValue,pool:r}}var Cc=Error(i(460)),Zy=Error(i(474)),Ad=Error(i(542)),ym={then:function(){}};function Ky(r){return r=r.status,r==="fulfilled"||r==="rejected"}function Sd(){}function $y(r,a,u){switch(u=r[u],u===void 0?r.push(a):u!==a&&(a.then(Sd,Sd),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Qy(r),r;default:if(typeof a.status=="string")a.then(Sd,Sd);else{if(r=fn,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=a,r.status="pending",r.then(function(d){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=d}},function(d){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=d}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw r=a.reason,Qy(r),r}throw Rc=a,Cc}}var Rc=null;function Yy(){if(Rc===null)throw Error(i(459));var r=Rc;return Rc=null,r}function Qy(r){if(r===Cc||r===Ad)throw Error(i(483))}var fo=!1;function Em(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bm(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function po(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function mo(r,a,u){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(Qt&2)!==0){var y=d.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),d.pending=a,a=Us(r),wl(r,null,u),a}return bl(r,d,a,u),Us(r)}function Ic(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var d=a.lanes;d&=r.pendingLanes,u|=d,a.lanes=u,cr(r,u)}}function wm(r,a){var u=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var y=null,w=null;if(u=u.firstBaseUpdate,u!==null){do{var V={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};w===null?y=w=V:w=w.next=V,u=u.next}while(u!==null);w===null?y=w=a:w=w.next=a}else y=w=a;u={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}var Tm=!1;function kc(){if(Tm){var r=yu;if(r!==null)throw r}}function Nc(r,a,u,d){Tm=!1;var y=r.updateQueue;fo=!1;var w=y.firstBaseUpdate,V=y.lastBaseUpdate,Z=y.shared.pending;if(Z!==null){y.shared.pending=null;var re=Z,ge=re.next;re.next=null,V===null?w=ge:V.next=ge,V=re;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,Z=Ae.lastBaseUpdate,Z!==V&&(Z===null?Ae.firstBaseUpdate=ge:Z.next=ge,Ae.lastBaseUpdate=re))}if(w!==null){var Ce=y.baseState;V=0,Ae=ge=re=null,Z=w;do{var _e=Z.lane&-536870913,ve=_e!==Z.lane;if(ve?(Lt&_e)===_e:(d&_e)===_e){_e!==0&&_e===vu&&(Tm=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:Z.tag,payload:Z.payload,callback:null,next:null});e:{var ut=r,nt=Z;_e=a;var rn=u;switch(nt.tag){case 1:if(ut=nt.payload,typeof ut=="function"){Ce=ut.call(rn,Ce,_e);break e}Ce=ut;break e;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=nt.payload,_e=typeof ut=="function"?ut.call(rn,Ce,_e):ut,_e==null)break e;Ce=_({},Ce,_e);break e;case 2:fo=!0}}_e=Z.callback,_e!==null&&(r.flags|=64,ve&&(r.flags|=8192),ve=y.callbacks,ve===null?y.callbacks=[_e]:ve.push(_e))}else ve={lane:_e,tag:Z.tag,payload:Z.payload,callback:Z.callback,next:null},Ae===null?(ge=Ae=ve,re=Ce):Ae=Ae.next=ve,V|=_e;if(Z=Z.next,Z===null){if(Z=y.shared.pending,Z===null)break;ve=Z,Z=ve.next,ve.next=null,y.lastBaseUpdate=ve,y.shared.pending=null}}while(!0);Ae===null&&(re=Ce),y.baseState=re,y.firstBaseUpdate=ge,y.lastBaseUpdate=Ae,w===null&&(y.shared.lanes=0),To|=V,r.lanes=V,r.memoizedState=Ce}}function Wy(r,a){if(typeof r!="function")throw Error(i(191,r));r.call(a)}function Xy(r,a){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Wy(u[r],a)}var Eu=ne(null),xd=ne(0);function Jy(r,a){r=xa,se(xd,r),se(Eu,a),xa=r|a.baseLanes}function Am(){se(xd,xa),se(Eu,Eu.current)}function Sm(){xa=xd.current,le(Eu),le(xd)}var go=0,wt=null,tn=null,zn=null,Cd=!1,bu=!1,Il=!1,Rd=0,Oc=0,wu=null,Lx=0;function jn(){throw Error(i(321))}function xm(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!Ui(r[u],a[u]))return!1;return!0}function Cm(r,a,u,d,y,w){return go=w,wt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,U.H=r===null||r.memoizedState===null?L0:j0,Il=!1,w=u(d,y),Il=!1,bu&&(w=t0(a,u,d,y)),e0(r),w}function e0(r){U.H=Md;var a=tn!==null&&tn.next!==null;if(go=0,zn=tn=wt=null,Cd=!1,Oc=0,wu=null,a)throw Error(i(300));r===null||si||(r=r.dependencies,r!==null&&bd(r)&&(si=!0))}function t0(r,a,u,d){wt=r;var y=0;do{if(bu&&(wu=null),Oc=0,bu=!1,25<=y)throw Error(i(301));if(y+=1,zn=tn=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}U.H=Hx,w=a(u,d)}while(bu);return w}function jx(){var r=U.H,a=r.useState()[0];return a=typeof a.then=="function"?Pc(a):a,r=r.useState()[0],(tn!==null?tn.memoizedState:null)!==r&&(wt.flags|=1024),a}function Rm(){var r=Rd!==0;return Rd=0,r}function Im(r,a,u){a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~u}function km(r){if(Cd){for(r=r.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Cd=!1}go=0,zn=tn=wt=null,bu=!1,Oc=Rd=0,wu=null}function Ji(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?wt.memoizedState=zn=r:zn=zn.next=r,zn}function Hn(){if(tn===null){var r=wt.alternate;r=r!==null?r.memoizedState:null}else r=tn.next;var a=zn===null?wt.memoizedState:zn.next;if(a!==null)zn=a,tn=r;else{if(r===null)throw wt.alternate===null?Error(i(467)):Error(i(310));tn=r,r={memoizedState:tn.memoizedState,baseState:tn.baseState,baseQueue:tn.baseQueue,queue:tn.queue,next:null},zn===null?wt.memoizedState=zn=r:zn=zn.next=r}return zn}function Nm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pc(r){var a=Oc;return Oc+=1,wu===null&&(wu=[]),r=$y(wu,r,a),a=wt,(zn===null?a.memoizedState:zn.next)===null&&(a=a.alternate,U.H=a===null||a.memoizedState===null?L0:j0),r}function Id(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Pc(r);if(r.$$typeof===K)return xi(r)}throw Error(i(438,String(r)))}function Om(r){var a=null,u=wt.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var d=wt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(a={data:d.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Nm(),wt.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(r),d=0;d<r;d++)u[d]=N;return a.index++,u}function Ea(r,a){return typeof a=="function"?a(r):a}function kd(r){var a=Hn();return Pm(a,tn,r)}function Pm(r,a,u){var d=r.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var y=r.baseQueue,w=d.pending;if(w!==null){if(y!==null){var V=y.next;y.next=w.next,w.next=V}a.baseQueue=y=w,d.pending=null}if(w=r.baseState,y===null)r.memoizedState=w;else{a=y.next;var Z=V=null,re=null,ge=a,Ae=!1;do{var Ce=ge.lane&-536870913;if(Ce!==ge.lane?(Lt&Ce)===Ce:(go&Ce)===Ce){var _e=ge.revertLane;if(_e===0)re!==null&&(re=re.next={lane:0,revertLane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Ce===vu&&(Ae=!0);else if((go&_e)===_e){ge=ge.next,_e===vu&&(Ae=!0);continue}else Ce={lane:0,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(Z=re=Ce,V=w):re=re.next=Ce,wt.lanes|=_e,To|=_e;Ce=ge.action,Il&&u(w,Ce),w=ge.hasEagerState?ge.eagerState:u(w,Ce)}else _e={lane:Ce,revertLane:ge.revertLane,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},re===null?(Z=re=_e,V=w):re=re.next=_e,wt.lanes|=Ce,To|=Ce;ge=ge.next}while(ge!==null&&ge!==a);if(re===null?V=w:re.next=Z,!Ui(w,r.memoizedState)&&(si=!0,Ae&&(u=yu,u!==null)))throw u;r.memoizedState=w,r.baseState=V,r.baseQueue=re,d.lastRenderedState=w}return y===null&&(d.lanes=0),[r.memoizedState,d.dispatch]}function Mm(r){var a=Hn(),u=a.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var d=u.dispatch,y=u.pending,w=a.memoizedState;if(y!==null){u.pending=null;var V=y=y.next;do w=r(w,V.action),V=V.next;while(V!==y);Ui(w,a.memoizedState)||(si=!0),a.memoizedState=w,a.baseQueue===null&&(a.baseState=w),u.lastRenderedState=w}return[w,d]}function n0(r,a,u){var d=wt,y=Hn(),w=ct;if(w){if(u===void 0)throw Error(i(407));u=u()}else u=a();var V=!Ui((tn||y).memoizedState,u);V&&(y.memoizedState=u,si=!0),y=y.queue;var Z=s0.bind(null,d,y,r);if(Mc(2048,8,Z,[r]),y.getSnapshot!==a||V||zn!==null&&zn.memoizedState.tag&1){if(d.flags|=2048,Tu(9,Nd(),r0.bind(null,d,y,u,a),null),fn===null)throw Error(i(349));w||(go&124)!==0||i0(d,a,u)}return u}function i0(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=wt.updateQueue,a===null?(a=Nm(),wt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function r0(r,a,u,d){a.value=u,a.getSnapshot=d,a0(a)&&o0(r)}function s0(r,a,u){return u(function(){a0(a)&&o0(r)})}function a0(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!Ui(r,u)}catch{return!0}}function o0(r){var a=lo(r,2);a!==null&&Ir(a,r,2)}function Dm(r){var a=Ji();if(typeof r=="function"){var u=r;if(r=u(),Il){mt(!0);try{u()}finally{mt(!1)}}}return a.memoizedState=a.baseState=r,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:r},a}function l0(r,a,u,d){return r.baseState=u,Pm(r,tn,typeof d=="function"?d:Ea)}function Vx(r,a,u,d,y){if(Pd(r))throw Error(i(485));if(r=a.action,r!==null){var w={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(V){w.listeners.push(V)}};U.T!==null?u(!0):w.isTransition=!1,d(w),u=a.pending,u===null?(w.next=a.pending=w,u0(a,w)):(w.next=u.next,a.pending=u.next=w)}}function u0(r,a){var u=a.action,d=a.payload,y=r.state;if(a.isTransition){var w=U.T,V={};U.T=V;try{var Z=u(y,d),re=U.S;re!==null&&re(V,Z),c0(r,a,Z)}catch(ge){Lm(r,a,ge)}finally{U.T=w}}else try{w=u(y,d),c0(r,a,w)}catch(ge){Lm(r,a,ge)}}function c0(r,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){h0(r,a,d)},function(d){return Lm(r,a,d)}):h0(r,a,u)}function h0(r,a,u){a.status="fulfilled",a.value=u,d0(a),r.state=u,a=r.pending,a!==null&&(u=a.next,u===a?r.pending=null:(u=u.next,a.next=u,u0(r,u)))}function Lm(r,a,u){var d=r.pending;if(r.pending=null,d!==null){d=d.next;do a.status="rejected",a.reason=u,d0(a),a=a.next;while(a!==d)}r.action=null}function d0(r){r=r.listeners;for(var a=0;a<r.length;a++)(0,r[a])()}function f0(r,a){return a}function p0(r,a){if(ct){var u=fn.formState;if(u!==null){e:{var d=wt;if(ct){if(Ge){t:{for(var y=Ge,w=wn;y.nodeType!==8;){if(!w){y=null;break t}if(y=ys(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Ge=ys(y.nextSibling),d=y.data==="F!";break e}}Xi(d)}d=!1}d&&(a=u[0])}}return u=Ji(),u.memoizedState=u.baseState=a,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f0,lastRenderedState:a},u.queue=d,u=P0.bind(null,wt,d),d.dispatch=u,d=Dm(!1),w=Fm.bind(null,wt,!1,d.queue),d=Ji(),y={state:a,dispatch:null,action:r,pending:null},d.queue=y,u=Vx.bind(null,wt,y,w,u),y.dispatch=u,d.memoizedState=r,[a,u,!1]}function m0(r){var a=Hn();return g0(a,tn,r)}function g0(r,a,u){if(a=Pm(r,a,f0)[0],r=kd(Ea)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var d=Pc(a)}catch(V){throw V===Cc?Ad:V}else d=a;a=Hn();var y=a.queue,w=y.dispatch;return u!==a.memoizedState&&(wt.flags|=2048,Tu(9,Nd(),Ux.bind(null,y,u),null)),[d,w,r]}function Ux(r,a){r.action=a}function _0(r){var a=Hn(),u=tn;if(u!==null)return g0(a,u,r);Hn(),a=a.memoizedState,u=Hn();var d=u.queue.dispatch;return u.memoizedState=r,[a,d,!1]}function Tu(r,a,u,d){return r={tag:r,create:u,deps:d,inst:a,next:null},a=wt.updateQueue,a===null&&(a=Nm(),wt.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=r.next=r:(d=u.next,u.next=r,r.next=d,a.lastEffect=r),r}function Nd(){return{destroy:void 0,resource:void 0}}function v0(){return Hn().memoizedState}function Od(r,a,u,d){var y=Ji();d=d===void 0?null:d,wt.flags|=r,y.memoizedState=Tu(1|a,Nd(),u,d)}function Mc(r,a,u,d){var y=Hn();d=d===void 0?null:d;var w=y.memoizedState.inst;tn!==null&&d!==null&&xm(d,tn.memoizedState.deps)?y.memoizedState=Tu(a,w,u,d):(wt.flags|=r,y.memoizedState=Tu(1|a,w,u,d))}function y0(r,a){Od(8390656,8,r,a)}function E0(r,a){Mc(2048,8,r,a)}function b0(r,a){return Mc(4,2,r,a)}function w0(r,a){return Mc(4,4,r,a)}function T0(r,a){if(typeof a=="function"){r=r();var u=a(r);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function A0(r,a,u){u=u!=null?u.concat([r]):null,Mc(4,4,T0.bind(null,a,r),u)}function jm(){}function S0(r,a){var u=Hn();a=a===void 0?null:a;var d=u.memoizedState;return a!==null&&xm(a,d[1])?d[0]:(u.memoizedState=[r,a],r)}function x0(r,a){var u=Hn();a=a===void 0?null:a;var d=u.memoizedState;if(a!==null&&xm(a,d[1]))return d[0];if(d=r(),Il){mt(!0);try{r()}finally{mt(!1)}}return u.memoizedState=[d,a],d}function Vm(r,a,u){return u===void 0||(go&1073741824)!==0?r.memoizedState=a:(r.memoizedState=u,r=I1(),wt.lanes|=r,To|=r,u)}function C0(r,a,u,d){return Ui(u,a)?u:Eu.current!==null?(r=Vm(r,u,d),Ui(r,a)||(si=!0),r):(go&42)===0?(si=!0,r.memoizedState=u):(r=I1(),wt.lanes|=r,To|=r,a)}function R0(r,a,u,d,y){var w=F.p;F.p=w!==0&&8>w?w:8;var V=U.T,Z={};U.T=Z,Fm(r,!1,a,u);try{var re=y(),ge=U.S;if(ge!==null&&ge(Z,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Ae=Dx(re,d);Dc(r,a,Ae,Rr(r))}else Dc(r,a,d,Rr(r))}catch(Ce){Dc(r,a,{then:function(){},status:"rejected",reason:Ce},Rr())}finally{F.p=w,U.T=V}}function Bx(){}function Um(r,a,u,d){if(r.tag!==5)throw Error(i(476));var y=I0(r).queue;R0(r,y,a,X,u===null?Bx:function(){return k0(r),u(d)})}function I0(r){var a=r.memoizedState;if(a!==null)return a;a={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:X},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ea,lastRenderedState:u},next:null},r.memoizedState=a,r=r.alternate,r!==null&&(r.memoizedState=a),a}function k0(r){var a=I0(r).next.queue;Dc(r,a,{},Rr())}function Bm(){return xi(Jc)}function N0(){return Hn().memoizedState}function O0(){return Hn().memoizedState}function Fx(r){for(var a=r.return;a!==null;){switch(a.tag){case 24:case 3:var u=Rr();r=po(u);var d=mo(a,r,u);d!==null&&(Ir(d,a,u),Ic(d,a,u)),a={cache:gm()},r.payload=a;return}a=a.return}}function zx(r,a,u){var d=Rr();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},Pd(r)?M0(a,u):(u=_a(r,a,u,d),u!==null&&(Ir(u,r,d),D0(u,a,d)))}function P0(r,a,u){var d=Rr();Dc(r,a,u,d)}function Dc(r,a,u,d){var y={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(Pd(r))M0(a,y);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=a.lastRenderedReducer,w!==null))try{var V=a.lastRenderedState,Z=w(V,u);if(y.hasEagerState=!0,y.eagerState=Z,Ui(Z,V))return bl(r,a,y,0),fn===null&&El(),!1}catch{}finally{}if(u=_a(r,a,y,d),u!==null)return Ir(u,r,d),D0(u,a,d),!0}return!1}function Fm(r,a,u,d){if(d={lane:2,revertLane:yg(),action:d,hasEagerState:!1,eagerState:null,next:null},Pd(r)){if(a)throw Error(i(479))}else a=_a(r,u,d,2),a!==null&&Ir(a,r,2)}function Pd(r){var a=r.alternate;return r===wt||a!==null&&a===wt}function M0(r,a){bu=Cd=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function D0(r,a,u){if((u&4194048)!==0){var d=a.lanes;d&=r.pendingLanes,u|=d,a.lanes=u,cr(r,u)}}var Md={readContext:xi,use:Id,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useLayoutEffect:jn,useInsertionEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useSyncExternalStore:jn,useId:jn,useHostTransitionStatus:jn,useFormState:jn,useActionState:jn,useOptimistic:jn,useMemoCache:jn,useCacheRefresh:jn},L0={readContext:xi,use:Id,useCallback:function(r,a){return Ji().memoizedState=[r,a===void 0?null:a],r},useContext:xi,useEffect:y0,useImperativeHandle:function(r,a,u){u=u!=null?u.concat([r]):null,Od(4194308,4,T0.bind(null,a,r),u)},useLayoutEffect:function(r,a){return Od(4194308,4,r,a)},useInsertionEffect:function(r,a){Od(4,2,r,a)},useMemo:function(r,a){var u=Ji();a=a===void 0?null:a;var d=r();if(Il){mt(!0);try{r()}finally{mt(!1)}}return u.memoizedState=[d,a],d},useReducer:function(r,a,u){var d=Ji();if(u!==void 0){var y=u(a);if(Il){mt(!0);try{u(a)}finally{mt(!1)}}}else y=a;return d.memoizedState=d.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},d.queue=r,r=r.dispatch=zx.bind(null,wt,r),[d.memoizedState,r]},useRef:function(r){var a=Ji();return r={current:r},a.memoizedState=r},useState:function(r){r=Dm(r);var a=r.queue,u=P0.bind(null,wt,a);return a.dispatch=u,[r.memoizedState,u]},useDebugValue:jm,useDeferredValue:function(r,a){var u=Ji();return Vm(u,r,a)},useTransition:function(){var r=Dm(!1);return r=R0.bind(null,wt,r.queue,!0,!1),Ji().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,a,u){var d=wt,y=Ji();if(ct){if(u===void 0)throw Error(i(407));u=u()}else{if(u=a(),fn===null)throw Error(i(349));(Lt&124)!==0||i0(d,a,u)}y.memoizedState=u;var w={value:u,getSnapshot:a};return y.queue=w,y0(s0.bind(null,d,w,r),[r]),d.flags|=2048,Tu(9,Nd(),r0.bind(null,d,w,u,a),null),u},useId:function(){var r=Ji(),a=fn.identifierPrefix;if(ct){var u=ie,d=G;u=(d&~(1<<32-qt(d)-1)).toString(32)+u,a="«"+a+"R"+u,u=Rd++,0<u&&(a+="H"+u.toString(32)),a+="»"}else u=Lx++,a="«"+a+"r"+u.toString(32)+"»";return r.memoizedState=a},useHostTransitionStatus:Bm,useFormState:p0,useActionState:p0,useOptimistic:function(r){var a=Ji();a.memoizedState=a.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Fm.bind(null,wt,!0,u),u.dispatch=a,[r,a]},useMemoCache:Om,useCacheRefresh:function(){return Ji().memoizedState=Fx.bind(null,wt)}},j0={readContext:xi,use:Id,useCallback:S0,useContext:xi,useEffect:E0,useImperativeHandle:A0,useInsertionEffect:b0,useLayoutEffect:w0,useMemo:x0,useReducer:kd,useRef:v0,useState:function(){return kd(Ea)},useDebugValue:jm,useDeferredValue:function(r,a){var u=Hn();return C0(u,tn.memoizedState,r,a)},useTransition:function(){var r=kd(Ea)[0],a=Hn().memoizedState;return[typeof r=="boolean"?r:Pc(r),a]},useSyncExternalStore:n0,useId:N0,useHostTransitionStatus:Bm,useFormState:m0,useActionState:m0,useOptimistic:function(r,a){var u=Hn();return l0(u,tn,r,a)},useMemoCache:Om,useCacheRefresh:O0},Hx={readContext:xi,use:Id,useCallback:S0,useContext:xi,useEffect:E0,useImperativeHandle:A0,useInsertionEffect:b0,useLayoutEffect:w0,useMemo:x0,useReducer:Mm,useRef:v0,useState:function(){return Mm(Ea)},useDebugValue:jm,useDeferredValue:function(r,a){var u=Hn();return tn===null?Vm(u,r,a):C0(u,tn.memoizedState,r,a)},useTransition:function(){var r=Mm(Ea)[0],a=Hn().memoizedState;return[typeof r=="boolean"?r:Pc(r),a]},useSyncExternalStore:n0,useId:N0,useHostTransitionStatus:Bm,useFormState:_0,useActionState:_0,useOptimistic:function(r,a){var u=Hn();return tn!==null?l0(u,tn,r,a):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Om,useCacheRefresh:O0},Au=null,Lc=0;function Dd(r){var a=Lc;return Lc+=1,Au===null&&(Au=[]),$y(Au,r,a)}function jc(r,a){a=a.props.ref,r.ref=a!==void 0?a:null}function Ld(r,a){throw a.$$typeof===E?Error(i(525)):(r=Object.prototype.toString.call(a),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r)))}function V0(r){var a=r._init;return a(r._payload)}function U0(r){function a(de,ce){if(r){var me=de.deletions;me===null?(de.deletions=[ce],de.flags|=16):me.push(ce)}}function u(de,ce){if(!r)return null;for(;ce!==null;)a(de,ce),ce=ce.sibling;return null}function d(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function y(de,ce){return de=$r(de,ce),de.index=0,de.sibling=null,de}function w(de,ce,me){return de.index=me,r?(me=de.alternate,me!==null?(me=me.index,me<ce?(de.flags|=67108866,ce):me):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function V(de){return r&&de.alternate===null&&(de.flags|=67108866),de}function Z(de,ce,me,xe){return ce===null||ce.tag!==6?(ce=Ac(me,de.mode,xe),ce.return=de,ce):(ce=y(ce,me),ce.return=de,ce)}function re(de,ce,me,xe){var He=me.type;return He===I?Ae(de,ce,me.props.children,xe,me.key):ce!==null&&(ce.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===S&&V0(He)===ce.type)?(ce=y(ce,me.props),jc(ce,me),ce.return=de,ce):(ce=Tl(me.type,me.key,me.props,null,de.mode,xe),jc(ce,me),ce.return=de,ce)}function ge(de,ce,me,xe){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==me.containerInfo||ce.stateNode.implementation!==me.implementation?(ce=gu(me,de.mode,xe),ce.return=de,ce):(ce=y(ce,me.children||[]),ce.return=de,ce)}function Ae(de,ce,me,xe,He){return ce===null||ce.tag!==7?(ce=Bs(me,de.mode,xe,He),ce.return=de,ce):(ce=y(ce,me),ce.return=de,ce)}function Ce(de,ce,me){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=Ac(""+ce,de.mode,me),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:return me=Tl(ce.type,ce.key,ce.props,null,de.mode,me),jc(me,ce),me.return=de,me;case C:return ce=gu(ce,de.mode,me),ce.return=de,ce;case S:var xe=ce._init;return ce=xe(ce._payload),Ce(de,ce,me)}if(ae(ce)||B(ce))return ce=Bs(ce,de.mode,me,null),ce.return=de,ce;if(typeof ce.then=="function")return Ce(de,Dd(ce),me);if(ce.$$typeof===K)return Ce(de,wd(de,ce),me);Ld(de,ce)}return null}function _e(de,ce,me,xe){var He=ce!==null?ce.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return He!==null?null:Z(de,ce,""+me,xe);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case b:return me.key===He?re(de,ce,me,xe):null;case C:return me.key===He?ge(de,ce,me,xe):null;case S:return He=me._init,me=He(me._payload),_e(de,ce,me,xe)}if(ae(me)||B(me))return He!==null?null:Ae(de,ce,me,xe,null);if(typeof me.then=="function")return _e(de,ce,Dd(me),xe);if(me.$$typeof===K)return _e(de,ce,wd(de,me),xe);Ld(de,me)}return null}function ve(de,ce,me,xe,He){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return de=de.get(me)||null,Z(ce,de,""+xe,He);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case b:return de=de.get(xe.key===null?me:xe.key)||null,re(ce,de,xe,He);case C:return de=de.get(xe.key===null?me:xe.key)||null,ge(ce,de,xe,He);case S:var St=xe._init;return xe=St(xe._payload),ve(de,ce,me,xe,He)}if(ae(xe)||B(xe))return de=de.get(me)||null,Ae(ce,de,xe,He,null);if(typeof xe.then=="function")return ve(de,ce,me,Dd(xe),He);if(xe.$$typeof===K)return ve(de,ce,me,wd(ce,xe),He);Ld(ce,xe)}return null}function ut(de,ce,me,xe){for(var He=null,St=null,Ye=ce,st=ce=0,oi=null;Ye!==null&&st<me.length;st++){Ye.index>st?(oi=Ye,Ye=null):oi=Ye.sibling;var Ft=_e(de,Ye,me[st],xe);if(Ft===null){Ye===null&&(Ye=oi);break}r&&Ye&&Ft.alternate===null&&a(de,Ye),ce=w(Ft,ce,st),St===null?He=Ft:St.sibling=Ft,St=Ft,Ye=oi}if(st===me.length)return u(de,Ye),ct&&pe(de,st),He;if(Ye===null){for(;st<me.length;st++)Ye=Ce(de,me[st],xe),Ye!==null&&(ce=w(Ye,ce,st),St===null?He=Ye:St.sibling=Ye,St=Ye);return ct&&pe(de,st),He}for(Ye=d(Ye);st<me.length;st++)oi=ve(Ye,de,st,me[st],xe),oi!==null&&(r&&oi.alternate!==null&&Ye.delete(oi.key===null?st:oi.key),ce=w(oi,ce,st),St===null?He=oi:St.sibling=oi,St=oi);return r&&Ye.forEach(function(Oo){return a(de,Oo)}),ct&&pe(de,st),He}function nt(de,ce,me,xe){if(me==null)throw Error(i(151));for(var He=null,St=null,Ye=ce,st=ce=0,oi=null,Ft=me.next();Ye!==null&&!Ft.done;st++,Ft=me.next()){Ye.index>st?(oi=Ye,Ye=null):oi=Ye.sibling;var Oo=_e(de,Ye,Ft.value,xe);if(Oo===null){Ye===null&&(Ye=oi);break}r&&Ye&&Oo.alternate===null&&a(de,Ye),ce=w(Oo,ce,st),St===null?He=Oo:St.sibling=Oo,St=Oo,Ye=oi}if(Ft.done)return u(de,Ye),ct&&pe(de,st),He;if(Ye===null){for(;!Ft.done;st++,Ft=me.next())Ft=Ce(de,Ft.value,xe),Ft!==null&&(ce=w(Ft,ce,st),St===null?He=Ft:St.sibling=Ft,St=Ft);return ct&&pe(de,st),He}for(Ye=d(Ye);!Ft.done;st++,Ft=me.next())Ft=ve(Ye,de,st,Ft.value,xe),Ft!==null&&(r&&Ft.alternate!==null&&Ye.delete(Ft.key===null?st:Ft.key),ce=w(Ft,ce,st),St===null?He=Ft:St.sibling=Ft,St=Ft);return r&&Ye.forEach(function(qC){return a(de,qC)}),ct&&pe(de,st),He}function rn(de,ce,me,xe){if(typeof me=="object"&&me!==null&&me.type===I&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case b:e:{for(var He=me.key;ce!==null;){if(ce.key===He){if(He=me.type,He===I){if(ce.tag===7){u(de,ce.sibling),xe=y(ce,me.props.children),xe.return=de,de=xe;break e}}else if(ce.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===S&&V0(He)===ce.type){u(de,ce.sibling),xe=y(ce,me.props),jc(xe,me),xe.return=de,de=xe;break e}u(de,ce);break}else a(de,ce);ce=ce.sibling}me.type===I?(xe=Bs(me.props.children,de.mode,xe,me.key),xe.return=de,de=xe):(xe=Tl(me.type,me.key,me.props,null,de.mode,xe),jc(xe,me),xe.return=de,de=xe)}return V(de);case C:e:{for(He=me.key;ce!==null;){if(ce.key===He)if(ce.tag===4&&ce.stateNode.containerInfo===me.containerInfo&&ce.stateNode.implementation===me.implementation){u(de,ce.sibling),xe=y(ce,me.children||[]),xe.return=de,de=xe;break e}else{u(de,ce);break}else a(de,ce);ce=ce.sibling}xe=gu(me,de.mode,xe),xe.return=de,de=xe}return V(de);case S:return He=me._init,me=He(me._payload),rn(de,ce,me,xe)}if(ae(me))return ut(de,ce,me,xe);if(B(me)){if(He=B(me),typeof He!="function")throw Error(i(150));return me=He.call(me),nt(de,ce,me,xe)}if(typeof me.then=="function")return rn(de,ce,Dd(me),xe);if(me.$$typeof===K)return rn(de,ce,wd(de,me),xe);Ld(de,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,ce!==null&&ce.tag===6?(u(de,ce.sibling),xe=y(ce,me),xe.return=de,de=xe):(u(de,ce),xe=Ac(me,de.mode,xe),xe.return=de,de=xe),V(de)):u(de,ce)}return function(de,ce,me,xe){try{Lc=0;var He=rn(de,ce,me,xe);return Au=null,He}catch(Ye){if(Ye===Cc||Ye===Ad)throw Ye;var St=Hi(29,Ye,null,de.mode);return St.lanes=xe,St.return=de,St}finally{}}}var Su=U0(!0),B0=U0(!1),Qr=ne(null),zs=null;function _o(r){var a=r.alternate;se(Wn,Wn.current&1),se(Qr,r),zs===null&&(a===null||Eu.current!==null||a.memoizedState!==null)&&(zs=r)}function F0(r){if(r.tag===22){if(se(Wn,Wn.current),se(Qr,r),zs===null){var a=r.alternate;a!==null&&a.memoizedState!==null&&(zs=r)}}else vo()}function vo(){se(Wn,Wn.current),se(Qr,Qr.current)}function ba(r){le(Qr),zs===r&&(zs=null),le(Wn)}var Wn=ne(0);function jd(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Ng(u)))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}function zm(r,a,u,d){a=r.memoizedState,u=u(d,a),u=u==null?a:_({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Hm={enqueueSetState:function(r,a,u){r=r._reactInternals;var d=Rr(),y=po(d);y.payload=a,u!=null&&(y.callback=u),a=mo(r,y,d),a!==null&&(Ir(a,r,d),Ic(a,r,d))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var d=Rr(),y=po(d);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=mo(r,y,d),a!==null&&(Ir(a,r,d),Ic(a,r,d))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=Rr(),d=po(u);d.tag=2,a!=null&&(d.callback=a),a=mo(r,d,u),a!==null&&(Ir(a,r,u),Ic(a,r,u))}};function z0(r,a,u,d,y,w,V){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,w,V):a.prototype&&a.prototype.isPureReactComponent?!Bi(u,d)||!Bi(y,w):!0}function H0(r,a,u,d){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,d),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,d),a.state!==r&&Hm.enqueueReplaceState(a,a.state,null)}function kl(r,a){var u=a;if("ref"in a){u={};for(var d in a)d!=="ref"&&(u[d]=a[d])}if(r=r.defaultProps){u===a&&(u=_({},u));for(var y in r)u[y]===void 0&&(u[y]=r[y])}return u}var Vd=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function q0(r){Vd(r)}function G0(r){console.error(r)}function Z0(r){Vd(r)}function Ud(r,a){try{var u=r.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(d){setTimeout(function(){throw d})}}function K0(r,a,u){try{var d=r.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function qm(r,a,u){return u=po(u),u.tag=3,u.payload={element:null},u.callback=function(){Ud(r,a)},u}function $0(r){return r=po(r),r.tag=3,r}function Y0(r,a,u,d){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var w=d.value;r.payload=function(){return y(w)},r.callback=function(){K0(a,u,d)}}var V=u.stateNode;V!==null&&typeof V.componentDidCatch=="function"&&(r.callback=function(){K0(a,u,d),typeof y!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var Z=d.stack;this.componentDidCatch(d.value,{componentStack:Z!==null?Z:""})})}function qx(r,a,u,d,y){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(a=u.alternate,a!==null&&xl(a,u,y,!0),u=Qr.current,u!==null){switch(u.tag){case 13:return zs===null?pg():u.alternate===null&&Rn===0&&(Rn=3),u.flags&=-257,u.flags|=65536,u.lanes=y,d===ym?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([d]):a.add(d),gg(r,d,y)),!1;case 22:return u.flags|=65536,d===ym?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([d]):u.add(d)),gg(r,d,y)),!1}throw Error(i(435,u.tag))}return gg(r,d,y),pg(),!1}if(ct)return a=Qr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,d!==ri&&(r=Error(i(422),{cause:d}),ho(Fi(r,u)))):(d!==ri&&(a=Error(i(423),{cause:d}),ho(Fi(a,u))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,d=Fi(d,u),y=qm(r.stateNode,d,y),wm(r,y),Rn!==4&&(Rn=2)),!1;var w=Error(i(520),{cause:d});if(w=Fi(w,u),qc===null?qc=[w]:qc.push(w),Rn!==4&&(Rn=2),a===null)return!0;d=Fi(d,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,r=y&-y,u.lanes|=r,r=qm(u.stateNode,d,r),wm(u,r),!1;case 1:if(a=u.type,w=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ao===null||!Ao.has(w))))return u.flags|=65536,y&=-y,u.lanes|=y,y=$0(y),Y0(y,r,u,d),wm(u,y),!1}u=u.return}while(u!==null);return!1}var Q0=Error(i(461)),si=!1;function di(r,a,u,d){a.child=r===null?B0(a,null,u,d):Su(a,r.child,u,d)}function W0(r,a,u,d,y){u=u.render;var w=a.ref;if("ref"in d){var V={};for(var Z in d)Z!=="ref"&&(V[Z]=d[Z])}else V=d;return Cl(a),d=Cm(r,a,u,V,w,y),Z=Rm(),r!==null&&!si?(Im(r,a,y),wa(r,a,y)):(ct&&Z&&Ie(a),a.flags|=1,di(r,a,d,y),a.child)}function X0(r,a,u,d,y){if(r===null){var w=u.type;return typeof w=="function"&&!mu(w)&&w.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=w,J0(r,a,w,d,y)):(r=Tl(u.type,null,d,a,a.mode,y),r.ref=a.ref,r.return=a,a.child=r)}if(w=r.child,!Xm(r,y)){var V=w.memoizedProps;if(u=u.compare,u=u!==null?u:Bi,u(V,d)&&r.ref===a.ref)return wa(r,a,y)}return a.flags|=1,r=$r(w,d),r.ref=a.ref,r.return=a,a.child=r}function J0(r,a,u,d,y){if(r!==null){var w=r.memoizedProps;if(Bi(w,d)&&r.ref===a.ref)if(si=!1,a.pendingProps=d=w,Xm(r,y))(r.flags&131072)!==0&&(si=!0);else return a.lanes=r.lanes,wa(r,a,y)}return Gm(r,a,u,d,y)}function e1(r,a,u){var d=a.pendingProps,y=d.children,w=r!==null?r.memoizedState:null;if(d.mode==="hidden"){if((a.flags&128)!==0){if(d=w!==null?w.baseLanes|u:u,r!==null){for(y=a.child=r.child,w=0;y!==null;)w=w|y.lanes|y.childLanes,y=y.sibling;a.childLanes=w&~d}else a.childLanes=0,a.child=null;return t1(r,a,d,u)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},r!==null&&Td(a,w!==null?w.cachePool:null),w!==null?Jy(a,w):Am(),F0(a);else return a.lanes=a.childLanes=536870912,t1(r,a,w!==null?w.baseLanes|u:u,u)}else w!==null?(Td(a,w.cachePool),Jy(a,w),vo(),a.memoizedState=null):(r!==null&&Td(a,null),Am(),vo());return di(r,a,y,u),a.child}function t1(r,a,u,d){var y=vm();return y=y===null?null:{parent:Qn._currentValue,pool:y},a.memoizedState={baseLanes:u,cachePool:y},r!==null&&Td(a,null),Am(),F0(a),r!==null&&xl(r,a,d,!0),null}function Bd(r,a){var u=a.ref;if(u===null)r!==null&&r.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(a.flags|=4194816)}}function Gm(r,a,u,d,y){return Cl(a),u=Cm(r,a,u,d,void 0,y),d=Rm(),r!==null&&!si?(Im(r,a,y),wa(r,a,y)):(ct&&d&&Ie(a),a.flags|=1,di(r,a,u,y),a.child)}function n1(r,a,u,d,y,w){return Cl(a),a.updateQueue=null,u=t0(a,d,u,y),e0(r),d=Rm(),r!==null&&!si?(Im(r,a,w),wa(r,a,w)):(ct&&d&&Ie(a),a.flags|=1,di(r,a,u,w),a.child)}function i1(r,a,u,d,y){if(Cl(a),a.stateNode===null){var w=va,V=u.contextType;typeof V=="object"&&V!==null&&(w=xi(V)),w=new u(d,w),a.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Hm,a.stateNode=w,w._reactInternals=a,w=a.stateNode,w.props=d,w.state=a.memoizedState,w.refs={},Em(a),V=u.contextType,w.context=typeof V=="object"&&V!==null?xi(V):va,w.state=a.memoizedState,V=u.getDerivedStateFromProps,typeof V=="function"&&(zm(a,u,V,d),w.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(V=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),V!==w.state&&Hm.enqueueReplaceState(w,w.state,null),Nc(a,d,w,y),kc(),w.state=a.memoizedState),typeof w.componentDidMount=="function"&&(a.flags|=4194308),d=!0}else if(r===null){w=a.stateNode;var Z=a.memoizedProps,re=kl(u,Z);w.props=re;var ge=w.context,Ae=u.contextType;V=va,typeof Ae=="object"&&Ae!==null&&(V=xi(Ae));var Ce=u.getDerivedStateFromProps;Ae=typeof Ce=="function"||typeof w.getSnapshotBeforeUpdate=="function",Z=a.pendingProps!==Z,Ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(Z||ge!==V)&&H0(a,w,d,V),fo=!1;var _e=a.memoizedState;w.state=_e,Nc(a,d,w,y),kc(),ge=a.memoizedState,Z||_e!==ge||fo?(typeof Ce=="function"&&(zm(a,u,Ce,d),ge=a.memoizedState),(re=fo||z0(a,u,re,d,_e,ge,V))?(Ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(a.flags|=4194308)):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=d,a.memoizedState=ge),w.props=d,w.state=ge,w.context=V,d=re):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),d=!1)}else{w=a.stateNode,bm(r,a),V=a.memoizedProps,Ae=kl(u,V),w.props=Ae,Ce=a.pendingProps,_e=w.context,ge=u.contextType,re=va,typeof ge=="object"&&ge!==null&&(re=xi(ge)),Z=u.getDerivedStateFromProps,(ge=typeof Z=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(V!==Ce||_e!==re)&&H0(a,w,d,re),fo=!1,_e=a.memoizedState,w.state=_e,Nc(a,d,w,y),kc();var ve=a.memoizedState;V!==Ce||_e!==ve||fo||r!==null&&r.dependencies!==null&&bd(r.dependencies)?(typeof Z=="function"&&(zm(a,u,Z,d),ve=a.memoizedState),(Ae=fo||z0(a,u,Ae,d,_e,ve,re)||r!==null&&r.dependencies!==null&&bd(r.dependencies))?(ge||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,ve,re),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,ve,re)),typeof w.componentDidUpdate=="function"&&(a.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof w.componentDidUpdate!="function"||V===r.memoizedProps&&_e===r.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||V===r.memoizedProps&&_e===r.memoizedState||(a.flags|=1024),a.memoizedProps=d,a.memoizedState=ve),w.props=d,w.state=ve,w.context=re,d=Ae):(typeof w.componentDidUpdate!="function"||V===r.memoizedProps&&_e===r.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||V===r.memoizedProps&&_e===r.memoizedState||(a.flags|=1024),d=!1)}return w=d,Bd(r,a),d=(a.flags&128)!==0,w||d?(w=a.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:w.render(),a.flags|=1,r!==null&&d?(a.child=Su(a,r.child,null,y),a.child=Su(a,null,u,y)):di(r,a,u,y),a.memoizedState=w.state,r=a.child):r=wa(r,a,y),r}function r1(r,a,u,d){return co(),a.flags|=256,di(r,a,u,d),a.child}var Zm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Km(r){return{baseLanes:r,cachePool:Gy()}}function $m(r,a,u){return r=r!==null?r.childLanes&~u:0,a&&(r|=Wr),r}function s1(r,a,u){var d=a.pendingProps,y=!1,w=(a.flags&128)!==0,V;if((V=w)||(V=r!==null&&r.memoizedState===null?!1:(Wn.current&2)!==0),V&&(y=!0,a.flags&=-129),V=(a.flags&32)!==0,a.flags&=-33,r===null){if(ct){if(y?_o(a):vo(),ct){var Z=Ge,re;if(re=Z){e:{for(re=Z,Z=wn;re.nodeType!==8;){if(!Z){Z=null;break e}if(re=ys(re.nextSibling),re===null){Z=null;break e}}Z=re}Z!==null?(a.memoizedState={dehydrated:Z,treeContext:k!==null?{id:G,overflow:ie}:null,retryLane:536870912,hydrationErrors:null},re=Hi(18,null,null,0),re.stateNode=Z,re.return=a,a.child=re,ze=a,Ge=null,re=!0):re=!1}re||Xi(a)}if(Z=a.memoizedState,Z!==null&&(Z=Z.dehydrated,Z!==null))return Ng(Z)?a.lanes=32:a.lanes=536870912,null;ba(a)}return Z=d.children,d=d.fallback,y?(vo(),y=a.mode,Z=Fd({mode:"hidden",children:Z},y),d=Bs(d,y,u,null),Z.return=a,d.return=a,Z.sibling=d,a.child=Z,y=a.child,y.memoizedState=Km(u),y.childLanes=$m(r,V,u),a.memoizedState=Zm,d):(_o(a),Ym(a,Z))}if(re=r.memoizedState,re!==null&&(Z=re.dehydrated,Z!==null)){if(w)a.flags&256?(_o(a),a.flags&=-257,a=Qm(r,a,u)):a.memoizedState!==null?(vo(),a.child=r.child,a.flags|=128,a=null):(vo(),y=d.fallback,Z=a.mode,d=Fd({mode:"visible",children:d.children},Z),y=Bs(y,Z,u,null),y.flags|=2,d.return=a,y.return=a,d.sibling=y,a.child=d,Su(a,r.child,null,u),d=a.child,d.memoizedState=Km(u),d.childLanes=$m(r,V,u),a.memoizedState=Zm,a=y);else if(_o(a),Ng(Z)){if(V=Z.nextSibling&&Z.nextSibling.dataset,V)var ge=V.dgst;V=ge,d=Error(i(419)),d.stack="",d.digest=V,ho({value:d,source:null,stack:null}),a=Qm(r,a,u)}else if(si||xl(r,a,u,!1),V=(u&r.childLanes)!==0,si||V){if(V=fn,V!==null&&(d=u&-u,d=(d&42)!==0?1:hr(d),d=(d&(V.suspendedLanes|u))!==0?0:d,d!==0&&d!==re.retryLane))throw re.retryLane=d,lo(r,d),Ir(V,r,d),Q0;Z.data==="$?"||pg(),a=Qm(r,a,u)}else Z.data==="$?"?(a.flags|=192,a.child=r.child,a=null):(r=re.treeContext,Ge=ys(Z.nextSibling),ze=a,ct=!0,dn=null,wn=!1,r!==null&&(v[A++]=G,v[A++]=ie,v[A++]=k,G=r.id,ie=r.overflow,k=a),a=Ym(a,d.children),a.flags|=4096);return a}return y?(vo(),y=d.fallback,Z=a.mode,re=r.child,ge=re.sibling,d=$r(re,{mode:"hidden",children:d.children}),d.subtreeFlags=re.subtreeFlags&65011712,ge!==null?y=$r(ge,y):(y=Bs(y,Z,u,null),y.flags|=2),y.return=a,d.return=a,d.sibling=y,a.child=d,d=y,y=a.child,Z=r.child.memoizedState,Z===null?Z=Km(u):(re=Z.cachePool,re!==null?(ge=Qn._currentValue,re=re.parent!==ge?{parent:ge,pool:ge}:re):re=Gy(),Z={baseLanes:Z.baseLanes|u,cachePool:re}),y.memoizedState=Z,y.childLanes=$m(r,V,u),a.memoizedState=Zm,d):(_o(a),u=r.child,r=u.sibling,u=$r(u,{mode:"visible",children:d.children}),u.return=a,u.sibling=null,r!==null&&(V=a.deletions,V===null?(a.deletions=[r],a.flags|=16):V.push(r)),a.child=u,a.memoizedState=null,u)}function Ym(r,a){return a=Fd({mode:"visible",children:a},r.mode),a.return=r,r.child=a}function Fd(r,a){return r=Hi(22,r,null,a),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function Qm(r,a,u){return Su(a,r.child,null,u),r=Ym(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function a1(r,a,u){r.lanes|=a;var d=r.alternate;d!==null&&(d.lanes|=a),Sl(r.return,a,u)}function Wm(r,a,u,d,y){var w=r.memoizedState;w===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:y}:(w.isBackwards=a,w.rendering=null,w.renderingStartTime=0,w.last=d,w.tail=u,w.tailMode=y)}function o1(r,a,u){var d=a.pendingProps,y=d.revealOrder,w=d.tail;if(di(r,a,d.children,u),d=Wn.current,(d&2)!==0)d=d&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&a1(r,u,a);else if(r.tag===19)a1(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}switch(se(Wn,d),y){case"forwards":for(u=a.child,y=null;u!==null;)r=u.alternate,r!==null&&jd(r)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),Wm(a,!1,y,u,w);break;case"backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(r=y.alternate,r!==null&&jd(r)===null){a.child=y;break}r=y.sibling,y.sibling=u,u=y,y=r}Wm(a,!0,u,null,w);break;case"together":Wm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function wa(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),To|=a.lanes,(u&a.childLanes)===0)if(r!==null){if(xl(r,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(r!==null&&a.child!==r.child)throw Error(i(153));if(a.child!==null){for(r=a.child,u=$r(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=$r(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function Xm(r,a){return(r.lanes&a)!==0?!0:(r=r.dependencies,!!(r!==null&&bd(r)))}function Gx(r,a,u){switch(a.tag){case 3:ke(a,a.stateNode.containerInfo),Fs(a,Qn,r.memoizedState.cache),co();break;case 27:case 5:qe(a);break;case 4:ke(a,a.stateNode.containerInfo);break;case 10:Fs(a,a.type,a.memoizedProps.value);break;case 13:var d=a.memoizedState;if(d!==null)return d.dehydrated!==null?(_o(a),a.flags|=128,null):(u&a.child.childLanes)!==0?s1(r,a,u):(_o(a),r=wa(r,a,u),r!==null?r.sibling:null);_o(a);break;case 19:var y=(r.flags&128)!==0;if(d=(u&a.childLanes)!==0,d||(xl(r,a,u,!1),d=(u&a.childLanes)!==0),y){if(d)return o1(r,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),se(Wn,Wn.current),d)break;return null;case 22:case 23:return a.lanes=0,e1(r,a,u);case 24:Fs(a,Qn,r.memoizedState.cache)}return wa(r,a,u)}function l1(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps)si=!0;else{if(!Xm(r,u)&&(a.flags&128)===0)return si=!1,Gx(r,a,u);si=(r.flags&131072)!==0}else si=!1,ct&&(a.flags&1048576)!==0&&Ee(a,h,a.index);switch(a.lanes=0,a.tag){case 16:e:{r=a.pendingProps;var d=a.elementType,y=d._init;if(d=y(d._payload),a.type=d,typeof d=="function")mu(d)?(r=kl(d,r),a.tag=1,a=i1(null,a,d,r,u)):(a.tag=0,a=Gm(null,a,d,r,u));else{if(d!=null){if(y=d.$$typeof,y===J){a.tag=11,a=W0(null,a,d,r,u);break e}else if(y===q){a.tag=14,a=X0(null,a,d,r,u);break e}}throw a=Q(d)||d,Error(i(306,a,""))}}return a;case 0:return Gm(r,a,a.type,a.pendingProps,u);case 1:return d=a.type,y=kl(d,a.pendingProps),i1(r,a,d,y,u);case 3:e:{if(ke(a,a.stateNode.containerInfo),r===null)throw Error(i(387));d=a.pendingProps;var w=a.memoizedState;y=w.element,bm(r,a),Nc(a,d,null,u);var V=a.memoizedState;if(d=V.cache,Fs(a,Qn,d),d!==w.cache&&_u(a,[Qn],u,!0),kc(),d=V.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:V.cache},a.updateQueue.baseState=w,a.memoizedState=w,a.flags&256){a=r1(r,a,d,u);break e}else if(d!==y){y=Fi(Error(i(424)),a),ho(y),a=r1(r,a,d,u);break e}else{switch(r=a.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(Ge=ys(r.firstChild),ze=a,ct=!0,dn=null,wn=!0,u=B0(a,null,d,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(co(),d===y){a=wa(r,a,u);break e}di(r,a,d,u)}a=a.child}return a;case 26:return Bd(r,a),r===null?(u=dE(a.type,null,a.pendingProps,null))?a.memoizedState=u:ct||(u=a.type,r=a.pendingProps,d=tf(ye.current).createElement(u),d[Dn]=a,d[xn]=r,pi(d,u,r),bn(d),a.stateNode=d):a.memoizedState=dE(a.type,r.memoizedProps,a.pendingProps,r.memoizedState),null;case 27:return qe(a),r===null&&ct&&(d=a.stateNode=uE(a.type,a.pendingProps,ye.current),ze=a,wn=!0,y=Ge,Co(a.type)?(Og=y,Ge=ys(d.firstChild)):Ge=y),di(r,a,a.pendingProps.children,u),Bd(r,a),r===null&&(a.flags|=4194304),a.child;case 5:return r===null&&ct&&((y=d=Ge)&&(d=yC(d,a.type,a.pendingProps,wn),d!==null?(a.stateNode=d,ze=a,Ge=ys(d.firstChild),wn=!1,y=!0):y=!1),y||Xi(a)),qe(a),y=a.type,w=a.pendingProps,V=r!==null?r.memoizedProps:null,d=w.children,Rg(y,w)?d=null:V!==null&&Rg(y,V)&&(a.flags|=32),a.memoizedState!==null&&(y=Cm(r,a,jx,null,null,u),Jc._currentValue=y),Bd(r,a),di(r,a,d,u),a.child;case 6:return r===null&&ct&&((r=u=Ge)&&(u=EC(u,a.pendingProps,wn),u!==null?(a.stateNode=u,ze=a,Ge=null,r=!0):r=!1),r||Xi(a)),null;case 13:return s1(r,a,u);case 4:return ke(a,a.stateNode.containerInfo),d=a.pendingProps,r===null?a.child=Su(a,null,d,u):di(r,a,d,u),a.child;case 11:return W0(r,a,a.type,a.pendingProps,u);case 7:return di(r,a,a.pendingProps,u),a.child;case 8:return di(r,a,a.pendingProps.children,u),a.child;case 12:return di(r,a,a.pendingProps.children,u),a.child;case 10:return d=a.pendingProps,Fs(a,a.type,d.value),di(r,a,d.children,u),a.child;case 9:return y=a.type._context,d=a.pendingProps.children,Cl(a),y=xi(y),d=d(y),a.flags|=1,di(r,a,d,u),a.child;case 14:return X0(r,a,a.type,a.pendingProps,u);case 15:return J0(r,a,a.type,a.pendingProps,u);case 19:return o1(r,a,u);case 31:return d=a.pendingProps,u=a.mode,d={mode:d.mode,children:d.children},r===null?(u=Fd(d,u),u.ref=a.ref,a.child=u,u.return=a,a=u):(u=$r(r.child,d),u.ref=a.ref,a.child=u,u.return=a,a=u),a;case 22:return e1(r,a,u);case 24:return Cl(a),d=xi(Qn),r===null?(y=vm(),y===null&&(y=fn,w=gm(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=u),y=w),a.memoizedState={parent:d,cache:y},Em(a),Fs(a,Qn,y)):((r.lanes&u)!==0&&(bm(r,a),Nc(a,null,null,u),kc()),y=r.memoizedState,w=a.memoizedState,y.parent!==d?(y={parent:d,cache:d},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Fs(a,Qn,d)):(d=w.cache,Fs(a,Qn,d),d!==y.cache&&_u(a,[Qn],u,!0))),di(r,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ta(r){r.flags|=4}function u1(r,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!_E(a)){if(a=Qr.current,a!==null&&((Lt&4194048)===Lt?zs!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||a!==zs))throw Rc=ym,Zy;r.flags|=8192}}function zd(r,a){a!==null&&(r.flags|=4),r.flags&16384&&(a=r.tag!==22?Ki():536870912,r.lanes|=a,Iu|=a)}function Vc(r,a){if(!ct)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Tn(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,d=0;if(a)for(var y=r.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)u|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=d,r.childLanes=u,a}function Zx(r,a,u){var d=a.pendingProps;switch(Ue(a),a.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tn(a),null;case 1:return Tn(a),null;case 3:return u=a.stateNode,d=null,r!==null&&(d=r.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),_s(Qn),De(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Al(a)?Ta(a):r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Ed())),Tn(a),null;case 26:return u=a.memoizedState,r===null?(Ta(a),u!==null?(Tn(a),u1(a,u)):(Tn(a),a.flags&=-16777217)):u?u!==r.memoizedState?(Ta(a),Tn(a),u1(a,u)):(Tn(a),a.flags&=-16777217):(r.memoizedProps!==d&&Ta(a),Tn(a),a.flags&=-16777217),null;case 27:je(a),u=ye.current;var y=a.type;if(r!==null&&a.stateNode!=null)r.memoizedProps!==d&&Ta(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Tn(a),null}r=he.current,Al(a)?vd(a):(r=uE(y,d,u),a.stateNode=r,Ta(a))}return Tn(a),null;case 5:if(je(a),u=a.type,r!==null&&a.stateNode!=null)r.memoizedProps!==d&&Ta(a);else{if(!d){if(a.stateNode===null)throw Error(i(166));return Tn(a),null}if(r=he.current,Al(a))vd(a);else{switch(y=tf(ye.current),r){case 1:r=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:r=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":r=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":r=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":r=y.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof d.is=="string"?y.createElement("select",{is:d.is}):y.createElement("select"),d.multiple?r.multiple=!0:d.size&&(r.size=d.size);break;default:r=typeof d.is=="string"?y.createElement(u,{is:d.is}):y.createElement(u)}}r[Dn]=a,r[xn]=d;e:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)r.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break e;for(;y.sibling===null;){if(y.return===null||y.return===a)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=r;e:switch(pi(r,u,d),u){case"button":case"input":case"select":case"textarea":r=!!d.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Ta(a)}}return Tn(a),a.flags&=-16777217,null;case 6:if(r&&a.stateNode!=null)r.memoizedProps!==d&&Ta(a);else{if(typeof d!="string"&&a.stateNode===null)throw Error(i(166));if(r=ye.current,Al(a)){if(r=a.stateNode,u=a.memoizedProps,d=null,y=ze,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}r[Dn]=a,r=!!(r.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||nE(r.nodeValue,u)),r||Xi(a)}else r=tf(r).createTextNode(d),r[Dn]=a,a.stateNode=r}return Tn(a),null;case 13:if(d=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Al(a),d!==null&&d.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[Dn]=a}else co(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Tn(a),y=!1}else y=Ed(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(ba(a),a):(ba(a),null)}if(ba(a),(a.flags&128)!==0)return a.lanes=u,a;if(u=d!==null,r=r!==null&&r.memoizedState!==null,u){d=a.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool);var w=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==y&&(d.flags|=2048)}return u!==r&&u&&(a.child.flags|=8192),zd(a,a.updateQueue),Tn(a),null;case 4:return De(),r===null&&Tg(a.stateNode.containerInfo),Tn(a),null;case 10:return _s(a.type),Tn(a),null;case 19:if(le(Wn),y=a.memoizedState,y===null)return Tn(a),null;if(d=(a.flags&128)!==0,w=y.rendering,w===null)if(d)Vc(y,!1);else{if(Rn!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(w=jd(r),w!==null){for(a.flags|=128,Vc(y,!1),r=w.updateQueue,a.updateQueue=r,zd(a,r),a.subtreeFlags=0,r=u,u=a.child;u!==null;)Tc(u,r),u=u.sibling;return se(Wn,Wn.current&1|2),a.child}r=r.sibling}y.tail!==null&&Le()>Gd&&(a.flags|=128,d=!0,Vc(y,!1),a.lanes=4194304)}else{if(!d)if(r=jd(w),r!==null){if(a.flags|=128,d=!0,r=r.updateQueue,a.updateQueue=r,zd(a,r),Vc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!ct)return Tn(a),null}else 2*Le()-y.renderingStartTime>Gd&&u!==536870912&&(a.flags|=128,d=!0,Vc(y,!1),a.lanes=4194304);y.isBackwards?(w.sibling=a.child,a.child=w):(r=y.last,r!==null?r.sibling=w:a.child=w,y.last=w)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Le(),a.sibling=null,r=Wn.current,se(Wn,d?r&1|2:r&1),a):(Tn(a),null);case 22:case 23:return ba(a),Sm(),d=a.memoizedState!==null,r!==null?r.memoizedState!==null!==d&&(a.flags|=8192):d&&(a.flags|=8192),d?(u&536870912)!==0&&(a.flags&128)===0&&(Tn(a),a.subtreeFlags&6&&(a.flags|=8192)):Tn(a),u=a.updateQueue,u!==null&&zd(a,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),d=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),d!==u&&(a.flags|=2048),r!==null&&le(Rl),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),_s(Qn),Tn(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Kx(r,a){switch(Ue(a),a.tag){case 1:return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return _s(Qn),De(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 26:case 27:case 5:return je(a),null;case 13:if(ba(a),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(i(340));co()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return le(Wn),null;case 4:return De(),null;case 10:return _s(a.type),null;case 22:case 23:return ba(a),Sm(),r!==null&&le(Rl),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 24:return _s(Qn),null;case 25:return null;default:return null}}function c1(r,a){switch(Ue(a),a.tag){case 3:_s(Qn),De();break;case 26:case 27:case 5:je(a);break;case 4:De();break;case 13:ba(a);break;case 19:le(Wn);break;case 10:_s(a.type);break;case 22:case 23:ba(a),Sm(),r!==null&&le(Rl);break;case 24:_s(Qn)}}function Uc(r,a){try{var u=a.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var y=d.next;u=y;do{if((u.tag&r)===r){d=void 0;var w=u.create,V=u.inst;d=w(),V.destroy=d}u=u.next}while(u!==y)}}catch(Z){an(a,a.return,Z)}}function yo(r,a,u){try{var d=a.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var w=y.next;d=w;do{if((d.tag&r)===r){var V=d.inst,Z=V.destroy;if(Z!==void 0){V.destroy=void 0,y=a;var re=u,ge=Z;try{ge()}catch(Ae){an(y,re,Ae)}}}d=d.next}while(d!==w)}}catch(Ae){an(a,a.return,Ae)}}function h1(r){var a=r.updateQueue;if(a!==null){var u=r.stateNode;try{Xy(a,u)}catch(d){an(r,r.return,d)}}}function d1(r,a,u){u.props=kl(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(d){an(r,a,d)}}function Bc(r,a){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var d=r.stateNode;break;case 30:d=r.stateNode;break;default:d=r.stateNode}typeof u=="function"?r.refCleanup=u(d):u.current=d}}catch(y){an(r,a,y)}}function Hs(r,a){var u=r.ref,d=r.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(y){an(r,a,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){an(r,a,y)}else u.current=null}function f1(r){var a=r.type,u=r.memoizedProps,d=r.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(y){an(r,r.return,y)}}function Jm(r,a,u){try{var d=r.stateNode;pC(d,r.type,u,a),d[xn]=a}catch(y){an(r,r.return,y)}}function p1(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Co(r.type)||r.tag===4}function eg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||p1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Co(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function tg(r,a,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(r),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ef));else if(d!==4&&(d===27&&Co(r.type)&&(u=r.stateNode,a=null),r=r.child,r!==null))for(tg(r,a,u),r=r.sibling;r!==null;)tg(r,a,u),r=r.sibling}function Hd(r,a,u){var d=r.tag;if(d===5||d===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(d!==4&&(d===27&&Co(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Hd(r,a,u),r=r.sibling;r!==null;)Hd(r,a,u),r=r.sibling}function m1(r){var a=r.stateNode,u=r.memoizedProps;try{for(var d=r.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);pi(a,d,u),a[Dn]=r,a[xn]=u}catch(w){an(r,r.return,w)}}var Aa=!1,Vn=!1,ng=!1,g1=typeof WeakSet=="function"?WeakSet:Set,ai=null;function $x(r,a){if(r=r.containerInfo,xg=lf,r=_l(r),vl(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var y=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{u.nodeType,w.nodeType}catch{u=null;break e}var V=0,Z=-1,re=-1,ge=0,Ae=0,Ce=r,_e=null;t:for(;;){for(var ve;Ce!==u||y!==0&&Ce.nodeType!==3||(Z=V+y),Ce!==w||d!==0&&Ce.nodeType!==3||(re=V+d),Ce.nodeType===3&&(V+=Ce.nodeValue.length),(ve=Ce.firstChild)!==null;)_e=Ce,Ce=ve;for(;;){if(Ce===r)break t;if(_e===u&&++ge===y&&(Z=V),_e===w&&++Ae===d&&(re=V),(ve=Ce.nextSibling)!==null)break;Ce=_e,_e=Ce.parentNode}Ce=ve}u=Z===-1||re===-1?null:{start:Z,end:re}}else u=null}u=u||{start:0,end:0}}else u=null;for(Cg={focusedElem:r,selectionRange:u},lf=!1,ai=a;ai!==null;)if(a=ai,r=a.child,(a.subtreeFlags&1024)!==0&&r!==null)r.return=a,ai=r;else for(;ai!==null;){switch(a=ai,w=a.alternate,r=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&w!==null){r=void 0,u=a,y=w.memoizedProps,w=w.memoizedState,d=u.stateNode;try{var ut=kl(u.type,y,u.elementType===u.type);r=d.getSnapshotBeforeUpdate(ut,w),d.__reactInternalSnapshotBeforeUpdate=r}catch(nt){an(u,u.return,nt)}}break;case 3:if((r&1024)!==0){if(r=a.stateNode.containerInfo,u=r.nodeType,u===9)kg(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":kg(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=a.sibling,r!==null){r.return=a.return,ai=r;break}ai=a.return}}function _1(r,a,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Eo(r,u),d&4&&Uc(5,u);break;case 1:if(Eo(r,u),d&4)if(r=u.stateNode,a===null)try{r.componentDidMount()}catch(V){an(u,u.return,V)}else{var y=kl(u.type,a.memoizedProps);a=a.memoizedState;try{r.componentDidUpdate(y,a,r.__reactInternalSnapshotBeforeUpdate)}catch(V){an(u,u.return,V)}}d&64&&h1(u),d&512&&Bc(u,u.return);break;case 3:if(Eo(r,u),d&64&&(r=u.updateQueue,r!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{Xy(r,a)}catch(V){an(u,u.return,V)}}break;case 27:a===null&&d&4&&m1(u);case 26:case 5:Eo(r,u),a===null&&d&4&&f1(u),d&512&&Bc(u,u.return);break;case 12:Eo(r,u);break;case 13:Eo(r,u),d&4&&E1(r,u),d&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=iC.bind(null,u),bC(r,u))));break;case 22:if(d=u.memoizedState!==null||Aa,!d){a=a!==null&&a.memoizedState!==null||Vn,y=Aa;var w=Vn;Aa=d,(Vn=a)&&!w?bo(r,u,(u.subtreeFlags&8772)!==0):Eo(r,u),Aa=y,Vn=w}break;case 30:break;default:Eo(r,u)}}function v1(r){var a=r.alternate;a!==null&&(r.alternate=null,v1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&ss(a)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var yn=null,er=!1;function Sa(r,a,u){for(u=u.child;u!==null;)y1(r,a,u),u=u.sibling}function y1(r,a,u){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(Je,u)}catch{}switch(u.tag){case 26:Vn||Hs(u,a),Sa(r,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Vn||Hs(u,a);var d=yn,y=er;Co(u.type)&&(yn=u.stateNode,er=!1),Sa(r,a,u),Yc(u.stateNode),yn=d,er=y;break;case 5:Vn||Hs(u,a);case 6:if(d=yn,y=er,yn=null,Sa(r,a,u),yn=d,er=y,yn!==null)if(er)try{(yn.nodeType===9?yn.body:yn.nodeName==="HTML"?yn.ownerDocument.body:yn).removeChild(u.stateNode)}catch(w){an(u,a,w)}else try{yn.removeChild(u.stateNode)}catch(w){an(u,a,w)}break;case 18:yn!==null&&(er?(r=yn,oE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),ih(r)):oE(yn,u.stateNode));break;case 4:d=yn,y=er,yn=u.stateNode.containerInfo,er=!0,Sa(r,a,u),yn=d,er=y;break;case 0:case 11:case 14:case 15:Vn||yo(2,u,a),Vn||yo(4,u,a),Sa(r,a,u);break;case 1:Vn||(Hs(u,a),d=u.stateNode,typeof d.componentWillUnmount=="function"&&d1(u,a,d)),Sa(r,a,u);break;case 21:Sa(r,a,u);break;case 22:Vn=(d=Vn)||u.memoizedState!==null,Sa(r,a,u),Vn=d;break;default:Sa(r,a,u)}}function E1(r,a){if(a.memoizedState===null&&(r=a.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ih(r)}catch(u){an(a,a.return,u)}}function Yx(r){switch(r.tag){case 13:case 19:var a=r.stateNode;return a===null&&(a=r.stateNode=new g1),a;case 22:return r=r.stateNode,a=r._retryCache,a===null&&(a=r._retryCache=new g1),a;default:throw Error(i(435,r.tag))}}function ig(r,a){var u=Yx(r);a.forEach(function(d){var y=rC.bind(null,r,d);u.has(d)||(u.add(d),d.then(y,y))})}function Sr(r,a){var u=a.deletions;if(u!==null)for(var d=0;d<u.length;d++){var y=u[d],w=r,V=a,Z=V;e:for(;Z!==null;){switch(Z.tag){case 27:if(Co(Z.type)){yn=Z.stateNode,er=!1;break e}break;case 5:yn=Z.stateNode,er=!1;break e;case 3:case 4:yn=Z.stateNode.containerInfo,er=!0;break e}Z=Z.return}if(yn===null)throw Error(i(160));y1(w,V,y),yn=null,er=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)b1(a,r),a=a.sibling}var vs=null;function b1(r,a){var u=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Sr(a,r),xr(r),d&4&&(yo(3,r,r.return),Uc(3,r),yo(5,r,r.return));break;case 1:Sr(a,r),xr(r),d&512&&(Vn||u===null||Hs(u,u.return)),d&64&&Aa&&(r=r.updateQueue,r!==null&&(d=r.callbacks,d!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var y=vs;if(Sr(a,r),xr(r),d&512&&(Vn||u===null||Hs(u,u.return)),d&4){var w=u!==null?u.memoizedState:null;if(d=r.memoizedState,u===null)if(d===null)if(r.stateNode===null){e:{d=r.type,u=r.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":w=y.getElementsByTagName("title")[0],(!w||w[ks]||w[Dn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(d),y.head.insertBefore(w,y.querySelector("head > title"))),pi(w,d,u),w[Dn]=r,bn(w),d=w;break e;case"link":var V=mE("link","href",y).get(d+(u.href||""));if(V){for(var Z=0;Z<V.length;Z++)if(w=V[Z],w.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&w.getAttribute("rel")===(u.rel==null?null:u.rel)&&w.getAttribute("title")===(u.title==null?null:u.title)&&w.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){V.splice(Z,1);break t}}w=y.createElement(d),pi(w,d,u),y.head.appendChild(w);break;case"meta":if(V=mE("meta","content",y).get(d+(u.content||""))){for(Z=0;Z<V.length;Z++)if(w=V[Z],w.getAttribute("content")===(u.content==null?null:""+u.content)&&w.getAttribute("name")===(u.name==null?null:u.name)&&w.getAttribute("property")===(u.property==null?null:u.property)&&w.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&w.getAttribute("charset")===(u.charSet==null?null:u.charSet)){V.splice(Z,1);break t}}w=y.createElement(d),pi(w,d,u),y.head.appendChild(w);break;default:throw Error(i(468,d))}w[Dn]=r,bn(w),d=w}r.stateNode=d}else gE(y,r.type,r.stateNode);else r.stateNode=pE(y,d,r.memoizedProps);else w!==d?(w===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):w.count--,d===null?gE(y,r.type,r.stateNode):pE(y,d,r.memoizedProps)):d===null&&r.stateNode!==null&&Jm(r,r.memoizedProps,u.memoizedProps)}break;case 27:Sr(a,r),xr(r),d&512&&(Vn||u===null||Hs(u,u.return)),u!==null&&d&4&&Jm(r,r.memoizedProps,u.memoizedProps);break;case 5:if(Sr(a,r),xr(r),d&512&&(Vn||u===null||Hs(u,u.return)),r.flags&32){y=r.stateNode;try{ti(y,"")}catch(ve){an(r,r.return,ve)}}d&4&&r.stateNode!=null&&(y=r.memoizedProps,Jm(r,y,u!==null?u.memoizedProps:y)),d&1024&&(ng=!0);break;case 6:if(Sr(a,r),xr(r),d&4){if(r.stateNode===null)throw Error(i(162));d=r.memoizedProps,u=r.stateNode;try{u.nodeValue=d}catch(ve){an(r,r.return,ve)}}break;case 3:if(sf=null,y=vs,vs=nf(a.containerInfo),Sr(a,r),vs=y,xr(r),d&4&&u!==null&&u.memoizedState.isDehydrated)try{ih(a.containerInfo)}catch(ve){an(r,r.return,ve)}ng&&(ng=!1,w1(r));break;case 4:d=vs,vs=nf(r.stateNode.containerInfo),Sr(a,r),xr(r),vs=d;break;case 12:Sr(a,r),xr(r);break;case 13:Sr(a,r),xr(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ug=Le()),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,ig(r,d)));break;case 22:y=r.memoizedState!==null;var re=u!==null&&u.memoizedState!==null,ge=Aa,Ae=Vn;if(Aa=ge||y,Vn=Ae||re,Sr(a,r),Vn=Ae,Aa=ge,xr(r),d&8192)e:for(a=r.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(u===null||re||Aa||Vn||Nl(r)),u=null,a=r;;){if(a.tag===5||a.tag===26){if(u===null){re=u=a;try{if(w=re.stateNode,y)V=w.style,typeof V.setProperty=="function"?V.setProperty("display","none","important"):V.display="none";else{Z=re.stateNode;var Ce=re.memoizedProps.style,_e=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;Z.style.display=_e==null||typeof _e=="boolean"?"":(""+_e).trim()}}catch(ve){an(re,re.return,ve)}}}else if(a.tag===6){if(u===null){re=a;try{re.stateNode.nodeValue=y?"":re.memoizedProps}catch(ve){an(re,re.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===r)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break e;for(;a.sibling===null;){if(a.return===null||a.return===r)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}d&4&&(d=r.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,ig(r,u))));break;case 19:Sr(a,r),xr(r),d&4&&(d=r.updateQueue,d!==null&&(r.updateQueue=null,ig(r,d)));break;case 30:break;case 21:break;default:Sr(a,r),xr(r)}}function xr(r){var a=r.flags;if(a&2){try{for(var u,d=r.return;d!==null;){if(p1(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var y=u.stateNode,w=eg(r);Hd(r,w,y);break;case 5:var V=u.stateNode;u.flags&32&&(ti(V,""),u.flags&=-33);var Z=eg(r);Hd(r,Z,V);break;case 3:case 4:var re=u.stateNode.containerInfo,ge=eg(r);tg(r,ge,re);break;default:throw Error(i(161))}}catch(Ae){an(r,r.return,Ae)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function w1(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var a=r;w1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),r=r.sibling}}function Eo(r,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)_1(r,a.alternate,a),a=a.sibling}function Nl(r){for(r=r.child;r!==null;){var a=r;switch(a.tag){case 0:case 11:case 14:case 15:yo(4,a,a.return),Nl(a);break;case 1:Hs(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&d1(a,a.return,u),Nl(a);break;case 27:Yc(a.stateNode);case 26:case 5:Hs(a,a.return),Nl(a);break;case 22:a.memoizedState===null&&Nl(a);break;case 30:Nl(a);break;default:Nl(a)}r=r.sibling}}function bo(r,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var d=a.alternate,y=r,w=a,V=w.flags;switch(w.tag){case 0:case 11:case 15:bo(y,w,u),Uc(4,w);break;case 1:if(bo(y,w,u),d=w,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ge){an(d,d.return,ge)}if(d=w,y=d.updateQueue,y!==null){var Z=d.stateNode;try{var re=y.shared.hiddenCallbacks;if(re!==null)for(y.shared.hiddenCallbacks=null,y=0;y<re.length;y++)Wy(re[y],Z)}catch(ge){an(d,d.return,ge)}}u&&V&64&&h1(w),Bc(w,w.return);break;case 27:m1(w);case 26:case 5:bo(y,w,u),u&&d===null&&V&4&&f1(w),Bc(w,w.return);break;case 12:bo(y,w,u);break;case 13:bo(y,w,u),u&&V&4&&E1(y,w);break;case 22:w.memoizedState===null&&bo(y,w,u),Bc(w,w.return);break;case 30:break;default:bo(y,w,u)}a=a.sibling}}function rg(r,a){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(r=a.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&Sc(u))}function sg(r,a){r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Sc(r))}function qs(r,a,u,d){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)T1(r,a,u,d),a=a.sibling}function T1(r,a,u,d){var y=a.flags;switch(a.tag){case 0:case 11:case 15:qs(r,a,u,d),y&2048&&Uc(9,a);break;case 1:qs(r,a,u,d);break;case 3:qs(r,a,u,d),y&2048&&(r=null,a.alternate!==null&&(r=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==r&&(a.refCount++,r!=null&&Sc(r)));break;case 12:if(y&2048){qs(r,a,u,d),r=a.stateNode;try{var w=a.memoizedProps,V=w.id,Z=w.onPostCommit;typeof Z=="function"&&Z(V,a.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(re){an(a,a.return,re)}}else qs(r,a,u,d);break;case 13:qs(r,a,u,d);break;case 23:break;case 22:w=a.stateNode,V=a.alternate,a.memoizedState!==null?w._visibility&2?qs(r,a,u,d):Fc(r,a):w._visibility&2?qs(r,a,u,d):(w._visibility|=2,xu(r,a,u,d,(a.subtreeFlags&10256)!==0)),y&2048&&rg(V,a);break;case 24:qs(r,a,u,d),y&2048&&sg(a.alternate,a);break;default:qs(r,a,u,d)}}function xu(r,a,u,d,y){for(y=y&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var w=r,V=a,Z=u,re=d,ge=V.flags;switch(V.tag){case 0:case 11:case 15:xu(w,V,Z,re,y),Uc(8,V);break;case 23:break;case 22:var Ae=V.stateNode;V.memoizedState!==null?Ae._visibility&2?xu(w,V,Z,re,y):Fc(w,V):(Ae._visibility|=2,xu(w,V,Z,re,y)),y&&ge&2048&&rg(V.alternate,V);break;case 24:xu(w,V,Z,re,y),y&&ge&2048&&sg(V.alternate,V);break;default:xu(w,V,Z,re,y)}a=a.sibling}}function Fc(r,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=r,d=a,y=d.flags;switch(d.tag){case 22:Fc(u,d),y&2048&&rg(d.alternate,d);break;case 24:Fc(u,d),y&2048&&sg(d.alternate,d);break;default:Fc(u,d)}a=a.sibling}}var zc=8192;function Cu(r){if(r.subtreeFlags&zc)for(r=r.child;r!==null;)A1(r),r=r.sibling}function A1(r){switch(r.tag){case 26:Cu(r),r.flags&zc&&r.memoizedState!==null&&MC(vs,r.memoizedState,r.memoizedProps);break;case 5:Cu(r);break;case 3:case 4:var a=vs;vs=nf(r.stateNode.containerInfo),Cu(r),vs=a;break;case 22:r.memoizedState===null&&(a=r.alternate,a!==null&&a.memoizedState!==null?(a=zc,zc=16777216,Cu(r),zc=a):Cu(r));break;default:Cu(r)}}function S1(r){var a=r.alternate;if(a!==null&&(r=a.child,r!==null)){a.child=null;do a=r.sibling,r.sibling=null,r=a;while(r!==null)}}function Hc(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];ai=d,C1(d,r)}S1(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)x1(r),r=r.sibling}function x1(r){switch(r.tag){case 0:case 11:case 15:Hc(r),r.flags&2048&&yo(9,r,r.return);break;case 3:Hc(r);break;case 12:Hc(r);break;case 22:var a=r.stateNode;r.memoizedState!==null&&a._visibility&2&&(r.return===null||r.return.tag!==13)?(a._visibility&=-3,qd(r)):Hc(r);break;default:Hc(r)}}function qd(r){var a=r.deletions;if((r.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var d=a[u];ai=d,C1(d,r)}S1(r)}for(r=r.child;r!==null;){switch(a=r,a.tag){case 0:case 11:case 15:yo(8,a,a.return),qd(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,qd(a));break;default:qd(a)}r=r.sibling}}function C1(r,a){for(;ai!==null;){var u=ai;switch(u.tag){case 0:case 11:case 15:yo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Sc(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,ai=d;else e:for(u=r;ai!==null;){d=ai;var y=d.sibling,w=d.return;if(v1(d),d===u){ai=null;break e}if(y!==null){y.return=w,ai=y;break e}ai=w}}}var Qx={getCacheForType:function(r){var a=xi(Qn),u=a.data.get(r);return u===void 0&&(u=r(),a.data.set(r,u)),u}},Wx=typeof WeakMap=="function"?WeakMap:Map,Qt=0,fn=null,Ct=null,Lt=0,Wt=0,Cr=null,wo=!1,Ru=!1,ag=!1,xa=0,Rn=0,To=0,Ol=0,og=0,Wr=0,Iu=0,qc=null,tr=null,lg=!1,ug=0,Gd=1/0,Zd=null,Ao=null,fi=0,So=null,ku=null,Nu=0,cg=0,hg=null,R1=null,Gc=0,dg=null;function Rr(){if((Qt&2)!==0&&Lt!==0)return Lt&-Lt;if(U.T!==null){var r=vu;return r!==0?r:yg()}return Jn()}function I1(){Wr===0&&(Wr=(Lt&536870912)===0||ct?Is():536870912);var r=Qr.current;return r!==null&&(r.flags|=32),Wr}function Ir(r,a,u){(r===fn&&(Wt===2||Wt===9)||r.cancelPendingCommit!==null)&&(Ou(r,0),xo(r,Lt,Wr,!1)),Mn(r,u),((Qt&2)===0||r!==fn)&&(r===fn&&((Qt&2)===0&&(Ol|=u),Rn===4&&xo(r,Lt,Wr,!1)),Gs(r))}function k1(r,a,u){if((Qt&6)!==0)throw Error(i(327));var d=!u&&(a&124)===0&&(a&r.expiredLanes)===0||Li(r,a),y=d?eC(r,a):mg(r,a,!0),w=d;do{if(y===0){Ru&&!d&&xo(r,a,0,!1);break}else{if(u=r.current.alternate,w&&!Xx(u)){y=mg(r,a,!1),w=!1;continue}if(y===2){if(w=a,r.errorRecoveryDisabledLanes&w)var V=0;else V=r.pendingLanes&-536870913,V=V!==0?V:V&536870912?536870912:0;if(V!==0){a=V;e:{var Z=r;y=qc;var re=Z.current.memoizedState.isDehydrated;if(re&&(Ou(Z,V).flags|=256),V=mg(Z,V,!1),V!==2){if(ag&&!re){Z.errorRecoveryDisabledLanes|=w,Ol|=w,y=4;break e}w=tr,tr=y,w!==null&&(tr===null?tr=w:tr.push.apply(tr,w))}y=V}if(w=!1,y!==2)continue}}if(y===1){Ou(r,0),xo(r,a,0,!0);break}e:{switch(d=r,w=y,w){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:xo(d,a,Wr,!wo);break e;case 2:tr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(y=ug+300-Le(),10<y)){if(xo(d,a,Wr,!wo),Lr(d,0,!0)!==0)break e;d.timeoutHandle=sE(N1.bind(null,d,u,tr,Zd,lg,a,Wr,Ol,Iu,wo,w,2,-0,0),y);break e}N1(d,u,tr,Zd,lg,a,Wr,Ol,Iu,wo,w,0,-0,0)}}break}while(!0);Gs(r)}function N1(r,a,u,d,y,w,V,Z,re,ge,Ae,Ce,_e,ve){if(r.timeoutHandle=-1,Ce=a.subtreeFlags,(Ce&8192||(Ce&16785408)===16785408)&&(Xc={stylesheets:null,count:0,unsuspend:PC},A1(a),Ce=DC(),Ce!==null)){r.cancelPendingCommit=Ce(V1.bind(null,r,a,w,u,d,y,V,Z,re,Ae,1,_e,ve)),xo(r,w,V,!ge);return}V1(r,a,w,u,d,y,V,Z,re)}function Xx(r){for(var a=r;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var y=u[d],w=y.getSnapshot;y=y.value;try{if(!Ui(w(),y))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function xo(r,a,u,d){a&=~og,a&=~Ol,r.suspendedLanes|=a,r.pingedLanes&=~a,d&&(r.warmLanes|=a),d=r.expirationTimes;for(var y=a;0<y;){var w=31-qt(y),V=1<<w;d[w]=-1,y&=~V}u!==0&&Kn(r,u,a)}function Kd(){return(Qt&6)===0?(Zc(0),!1):!0}function fg(){if(Ct!==null){if(Wt===0)var r=Ct.return;else r=Ct,gs=Yr=null,km(r),Au=null,Lc=0,r=Ct;for(;r!==null;)c1(r.alternate,r),r=r.return;Ct=null}}function Ou(r,a){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,gC(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),fg(),fn=r,Ct=u=$r(r.current,null),Lt=a,Wt=0,Cr=null,wo=!1,Ru=Li(r,a),ag=!1,Iu=Wr=og=Ol=To=Rn=0,tr=qc=null,lg=!1,(a&8)!==0&&(a|=a&32);var d=r.entangledLanes;if(d!==0)for(r=r.entanglements,d&=a;0<d;){var y=31-qt(d),w=1<<y;a|=r[y],d&=~w}return xa=a,El(),u}function O1(r,a){wt=null,U.H=Md,a===Cc||a===Ad?(a=Yy(),Wt=3):a===Zy?(a=Yy(),Wt=4):Wt=a===Q0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Cr=a,Ct===null&&(Rn=1,Ud(r,Fi(a,r.current)))}function P1(){var r=U.H;return U.H=Md,r===null?Md:r}function M1(){var r=U.A;return U.A=Qx,r}function pg(){Rn=4,wo||(Lt&4194048)!==Lt&&Qr.current!==null||(Ru=!0),(To&134217727)===0&&(Ol&134217727)===0||fn===null||xo(fn,Lt,Wr,!1)}function mg(r,a,u){var d=Qt;Qt|=2;var y=P1(),w=M1();(fn!==r||Lt!==a)&&(Zd=null,Ou(r,a)),a=!1;var V=Rn;e:do try{if(Wt!==0&&Ct!==null){var Z=Ct,re=Cr;switch(Wt){case 8:fg(),V=6;break e;case 3:case 2:case 9:case 6:Qr.current===null&&(a=!0);var ge=Wt;if(Wt=0,Cr=null,Pu(r,Z,re,ge),u&&Ru){V=0;break e}break;default:ge=Wt,Wt=0,Cr=null,Pu(r,Z,re,ge)}}Jx(),V=Rn;break}catch(Ae){O1(r,Ae)}while(!0);return a&&r.shellSuspendCounter++,gs=Yr=null,Qt=d,U.H=y,U.A=w,Ct===null&&(fn=null,Lt=0,El()),V}function Jx(){for(;Ct!==null;)D1(Ct)}function eC(r,a){var u=Qt;Qt|=2;var d=P1(),y=M1();fn!==r||Lt!==a?(Zd=null,Gd=Le()+500,Ou(r,a)):Ru=Li(r,a);e:do try{if(Wt!==0&&Ct!==null){a=Ct;var w=Cr;t:switch(Wt){case 1:Wt=0,Cr=null,Pu(r,a,w,1);break;case 2:case 9:if(Ky(w)){Wt=0,Cr=null,L1(a);break}a=function(){Wt!==2&&Wt!==9||fn!==r||(Wt=7),Gs(r)},w.then(a,a);break e;case 3:Wt=7;break e;case 4:Wt=5;break e;case 7:Ky(w)?(Wt=0,Cr=null,L1(a)):(Wt=0,Cr=null,Pu(r,a,w,7));break;case 5:var V=null;switch(Ct.tag){case 26:V=Ct.memoizedState;case 5:case 27:var Z=Ct;if(!V||_E(V)){Wt=0,Cr=null;var re=Z.sibling;if(re!==null)Ct=re;else{var ge=Z.return;ge!==null?(Ct=ge,$d(ge)):Ct=null}break t}}Wt=0,Cr=null,Pu(r,a,w,5);break;case 6:Wt=0,Cr=null,Pu(r,a,w,6);break;case 8:fg(),Rn=6;break e;default:throw Error(i(462))}}tC();break}catch(Ae){O1(r,Ae)}while(!0);return gs=Yr=null,U.H=d,U.A=y,Qt=u,Ct!==null?0:(fn=null,Lt=0,El(),Rn)}function tC(){for(;Ct!==null&&!Ne();)D1(Ct)}function D1(r){var a=l1(r.alternate,r,xa);r.memoizedProps=r.pendingProps,a===null?$d(r):Ct=a}function L1(r){var a=r,u=a.alternate;switch(a.tag){case 15:case 0:a=n1(u,a,a.pendingProps,a.type,void 0,Lt);break;case 11:a=n1(u,a,a.pendingProps,a.type.render,a.ref,Lt);break;case 5:km(a);default:c1(u,a),a=Ct=Tc(a,xa),a=l1(u,a,xa)}r.memoizedProps=r.pendingProps,a===null?$d(r):Ct=a}function Pu(r,a,u,d){gs=Yr=null,km(a),Au=null,Lc=0;var y=a.return;try{if(qx(r,y,a,u,Lt)){Rn=1,Ud(r,Fi(u,r.current)),Ct=null;return}}catch(w){if(y!==null)throw Ct=y,w;Rn=1,Ud(r,Fi(u,r.current)),Ct=null;return}a.flags&32768?(ct||d===1?r=!0:Ru||(Lt&536870912)!==0?r=!1:(wo=r=!0,(d===2||d===9||d===3||d===6)&&(d=Qr.current,d!==null&&d.tag===13&&(d.flags|=16384))),j1(a,r)):$d(a)}function $d(r){var a=r;do{if((a.flags&32768)!==0){j1(a,wo);return}r=a.return;var u=Zx(a.alternate,a,xa);if(u!==null){Ct=u;return}if(a=a.sibling,a!==null){Ct=a;return}Ct=a=r}while(a!==null);Rn===0&&(Rn=5)}function j1(r,a){do{var u=Kx(r.alternate,r);if(u!==null){u.flags&=32767,Ct=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(r=r.sibling,r!==null)){Ct=r;return}Ct=r=u}while(r!==null);Rn=6,Ct=null}function V1(r,a,u,d,y,w,V,Z,re){r.cancelPendingCommit=null;do Yd();while(fi!==0);if((Qt&6)!==0)throw Error(i(327));if(a!==null){if(a===r.current)throw Error(i(177));if(w=a.lanes|a.childLanes,w|=Ar,yi(r,u,w,V,Z,re),r===fn&&(Ct=fn=null,Lt=0),ku=a,So=r,Nu=u,cg=w,hg=y,R1=d,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,sC(_t,function(){return H1(),null})):(r.callbackNode=null,r.callbackPriority=0),d=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||d){d=U.T,U.T=null,y=F.p,F.p=2,V=Qt,Qt|=4;try{$x(r,a,u)}finally{Qt=V,F.p=y,U.T=d}}fi=1,U1(),B1(),F1()}}function U1(){if(fi===1){fi=0;var r=So,a=ku,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=U.T,U.T=null;var d=F.p;F.p=2;var y=Qt;Qt|=4;try{b1(a,r);var w=Cg,V=_l(r.containerInfo),Z=w.focusedElem,re=w.selectionRange;if(V!==Z&&Z&&Z.ownerDocument&&cu(Z.ownerDocument.documentElement,Z)){if(re!==null&&vl(Z)){var ge=re.start,Ae=re.end;if(Ae===void 0&&(Ae=ge),"selectionStart"in Z)Z.selectionStart=ge,Z.selectionEnd=Math.min(Ae,Z.value.length);else{var Ce=Z.ownerDocument||document,_e=Ce&&Ce.defaultView||window;if(_e.getSelection){var ve=_e.getSelection(),ut=Z.textContent.length,nt=Math.min(re.start,ut),rn=re.end===void 0?nt:Math.min(re.end,ut);!ve.extend&&nt>rn&&(V=rn,rn=nt,nt=V);var de=bc(Z,nt),ce=bc(Z,rn);if(de&&ce&&(ve.rangeCount!==1||ve.anchorNode!==de.node||ve.anchorOffset!==de.offset||ve.focusNode!==ce.node||ve.focusOffset!==ce.offset)){var me=Ce.createRange();me.setStart(de.node,de.offset),ve.removeAllRanges(),nt>rn?(ve.addRange(me),ve.extend(ce.node,ce.offset)):(me.setEnd(ce.node,ce.offset),ve.addRange(me))}}}}for(Ce=[],ve=Z;ve=ve.parentNode;)ve.nodeType===1&&Ce.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof Z.focus=="function"&&Z.focus(),Z=0;Z<Ce.length;Z++){var xe=Ce[Z];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}lf=!!xg,Cg=xg=null}finally{Qt=y,F.p=d,U.T=u}}r.current=a,fi=2}}function B1(){if(fi===2){fi=0;var r=So,a=ku,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=U.T,U.T=null;var d=F.p;F.p=2;var y=Qt;Qt|=4;try{_1(r,a.alternate,a)}finally{Qt=y,F.p=d,U.T=u}}fi=3}}function F1(){if(fi===4||fi===3){fi=0,Oe();var r=So,a=ku,u=Nu,d=R1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?fi=5:(fi=0,ku=So=null,z1(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(Ao=null),Ei(u),a=a.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(Je,a,void 0,(a.current.flags&128)===128)}catch{}if(d!==null){a=U.T,y=F.p,F.p=2,U.T=null;try{for(var w=r.onRecoverableError,V=0;V<d.length;V++){var Z=d[V];w(Z.value,{componentStack:Z.stack})}}finally{U.T=a,F.p=y}}(Nu&3)!==0&&Yd(),Gs(r),y=r.pendingLanes,(u&4194090)!==0&&(y&42)!==0?r===dg?Gc++:(Gc=0,dg=r):Gc=0,Zc(0)}}function z1(r,a){(r.pooledCacheLanes&=a)===0&&(a=r.pooledCache,a!=null&&(r.pooledCache=null,Sc(a)))}function Yd(r){return U1(),B1(),F1(),H1()}function H1(){if(fi!==5)return!1;var r=So,a=cg;cg=0;var u=Ei(Nu),d=U.T,y=F.p;try{F.p=32>u?32:u,U.T=null,u=hg,hg=null;var w=So,V=Nu;if(fi=0,ku=So=null,Nu=0,(Qt&6)!==0)throw Error(i(331));var Z=Qt;if(Qt|=4,x1(w.current),T1(w,w.current,V,u),Qt=Z,Zc(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(Je,w)}catch{}return!0}finally{F.p=y,U.T=d,z1(r,a)}}function q1(r,a,u){a=Fi(u,a),a=qm(r.stateNode,a,2),r=mo(r,a,2),r!==null&&(Mn(r,2),Gs(r))}function an(r,a,u){if(r.tag===3)q1(r,r,u);else for(;a!==null;){if(a.tag===3){q1(a,r,u);break}else if(a.tag===1){var d=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ao===null||!Ao.has(d))){r=Fi(u,r),u=$0(2),d=mo(a,u,2),d!==null&&(Y0(u,d,a,r),Mn(d,2),Gs(d));break}}a=a.return}}function gg(r,a,u){var d=r.pingCache;if(d===null){d=r.pingCache=new Wx;var y=new Set;d.set(a,y)}else y=d.get(a),y===void 0&&(y=new Set,d.set(a,y));y.has(u)||(ag=!0,y.add(u),r=nC.bind(null,r,a,u),a.then(r,r))}function nC(r,a,u){var d=r.pingCache;d!==null&&d.delete(a),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,fn===r&&(Lt&u)===u&&(Rn===4||Rn===3&&(Lt&62914560)===Lt&&300>Le()-ug?(Qt&2)===0&&Ou(r,0):og|=u,Iu===Lt&&(Iu=0)),Gs(r)}function G1(r,a){a===0&&(a=Ki()),r=lo(r,a),r!==null&&(Mn(r,a),Gs(r))}function iC(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),G1(r,u)}function rC(r,a){var u=0;switch(r.tag){case 13:var d=r.stateNode,y=r.memoizedState;y!==null&&(u=y.retryLane);break;case 19:d=r.stateNode;break;case 22:d=r.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(a),G1(r,u)}function sC(r,a){return Et(r,a)}var Qd=null,Mu=null,_g=!1,Wd=!1,vg=!1,Pl=0;function Gs(r){r!==Mu&&r.next===null&&(Mu===null?Qd=Mu=r:Mu=Mu.next=r),Wd=!0,_g||(_g=!0,oC())}function Zc(r,a){if(!vg&&Wd){vg=!0;do for(var u=!1,d=Qd;d!==null;){if(r!==0){var y=d.pendingLanes;if(y===0)var w=0;else{var V=d.suspendedLanes,Z=d.pingedLanes;w=(1<<31-qt(42|r)+1)-1,w&=y&~(V&~Z),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(u=!0,Y1(d,w))}else w=Lt,w=Lr(d,d===fn?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Li(d,w)||(u=!0,Y1(d,w));d=d.next}while(u);vg=!1}}function aC(){Z1()}function Z1(){Wd=_g=!1;var r=0;Pl!==0&&(mC()&&(r=Pl),Pl=0);for(var a=Le(),u=null,d=Qd;d!==null;){var y=d.next,w=K1(d,a);w===0?(d.next=null,u===null?Qd=y:u.next=y,y===null&&(Mu=u)):(u=d,(r!==0||(w&3)!==0)&&(Wd=!0)),d=y}Zc(r)}function K1(r,a){for(var u=r.suspendedLanes,d=r.pingedLanes,y=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var V=31-qt(w),Z=1<<V,re=y[V];re===-1?((Z&u)===0||(Z&d)!==0)&&(y[V]=is(Z,a)):re<=a&&(r.expiredLanes|=Z),w&=~Z}if(a=fn,u=Lt,u=Lr(r,r===a?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d=r.callbackNode,u===0||r===a&&(Wt===2||Wt===9)||r.cancelPendingCommit!==null)return d!==null&&d!==null&&be(d),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Li(r,u)){if(a=u&-u,a===r.callbackPriority)return a;switch(d!==null&&be(d),Ei(u)){case 2:case 8:u=it;break;case 32:u=_t;break;case 268435456:u=kt;break;default:u=_t}return d=$1.bind(null,r),u=Et(u,d),r.callbackPriority=a,r.callbackNode=u,a}return d!==null&&d!==null&&be(d),r.callbackPriority=2,r.callbackNode=null,2}function $1(r,a){if(fi!==0&&fi!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Yd()&&r.callbackNode!==u)return null;var d=Lt;return d=Lr(r,r===fn?d:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),d===0?null:(k1(r,d,a),K1(r,Le()),r.callbackNode!=null&&r.callbackNode===u?$1.bind(null,r):null)}function Y1(r,a){if(Yd())return null;k1(r,a,!0)}function oC(){_C(function(){(Qt&6)!==0?Et(Qe,aC):Z1()})}function yg(){return Pl===0&&(Pl=Is()),Pl}function Q1(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Ds(""+r)}function W1(r,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,r.id&&u.setAttribute("form",r.id),a.parentNode.insertBefore(u,a),r=new FormData(r),u.parentNode.removeChild(u),r}function lC(r,a,u,d,y){if(a==="submit"&&u&&u.stateNode===y){var w=Q1((y[xn]||null).action),V=d.submitter;V&&(a=(a=V[xn]||null)?Q1(a.formAction):V.getAttribute("formAction"),a!==null&&(w=a,V=null));var Z=new ca("action","action",null,d,y);r.push({event:Z,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Pl!==0){var re=V?W1(y,V):new FormData(y);Um(u,{pending:!0,data:re,method:y.method,action:w},null,re)}}else typeof w=="function"&&(Z.preventDefault(),re=V?W1(y,V):new FormData(y),Um(u,{pending:!0,data:re,method:y.method,action:w},w,re))},currentTarget:y}]})}}for(var Eg=0;Eg<ma.length;Eg++){var bg=ma[Eg],uC=bg.toLowerCase(),cC=bg[0].toUpperCase()+bg.slice(1);Tr(uC,"on"+cC)}Tr(md,"onAnimationEnd"),Tr(wr,"onAnimationIteration"),Tr(yl,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(pm,"onTransitionRun"),Tr(pu,"onTransitionStart"),Tr(mm,"onTransitionCancel"),Tr(wc,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kc));function X1(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var d=r[u],y=d.event;d=d.listeners;e:{var w=void 0;if(a)for(var V=d.length-1;0<=V;V--){var Z=d[V],re=Z.instance,ge=Z.currentTarget;if(Z=Z.listener,re!==w&&y.isPropagationStopped())break e;w=Z,y.currentTarget=ge;try{w(y)}catch(Ae){Vd(Ae)}y.currentTarget=null,w=re}else for(V=0;V<d.length;V++){if(Z=d[V],re=Z.instance,ge=Z.currentTarget,Z=Z.listener,re!==w&&y.isPropagationStopped())break e;w=Z,y.currentTarget=ge;try{w(y)}catch(Ae){Vd(Ae)}y.currentTarget=null,w=re}}}}function Rt(r,a){var u=a[bi];u===void 0&&(u=a[bi]=new Set);var d=r+"__bubble";u.has(d)||(J1(a,r,2,!1),u.add(d))}function wg(r,a,u){var d=0;a&&(d|=4),J1(u,r,d,a)}var Xd="_reactListening"+Math.random().toString(36).slice(2);function Tg(r){if(!r[Xd]){r[Xd]=!0,ol.forEach(function(u){u!=="selectionchange"&&(hC.has(u)||wg(u,!1,r),wg(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Xd]||(a[Xd]=!0,wg("selectionchange",!1,a))}}function J1(r,a,u,d){switch(TE(a)){case 2:var y=VC;break;case 8:y=UC;break;default:y=jg}u=y.bind(null,a,u,r),y=void 0,!wi||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),d?y!==void 0?r.addEventListener(a,u,{capture:!0,passive:y}):r.addEventListener(a,u,!0):y!==void 0?r.addEventListener(a,u,{passive:y}):r.addEventListener(a,u,!1)}function Ag(r,a,u,d,y){var w=d;if((a&1)===0&&(a&2)===0&&d!==null)e:for(;;){if(d===null)return;var V=d.tag;if(V===3||V===4){var Z=d.stateNode.containerInfo;if(Z===y)break;if(V===4)for(V=d.return;V!==null;){var re=V.tag;if((re===3||re===4)&&V.stateNode.containerInfo===y)return;V=V.return}for(;Z!==null;){if(V=dr(Z),V===null)return;if(re=V.tag,re===5||re===6||re===26||re===27){d=w=V;continue e}Z=Z.parentNode}}d=d.return}Vi(function(){var ge=w,Ae=hi(u),Ce=[];e:{var _e=gd.get(r);if(_e!==void 0){var ve=ca,ut=r;switch(r){case"keypress":if(en(u)===0)break e;case"keydown":case"keyup":ve=Ja;break;case"focusin":ut="focus",ve=$a;break;case"focusout":ut="blur",ve=$a;break;case"beforeblur":case"afterblur":ve=$a;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=ii;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=au;break;case md:case wr:case yl:ve=Qa;break;case wc:ve=ou;break;case"scroll":case"scrollend":ve=ru;break;case"wheel":ve=fa;break;case"copy":case"cut":case"paste":ve=Ls;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=eo;break;case"toggle":case"beforetoggle":ve=qr}var nt=(a&4)!==0,rn=!nt&&(r==="scroll"||r==="scrollend"),de=nt?_e!==null?_e+"Capture":null:_e;nt=[];for(var ce=ge,me;ce!==null;){var xe=ce;if(me=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||me===null||de===null||(xe=Dt(ce,de),xe!=null&&nt.push($c(ce,xe,me))),rn)break;ce=ce.return}0<nt.length&&(_e=new ve(_e,ut,null,u,Ae),Ce.push({event:_e,listeners:nt}))}}if((a&7)===0){e:{if(_e=r==="mouseover"||r==="pointerover",ve=r==="mouseout"||r==="pointerout",_e&&u!==_r&&(ut=u.relatedTarget||u.fromElement)&&(dr(ut)||ut[Yi]))break e;if((ve||_e)&&(_e=Ae.window===Ae?Ae:(_e=Ae.ownerDocument)?_e.defaultView||_e.parentWindow:window,ve?(ut=u.relatedTarget||u.toElement,ve=ge,ut=ut?dr(ut):null,ut!==null&&(rn=l(ut),nt=ut.tag,ut!==rn||nt!==5&&nt!==27&&nt!==6)&&(ut=null)):(ve=null,ut=ge),ve!==ut)){if(nt=ii,xe="onMouseLeave",de="onMouseEnter",ce="mouse",(r==="pointerout"||r==="pointerover")&&(nt=eo,xe="onPointerLeave",de="onPointerEnter",ce="pointer"),rn=ve==null?_e:ui(ve),me=ut==null?_e:ui(ut),_e=new nt(xe,ce+"leave",ve,u,Ae),_e.target=rn,_e.relatedTarget=me,xe=null,dr(Ae)===ge&&(nt=new nt(de,ce+"enter",ut,u,Ae),nt.target=me,nt.relatedTarget=rn,xe=nt),rn=xe,ve&&ut)t:{for(nt=ve,de=ut,ce=0,me=nt;me;me=Du(me))ce++;for(me=0,xe=de;xe;xe=Du(xe))me++;for(;0<ce-me;)nt=Du(nt),ce--;for(;0<me-ce;)de=Du(de),me--;for(;ce--;){if(nt===de||de!==null&&nt===de.alternate)break t;nt=Du(nt),de=Du(de)}nt=null}else nt=null;ve!==null&&eE(Ce,_e,ve,nt,!1),ut!==null&&rn!==null&&eE(Ce,rn,ut,nt,!0)}}e:{if(_e=ge?ui(ge):window,ve=_e.nodeName&&_e.nodeName.toLowerCase(),ve==="select"||ve==="input"&&_e.type==="file")var He=no;else if(hn(_e))if(vc)He=fm;else{He=dm;var St=Ec}else ve=_e.nodeName,!ve||ve.toLowerCase()!=="input"||_e.type!=="checkbox"&&_e.type!=="radio"?ge&&ua(ge.elementType)&&(He=no):He=ms;if(He&&(He=He(r,ge))){fs(Ce,He,u,Ae);break e}St&&St(r,_e,ge),r==="focusout"&&ge&&_e.type==="number"&&ge.memoizedProps.value!=null&&mr(_e,"number",_e.value)}switch(St=ge?ui(ge):window,r){case"focusin":(hn(St)||St.contentEditable==="true")&&(br=St,so=ge,pa=null);break;case"focusout":pa=so=br=null;break;case"mousedown":du=!0;break;case"contextmenu":case"mouseup":case"dragend":du=!1,fd(Ce,u,Ae);break;case"selectionchange":if(hu)break;case"keydown":case"keyup":fd(Ce,u,Ae)}var Ye;if(Si)e:{switch(r){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Nt?we(r,u)&&(st="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(st="onCompositionStart");st&&(P&&u.locale!=="ko"&&(Nt||st!=="onCompositionStart"?st==="onCompositionEnd"&&Nt&&(Ye=us()):(Wi=Ae,Ti="value"in Wi?Wi.value:Wi.textContent,Nt=!0)),St=Jd(ge,st),0<St.length&&(st=new Ai(st,r,null,u,Ae),Ce.push({event:st,listeners:St}),Ye?st.data=Ye:(Ye=Pe(u),Ye!==null&&(st.data=Ye)))),(Ye=R?Cn(r,u):Ot(r,u))&&(st=Jd(ge,"onBeforeInput"),0<st.length&&(St=new Ai("onBeforeInput","beforeinput",null,u,Ae),Ce.push({event:St,listeners:st}),St.data=Ye)),lC(Ce,r,ge,u,Ae)}X1(Ce,a)})}function $c(r,a,u){return{instance:r,listener:a,currentTarget:u}}function Jd(r,a){for(var u=a+"Capture",d=[];r!==null;){var y=r,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Dt(r,u),y!=null&&d.unshift($c(r,y,w)),y=Dt(r,a),y!=null&&d.push($c(r,y,w))),r.tag===3)return d;r=r.return}return[]}function Du(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function eE(r,a,u,d,y){for(var w=a._reactName,V=[];u!==null&&u!==d;){var Z=u,re=Z.alternate,ge=Z.stateNode;if(Z=Z.tag,re!==null&&re===d)break;Z!==5&&Z!==26&&Z!==27||ge===null||(re=ge,y?(ge=Dt(u,w),ge!=null&&V.unshift($c(u,ge,re))):y||(ge=Dt(u,w),ge!=null&&V.push($c(u,ge,re)))),u=u.return}V.length!==0&&r.push({event:a,listeners:V})}var dC=/\r\n?/g,fC=/\u0000|\uFFFD/g;function tE(r){return(typeof r=="string"?r:""+r).replace(dC,`
`).replace(fC,"")}function nE(r,a){return a=tE(a),tE(r)===a}function ef(){}function nn(r,a,u,d,y,w){switch(u){case"children":typeof d=="string"?a==="body"||a==="textarea"&&d===""||ti(r,d):(typeof d=="number"||typeof d=="bigint")&&a!=="body"&&ti(r,""+d);break;case"className":Vr(r,"class",d);break;case"tabIndex":Vr(r,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Vr(r,u,d);break;case"style":os(r,d,w);break;case"data":if(a!=="object"){Vr(r,"data",d);break}case"src":case"href":if(d===""&&(a!=="a"||u!=="href")){r.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=Ds(""+d),r.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(u==="formAction"?(a!=="input"&&nn(r,a,"name",y.name,y,null),nn(r,a,"formEncType",y.formEncType,y,null),nn(r,a,"formMethod",y.formMethod,y,null),nn(r,a,"formTarget",y.formTarget,y,null)):(nn(r,a,"encType",y.encType,y,null),nn(r,a,"method",y.method,y,null),nn(r,a,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){r.removeAttribute(u);break}d=Ds(""+d),r.setAttribute(u,d);break;case"onClick":d!=null&&(r.onclick=ef);break;case"onScroll":d!=null&&Rt("scroll",r);break;case"onScrollEnd":d!=null&&Rt("scrollend",r);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":r.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){r.removeAttribute("xlink:href");break}u=Ds(""+d),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""+d):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":d===!0?r.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?r.setAttribute(u,d):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?r.setAttribute(u,d):r.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?r.removeAttribute(u):r.setAttribute(u,d);break;case"popover":Rt("beforetoggle",r),Rt("toggle",r),Ns(r,"popover",d);break;case"xlinkActuate":$n(r,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":$n(r,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":$n(r,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":$n(r,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":$n(r,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":$n(r,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":$n(r,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":$n(r,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":$n(r,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Ns(r,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=ul.get(u)||u,Ns(r,u,d))}}function Sg(r,a,u,d,y,w){switch(u){case"style":os(r,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof d=="string"?ti(r,d):(typeof d=="number"||typeof d=="bigint")&&ti(r,""+d);break;case"onScroll":d!=null&&Rt("scroll",r);break;case"onScrollEnd":d!=null&&Rt("scrollend",r);break;case"onClick":d!=null&&(r.onclick=ef);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qa.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),a=u.slice(2,y?u.length-7:void 0),w=r[xn]||null,w=w!=null?w[u]:null,typeof w=="function"&&r.removeEventListener(a,w,y),typeof d=="function")){typeof w!="function"&&w!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(a,d,y);break e}u in r?r[u]=d:d===!0?r.setAttribute(u,""):Ns(r,u,d)}}}function pi(r,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",r),Rt("load",r);var d=!1,y=!1,w;for(w in u)if(u.hasOwnProperty(w)){var V=u[w];if(V!=null)switch(w){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:nn(r,a,w,V,u,null)}}y&&nn(r,a,"srcSet",u.srcSet,u,null),d&&nn(r,a,"src",u.src,u,null);return;case"input":Rt("invalid",r);var Z=w=V=y=null,re=null,ge=null;for(d in u)if(u.hasOwnProperty(d)){var Ae=u[d];if(Ae!=null)switch(d){case"name":y=Ae;break;case"type":V=Ae;break;case"checked":re=Ae;break;case"defaultChecked":ge=Ae;break;case"value":w=Ae;break;case"defaultValue":Z=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,a));break;default:nn(r,a,d,Ae,u,null)}}la(r,w,Z,re,ge,V,y,!1),Ms(r);return;case"select":Rt("invalid",r),d=V=w=null;for(y in u)if(u.hasOwnProperty(y)&&(Z=u[y],Z!=null))switch(y){case"value":w=Z;break;case"defaultValue":V=Z;break;case"multiple":d=Z;default:nn(r,a,y,Z,u,null)}a=w,u=V,r.multiple=!!d,a!=null?ci(r,!!d,a,!1):u!=null&&ci(r,!!d,u,!0);return;case"textarea":Rt("invalid",r),w=y=d=null;for(V in u)if(u.hasOwnProperty(V)&&(Z=u[V],Z!=null))switch(V){case"value":d=Z;break;case"defaultValue":y=Z;break;case"children":w=Z;break;case"dangerouslySetInnerHTML":if(Z!=null)throw Error(i(91));break;default:nn(r,a,V,Z,u,null)}ji(r,d,y,w),Ms(r);return;case"option":for(re in u)if(u.hasOwnProperty(re)&&(d=u[re],d!=null))switch(re){case"selected":r.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:nn(r,a,re,d,u,null)}return;case"dialog":Rt("beforetoggle",r),Rt("toggle",r),Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":Rt("load",r);break;case"video":case"audio":for(d=0;d<Kc.length;d++)Rt(Kc[d],r);break;case"image":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"embed":case"source":case"link":Rt("error",r),Rt("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in u)if(u.hasOwnProperty(ge)&&(d=u[ge],d!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:nn(r,a,ge,d,u,null)}return;default:if(ua(a)){for(Ae in u)u.hasOwnProperty(Ae)&&(d=u[Ae],d!==void 0&&Sg(r,a,Ae,d,u,void 0));return}}for(Z in u)u.hasOwnProperty(Z)&&(d=u[Z],d!=null&&nn(r,a,Z,d,u,null))}function pC(r,a,u,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,V=null,Z=null,re=null,ge=null,Ae=null;for(ve in u){var Ce=u[ve];if(u.hasOwnProperty(ve)&&Ce!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":re=Ce;default:d.hasOwnProperty(ve)||nn(r,a,ve,null,d,Ce)}}for(var _e in d){var ve=d[_e];if(Ce=u[_e],d.hasOwnProperty(_e)&&(ve!=null||Ce!=null))switch(_e){case"type":w=ve;break;case"name":y=ve;break;case"checked":ge=ve;break;case"defaultChecked":Ae=ve;break;case"value":V=ve;break;case"defaultValue":Z=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,a));break;default:ve!==Ce&&nn(r,a,_e,ve,d,Ce)}}cn(r,V,Z,re,ge,Ae,w,y);return;case"select":ve=V=Z=_e=null;for(w in u)if(re=u[w],u.hasOwnProperty(w)&&re!=null)switch(w){case"value":break;case"multiple":ve=re;default:d.hasOwnProperty(w)||nn(r,a,w,null,d,re)}for(y in d)if(w=d[y],re=u[y],d.hasOwnProperty(y)&&(w!=null||re!=null))switch(y){case"value":_e=w;break;case"defaultValue":Z=w;break;case"multiple":V=w;default:w!==re&&nn(r,a,y,w,d,re)}a=Z,u=V,d=ve,_e!=null?ci(r,!!u,_e,!1):!!d!=!!u&&(a!=null?ci(r,!!u,a,!0):ci(r,!!u,u?[]:"",!1));return;case"textarea":ve=_e=null;for(Z in u)if(y=u[Z],u.hasOwnProperty(Z)&&y!=null&&!d.hasOwnProperty(Z))switch(Z){case"value":break;case"children":break;default:nn(r,a,Z,null,d,y)}for(V in d)if(y=d[V],w=u[V],d.hasOwnProperty(V)&&(y!=null||w!=null))switch(V){case"value":_e=y;break;case"defaultValue":ve=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==w&&nn(r,a,V,y,d,w)}at(r,_e,ve);return;case"option":for(var ut in u)if(_e=u[ut],u.hasOwnProperty(ut)&&_e!=null&&!d.hasOwnProperty(ut))switch(ut){case"selected":r.selected=!1;break;default:nn(r,a,ut,null,d,_e)}for(re in d)if(_e=d[re],ve=u[re],d.hasOwnProperty(re)&&_e!==ve&&(_e!=null||ve!=null))switch(re){case"selected":r.selected=_e&&typeof _e!="function"&&typeof _e!="symbol";break;default:nn(r,a,re,_e,d,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in u)_e=u[nt],u.hasOwnProperty(nt)&&_e!=null&&!d.hasOwnProperty(nt)&&nn(r,a,nt,null,d,_e);for(ge in d)if(_e=d[ge],ve=u[ge],d.hasOwnProperty(ge)&&_e!==ve&&(_e!=null||ve!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(i(137,a));break;default:nn(r,a,ge,_e,d,ve)}return;default:if(ua(a)){for(var rn in u)_e=u[rn],u.hasOwnProperty(rn)&&_e!==void 0&&!d.hasOwnProperty(rn)&&Sg(r,a,rn,void 0,d,_e);for(Ae in d)_e=d[Ae],ve=u[Ae],!d.hasOwnProperty(Ae)||_e===ve||_e===void 0&&ve===void 0||Sg(r,a,Ae,_e,d,ve);return}}for(var de in u)_e=u[de],u.hasOwnProperty(de)&&_e!=null&&!d.hasOwnProperty(de)&&nn(r,a,de,null,d,_e);for(Ce in d)_e=d[Ce],ve=u[Ce],!d.hasOwnProperty(Ce)||_e===ve||_e==null&&ve==null||nn(r,a,Ce,_e,d,ve)}var xg=null,Cg=null;function tf(r){return r.nodeType===9?r:r.ownerDocument}function iE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rE(r,a){if(r===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&a==="foreignObject"?0:r}function Rg(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ig=null;function mC(){var r=window.event;return r&&r.type==="popstate"?r===Ig?!1:(Ig=r,!0):(Ig=null,!1)}var sE=typeof setTimeout=="function"?setTimeout:void 0,gC=typeof clearTimeout=="function"?clearTimeout:void 0,aE=typeof Promise=="function"?Promise:void 0,_C=typeof queueMicrotask=="function"?queueMicrotask:typeof aE<"u"?function(r){return aE.resolve(null).then(r).catch(vC)}:sE;function vC(r){setTimeout(function(){throw r})}function Co(r){return r==="head"}function oE(r,a){var u=a,d=0,y=0;do{var w=u.nextSibling;if(r.removeChild(u),w&&w.nodeType===8)if(u=w.data,u==="/$"){if(0<d&&8>d){u=d;var V=r.ownerDocument;if(u&1&&Yc(V.documentElement),u&2&&Yc(V.body),u&4)for(u=V.head,Yc(u),V=u.firstChild;V;){var Z=V.nextSibling,re=V.nodeName;V[ks]||re==="SCRIPT"||re==="STYLE"||re==="LINK"&&V.rel.toLowerCase()==="stylesheet"||u.removeChild(V),V=Z}}if(y===0){r.removeChild(w),ih(a);return}y--}else u==="$"||u==="$?"||u==="$!"?y++:d=u.charCodeAt(0)-48;else d=0;u=w}while(u);ih(a)}function kg(r){var a=r.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":kg(u),ss(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function yC(r,a,u,d){for(;r.nodeType===1;){var y=u;if(r.nodeName.toLowerCase()!==a.toLowerCase()){if(!d&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(d){if(!r[ks])switch(a){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(w=r.getAttribute("rel"),w==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(w!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(w=r.getAttribute("src"),(w!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(a==="input"&&r.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===w)return r}else return r;if(r=ys(r.nextSibling),r===null)break}return null}function EC(r,a,u){if(a==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=ys(r.nextSibling),r===null))return null;return r}function Ng(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function bC(r,a){var u=r.ownerDocument;if(r.data!=="$?"||u.readyState==="complete")a();else{var d=function(){a(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),r._reactRetry=d}}function ys(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return r}var Og=null;function lE(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return r;a--}else u==="/$"&&a++}r=r.previousSibling}return null}function uE(r,a,u){switch(a=tf(u),r){case"html":if(r=a.documentElement,!r)throw Error(i(452));return r;case"head":if(r=a.head,!r)throw Error(i(453));return r;case"body":if(r=a.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Yc(r){for(var a=r.attributes;a.length;)r.removeAttributeNode(a[0]);ss(r)}var Xr=new Map,cE=new Set;function nf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Ca=F.d;F.d={f:wC,r:TC,D:AC,C:SC,L:xC,m:CC,X:IC,S:RC,M:kC};function wC(){var r=Ca.f(),a=Kd();return r||a}function TC(r){var a=fr(r);a!==null&&a.tag===5&&a.type==="form"?k0(a):Ca.r(r)}var Lu=typeof document>"u"?null:document;function hE(r,a,u){var d=Lu;if(d&&typeof a=="string"&&a){var y=_n(a);y='link[rel="'+r+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),cE.has(y)||(cE.add(y),r={rel:r,crossOrigin:u,href:a},d.querySelector(y)===null&&(a=d.createElement("link"),pi(a,"link",r),bn(a),d.head.appendChild(a)))}}function AC(r){Ca.D(r),hE("dns-prefetch",r,null)}function SC(r,a){Ca.C(r,a),hE("preconnect",r,a)}function xC(r,a,u){Ca.L(r,a,u);var d=Lu;if(d&&r&&a){var y='link[rel="preload"][as="'+_n(a)+'"]';a==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+_n(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+_n(u.imageSizes)+'"]')):y+='[href="'+_n(r)+'"]';var w=y;switch(a){case"style":w=ju(r);break;case"script":w=Vu(r)}Xr.has(w)||(r=_({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:r,as:a},u),Xr.set(w,r),d.querySelector(y)!==null||a==="style"&&d.querySelector(Qc(w))||a==="script"&&d.querySelector(Wc(w))||(a=d.createElement("link"),pi(a,"link",r),bn(a),d.head.appendChild(a)))}}function CC(r,a){Ca.m(r,a);var u=Lu;if(u&&r){var d=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+_n(d)+'"][href="'+_n(r)+'"]',w=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Vu(r)}if(!Xr.has(w)&&(r=_({rel:"modulepreload",href:r},a),Xr.set(w,r),u.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Wc(w)))return}d=u.createElement("link"),pi(d,"link",r),bn(d),u.head.appendChild(d)}}}function RC(r,a,u){Ca.S(r,a,u);var d=Lu;if(d&&r){var y=ei(d).hoistableStyles,w=ju(r);a=a||"default";var V=y.get(w);if(!V){var Z={loading:0,preload:null};if(V=d.querySelector(Qc(w)))Z.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":a},u),(u=Xr.get(w))&&Pg(r,u);var re=V=d.createElement("link");bn(re),pi(re,"link",r),re._p=new Promise(function(ge,Ae){re.onload=ge,re.onerror=Ae}),re.addEventListener("load",function(){Z.loading|=1}),re.addEventListener("error",function(){Z.loading|=2}),Z.loading|=4,rf(V,a,d)}V={type:"stylesheet",instance:V,count:1,state:Z},y.set(w,V)}}}function IC(r,a){Ca.X(r,a);var u=Lu;if(u&&r){var d=ei(u).hoistableScripts,y=Vu(r),w=d.get(y);w||(w=u.querySelector(Wc(y)),w||(r=_({src:r,async:!0},a),(a=Xr.get(y))&&Mg(r,a),w=u.createElement("script"),bn(w),pi(w,"link",r),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(y,w))}}function kC(r,a){Ca.M(r,a);var u=Lu;if(u&&r){var d=ei(u).hoistableScripts,y=Vu(r),w=d.get(y);w||(w=u.querySelector(Wc(y)),w||(r=_({src:r,async:!0,type:"module"},a),(a=Xr.get(y))&&Mg(r,a),w=u.createElement("script"),bn(w),pi(w,"link",r),u.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(y,w))}}function dE(r,a,u,d){var y=(y=ye.current)?nf(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=ju(u.href),u=ei(y).hoistableStyles,d=u.get(a),d||(d={type:"style",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ju(u.href);var w=ei(y).hoistableStyles,V=w.get(r);if(V||(y=y.ownerDocument||y,V={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(r,V),(w=y.querySelector(Qc(r)))&&!w._p&&(V.instance=w,V.state.loading=5),Xr.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Xr.set(r,u),w||NC(y,r,u,V.state))),a&&d===null)throw Error(i(528,""));return V}if(a&&d!==null)throw Error(i(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Vu(u),u=ei(y).hoistableScripts,d=u.get(a),d||(d={type:"script",instance:null,count:0,state:null},u.set(a,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ju(r){return'href="'+_n(r)+'"'}function Qc(r){return'link[rel="stylesheet"]['+r+"]"}function fE(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function NC(r,a,u,d){r.querySelector('link[rel="preload"][as="style"]['+a+"]")?d.loading=1:(a=r.createElement("link"),d.preload=a,a.addEventListener("load",function(){return d.loading|=1}),a.addEventListener("error",function(){return d.loading|=2}),pi(a,"link",u),bn(a),r.head.appendChild(a))}function Vu(r){return'[src="'+_n(r)+'"]'}function Wc(r){return"script[async]"+r}function pE(r,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var d=r.querySelector('style[data-href~="'+_n(u.href)+'"]');if(d)return a.instance=d,bn(d),d;var y=_({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(r.ownerDocument||r).createElement("style"),bn(d),pi(d,"style",y),rf(d,u.precedence,r),a.instance=d;case"stylesheet":y=ju(u.href);var w=r.querySelector(Qc(y));if(w)return a.state.loading|=4,a.instance=w,bn(w),w;d=fE(u),(y=Xr.get(y))&&Pg(d,y),w=(r.ownerDocument||r).createElement("link"),bn(w);var V=w;return V._p=new Promise(function(Z,re){V.onload=Z,V.onerror=re}),pi(w,"link",d),a.state.loading|=4,rf(w,u.precedence,r),a.instance=w;case"script":return w=Vu(u.src),(y=r.querySelector(Wc(w)))?(a.instance=y,bn(y),y):(d=u,(y=Xr.get(w))&&(d=_({},u),Mg(d,y)),r=r.ownerDocument||r,y=r.createElement("script"),bn(y),pi(y,"link",d),r.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(d=a.instance,a.state.loading|=4,rf(d,u.precedence,r));return a.instance}function rf(r,a,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,w=y,V=0;V<d.length;V++){var Z=d[V];if(Z.dataset.precedence===a)w=Z;else if(w!==y)break}w?w.parentNode.insertBefore(r,w.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(r,a.firstChild))}function Pg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.title==null&&(r.title=a.title)}function Mg(r,a){r.crossOrigin==null&&(r.crossOrigin=a.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=a.referrerPolicy),r.integrity==null&&(r.integrity=a.integrity)}var sf=null;function mE(r,a,u){if(sf===null){var d=new Map,y=sf=new Map;y.set(u,d)}else y=sf,d=y.get(u),d||(d=new Map,y.set(u,d));if(d.has(r))return d;for(d.set(r,null),u=u.getElementsByTagName(r),y=0;y<u.length;y++){var w=u[y];if(!(w[ks]||w[Dn]||r==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var V=w.getAttribute(a)||"";V=r+V;var Z=d.get(V);Z?Z.push(w):d.set(V,[w])}}return d}function gE(r,a,u){r=r.ownerDocument||r,r.head.insertBefore(u,a==="title"?r.querySelector("head > title"):null)}function OC(r,a,u){if(u===1||a.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return r=a.disabled,typeof a.precedence=="string"&&r==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function _E(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Xc=null;function PC(){}function MC(r,a,u){if(Xc===null)throw Error(i(475));var d=Xc;if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=ju(u.href),w=r.querySelector(Qc(y));if(w){r=w._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(d.count++,d=af.bind(d),r.then(d,d)),a.state.loading|=4,a.instance=w,bn(w);return}w=r.ownerDocument||r,u=fE(u),(y=Xr.get(y))&&Pg(u,y),w=w.createElement("link"),bn(w);var V=w;V._p=new Promise(function(Z,re){V.onload=Z,V.onerror=re}),pi(w,"link",u),a.instance=w}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(d.count++,a=af.bind(d),r.addEventListener("load",a),r.addEventListener("error",a))}}function DC(){if(Xc===null)throw Error(i(475));var r=Xc;return r.stylesheets&&r.count===0&&Dg(r,r.stylesheets),0<r.count?function(a){var u=setTimeout(function(){if(r.stylesheets&&Dg(r,r.stylesheets),r.unsuspend){var d=r.unsuspend;r.unsuspend=null,d()}},6e4);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(u)}}:null}function af(){if(this.count--,this.count===0){if(this.stylesheets)Dg(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var of=null;function Dg(r,a){r.stylesheets=null,r.unsuspend!==null&&(r.count++,of=new Map,a.forEach(LC,r),of=null,af.call(r))}function LC(r,a){if(!(a.state.loading&4)){var u=of.get(r);if(u)var d=u.get(null);else{u=new Map,of.set(r,u);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var V=y[w];(V.nodeName==="LINK"||V.getAttribute("media")!=="not all")&&(u.set(V.dataset.precedence,V),d=V)}d&&u.set(null,d)}y=a.instance,V=y.getAttribute("data-precedence"),w=u.get(V)||d,w===d&&u.set(null,y),u.set(V,y),this.count++,d=af.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),w?w.parentNode.insertBefore(y,w.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),a.state.loading|=4}}var Jc={$$typeof:K,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function jC(r,a,u,d,y,w,V,Z){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$i(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$i(0),this.hiddenUpdates=$i(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=V,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function vE(r,a,u,d,y,w,V,Z,re,ge,Ae,Ce){return r=new jC(r,a,u,V,Z,re,ge,Ce),a=1,w===!0&&(a|=24),w=Hi(3,null,null,a),r.current=w,w.stateNode=r,a=gm(),a.refCount++,r.pooledCache=a,a.refCount++,w.memoizedState={element:d,isDehydrated:u,cache:a},Em(w),r}function yE(r){return r?(r=va,r):va}function EE(r,a,u,d,y,w){y=yE(y),d.context===null?d.context=y:d.pendingContext=y,d=po(a),d.payload={element:u},w=w===void 0?null:w,w!==null&&(d.callback=w),u=mo(r,d,a),u!==null&&(Ir(u,r,a),Ic(u,r,a))}function bE(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function Lg(r,a){bE(r,a),(r=r.alternate)&&bE(r,a)}function wE(r){if(r.tag===13){var a=lo(r,67108864);a!==null&&Ir(a,r,67108864),Lg(r,67108864)}}var lf=!0;function VC(r,a,u,d){var y=U.T;U.T=null;var w=F.p;try{F.p=2,jg(r,a,u,d)}finally{F.p=w,U.T=y}}function UC(r,a,u,d){var y=U.T;U.T=null;var w=F.p;try{F.p=8,jg(r,a,u,d)}finally{F.p=w,U.T=y}}function jg(r,a,u,d){if(lf){var y=Vg(d);if(y===null)Ag(r,a,d,uf,u),AE(r,d);else if(FC(y,r,a,u,d))d.stopPropagation();else if(AE(r,d),a&4&&-1<BC.indexOf(r)){for(;y!==null;){var w=fr(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var V=Sn(w.pendingLanes);if(V!==0){var Z=w;for(Z.pendingLanes|=2,Z.entangledLanes|=2;V;){var re=1<<31-qt(V);Z.entanglements[1]|=re,V&=~re}Gs(w),(Qt&6)===0&&(Gd=Le()+500,Zc(0))}}break;case 13:Z=lo(w,2),Z!==null&&Ir(Z,w,2),Kd(),Lg(w,2)}if(w=Vg(d),w===null&&Ag(r,a,d,uf,u),w===y)break;y=w}y!==null&&d.stopPropagation()}else Ag(r,a,d,null,u)}}function Vg(r){return r=hi(r),Ug(r)}var uf=null;function Ug(r){if(uf=null,r=dr(r),r!==null){var a=l(r);if(a===null)r=null;else{var u=a.tag;if(u===13){if(r=c(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null)}}return uf=r,null}function TE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Me()){case Qe:return 2;case it:return 8;case _t:case Vt:return 32;case kt:return 268435456;default:return 32}default:return 32}}var Bg=!1,Ro=null,Io=null,ko=null,eh=new Map,th=new Map,No=[],BC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function AE(r,a){switch(r){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":Io=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":eh.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":th.delete(a.pointerId)}}function nh(r,a,u,d,y,w){return r===null||r.nativeEvent!==w?(r={blockedOn:a,domEventName:u,eventSystemFlags:d,nativeEvent:w,targetContainers:[y]},a!==null&&(a=fr(a),a!==null&&wE(a)),r):(r.eventSystemFlags|=d,a=r.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),r)}function FC(r,a,u,d,y){switch(a){case"focusin":return Ro=nh(Ro,r,a,u,d,y),!0;case"dragenter":return Io=nh(Io,r,a,u,d,y),!0;case"mouseover":return ko=nh(ko,r,a,u,d,y),!0;case"pointerover":var w=y.pointerId;return eh.set(w,nh(eh.get(w)||null,r,a,u,d,y)),!0;case"gotpointercapture":return w=y.pointerId,th.set(w,nh(th.get(w)||null,r,a,u,d,y)),!0}return!1}function SE(r){var a=dr(r.target);if(a!==null){var u=l(a);if(u!==null){if(a=u.tag,a===13){if(a=c(u),a!==null){r.blockedOn=a,Ha(r.priority,function(){if(u.tag===13){var d=Rr();d=hr(d);var y=lo(u,d);y!==null&&Ir(y,u,d),Lg(u,d)}});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function cf(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=Vg(r.nativeEvent);if(u===null){u=r.nativeEvent;var d=new u.constructor(u.type,u);_r=d,u.target.dispatchEvent(d),_r=null}else return a=fr(u),a!==null&&wE(a),r.blockedOn=u,!1;a.shift()}return!0}function xE(r,a,u){cf(r)&&u.delete(a)}function zC(){Bg=!1,Ro!==null&&cf(Ro)&&(Ro=null),Io!==null&&cf(Io)&&(Io=null),ko!==null&&cf(ko)&&(ko=null),eh.forEach(xE),th.forEach(xE)}function hf(r,a){r.blockedOn===a&&(r.blockedOn=null,Bg||(Bg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zC)))}var df=null;function CE(r){df!==r&&(df=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){df===r&&(df=null);for(var a=0;a<r.length;a+=3){var u=r[a],d=r[a+1],y=r[a+2];if(typeof d!="function"){if(Ug(d||u)===null)continue;break}var w=fr(u);w!==null&&(r.splice(a,3),a-=3,Um(w,{pending:!0,data:y,method:u.method,action:d},d,y))}}))}function ih(r){function a(re){return hf(re,r)}Ro!==null&&hf(Ro,r),Io!==null&&hf(Io,r),ko!==null&&hf(ko,r),eh.forEach(a),th.forEach(a);for(var u=0;u<No.length;u++){var d=No[u];d.blockedOn===r&&(d.blockedOn=null)}for(;0<No.length&&(u=No[0],u.blockedOn===null);)SE(u),u.blockedOn===null&&No.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var y=u[d],w=u[d+1],V=y[xn]||null;if(typeof w=="function")V||CE(u);else if(V){var Z=null;if(w&&w.hasAttribute("formAction")){if(y=w,V=w[xn]||null)Z=V.formAction;else if(Ug(y)!==null)continue}else Z=V.action;typeof Z=="function"?u[d+1]=Z:(u.splice(d,3),d-=3),CE(u)}}}function Fg(r){this._internalRoot=r}ff.prototype.render=Fg.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(i(409));var u=a.current,d=Rr();EE(u,d,r,a,null,null)},ff.prototype.unmount=Fg.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;EE(r.current,2,null,r,null,null),Kd(),a[Yi]=null}};function ff(r){this._internalRoot=r}ff.prototype.unstable_scheduleHydration=function(r){if(r){var a=Jn();r={blockedOn:null,target:r,priority:a};for(var u=0;u<No.length&&a!==0&&a<No[u].priority;u++);No.splice(u,0,r),u===0&&SE(r)}};var RE=e.version;if(RE!=="19.1.0")throw Error(i(527,RE,"19.1.0"));F.findDOMNode=function(r){var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(a),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var HC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pf.isDisabled&&pf.supportsFiber)try{Je=pf.inject(HC),tt=pf}catch{}}return sh.createRoot=function(r,a){if(!s(r))throw Error(i(299));var u=!1,d="",y=q0,w=G0,V=Z0,Z=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(w=a.onCaughtError),a.onRecoverableError!==void 0&&(V=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(Z=a.unstable_transitionCallbacks)),a=vE(r,1,!1,null,null,u,d,y,w,V,Z,null),r[Yi]=a.current,Tg(r),new Fg(a)},sh.hydrateRoot=function(r,a,u){if(!s(r))throw Error(i(299));var d=!1,y="",w=q0,V=G0,Z=Z0,re=null,ge=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(w=u.onUncaughtError),u.onCaughtError!==void 0&&(V=u.onCaughtError),u.onRecoverableError!==void 0&&(Z=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(re=u.unstable_transitionCallbacks),u.formState!==void 0&&(ge=u.formState)),a=vE(r,1,!0,a,u??null,d,y,w,V,Z,re,ge),a.context=yE(null),u=a.current,d=Rr(),d=hr(d),y=po(d),y.callback=null,mo(u,y,d),u=d,a.current.lanes=u,Mn(a,u),Gs(a),r[Yi]=a.current,Tg(r),new ff(a)},sh.version="19.1.0",sh}var VE;function XC(){if(VE)return qg.exports;VE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),qg.exports=WC(),qg.exports}var JC=XC();const eR=zh(JC);var ah={},UE;function tR(){if(UE)return ah;UE=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.parse=c,ah.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const b=function(){};return b.prototype=Object.create(null),b})();function c(b,C){const I=new l,O=b.length;if(O<2)return I;const M=C?.decode||_;let z=0;do{const Y=b.indexOf("=",z);if(Y===-1)break;const K=b.indexOf(";",z),J=K===-1?O:K;if(Y>J){z=b.lastIndexOf(";",Y-1)+1;continue}const oe=f(b,z,Y),W=p(b,Y,oe),q=b.slice(oe,W);if(I[q]===void 0){let S=f(b,Y+1,J),x=p(b,J,S);const N=M(b.slice(S,x));I[q]=N}z=J+1}while(z<O);return I}function f(b,C,I){do{const O=b.charCodeAt(C);if(O!==32&&O!==9)return C}while(++C<I);return I}function p(b,C,I){for(;C>I;){const O=b.charCodeAt(--C);if(O!==32&&O!==9)return C+1}return I}function m(b,C,I){const O=I?.encode||encodeURIComponent;if(!n.test(b))throw new TypeError(`argument name is invalid: ${b}`);const M=O(C);if(!e.test(M))throw new TypeError(`argument val is invalid: ${C}`);let z=b+"="+M;if(!I)return z;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);z+="; Max-Age="+I.maxAge}if(I.domain){if(!t.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);z+="; Domain="+I.domain}if(I.path){if(!i.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);z+="; Path="+I.path}if(I.expires){if(!E(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);z+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(z+="; HttpOnly"),I.secure&&(z+="; Secure"),I.partitioned&&(z+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":z+="; Priority=Low";break;case"medium":z+="; Priority=Medium";break;case"high":z+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":z+="; SameSite=Strict";break;case"lax":z+="; SameSite=Lax";break;case"none":z+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return z}function _(b){if(b.indexOf("%")===-1)return b;try{return decodeURIComponent(b)}catch{return b}}function E(b){return s.call(b)==="[object Date]"}return ah}tR();var BE="popstate";function nR(n={}){function e(i,s){let{pathname:l,search:c,hash:f}=i.location;return b_("",{pathname:l,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Rh(s)}return rR(e,t,null,n)}function En(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ws(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iR(){return Math.random().toString(36).substring(2,10)}function FE(n,e){return{usr:n.state,key:n.key,idx:e}}function b_(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?rc(e):e,state:t,key:e&&e.key||i||iR()}}function Rh({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function rc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function rR(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:l=!1}=i,c=s.history,f="POP",p=null,m=_();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function _(){return(c.state||{idx:null}).idx}function E(){f="POP";let M=_(),z=M==null?null:M-m;m=M,p&&p({action:f,location:O.location,delta:z})}function b(M,z){f="PUSH";let Y=b_(O.location,M,z);m=_()+1;let K=FE(Y,m),J=O.createHref(Y);try{c.pushState(K,"",J)}catch(oe){if(oe instanceof DOMException&&oe.name==="DataCloneError")throw oe;s.location.assign(J)}l&&p&&p({action:f,location:O.location,delta:1})}function C(M,z){f="REPLACE";let Y=b_(O.location,M,z);m=_();let K=FE(Y,m),J=O.createHref(Y);c.replaceState(K,"",J),l&&p&&p({action:f,location:O.location,delta:0})}function I(M){return sR(M)}let O={get action(){return f},get location(){return n(s,c)},listen(M){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(BE,E),p=M,()=>{s.removeEventListener(BE,E),p=null}},createHref(M){return e(s,M)},createURL:I,encodeLocation(M){let z=I(M);return{pathname:z.pathname,search:z.search,hash:z.hash}},push:b,replace:C,go(M){return c.go(M)}};return O}function sR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),En(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Rh(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function cT(n,e,t="/"){return aR(n,e,t,!1)}function aR(n,e,t,i){let s=typeof e=="string"?rc(e):e,l=Ma(s.pathname||"/",t);if(l==null)return null;let c=hT(n);oR(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let m=vR(l);f=gR(c[p],m,i)}return f}function hT(n,e=[],t=[],i=""){let s=(l,c,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(En(p.relativePath.startsWith(i),`Absolute route path "${p.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(i.length));let m=Na([i,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(En(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),hT(l.children,e,_,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:pR(m,l.index),routesMeta:_})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))s(l,c);else for(let f of dT(l.path))s(l,c,f)}),e}function dT(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return s?[l,""]:[l];let c=dT(i.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),s&&f.push(...c),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function oR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:mR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var lR=/^:[\w-]+$/,uR=3,cR=2,hR=1,dR=10,fR=-2,zE=n=>n==="*";function pR(n,e){let t=n.split("/"),i=t.length;return t.some(zE)&&(i+=fR),e&&(i+=cR),t.filter(s=>!zE(s)).reduce((s,l)=>s+(lR.test(l)?uR:l===""?hR:dR),i)}function mR(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function gR(n,e,t=!1){let{routesMeta:i}=n,s={},l="/",c=[];for(let f=0;f<i.length;++f){let p=i[f],m=f===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=zf({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},_),b=p.route;if(!E&&m&&t&&!i[i.length-1].route.index&&(E=zf({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),c.push({params:s,pathname:Na([l,E.pathname]),pathnameBase:wR(Na([l,E.pathnameBase])),route:b}),E.pathnameBase!=="/"&&(l=Na([l,E.pathnameBase]))}return c}function zf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=_R(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],c=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:i.reduce((m,{paramName:_,isOptional:E},b)=>{if(_==="*"){let I=f[b]||"";c=l.slice(0,l.length-I.length).replace(/(.)\/+$/,"$1")}const C=f[b];return E&&!C?m[_]=void 0:m[_]=(C||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function _R(n,e=!1,t=!0){ws(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(i.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function vR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ws(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Ma(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function yR(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?rc(n):n;return{pathname:t?t.startsWith("/")?t:ER(t,e):e,search:TR(i),hash:AR(s)}}function ER(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function $g(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cv(n){let e=bR(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function hv(n,e,t,i=!1){let s;typeof n=="string"?s=rc(n):(s={...n},En(!s.pathname||!s.pathname.includes("?"),$g("?","pathname","search",s)),En(!s.pathname||!s.pathname.includes("#"),$g("#","pathname","hash",s)),En(!s.search||!s.search.includes("#"),$g("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),E-=1;s.pathname=b.join("/")}f=E>=0?e[E]:"/"}let p=yR(s,f),m=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||_)&&(p.pathname+="/"),p}var Na=n=>n.join("/").replace(/\/\/+/g,"/"),wR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),TR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,AR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function SR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var fT=["POST","PUT","PATCH","DELETE"];new Set(fT);var xR=["GET",...fT];new Set(xR);var sc=te.createContext(null);sc.displayName="DataRouter";var wp=te.createContext(null);wp.displayName="DataRouterState";var pT=te.createContext({isTransitioning:!1});pT.displayName="ViewTransition";var CR=te.createContext(new Map);CR.displayName="Fetchers";var RR=te.createContext(null);RR.displayName="Await";var Ss=te.createContext(null);Ss.displayName="Navigation";var Hh=te.createContext(null);Hh.displayName="Location";var xs=te.createContext({outlet:null,matches:[],isDataRoute:!1});xs.displayName="Route";var dv=te.createContext(null);dv.displayName="RouteError";function IR(n,{relative:e}={}){En(ac(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=te.useContext(Ss),{hash:s,pathname:l,search:c}=qh(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Na([t,l])),i.createHref({pathname:f,search:c,hash:s})}function ac(){return te.useContext(Hh)!=null}function Fa(){return En(ac(),"useLocation() may be used only in the context of a <Router> component."),te.useContext(Hh).location}var mT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gT(n){te.useContext(Ss).static||te.useLayoutEffect(n)}function oc(){let{isDataRoute:n}=te.useContext(xs);return n?qR():kR()}function kR(){En(ac(),"useNavigate() may be used only in the context of a <Router> component.");let n=te.useContext(sc),{basename:e,navigator:t}=te.useContext(Ss),{matches:i}=te.useContext(xs),{pathname:s}=Fa(),l=JSON.stringify(cv(i)),c=te.useRef(!1);return gT(()=>{c.current=!0}),te.useCallback((p,m={})=>{if(ws(c.current,mT),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=hv(p,JSON.parse(l),s,m.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Na([e,_.pathname])),(m.replace?t.replace:t.push)(_,m.state,m)},[e,t,l,s,n])}var NR=te.createContext(null);function OR(n){let e=te.useContext(xs).outlet;return e&&te.createElement(NR.Provider,{value:n},e)}function qh(n,{relative:e}={}){let{matches:t}=te.useContext(xs),{pathname:i}=Fa(),s=JSON.stringify(cv(t));return te.useMemo(()=>hv(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function PR(n,e){return _T(n,e)}function _T(n,e,t,i){En(ac(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=te.useContext(Ss),{matches:l}=te.useContext(xs),c=l[l.length-1],f=c?c.params:{},p=c?c.pathname:"/",m=c?c.pathnameBase:"/",_=c&&c.route;{let z=_&&_.path||"";vT(p,!_||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let E=Fa(),b;if(e){let z=typeof e=="string"?rc(e):e;En(m==="/"||z.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${z.pathname}" was given in the \`location\` prop.`),b=z}else b=E;let C=b.pathname||"/",I=C;if(m!=="/"){let z=m.replace(/^\//,"").split("/");I="/"+C.replace(/^\//,"").split("/").slice(z.length).join("/")}let O=cT(n,{pathname:I});ws(_||O!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),ws(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=VR(O&&O.map(z=>Object.assign({},z,{params:Object.assign({},f,z.params),pathname:Na([m,s.encodeLocation?s.encodeLocation(z.pathname).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?m:Na([m,s.encodeLocation?s.encodeLocation(z.pathnameBase).pathname:z.pathnameBase])})),l,t,i);return e&&M?te.createElement(Hh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},M):M}function MR(){let n=HR(),e=SR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=te.createElement(te.Fragment,null,te.createElement("p",null,"💿 Hey developer 👋"),te.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",te.createElement("code",{style:l},"ErrorBoundary")," or"," ",te.createElement("code",{style:l},"errorElement")," prop on your route.")),te.createElement(te.Fragment,null,te.createElement("h2",null,"Unexpected Application Error!"),te.createElement("h3",{style:{fontStyle:"italic"}},e),t?te.createElement("pre",{style:s},t):null,c)}var DR=te.createElement(MR,null),LR=class extends te.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?te.createElement(xs.Provider,{value:this.props.routeContext},te.createElement(dv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jR({routeContext:n,match:e,children:t}){let i=te.useContext(sc);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),te.createElement(xs.Provider,{value:n},t)}function VR(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=t?.errors;if(l!=null){let p=s.findIndex(m=>m.route.id&&l?.[m.route.id]!==void 0);En(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let c=!1,f=-1;if(t)for(let p=0;p<s.length;p++){let m=s[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(f=p),m.route.id){let{loaderData:_,errors:E}=t,b=m.route.loader&&!_.hasOwnProperty(m.route.id)&&(!E||E[m.route.id]===void 0);if(m.route.lazy||b){c=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,m,_)=>{let E,b=!1,C=null,I=null;t&&(E=l&&m.route.id?l[m.route.id]:void 0,C=m.route.errorElement||DR,c&&(f<0&&_===0?(vT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,I=null):f===_&&(b=!0,I=m.route.hydrateFallbackElement||null)));let O=e.concat(s.slice(0,_+1)),M=()=>{let z;return E?z=C:b?z=I:m.route.Component?z=te.createElement(m.route.Component,null):m.route.element?z=m.route.element:z=p,te.createElement(jR,{match:m,routeContext:{outlet:p,matches:O,isDataRoute:t!=null},children:z})};return t&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?te.createElement(LR,{location:t.location,revalidation:t.revalidation,component:C,error:E,children:M(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):M()},null)}function fv(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UR(n){let e=te.useContext(sc);return En(e,fv(n)),e}function BR(n){let e=te.useContext(wp);return En(e,fv(n)),e}function FR(n){let e=te.useContext(xs);return En(e,fv(n)),e}function pv(n){let e=FR(n),t=e.matches[e.matches.length-1];return En(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function zR(){return pv("useRouteId")}function HR(){let n=te.useContext(dv),e=BR("useRouteError"),t=pv("useRouteError");return n!==void 0?n:e.errors?.[t]}function qR(){let{router:n}=UR("useNavigate"),e=pv("useNavigate"),t=te.useRef(!1);return gT(()=>{t.current=!0}),te.useCallback(async(s,l={})=>{ws(t.current,mT),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var HE={};function vT(n,e,t){!e&&!HE[n]&&(HE[n]=!0,ws(!1,t))}te.memo(GR);function GR({routes:n,future:e,state:t}){return _T(n,void 0,t,e)}function w_({to:n,replace:e,state:t,relative:i}){En(ac(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=te.useContext(Ss);ws(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=te.useContext(xs),{pathname:c}=Fa(),f=oc(),p=hv(n,cv(l),c,i==="path"),m=JSON.stringify(p);return te.useEffect(()=>{f(JSON.parse(m),{replace:e,state:t,relative:i})},[f,m,i,e,t]),null}function ZR(n){return OR(n.context)}function kr(n){En(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function KR({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:l=!1}){En(!ac(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=te.useMemo(()=>({basename:c,navigator:s,static:l,future:{}}),[c,s,l]);typeof t=="string"&&(t=rc(t));let{pathname:p="/",search:m="",hash:_="",state:E=null,key:b="default"}=t,C=te.useMemo(()=>{let I=Ma(p,c);return I==null?null:{location:{pathname:I,search:m,hash:_,state:E,key:b},navigationType:i}},[c,p,m,_,E,b,i]);return ws(C!=null,`<Router basename="${c}"> is not able to match the URL "${p}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:te.createElement(Ss.Provider,{value:f},te.createElement(Hh.Provider,{children:e,value:C}))}function $R({children:n,location:e}){return PR(T_(n),e)}function T_(n,e=[]){let t=[];return te.Children.forEach(n,(i,s)=>{if(!te.isValidElement(i))return;let l=[...e,s];if(i.type===te.Fragment){t.push.apply(t,T_(i.props.children,l));return}En(i.type===kr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),En(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=T_(i.props.children,l)),t.push(c)}),t}var Af="get",Sf="application/x-www-form-urlencoded";function Tp(n){return n!=null&&typeof n.tagName=="string"}function YR(n){return Tp(n)&&n.tagName.toLowerCase()==="button"}function QR(n){return Tp(n)&&n.tagName.toLowerCase()==="form"}function WR(n){return Tp(n)&&n.tagName.toLowerCase()==="input"}function XR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function JR(n,e){return n.button===0&&(!e||e==="_self")&&!XR(n)}var mf=null;function eI(){if(mf===null)try{new FormData(document.createElement("form"),0),mf=!1}catch{mf=!0}return mf}var tI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Yg(n){return n!=null&&!tI.has(n)?(ws(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sf}"`),null):n}function nI(n,e){let t,i,s,l,c;if(QR(n)){let f=n.getAttribute("action");i=f?Ma(f,e):null,t=n.getAttribute("method")||Af,s=Yg(n.getAttribute("enctype"))||Sf,l=new FormData(n)}else if(YR(n)||WR(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||f.getAttribute("action");if(i=p?Ma(p,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Af,s=Yg(n.getAttribute("formenctype"))||Yg(f.getAttribute("enctype"))||Sf,l=new FormData(f,n),!eI()){let{name:m,type:_,value:E}=n;if(_==="image"){let b=m?`${m}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else m&&l.append(m,E)}}else{if(Tp(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Af,i=null,s=Sf,c=n}return l&&s==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:l,body:c}}function mv(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function iI(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function rI(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function sI(n,e,t){let i=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let c=await iI(l,t);return c.links?c.links():[]}return[]}));return uI(i.flat(1).filter(rI).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qE(n,e,t,i,s,l){let c=(p,m)=>t[m]?p.route.id!==t[m].route.id:!0,f=(p,m)=>t[m].pathname!==p.pathname||t[m].route.path?.endsWith("*")&&t[m].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,m)=>c(p,m)||f(p,m)):l==="data"?e.filter((p,m)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,m)||f(p,m))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function aI(n,e,{includeHydrateFallback:t}={}){return oI(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function oI(n){return[...new Set(n)]}function lI(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function uI(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let l=JSON.stringify(lI(s));return t.has(l)||(t.add(l),i.push({key:l,link:s})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cI=new Set([100,101,204,205]);function hI(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Ma(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function yT(){let n=te.useContext(sc);return mv(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function dI(){let n=te.useContext(wp);return mv(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gv=te.createContext(void 0);gv.displayName="FrameworkContext";function ET(){let n=te.useContext(gv);return mv(n,"You must render this element inside a <HydratedRouter> element"),n}function fI(n,e){let t=te.useContext(gv),[i,s]=te.useState(!1),[l,c]=te.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:m,onMouseLeave:_,onTouchStart:E}=e,b=te.useRef(null);te.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let O=z=>{z.forEach(Y=>{c(Y.isIntersecting)})},M=new IntersectionObserver(O,{threshold:.5});return b.current&&M.observe(b.current),()=>{M.disconnect()}}},[n]),te.useEffect(()=>{if(i){let O=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(O)}}},[i]);let C=()=>{s(!0)},I=()=>{s(!1),c(!1)};return t?n!=="intent"?[l,b,{}]:[l,b,{onFocus:oh(f,C),onBlur:oh(p,I),onMouseEnter:oh(m,C),onMouseLeave:oh(_,I),onTouchStart:oh(E,C)}]:[!1,b,{}]}function oh(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function pI({page:n,...e}){let{router:t}=yT(),i=te.useMemo(()=>cT(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?te.createElement(gI,{page:n,matches:i,...e}):null}function mI(n){let{manifest:e,routeModules:t}=ET(),[i,s]=te.useState([]);return te.useEffect(()=>{let l=!1;return sI(n,e,t).then(c=>{l||s(c)}),()=>{l=!0}},[n,e,t]),i}function gI({page:n,matches:e,...t}){let i=Fa(),{manifest:s,routeModules:l}=ET(),{basename:c}=yT(),{loaderData:f,matches:p}=dI(),m=te.useMemo(()=>qE(n,e,p,s,i,"data"),[n,e,p,s,i]),_=te.useMemo(()=>qE(n,e,p,s,i,"assets"),[n,e,p,s,i]),E=te.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let I=new Set,O=!1;if(e.forEach(z=>{let Y=s.routes[z.route.id];!Y||!Y.hasLoader||(!m.some(K=>K.route.id===z.route.id)&&z.route.id in f&&l[z.route.id]?.shouldRevalidate||Y.hasClientLoader?O=!0:I.add(z.route.id))}),I.size===0)return[];let M=hI(n,c);return O&&I.size>0&&M.searchParams.set("_routes",e.filter(z=>I.has(z.route.id)).map(z=>z.route.id).join(",")),[M.pathname+M.search]},[c,f,i,s,m,e,n,l]),b=te.useMemo(()=>aI(_,s),[_,s]),C=mI(_);return te.createElement(te.Fragment,null,E.map(I=>te.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),b.map(I=>te.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),C.map(({key:I,link:O})=>te.createElement("link",{key:I,...O})))}function _I(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bT&&(window.__reactRouterVersion="7.6.3")}catch{}function vI({basename:n,children:e,window:t}){let i=te.useRef();i.current==null&&(i.current=nR({window:t,v5Compat:!0}));let s=i.current,[l,c]=te.useState({action:s.action,location:s.location}),f=te.useCallback(p=>{te.startTransition(()=>c(p))},[c]);return te.useLayoutEffect(()=>s.listen(f),[s,f]),te.createElement(KR,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:s})}var wT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_v=te.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:l,replace:c,state:f,target:p,to:m,preventScrollReset:_,viewTransition:E,...b},C){let{basename:I}=te.useContext(Ss),O=typeof m=="string"&&wT.test(m),M,z=!1;if(typeof m=="string"&&O&&(M=m,bT))try{let x=new URL(window.location.href),N=m.startsWith("//")?new URL(x.protocol+m):new URL(m),j=Ma(N.pathname,I);N.origin===x.origin&&j!=null?m=j+N.search+N.hash:z=!0}catch{ws(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=IR(m,{relative:s}),[K,J,oe]=fI(i,b),W=bI(m,{replace:c,state:f,target:p,preventScrollReset:_,relative:s,viewTransition:E});function q(x){e&&e(x),x.defaultPrevented||W(x)}let S=te.createElement("a",{...b,...oe,href:M||Y,onClick:z||l?e:q,ref:_I(C,J),target:p,"data-discover":!O&&t==="render"?"true":void 0});return K&&!O?te.createElement(te.Fragment,null,S,te.createElement(pI,{page:Y})):S});_v.displayName="Link";var Mo=te.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:l,to:c,viewTransition:f,children:p,...m},_){let E=qh(c,{relative:m.relative}),b=Fa(),C=te.useContext(wp),{navigator:I,basename:O}=te.useContext(Ss),M=C!=null&&xI(E)&&f===!0,z=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,Y=b.pathname,K=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),K=K?K.toLowerCase():null,z=z.toLowerCase()),K&&O&&(K=Ma(K,O)||K);const J=z!=="/"&&z.endsWith("/")?z.length-1:z.length;let oe=Y===z||!s&&Y.startsWith(z)&&Y.charAt(J)==="/",W=K!=null&&(K===z||!s&&K.startsWith(z)&&K.charAt(z.length)==="/"),q={isActive:oe,isPending:W,isTransitioning:M},S=oe?e:void 0,x;typeof i=="function"?x=i(q):x=[i,oe?"active":null,W?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let N=typeof l=="function"?l(q):l;return te.createElement(_v,{...m,"aria-current":S,className:x,ref:_,style:N,to:c,viewTransition:f},typeof p=="function"?p(q):p)});Mo.displayName="NavLink";var yI=te.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:l,method:c=Af,action:f,onSubmit:p,relative:m,preventScrollReset:_,viewTransition:E,...b},C)=>{let I=AI(),O=SI(f,{relative:m}),M=c.toLowerCase()==="get"?"get":"post",z=typeof f=="string"&&wT.test(f),Y=K=>{if(p&&p(K),K.defaultPrevented)return;K.preventDefault();let J=K.nativeEvent.submitter,oe=J?.getAttribute("formmethod")||c;I(J||K.currentTarget,{fetcherKey:e,method:oe,navigate:t,replace:s,state:l,relative:m,preventScrollReset:_,viewTransition:E})};return te.createElement("form",{ref:C,method:M,action:O,onSubmit:i?p:Y,...b,"data-discover":!z&&n==="render"?"true":void 0})});yI.displayName="Form";function EI(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function TT(n){let e=te.useContext(sc);return En(e,EI(n)),e}function bI(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:l,viewTransition:c}={}){let f=oc(),p=Fa(),m=qh(n,{relative:l});return te.useCallback(_=>{if(JR(_,e)){_.preventDefault();let E=t!==void 0?t:Rh(p)===Rh(m);f(n,{replace:E,state:i,preventScrollReset:s,relative:l,viewTransition:c})}},[p,f,m,t,i,e,n,s,l,c])}var wI=0,TI=()=>`__${String(++wI)}__`;function AI(){let{router:n}=TT("useSubmit"),{basename:e}=te.useContext(Ss),t=zR();return te.useCallback(async(i,s={})=>{let{action:l,method:c,encType:f,formData:p,body:m}=nI(i,e);if(s.navigate===!1){let _=s.fetcherKey||TI();await n.fetch(_,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:m,formMethod:s.method||c,formEncType:s.encType||f,flushSync:s.flushSync})}else await n.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:m,formMethod:s.method||c,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function SI(n,{relative:e}={}){let{basename:t}=te.useContext(Ss),i=te.useContext(xs);En(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),l={...qh(n||".",{relative:e})},c=Fa();if(n==null){l.search=c.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(_=>_==="")){f.delete("index"),p.filter(E=>E).forEach(E=>f.append("index",E));let _=f.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Na([t,l.pathname])),Rh(l)}function xI(n,e={}){let t=te.useContext(pT);En(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=TT("useViewTransitionState"),s=qh(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=Ma(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ma(t.nextLocation.pathname,i)||t.nextLocation.pathname;return zf(s.pathname,c)!=null||zf(s.pathname,l)!=null}[...cI];var CI=uT();const RI=()=>{};var GE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},II=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[i++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],c=n[t++],f=n[t++],p=((s&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(l&63)<<6|c&63)}}return e.join("")},ST={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const l=n[s],c=s+1<n.length,f=c?n[s+1]:0,p=s+2<n.length,m=p?n[s+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let b=(f&15)<<2|m>>6,C=m&63;p||(C=64,c||(b=64)),i.push(t[_],t[E],t[b],t[C])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(AT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):II(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const m=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||f==null||m==null||E==null)throw new kI;const b=l<<2|f>>4;if(i.push(b),m!==64){const C=f<<4&240|m>>2;if(i.push(C),E!==64){const I=m<<6&192|E;i.push(I)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class kI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NI=function(n){const e=AT(n);return ST.encodeByteArray(e,!0)},Hf=function(n){return NI(n).replace(/\./g,"")},xT=function(n){try{return ST.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=()=>OI().__FIREBASE_DEFAULTS__,MI=()=>{if(typeof process>"u"||typeof GE>"u")return;const n=GE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},DI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&xT(n[1]);return e&&JSON.parse(e)},Ap=()=>{try{return RI()||PI()||MI()||DI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},CT=n=>{var e,t;return(t=(e=Ap())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},vv=n=>{const e=CT(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},RT=()=>{var n;return(n=Ap())===null||n===void 0?void 0:n.config},IT=n=>{var e;return(e=Ap())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sp(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hf(JSON.stringify(t)),Hf(JSON.stringify(c)),""].join(".")}const bh={};function jI(){const n={prod:[],emulator:[]};for(const e of Object.keys(bh))bh[e]?n.emulator.push(e):n.prod.push(e);return n}function VI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ZE=!1;function xp(n,e){if(typeof window>"u"||typeof document>"u"||!za(window.location.host)||bh[n]===e||bh[n]||ZE)return;bh[n]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=jI().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function p(b,C){b.setAttribute("width","24"),b.setAttribute("id",C),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function m(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{ZE=!0,c()},b}function _(b,C){b.setAttribute("id",C),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function E(){const b=VI(i),C=t("text"),I=document.getElementById(C)||document.createElement("span"),O=t("learnmore"),M=document.getElementById(O)||document.createElement("a"),z=t("preprendIcon"),Y=document.getElementById(z)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const K=b.element;f(K),_(M,O);const J=m();p(Y,z),K.append(Y,I,M,J),document.body.appendChild(K)}l?(I.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Di())}function BI(){var n;const e=(n=Ap())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function HI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qI(){const n=Di();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function GI(){return!BI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ZI(){try{return typeof indexedDB=="object"}catch{return!1}}function KI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="FirebaseError";class Cs extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=$I,Object.setPrototypeOf(this,Cs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gh.prototype.create)}}class Gh{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],c=l?YI(l,i):"Error",f=`${this.serviceName}: ${c} (${s}).`;return new Cs(s,f,i)}}function YI(n,e){return n.replace(QI,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const QI=/\{\$([^}]+)}/g;function WI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Hl(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const l=n[s],c=e[s];if(KE(l)&&KE(c)){if(!Hl(l,c))return!1}else if(l!==c)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function KE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function fh(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,l]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function ph(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function XI(n,e){const t=new JI(n,e);return t.subscribe.bind(t)}class JI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ek(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Qg),s.error===void 0&&(s.error=Qg),s.complete===void 0&&(s.complete=Qg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ek(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Qg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(n){return n&&n._delegate?n._delegate:n}class Da{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new LI;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),s=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ik(e))try{this.getOrInitializeService({instanceIdentifier:Ml})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});i.resolve(l)}catch{}}}}clearInstance(e=Ml){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ml){return this.instances.has(e)}getOptions(e=Ml){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);i===f&&c.resolve(s)}return s}onInit(e,t){var i;const s=this.normalizeInstanceIdentifier(t),l=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(s,l);const c=this.instances.get(s);return c&&e(c,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ml){return this.component?this.component.multipleInstances?e:Ml:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nk(n){return n===Ml?void 0:n}function ik(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Pt||(Pt={}));const sk={debug:Pt.DEBUG,verbose:Pt.VERBOSE,info:Pt.INFO,warn:Pt.WARN,error:Pt.ERROR,silent:Pt.SILENT},ak=Pt.INFO,ok={[Pt.DEBUG]:"log",[Pt.VERBOSE]:"log",[Pt.INFO]:"info",[Pt.WARN]:"warn",[Pt.ERROR]:"error"},lk=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=ok[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yv{constructor(e){this.name=e,this._logLevel=ak,this._logHandler=lk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pt.DEBUG,...e),this._logHandler(this,Pt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pt.VERBOSE,...e),this._logHandler(this,Pt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pt.INFO,...e),this._logHandler(this,Pt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pt.WARN,...e),this._logHandler(this,Pt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pt.ERROR,...e),this._logHandler(this,Pt.ERROR,...e)}}const uk=(n,e)=>e.some(t=>n instanceof t);let $E,YE;function ck(){return $E||($E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hk(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const NT=new WeakMap,A_=new WeakMap,OT=new WeakMap,Wg=new WeakMap,Ev=new WeakMap;function dk(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Fo(n.result)),s()},c=()=>{i(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&NT.set(t,n)}).catch(()=>{}),Ev.set(e,n),e}function fk(n){if(A_.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),s()},c=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});A_.set(n,e)}let S_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return A_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||OT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Fo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pk(n){S_=n(S_)}function mk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(Xg(this),e,...t);return OT.set(i,e.sort?e.sort():[e]),Fo(i)}:hk().includes(n)?function(...e){return n.apply(Xg(this),e),Fo(NT.get(this))}:function(...e){return Fo(n.apply(Xg(this),e))}}function gk(n){return typeof n=="function"?mk(n):(n instanceof IDBTransaction&&fk(n),uk(n,ck())?new Proxy(n,S_):n)}function Fo(n){if(n instanceof IDBRequest)return dk(n);if(Wg.has(n))return Wg.get(n);const e=gk(n);return e!==n&&(Wg.set(n,e),Ev.set(e,n)),e}const Xg=n=>Ev.get(n);function _k(n,e,{blocked:t,upgrade:i,blocking:s,terminated:l}={}){const c=indexedDB.open(n,e),f=Fo(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Fo(c.result),p.oldVersion,p.newVersion,Fo(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const vk=["get","getKey","getAll","getAllKeys","count"],yk=["put","add","delete","clear"],Jg=new Map;function QE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Jg.get(e))return Jg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=yk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||vk.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,s?"readwrite":"readonly");let m=p.store;return i&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),s&&p.done]))[0]};return Jg.set(e,l),l}pk(n=>({...n,get:(e,t,i)=>QE(e,t)||n.get(e,t,i),has:(e,t)=>!!QE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(bk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function bk(n){const e=n.getComponent();return e?.type==="VERSION"}const x_="@firebase/app",WE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const La=new yv("@firebase/app"),wk="@firebase/app-compat",Tk="@firebase/analytics-compat",Ak="@firebase/analytics",Sk="@firebase/app-check-compat",xk="@firebase/app-check",Ck="@firebase/auth",Rk="@firebase/auth-compat",Ik="@firebase/database",kk="@firebase/data-connect",Nk="@firebase/database-compat",Ok="@firebase/functions",Pk="@firebase/functions-compat",Mk="@firebase/installations",Dk="@firebase/installations-compat",Lk="@firebase/messaging",jk="@firebase/messaging-compat",Vk="@firebase/performance",Uk="@firebase/performance-compat",Bk="@firebase/remote-config",Fk="@firebase/remote-config-compat",zk="@firebase/storage",Hk="@firebase/storage-compat",qk="@firebase/firestore",Gk="@firebase/ai",Zk="@firebase/firestore-compat",Kk="firebase",$k="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="[DEFAULT]",Yk={[x_]:"fire-core",[wk]:"fire-core-compat",[Ak]:"fire-analytics",[Tk]:"fire-analytics-compat",[xk]:"fire-app-check",[Sk]:"fire-app-check-compat",[Ck]:"fire-auth",[Rk]:"fire-auth-compat",[Ik]:"fire-rtdb",[kk]:"fire-data-connect",[Nk]:"fire-rtdb-compat",[Ok]:"fire-fn",[Pk]:"fire-fn-compat",[Mk]:"fire-iid",[Dk]:"fire-iid-compat",[Lk]:"fire-fcm",[jk]:"fire-fcm-compat",[Vk]:"fire-perf",[Uk]:"fire-perf-compat",[Bk]:"fire-rc",[Fk]:"fire-rc-compat",[zk]:"fire-gcs",[Hk]:"fire-gcs-compat",[qk]:"fire-fst",[Zk]:"fire-fst-compat",[Gk]:"fire-vertex","fire-js":"fire-js",[Kk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qf=new Map,Qk=new Map,R_=new Map;function XE(n,e){try{n.container.addComponent(e)}catch(t){La.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ko(n){const e=n.name;if(R_.has(e))return La.debug(`There were multiple attempts to register component ${e}.`),!1;R_.set(e,n);for(const t of qf.values())XE(t,n);for(const t of Qk.values())XE(t,n);return!0}function Kh(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zo=new Gh("app","Firebase",Wk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Da("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=$k;function PT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:C_,automaticDataCollectionEnabled:!0},e),s=i.name;if(typeof s!="string"||!s)throw zo.create("bad-app-name",{appName:String(s)});if(t||(t=RT()),!t)throw zo.create("no-options");const l=qf.get(s);if(l){if(Hl(t,l.options)&&Hl(i,l.config))return l;throw zo.create("duplicate-app",{appName:s})}const c=new rk(s);for(const p of R_.values())c.addComponent(p);const f=new Xk(t,i,c);return qf.set(s,f),f}function Cp(n=C_){const e=qf.get(n);if(!e&&n===C_&&RT())return PT();if(!e)throw zo.create("no-app",{appName:n});return e}function ns(n,e,t){var i;let s=(i=Yk[n])!==null&&i!==void 0?i:n;t&&(s+=`-${t}`);const l=s.match(/\s|\//),c=e.match(/\s|\//);if(l||c){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),La.warn(f.join(" "));return}Ko(new Da(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="firebase-heartbeat-database",eN=1,Ih="firebase-heartbeat-store";let e_=null;function MT(){return e_||(e_=_k(Jk,eN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ih)}catch(t){console.warn(t)}}}}).catch(n=>{throw zo.create("idb-open",{originalErrorMessage:n.message})})),e_}async function tN(n){try{const t=(await MT()).transaction(Ih),i=await t.objectStore(Ih).get(DT(n));return await t.done,i}catch(e){if(e instanceof Cs)La.warn(e.message);else{const t=zo.create("idb-get",{originalErrorMessage:e?.message});La.warn(t.message)}}}async function JE(n,e){try{const i=(await MT()).transaction(Ih,"readwrite");await i.objectStore(Ih).put(e,DT(n)),await i.done}catch(t){if(t instanceof Cs)La.warn(t.message);else{const i=zo.create("idb-set",{originalErrorMessage:t?.message});La.warn(i.message)}}}function DT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=1024,iN=30;class rN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aN(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=eb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>iN){const c=oN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){La.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=eb(),{heartbeatsToSend:i,unsentEntries:s}=sN(this._heartbeatsCache.heartbeats),l=Hf(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return La.warn(t),""}}}function eb(){return new Date().toISOString().substring(0,10)}function sN(n,e=nN){const t=[];let i=n.slice();for(const s of n){const l=t.find(c=>c.agent===s.agent);if(l){if(l.dates.push(s.date),tb(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),tb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class aN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZI()?KI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return JE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return JE(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function tb(n){return Hf(JSON.stringify({version:2,heartbeats:n})).length}function oN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n){Ko(new Da("platform-logger",e=>new Ek(e),"PRIVATE")),Ko(new Da("heartbeat",e=>new rN(e),"PRIVATE")),ns(x_,WE,n),ns(x_,WE,"esm2017"),ns("fire-js","")}lN("");function bv(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function LT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uN=LT,jT=new Gh("auth","Firebase",LT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf=new yv("@firebase/auth");function cN(n,...e){Gf.logLevel<=Pt.WARN&&Gf.warn(`Auth (${Xl}): ${n}`,...e)}function xf(n,...e){Gf.logLevel<=Pt.ERROR&&Gf.error(`Auth (${Xl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(n,...e){throw wv(n,...e)}function Ws(n,...e){return wv(n,...e)}function VT(n,e,t){const i=Object.assign(Object.assign({},uN()),{[e]:t});return new Gh("auth","Firebase",i).create(e,{appName:n.name})}function Oa(n){return VT(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return jT.create(n,...e)}function ot(n,e,...t){if(!n)throw wv(e,...t)}function Ia(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xf(e),new Error(e)}function ja(n,e){n||Ia(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function hN(){return nb()==="http:"||nb()==="https:"}function nb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hN()||zI()||"connection"in navigator)?navigator.onLine:!0}function fN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t){this.shortDelay=e,this.longDelay=t,ja(t>e,"Short delay should be less than long delay!"),this.isMobile=UI()||HI()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(n,e){ja(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ia("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ia("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ia("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gN=new $h(3e4,6e4);function tl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function nl(n,e,t,i,s={}){return BT(n,s,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const f=Zh(Object.assign({key:n.config.apiKey},c)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:p},l);return FI()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&za(n.emulatorConfig.host)&&(m.credentials="include"),UT.fetch()(await FT(n,n.config.apiHost,t,f),m)})}async function BT(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},pN),e);try{const s=new vN(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw gf(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,m]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw gf(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw gf(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw gf(n,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw VT(n,_,m);Ts(n,_)}}catch(s){if(s instanceof Cs)throw s;Ts(n,"network-request-failed",{message:String(s)})}}async function Yh(n,e,t,i,s={}){const l=await nl(n,e,t,i,s);return"mfaPendingCredential"in l&&Ts(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function FT(n,e,t,i){const s=`${e}${t}?${i}`,l=n,c=l.config.emulator?Tv(n.config,s):`${n.config.apiScheme}://${s}`;return mN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function _N(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ws(this.auth,"network-request-failed")),gN.get())})}}function gf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Ws(n,e,i);return s.customData._tokenResponse=t,s}function ib(n){return n!==void 0&&n.enterprise!==void 0}class yN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _N(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function EN(n,e){return nl(n,"GET","/v2/recaptchaConfig",tl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bN(n,e){return nl(n,"POST","/v1/accounts:delete",e)}async function Zf(n,e){return nl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wN(n,e=!1){const t=Jt(n),i=await t.getIdToken(e),s=Av(i);ot(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,c=l?.sign_in_provider;return{claims:s,token:i,authTime:wh(t_(s.auth_time)),issuedAtTime:wh(t_(s.iat)),expirationTime:wh(t_(s.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function t_(n){return Number(n)*1e3}function Av(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return xf("JWT malformed, contained fewer than 3 sections"),null;try{const s=xT(t);return s?JSON.parse(s):(xf("Failed to decode base64 JWT payload"),null)}catch(s){return xf("Caught error parsing JWT payload as JSON",s?.toString()),null}}function rb(n){const e=Av(n);return ot(e,"internal-error"),ot(typeof e.exp<"u","internal-error"),ot(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Cs&&TN(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function TN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wh(this.lastLoginAt),this.creationTime=wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kf(n){var e;const t=n.auth,i=await n.getIdToken(),s=await kh(n,Zf(t,{idToken:i}));ot(s?.users.length,t,"internal-error");const l=s.users[0];n._notifyReloadListener(l);const c=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?zT(l.providerUserInfo):[],f=xN(n.providerData,c),p=n.isAnonymous,m=!(n.email&&l.passwordHash)&&!f?.length,_=p?m:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new k_(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function SN(n){const e=Jt(n);await Kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xN(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function zT(n){return n.map(e=>{var{providerId:t}=e,i=bv(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CN(n,e){const t=await BT(n,{},async()=>{const i=Zh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,c=await FT(n,s,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:i};return n.emulatorConfig&&za(n.emulatorConfig.host)&&(p.credentials="include"),UT.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RN(n,e){return nl(n,"POST","/v2/accounts:revokeToken",tl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ot(e.idToken,"internal-error"),ot(typeof e.idToken<"u","internal-error"),ot(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ot(e.length!==0,"internal-error");const t=rb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ot(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:l}=await CN(e,t);this.updateTokensAndExpiration(i,s,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:l}=t,c=new Zu;return i&&(ot(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),s&&(ot(typeof s=="string","internal-error",{appName:e}),c.accessToken=s),l&&(ot(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zu,this.toJSON())}_performRefresh(){return Ia("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(n,e){ot(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class bs{constructor(e){var{uid:t,auth:i,stsTokenManager:s}=e,l=bv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new k_(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await kh(this,this.stsTokenManager.getToken(this.auth,e));return ot(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wN(this,e)}reload(){return SN(this)}_assign(e){this!==e&&(ot(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new bs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ot(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Kf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(sr(this.auth.app))return Promise.reject(Oa(this.auth));const e=await this.getIdToken();return await kh(this,bN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,s,l,c,f,p,m,_;const E=(i=t.displayName)!==null&&i!==void 0?i:void 0,b=(s=t.email)!==null&&s!==void 0?s:void 0,C=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,I=(c=t.photoURL)!==null&&c!==void 0?c:void 0,O=(f=t.tenantId)!==null&&f!==void 0?f:void 0,M=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,z=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:K,emailVerified:J,isAnonymous:oe,providerData:W,stsTokenManager:q}=t;ot(K&&q,e,"internal-error");const S=Zu.fromJSON(this.name,q);ot(typeof K=="string",e,"internal-error"),Po(E,e.name),Po(b,e.name),ot(typeof J=="boolean",e,"internal-error"),ot(typeof oe=="boolean",e,"internal-error"),Po(C,e.name),Po(I,e.name),Po(O,e.name),Po(M,e.name),Po(z,e.name),Po(Y,e.name);const x=new bs({uid:K,auth:e,email:b,emailVerified:J,displayName:E,isAnonymous:oe,photoURL:I,phoneNumber:C,tenantId:O,stsTokenManager:S,createdAt:z,lastLoginAt:Y});return W&&Array.isArray(W)&&(x.providerData=W.map(N=>Object.assign({},N))),M&&(x._redirectEventId=M),x}static async _fromIdTokenResponse(e,t,i=!1){const s=new Zu;s.updateFromServerResponse(t);const l=new bs({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Kf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];ot(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?zT(s.providerUserInfo):[],c=!(s.email&&s.passwordHash)&&!l?.length,f=new Zu;f.updateFromIdToken(i);const p=new bs({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new k_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!l?.length};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=new Map;function ka(n){ja(n instanceof Function,"Expected a class definition");let e=sb.get(n);return e?(ja(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}HT.type="NONE";const ab=HT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n,e,t){return`firebase:${n}:${e}:${t}`}class Ku{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:l}=this.auth;this.fullUserKey=Cf(this.userKey,s.apiKey,l),this.fullPersistenceKey=Cf("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Zf(this.auth,{idToken:e}).catch(()=>{});return t?bs._fromGetAccountInfoResponse(this.auth,t,e):null}return bs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ku(ka(ab),e,i);const s=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=s[0]||ka(ab);const c=Cf(i,e.config.apiKey,e.name);let f=null;for(const m of t)try{const _=await m._get(c);if(_){let E;if(typeof _=="string"){const b=await Zf(e,{idToken:_}).catch(()=>{});if(!b)break;E=await bs._fromGetAccountInfoResponse(e,b,_)}else E=bs._fromJSON(e,_);m!==l&&(f=E),l=m;break}}catch{}const p=s.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Ku(l,e,i):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Ku(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(KT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YT(e))return"Blackberry";if(QT(e))return"Webos";if(GT(e))return"Safari";if((e.includes("chrome/")||ZT(e))&&!e.includes("edge/"))return"Chrome";if($T(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function qT(n=Di()){return/firefox\//i.test(n)}function GT(n=Di()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZT(n=Di()){return/crios\//i.test(n)}function KT(n=Di()){return/iemobile/i.test(n)}function $T(n=Di()){return/android/i.test(n)}function YT(n=Di()){return/blackberry/i.test(n)}function QT(n=Di()){return/webos/i.test(n)}function Sv(n=Di()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function IN(n=Di()){var e;return Sv(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function kN(){return qI()&&document.documentMode===10}function WT(n=Di()){return Sv(n)||$T(n)||QT(n)||YT(n)||/windows phone/i.test(n)||KT(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(n,e=[]){let t;switch(n){case"Browser":t=ob(Di());break;case"Worker":t=`${ob(Di())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xl}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(n,e={}){return nl(n,"GET","/v2/passwordPolicy",tl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=6;class MN{constructor(e){var t,i,s,l;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:PN,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,s,l,c,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(i=p.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(s=p.containsLowercaseLetter)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(c=p.containsNumericCharacter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lb(this),this.idTokenSubscription=new lb(this),this.beforeStateQueue=new NN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ka(t)),this._initializationPromise=this.queue(async()=>{var i,s,l;if(!this._deleted&&(this.persistenceManager=await Ku.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Zf(this,{idToken:e}),i=await bs._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(sr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&p?.user&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ot(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(sr(this.app))return Promise.reject(Oa(this));const t=e?Jt(e):null;return t&&ot(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ot(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return sr(this.app)?Promise.reject(Oa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return sr(this.app)?Promise.reject(Oa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ka(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ON(this),t=new MN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gh("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await RN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ka(e)||this._popupRedirectResolver;ot(t,this,"argument-error"),this.redirectPersistenceManager=await Ku.create(this,[ka(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(ot(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,s);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ot(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&cN(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Jl(n){return Jt(n)}class lb{constructor(e){this.auth=e,this.observer=null,this.addObserver=XI(t=>this.observer=t)}get next(){return ot(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LN(n){Rp=n}function JT(n){return Rp.loadJS(n)}function jN(){return Rp.recaptchaEnterpriseScript}function VN(){return Rp.gapiScript}function UN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class BN{constructor(){this.enterprise=new FN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class FN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const zN="recaptcha-enterprise",eA="NO_RECAPTCHA";class HN{constructor(e){this.type=zN,this.auth=Jl(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,f)=>{EN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const m=new yN(p);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(p=>{f(p)})})}function s(l,c,f){const p=window.grecaptcha;ib(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(eA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BN().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(f=>{if(!t&&ib(window.grecaptcha))s(f,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=jN();p.length!==0&&(p+=f),JT(p).then(()=>{s(f,l,c)}).catch(m=>{c(m)})}}).catch(f=>{c(f)})})}}async function ub(n,e,t,i=!1,s=!1){const l=new HN(n);let c;if(s)c=eA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,m=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:c}):Object.assign(f,{captchaResponse:c}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function N_(n,e,t,i,s){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await ub(n,e,t,t==="getOobCode");return i(n,c)}else return i(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await ub(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(n,e){const t=Kh(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Hl(l,e??{}))return s;Ts(s,"already-initialized")}return t.initialize({options:e})}function GN(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ka);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function ZN(n,e,t){const i=Jl(n);ot(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,l=tA(e),{host:c,port:f}=KN(e),p=f===null?"":`:${f}`,m={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){ot(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ot(Hl(m,i.config.emulator)&&Hl(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,za(c)?(Sp(`${l}//${c}${p}`),xp("Auth",!0)):$N()}function tA(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KN(n){const e=tA(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const l=s[1];return{host:l,port:cb(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:cb(c)}}}function cb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function $N(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ia("not implemented")}_getIdTokenResponse(e){return Ia("not implemented")}_linkToIdToken(e,t){return Ia("not implemented")}_getReauthenticationResolver(e){return Ia("not implemented")}}async function YN(n,e){return nl(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(n,e){return Yh(n,"POST","/v1/accounts:signInWithPassword",tl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(n,e){return Yh(n,"POST","/v1/accounts:signInWithEmailLink",tl(n,e))}async function XN(n,e){return Yh(n,"POST","/v1/accounts:signInWithEmailLink",tl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends xv{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Nh(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Nh(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N_(e,t,"signInWithPassword",QN);case"emailLink":return WN(e,{email:this._email,oobCode:this._password});default:Ts(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N_(e,i,"signUpPassword",YN);case"emailLink":return XN(e,{idToken:t,email:this._email,oobCode:this._password});default:Ts(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(n,e){return Yh(n,"POST","/v1/accounts:signInWithIdp",tl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="http://localhost";class ql extends xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ql(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ts("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=t,l=bv(t,["providerId","signInMethod"]);if(!i||!s)return null;const c=new ql(i,s);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return $u(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,$u(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,$u(e,t)}buildRequest(){const e={requestUri:JN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function tO(n){const e=fh(ph(n)).link,t=e?fh(ph(e)).deep_link_id:null,i=fh(ph(n)).deep_link_id;return(i?fh(ph(i)).link:null)||i||t||e||n}class Cv{constructor(e){var t,i,s,l,c,f;const p=fh(ph(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(i=p.oobCode)!==null&&i!==void 0?i:null,E=eO((s=p.mode)!==null&&s!==void 0?s:null);ot(m&&_&&E,"argument-error"),this.apiKey=m,this.operation=E,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(c=p.lang)!==null&&c!==void 0?c:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=tO(e);try{return new Cv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.providerId=lc.PROVIDER_ID}static credential(e,t){return Nh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Cv.parseLink(t);return ot(i,"argument-error"),Nh._fromEmailAndCode(e,i.code,i.tenantId)}}lc.PROVIDER_ID="password";lc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh extends nA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Qh{constructor(){super("facebook.com")}static credential(e){return ql._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.FACEBOOK_SIGN_IN_METHOD="facebook.com";Do.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Qh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ql._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Lo.credential(t,i)}catch{return null}}}Lo.GOOGLE_SIGN_IN_METHOD="google.com";Lo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Qh{constructor(){super("github.com")}static credential(e){return ql._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jo.credential(e.oauthAccessToken)}catch{return null}}}jo.GITHUB_SIGN_IN_METHOD="github.com";jo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends Qh{constructor(){super("twitter.com")}static credential(e,t){return ql._fromParams({providerId:Vo.PROVIDER_ID,signInMethod:Vo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vo.credentialFromTaggedObject(e)}static credentialFromError(e){return Vo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Vo.credential(t,i)}catch{return null}}}Vo.TWITTER_SIGN_IN_METHOD="twitter.com";Vo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(n,e){return Yh(n,"POST","/v1/accounts:signUp",tl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const l=await bs._fromIdTokenResponse(e,i,s),c=hb(i);return new Gl({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=hb(i);return new Gl({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function hb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f extends Cs{constructor(e,t,i,s){var l;super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,$f.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new $f(e,t,i,s)}}function iA(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(n,l,e,i):l})}async function iO(n,e,t=!1){const i=await kh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Gl._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(n,e,t=!1){const{auth:i}=n;if(sr(i.app))return Promise.reject(Oa(i));const s="reauthenticate";try{const l=await kh(n,iA(i,s,e,n),t);ot(l.idToken,i,"internal-error");const c=Av(l.idToken);ot(c,i,"internal-error");const{sub:f}=c;return ot(n.uid===f,i,"user-mismatch"),Gl._forOperation(n,s,l)}catch(l){throw l?.code==="auth/user-not-found"&&Ts(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(n,e,t=!1){if(sr(n.app))return Promise.reject(Oa(n));const i="signIn",s=await iA(n,i,e),l=await Gl._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(l.user),l}async function sO(n,e){return rA(Jl(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(n){const e=Jl(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aO(n,e,t){if(sr(n.app))return Promise.reject(Oa(n));const i=Jl(n),c=await N_(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nO).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&sA(n),p}),f=await Gl._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(f.user),f}function oO(n,e,t){return sr(n.app)?Promise.reject(Oa(n)):sO(Jt(n),lc.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&sA(n),i})}function lO(n,e,t,i){return Jt(n).onIdTokenChanged(e,t,i)}function uO(n,e,t){return Jt(n).beforeAuthStateChanged(e,t)}function Rv(n,e,t,i){return Jt(n).onAuthStateChanged(e,t,i)}function cO(n){return Jt(n).signOut()}const Yf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yf,"1"),this.storage.removeItem(Yf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO=1e3,dO=10;class oA extends aA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);kN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dO):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},hO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}oA.type="LOCAL";const fO=oA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA extends aA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}lA.type="SESSION";const uA=lA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Ip(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:l}=t.data,c=this.handlersMap[s];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(c).map(async m=>m(t.origin,l)),p=await pO(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ip.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const m=Iv("",20);s.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:s,onMessage(E){const b=E;if(b.data.eventId===m)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),s.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[s.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return window}function gO(n){Xs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(){return typeof Xs().WorkerGlobalScope<"u"&&typeof Xs().importScripts=="function"}async function _O(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vO(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function yO(){return cA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="firebaseLocalStorageDb",EO=1,Qf="firebaseLocalStorage",dA="fbase_key";class Wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kp(n,e){return n.transaction([Qf],e?"readwrite":"readonly").objectStore(Qf)}function bO(){const n=indexedDB.deleteDatabase(hA);return new Wh(n).toPromise()}function O_(){const n=indexedDB.open(hA,EO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Qf,{keyPath:dA})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Qf)?e(i):(i.close(),await bO(),e(await O_()))})})}async function db(n,e,t){const i=kp(n,!0).put({[dA]:e,value:t});return new Wh(i).toPromise()}async function wO(n,e){const t=kp(n,!1).get(e),i=await new Wh(t).toPromise();return i===void 0?null:i.value}function fb(n,e){const t=kp(n,!0).delete(e);return new Wh(t).toPromise()}const TO=800,AO=3;class fA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await O_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>AO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ip._getInstance(yO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await _O(),!this.activeServiceWorker)return;this.sender=new mO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await O_();return await db(e,Yf,"1"),await fb(e,Yf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>db(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>wO(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>fb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=kp(s,!1).getAll();return new Wh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),TO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}fA.type="LOCAL";const SO=fA;new $h(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(n,e){return e?ka(e):(ot(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv extends xv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $u(e,this._buildIdpRequest())}_linkToIdToken(e,t){return $u(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return $u(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function CO(n){return rA(n.auth,new kv(n),n.bypassAuthState)}function RO(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),rO(t,new kv(n),n.bypassAuthState)}async function IO(n){const{auth:e,user:t}=n;return ot(t,e,"internal-error"),iO(t,new kv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t,i,s,l=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return CO;case"linkViaPopup":case"linkViaRedirect":return IO;case"reauthViaPopup":case"reauthViaRedirect":return RO;default:Ts(this.auth,"internal-error")}}resolve(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ja(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new $h(2e3,1e4);class Hu extends pA{constructor(e,t,i,s,l){super(e,t,s,l),this.provider=i,this.authWindow=null,this.pollId=null,Hu.currentPopupAction&&Hu.currentPopupAction.cancel(),Hu.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ot(e,this.auth,"internal-error"),e}async onExecution(){ja(this.filter.length===1,"Popup operations only handle one event");const e=Iv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Hu.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kO.get())};e()}}Hu.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="pendingRedirect",Rf=new Map;class OO extends pA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Rf.get(this.auth._key());if(!e){try{const i=await PO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Rf.set(this.auth._key(),e)}return this.bypassAuthState||Rf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PO(n,e){const t=LO(e),i=DO(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function MO(n,e){Rf.set(n._key(),e)}function DO(n){return ka(n._redirectPersistence)}function LO(n){return Cf(NO,n.config.apiKey,n.name)}async function jO(n,e,t=!1){if(sr(n.app))return Promise.reject(Oa(n));const i=Jl(n),s=xO(i,e),c=await new OO(i,s,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=10*60*1e3;class UO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!BO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!mA(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ws(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VO&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(e))}saveEventToCache(e){this.cachedEventUids.add(pb(e)),this.lastProcessedEventTime=Date.now()}}function pb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function mA({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function BO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mA(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(n,e={}){return nl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HO=/^https?/;async function qO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await FO(n);for(const t of e)try{if(GO(t))return}catch{}Ts(n,"unauthorized-domain")}function GO(n){const e=I_(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!HO.test(t))return!1;if(zO.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=new $h(3e4,6e4);function mb(){const n=Xs().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function KO(n){return new Promise((e,t)=>{var i,s,l;function c(){mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mb(),t(Ws(n,"network-request-failed"))},timeout:ZO.get()})}if(!((s=(i=Xs().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Xs().gapi)===null||l===void 0)&&l.load)c();else{const f=UN("iframefcb");return Xs()[f]=()=>{gapi.load?c():t(Ws(n,"network-request-failed"))},JT(`${VN()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw If=null,e})}let If=null;function $O(n){return If=If||KO(n),If}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new $h(5e3,15e3),QO="__/auth/iframe",WO="emulator/auth/iframe",XO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eP(n){const e=n.config;ot(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tv(e,WO):`https://${n.config.authDomain}/${QO}`,i={apiKey:e.apiKey,appName:n.name,v:Xl},s=JO.get(n.config.apiHost);s&&(i.eid=s);const l=n._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${Zh(i).slice(1)}`}async function tP(n){const e=await $O(n),t=Xs().gapi;return ot(t,n,"internal-error"),e.open({where:document.body,url:eP(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XO,dontclear:!0},i=>new Promise(async(s,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ws(n,"network-request-failed"),f=Xs().setTimeout(()=>{l(c)},YO.get());function p(){Xs().clearTimeout(f),s(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iP=500,rP=600,sP="_blank",aP="http://localhost";class gb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oP(n,e,t,i=iP,s=rP){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const p=Object.assign(Object.assign({},nP),{width:i.toString(),height:s.toString(),top:l,left:c}),m=Di().toLowerCase();t&&(f=ZT(m)?sP:t),qT(m)&&(e=e||aP,p.scrollbars="yes");const _=Object.entries(p).reduce((b,[C,I])=>`${b}${C}=${I},`,"");if(IN(m)&&f!=="_self")return lP(e||"",f),new gb(null);const E=window.open(e||"",f,_);ot(E,n,"popup-blocked");try{E.focus()}catch{}return new gb(E)}function lP(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="__/auth/handler",cP="emulator/auth/handler",hP=encodeURIComponent("fac");async function _b(n,e,t,i,s,l){ot(n.config.authDomain,n,"auth-domain-config-required"),ot(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Xl,eventId:s};if(e instanceof nA){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",WI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof Qh){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),m=p?`#${hP}=${encodeURIComponent(p)}`:"";return`${dP(n)}?${Zh(f).slice(1)}${m}`}function dP({config:n}){return n.emulator?Tv(n,cP):`https://${n.authDomain}/${uP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="webStorageSupport";class fP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uA,this._completeRedirectFn=jO,this._overrideRedirectResult=MO}async _openPopup(e,t,i,s){var l;ja((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const c=await _b(e,t,i,I_(),s);return oP(e,c,Iv())}async _openRedirect(e,t,i,s){await this._originValidation(e);const l=await _b(e,t,i,I_(),s);return gO(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(ja(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await tP(e),i=new UO(e);return t.register("authEvent",s=>(ot(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(n_,{type:n_},s=>{var l;const c=(l=s?.[0])===null||l===void 0?void 0:l[n_];c!==void 0&&t(!!c),Ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return WT()||GT()||Sv()}}const pP=fP;var vb="@firebase/auth",yb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ot(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _P(n){Ko(new Da("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=i.options;ot(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XT(n)},m=new DN(i,s,l,p);return GN(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ko(new Da("auth-internal",e=>{const t=Jl(e.getProvider("auth").getImmediate());return(i=>new mP(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(vb,yb,gP(n)),ns(vb,yb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=5*60,yP=IT("authIdTokenMaxAge")||vP;let Eb=null;const EP=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>yP)return;const s=t?.token;Eb!==s&&(Eb=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Nv(n=Cp()){const e=Kh(n,"auth");if(e.isInitialized())return e.getImmediate();const t=qN(n,{popupRedirectResolver:pP,persistence:[SO,fO,uA]}),i=IT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=EP(l.toString());uO(t,c,()=>c(t.currentUser)),lO(t,f=>c(f))}}const s=CT("auth");return s&&ZN(t,`http://${s}`),t}function bP(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}LN({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const l=Ws("internal-error");l.customData=s,t(l)},i.type="text/javascript",i.charset="UTF-8",bP().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_P("Browser");var bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ho,gA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(q,S){function x(){}x.prototype=S.prototype,q.D=S.prototype,q.prototype=new x,q.prototype.constructor=q,q.C=function(N,j,B){for(var D=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)D[Q-2]=arguments[Q];return S.prototype[j].apply(N,D)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(q,S,x){x||(x=0);var N=Array(16);if(typeof S=="string")for(var j=0;16>j;++j)N[j]=S.charCodeAt(x++)|S.charCodeAt(x++)<<8|S.charCodeAt(x++)<<16|S.charCodeAt(x++)<<24;else for(j=0;16>j;++j)N[j]=S[x++]|S[x++]<<8|S[x++]<<16|S[x++]<<24;S=q.g[0],x=q.g[1],j=q.g[2];var B=q.g[3],D=S+(B^x&(j^B))+N[0]+3614090360&4294967295;S=x+(D<<7&4294967295|D>>>25),D=B+(j^S&(x^j))+N[1]+3905402710&4294967295,B=S+(D<<12&4294967295|D>>>20),D=j+(x^B&(S^x))+N[2]+606105819&4294967295,j=B+(D<<17&4294967295|D>>>15),D=x+(S^j&(B^S))+N[3]+3250441966&4294967295,x=j+(D<<22&4294967295|D>>>10),D=S+(B^x&(j^B))+N[4]+4118548399&4294967295,S=x+(D<<7&4294967295|D>>>25),D=B+(j^S&(x^j))+N[5]+1200080426&4294967295,B=S+(D<<12&4294967295|D>>>20),D=j+(x^B&(S^x))+N[6]+2821735955&4294967295,j=B+(D<<17&4294967295|D>>>15),D=x+(S^j&(B^S))+N[7]+4249261313&4294967295,x=j+(D<<22&4294967295|D>>>10),D=S+(B^x&(j^B))+N[8]+1770035416&4294967295,S=x+(D<<7&4294967295|D>>>25),D=B+(j^S&(x^j))+N[9]+2336552879&4294967295,B=S+(D<<12&4294967295|D>>>20),D=j+(x^B&(S^x))+N[10]+4294925233&4294967295,j=B+(D<<17&4294967295|D>>>15),D=x+(S^j&(B^S))+N[11]+2304563134&4294967295,x=j+(D<<22&4294967295|D>>>10),D=S+(B^x&(j^B))+N[12]+1804603682&4294967295,S=x+(D<<7&4294967295|D>>>25),D=B+(j^S&(x^j))+N[13]+4254626195&4294967295,B=S+(D<<12&4294967295|D>>>20),D=j+(x^B&(S^x))+N[14]+2792965006&4294967295,j=B+(D<<17&4294967295|D>>>15),D=x+(S^j&(B^S))+N[15]+1236535329&4294967295,x=j+(D<<22&4294967295|D>>>10),D=S+(j^B&(x^j))+N[1]+4129170786&4294967295,S=x+(D<<5&4294967295|D>>>27),D=B+(x^j&(S^x))+N[6]+3225465664&4294967295,B=S+(D<<9&4294967295|D>>>23),D=j+(S^x&(B^S))+N[11]+643717713&4294967295,j=B+(D<<14&4294967295|D>>>18),D=x+(B^S&(j^B))+N[0]+3921069994&4294967295,x=j+(D<<20&4294967295|D>>>12),D=S+(j^B&(x^j))+N[5]+3593408605&4294967295,S=x+(D<<5&4294967295|D>>>27),D=B+(x^j&(S^x))+N[10]+38016083&4294967295,B=S+(D<<9&4294967295|D>>>23),D=j+(S^x&(B^S))+N[15]+3634488961&4294967295,j=B+(D<<14&4294967295|D>>>18),D=x+(B^S&(j^B))+N[4]+3889429448&4294967295,x=j+(D<<20&4294967295|D>>>12),D=S+(j^B&(x^j))+N[9]+568446438&4294967295,S=x+(D<<5&4294967295|D>>>27),D=B+(x^j&(S^x))+N[14]+3275163606&4294967295,B=S+(D<<9&4294967295|D>>>23),D=j+(S^x&(B^S))+N[3]+4107603335&4294967295,j=B+(D<<14&4294967295|D>>>18),D=x+(B^S&(j^B))+N[8]+1163531501&4294967295,x=j+(D<<20&4294967295|D>>>12),D=S+(j^B&(x^j))+N[13]+2850285829&4294967295,S=x+(D<<5&4294967295|D>>>27),D=B+(x^j&(S^x))+N[2]+4243563512&4294967295,B=S+(D<<9&4294967295|D>>>23),D=j+(S^x&(B^S))+N[7]+1735328473&4294967295,j=B+(D<<14&4294967295|D>>>18),D=x+(B^S&(j^B))+N[12]+2368359562&4294967295,x=j+(D<<20&4294967295|D>>>12),D=S+(x^j^B)+N[5]+4294588738&4294967295,S=x+(D<<4&4294967295|D>>>28),D=B+(S^x^j)+N[8]+2272392833&4294967295,B=S+(D<<11&4294967295|D>>>21),D=j+(B^S^x)+N[11]+1839030562&4294967295,j=B+(D<<16&4294967295|D>>>16),D=x+(j^B^S)+N[14]+4259657740&4294967295,x=j+(D<<23&4294967295|D>>>9),D=S+(x^j^B)+N[1]+2763975236&4294967295,S=x+(D<<4&4294967295|D>>>28),D=B+(S^x^j)+N[4]+1272893353&4294967295,B=S+(D<<11&4294967295|D>>>21),D=j+(B^S^x)+N[7]+4139469664&4294967295,j=B+(D<<16&4294967295|D>>>16),D=x+(j^B^S)+N[10]+3200236656&4294967295,x=j+(D<<23&4294967295|D>>>9),D=S+(x^j^B)+N[13]+681279174&4294967295,S=x+(D<<4&4294967295|D>>>28),D=B+(S^x^j)+N[0]+3936430074&4294967295,B=S+(D<<11&4294967295|D>>>21),D=j+(B^S^x)+N[3]+3572445317&4294967295,j=B+(D<<16&4294967295|D>>>16),D=x+(j^B^S)+N[6]+76029189&4294967295,x=j+(D<<23&4294967295|D>>>9),D=S+(x^j^B)+N[9]+3654602809&4294967295,S=x+(D<<4&4294967295|D>>>28),D=B+(S^x^j)+N[12]+3873151461&4294967295,B=S+(D<<11&4294967295|D>>>21),D=j+(B^S^x)+N[15]+530742520&4294967295,j=B+(D<<16&4294967295|D>>>16),D=x+(j^B^S)+N[2]+3299628645&4294967295,x=j+(D<<23&4294967295|D>>>9),D=S+(j^(x|~B))+N[0]+4096336452&4294967295,S=x+(D<<6&4294967295|D>>>26),D=B+(x^(S|~j))+N[7]+1126891415&4294967295,B=S+(D<<10&4294967295|D>>>22),D=j+(S^(B|~x))+N[14]+2878612391&4294967295,j=B+(D<<15&4294967295|D>>>17),D=x+(B^(j|~S))+N[5]+4237533241&4294967295,x=j+(D<<21&4294967295|D>>>11),D=S+(j^(x|~B))+N[12]+1700485571&4294967295,S=x+(D<<6&4294967295|D>>>26),D=B+(x^(S|~j))+N[3]+2399980690&4294967295,B=S+(D<<10&4294967295|D>>>22),D=j+(S^(B|~x))+N[10]+4293915773&4294967295,j=B+(D<<15&4294967295|D>>>17),D=x+(B^(j|~S))+N[1]+2240044497&4294967295,x=j+(D<<21&4294967295|D>>>11),D=S+(j^(x|~B))+N[8]+1873313359&4294967295,S=x+(D<<6&4294967295|D>>>26),D=B+(x^(S|~j))+N[15]+4264355552&4294967295,B=S+(D<<10&4294967295|D>>>22),D=j+(S^(B|~x))+N[6]+2734768916&4294967295,j=B+(D<<15&4294967295|D>>>17),D=x+(B^(j|~S))+N[13]+1309151649&4294967295,x=j+(D<<21&4294967295|D>>>11),D=S+(j^(x|~B))+N[4]+4149444226&4294967295,S=x+(D<<6&4294967295|D>>>26),D=B+(x^(S|~j))+N[11]+3174756917&4294967295,B=S+(D<<10&4294967295|D>>>22),D=j+(S^(B|~x))+N[2]+718787259&4294967295,j=B+(D<<15&4294967295|D>>>17),D=x+(B^(j|~S))+N[9]+3951481745&4294967295,q.g[0]=q.g[0]+S&4294967295,q.g[1]=q.g[1]+(j+(D<<21&4294967295|D>>>11))&4294967295,q.g[2]=q.g[2]+j&4294967295,q.g[3]=q.g[3]+B&4294967295}i.prototype.u=function(q,S){S===void 0&&(S=q.length);for(var x=S-this.blockSize,N=this.B,j=this.h,B=0;B<S;){if(j==0)for(;B<=x;)s(this,q,B),B+=this.blockSize;if(typeof q=="string"){for(;B<S;)if(N[j++]=q.charCodeAt(B++),j==this.blockSize){s(this,N),j=0;break}}else for(;B<S;)if(N[j++]=q[B++],j==this.blockSize){s(this,N),j=0;break}}this.h=j,this.o+=S},i.prototype.v=function(){var q=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);q[0]=128;for(var S=1;S<q.length-8;++S)q[S]=0;var x=8*this.o;for(S=q.length-8;S<q.length;++S)q[S]=x&255,x/=256;for(this.u(q),q=Array(16),S=x=0;4>S;++S)for(var N=0;32>N;N+=8)q[x++]=this.g[S]>>>N&255;return q};function l(q,S){var x=f;return Object.prototype.hasOwnProperty.call(x,q)?x[q]:x[q]=S(q)}function c(q,S){this.h=S;for(var x=[],N=!0,j=q.length-1;0<=j;j--){var B=q[j]|0;N&&B==S||(x[j]=B,N=!1)}this.g=x}var f={};function p(q){return-128<=q&&128>q?l(q,function(S){return new c([S|0],0>S?-1:0)}):new c([q|0],0>q?-1:0)}function m(q){if(isNaN(q)||!isFinite(q))return E;if(0>q)return M(m(-q));for(var S=[],x=1,N=0;q>=x;N++)S[N]=q/x|0,x*=4294967296;return new c(S,0)}function _(q,S){if(q.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(q.charAt(0)=="-")return M(_(q.substring(1),S));if(0<=q.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=m(Math.pow(S,8)),N=E,j=0;j<q.length;j+=8){var B=Math.min(8,q.length-j),D=parseInt(q.substring(j,j+B),S);8>B?(B=m(Math.pow(S,B)),N=N.j(B).add(m(D))):(N=N.j(x),N=N.add(m(D)))}return N}var E=p(0),b=p(1),C=p(16777216);n=c.prototype,n.m=function(){if(O(this))return-M(this).m();for(var q=0,S=1,x=0;x<this.g.length;x++){var N=this.i(x);q+=(0<=N?N:4294967296+N)*S,S*=4294967296}return q},n.toString=function(q){if(q=q||10,2>q||36<q)throw Error("radix out of range: "+q);if(I(this))return"0";if(O(this))return"-"+M(this).toString(q);for(var S=m(Math.pow(q,6)),x=this,N="";;){var j=J(x,S).g;x=z(x,j.j(S));var B=((0<x.g.length?x.g[0]:x.h)>>>0).toString(q);if(x=j,I(x))return B+N;for(;6>B.length;)B="0"+B;N=B+N}},n.i=function(q){return 0>q?0:q<this.g.length?this.g[q]:this.h};function I(q){if(q.h!=0)return!1;for(var S=0;S<q.g.length;S++)if(q.g[S]!=0)return!1;return!0}function O(q){return q.h==-1}n.l=function(q){return q=z(this,q),O(q)?-1:I(q)?0:1};function M(q){for(var S=q.g.length,x=[],N=0;N<S;N++)x[N]=~q.g[N];return new c(x,~q.h).add(b)}n.abs=function(){return O(this)?M(this):this},n.add=function(q){for(var S=Math.max(this.g.length,q.g.length),x=[],N=0,j=0;j<=S;j++){var B=N+(this.i(j)&65535)+(q.i(j)&65535),D=(B>>>16)+(this.i(j)>>>16)+(q.i(j)>>>16);N=D>>>16,B&=65535,D&=65535,x[j]=D<<16|B}return new c(x,x[x.length-1]&-2147483648?-1:0)};function z(q,S){return q.add(M(S))}n.j=function(q){if(I(this)||I(q))return E;if(O(this))return O(q)?M(this).j(M(q)):M(M(this).j(q));if(O(q))return M(this.j(M(q)));if(0>this.l(C)&&0>q.l(C))return m(this.m()*q.m());for(var S=this.g.length+q.g.length,x=[],N=0;N<2*S;N++)x[N]=0;for(N=0;N<this.g.length;N++)for(var j=0;j<q.g.length;j++){var B=this.i(N)>>>16,D=this.i(N)&65535,Q=q.i(j)>>>16,ae=q.i(j)&65535;x[2*N+2*j]+=D*ae,Y(x,2*N+2*j),x[2*N+2*j+1]+=B*ae,Y(x,2*N+2*j+1),x[2*N+2*j+1]+=D*Q,Y(x,2*N+2*j+1),x[2*N+2*j+2]+=B*Q,Y(x,2*N+2*j+2)}for(N=0;N<S;N++)x[N]=x[2*N+1]<<16|x[2*N];for(N=S;N<2*S;N++)x[N]=0;return new c(x,0)};function Y(q,S){for(;(q[S]&65535)!=q[S];)q[S+1]+=q[S]>>>16,q[S]&=65535,S++}function K(q,S){this.g=q,this.h=S}function J(q,S){if(I(S))throw Error("division by zero");if(I(q))return new K(E,E);if(O(q))return S=J(M(q),S),new K(M(S.g),M(S.h));if(O(S))return S=J(q,M(S)),new K(M(S.g),S.h);if(30<q.g.length){if(O(q)||O(S))throw Error("slowDivide_ only works with positive integers.");for(var x=b,N=S;0>=N.l(q);)x=oe(x),N=oe(N);var j=W(x,1),B=W(N,1);for(N=W(N,2),x=W(x,2);!I(N);){var D=B.add(N);0>=D.l(q)&&(j=j.add(x),B=D),N=W(N,1),x=W(x,1)}return S=z(q,j.j(S)),new K(j,S)}for(j=E;0<=q.l(S);){for(x=Math.max(1,Math.floor(q.m()/S.m())),N=Math.ceil(Math.log(x)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),B=m(x),D=B.j(S);O(D)||0<D.l(q);)x-=N,B=m(x),D=B.j(S);I(B)&&(B=b),j=j.add(B),q=z(q,D)}return new K(j,q)}n.A=function(q){return J(this,q).h},n.and=function(q){for(var S=Math.max(this.g.length,q.g.length),x=[],N=0;N<S;N++)x[N]=this.i(N)&q.i(N);return new c(x,this.h&q.h)},n.or=function(q){for(var S=Math.max(this.g.length,q.g.length),x=[],N=0;N<S;N++)x[N]=this.i(N)|q.i(N);return new c(x,this.h|q.h)},n.xor=function(q){for(var S=Math.max(this.g.length,q.g.length),x=[],N=0;N<S;N++)x[N]=this.i(N)^q.i(N);return new c(x,this.h^q.h)};function oe(q){for(var S=q.g.length+1,x=[],N=0;N<S;N++)x[N]=q.i(N)<<1|q.i(N-1)>>>31;return new c(x,q.h)}function W(q,S){var x=S>>5;S%=32;for(var N=q.g.length-x,j=[],B=0;B<N;B++)j[B]=0<S?q.i(B+x)>>>S|q.i(B+x+1)<<32-S:q.i(B+x);return new c(j,q.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,gA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,Ho=c}).apply(typeof bb<"u"?bb:typeof self<"u"?self:typeof window<"u"?window:{});var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _A,mh,vA,kf,P_,yA,EA,bA;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,R,P){return g==Array.prototype||g==Object.prototype||(g[R]=P.value),g};function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof _f=="object"&&_f];for(var R=0;R<g.length;++R){var P=g[R];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var i=t(this);function s(g,R){if(R)e:{var P=i;g=g.split(".");for(var $=0;$<g.length-1;$++){var fe=g[$];if(!(fe in P))break e;P=P[fe]}g=g[g.length-1],$=P[g],R=R($),R!=$&&R!=null&&e(P,g,{configurable:!0,writable:!0,value:R})}}function l(g,R){g instanceof String&&(g+="");var P=0,$=!1,fe={next:function(){if(!$&&P<g.length){var we=P++;return{value:R(we,g[we]),done:!1}}return $=!0,{done:!0,value:void 0}}};return fe[Symbol.iterator]=function(){return fe},fe}s("Array.prototype.values",function(g){return g||function(){return l(this,function(R,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},f=this||self;function p(g){var R=typeof g;return R=R!="object"?R:g?Array.isArray(g)?"array":R:"null",R=="array"||R=="object"&&typeof g.length=="number"}function m(g){var R=typeof g;return R=="object"&&g!=null||R=="function"}function _(g,R,P){return g.call.apply(g.bind,arguments)}function E(g,R,P){if(!g)throw Error();if(2<arguments.length){var $=Array.prototype.slice.call(arguments,2);return function(){var fe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(fe,$),g.apply(R,fe)}}return function(){return g.apply(R,arguments)}}function b(g,R,P){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,b.apply(null,arguments)}function C(g,R){var P=Array.prototype.slice.call(arguments,1);return function(){var $=P.slice();return $.push.apply($,arguments),g.apply(this,$)}}function I(g,R){function P(){}P.prototype=R.prototype,g.aa=R.prototype,g.prototype=new P,g.prototype.constructor=g,g.Qb=function($,fe,we){for(var Pe=Array(arguments.length-2),Nt=2;Nt<arguments.length;Nt++)Pe[Nt-2]=arguments[Nt];return R.prototype[fe].apply($,Pe)}}function O(g){const R=g.length;if(0<R){const P=Array(R);for(let $=0;$<R;$++)P[$]=g[$];return P}return[]}function M(g,R){for(let P=1;P<arguments.length;P++){const $=arguments[P];if(p($)){const fe=g.length||0,we=$.length||0;g.length=fe+we;for(let Pe=0;Pe<we;Pe++)g[fe+Pe]=$[Pe]}else g.push($)}}class z{constructor(R,P){this.i=R,this.j=P,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function Y(g){return/^[\s\xa0]*$/.test(g)}function K(){var g=f.navigator;return g&&(g=g.userAgent)?g:""}function J(g){return J[" "](g),g}J[" "]=function(){};var oe=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function W(g,R,P){for(const $ in g)R.call(P,g[$],$,g)}function q(g,R){for(const P in g)R.call(void 0,g[P],P,g)}function S(g){const R={};for(const P in g)R[P]=g[P];return R}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(g,R){let P,$;for(let fe=1;fe<arguments.length;fe++){$=arguments[fe];for(P in $)g[P]=$[P];for(let we=0;we<x.length;we++)P=x[we],Object.prototype.hasOwnProperty.call($,P)&&(g[P]=$[P])}}function j(g){var R=1;g=g.split(":");const P=[];for(;0<R&&g.length;)P.push(g.shift()),R--;return g.length&&P.push(g.join(":")),P}function B(g){f.setTimeout(()=>{throw g},0)}function D(){var g=ee;let R=null;return g.g&&(R=g.g,g.g=g.g.next,g.g||(g.h=null),R.next=null),R}class Q{constructor(){this.h=this.g=null}add(R,P){const $=ae.get();$.set(R,P),this.h?this.h.next=$:this.g=$,this.h=$}}var ae=new z(()=>new U,g=>g.reset());class U{constructor(){this.next=this.g=this.h=null}set(R,P){this.h=R,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let F,X=!1,ee=new Q,H=()=>{const g=f.Promise.resolve(void 0);F=()=>{g.then(ne)}};var ne=()=>{for(var g;g=D();){try{g.h.call(g.g)}catch(P){B(P)}var R=ae;R.j(g),100>R.h&&(R.h++,g.next=R.g,R.g=g)}X=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(g,R){this.type=g,this.g=this.target=R,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var g=!1,R=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const P=()=>{};f.addEventListener("test",P,R),f.removeEventListener("test",P,R)}catch{}return g}();function ue(g,R){if(se.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var P=this.type=g.type,$=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=R,R=g.relatedTarget){if(oe){e:{try{J(R.nodeName);var fe=!0;break e}catch{}fe=!1}fe||(R=null)}}else P=="mouseover"?R=g.fromElement:P=="mouseout"&&(R=g.toElement);this.relatedTarget=R,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:ye[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ue.aa.h.call(this)}}I(ue,se);var ye={2:"touch",3:"pen",4:"mouse"};ue.prototype.h=function(){ue.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var Fe="closure_listenable_"+(1e6*Math.random()|0),ke=0;function De(g,R,P,$,fe){this.listener=g,this.proxy=null,this.src=R,this.type=P,this.capture=!!$,this.ha=fe,this.key=++ke,this.da=this.fa=!1}function qe(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function je(g){this.src=g,this.g={},this.h=0}je.prototype.add=function(g,R,P,$,fe){var we=g.toString();g=this.g[we],g||(g=this.g[we]=[],this.h++);var Pe=Et(g,R,$,fe);return-1<Pe?(R=g[Pe],P||(R.fa=!1)):(R=new De(R,this.src,we,!!$,fe),R.fa=P,g.push(R)),R};function Ze(g,R){var P=R.type;if(P in g.g){var $=g.g[P],fe=Array.prototype.indexOf.call($,R,void 0),we;(we=0<=fe)&&Array.prototype.splice.call($,fe,1),we&&(qe(R),g.g[P].length==0&&(delete g.g[P],g.h--))}}function Et(g,R,P,$){for(var fe=0;fe<g.length;++fe){var we=g[fe];if(!we.da&&we.listener==R&&we.capture==!!P&&we.ha==$)return fe}return-1}var be="closure_lm_"+(1e6*Math.random()|0),Ne={};function Oe(g,R,P,$,fe){if(Array.isArray(R)){for(var we=0;we<R.length;we++)Oe(g,R[we],P,$,fe);return null}return P=Ht(P),g&&g[Fe]?g.K(R,P,m($)?!!$.capture:!1,fe):Le(g,R,P,!1,$,fe)}function Le(g,R,P,$,fe,we){if(!R)throw Error("Invalid event type");var Pe=m(fe)?!!fe.capture:!!fe,Nt=kt(g);if(Nt||(g[be]=Nt=new je(g)),P=Nt.add(R,P,$,Pe,we),P.proxy)return P;if($=Me(),P.proxy=$,$.src=g,$.listener=P,g.addEventListener)he||(fe=Pe),fe===void 0&&(fe=!1),g.addEventListener(R.toString(),$,fe);else if(g.attachEvent)g.attachEvent(_t(R.toString()),$);else if(g.addListener&&g.removeListener)g.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Me(){function g(P){return R.call(g.src,g.listener,P)}const R=Vt;return g}function Qe(g,R,P,$,fe){if(Array.isArray(R))for(var we=0;we<R.length;we++)Qe(g,R[we],P,$,fe);else $=m($)?!!$.capture:!!$,P=Ht(P),g&&g[Fe]?(g=g.i,R=String(R).toString(),R in g.g&&(we=g.g[R],P=Et(we,P,$,fe),-1<P&&(qe(we[P]),Array.prototype.splice.call(we,P,1),we.length==0&&(delete g.g[R],g.h--)))):g&&(g=kt(g))&&(R=g.g[R.toString()],g=-1,R&&(g=Et(R,P,$,fe)),(P=-1<g?R[g]:null)&&it(P))}function it(g){if(typeof g!="number"&&g&&!g.da){var R=g.src;if(R&&R[Fe])Ze(R.i,g);else{var P=g.type,$=g.proxy;R.removeEventListener?R.removeEventListener(P,$,g.capture):R.detachEvent?R.detachEvent(_t(P),$):R.addListener&&R.removeListener&&R.removeListener($),(P=kt(R))?(Ze(P,g),P.h==0&&(P.src=null,R[be]=null)):qe(g)}}}function _t(g){return g in Ne?Ne[g]:Ne[g]="on"+g}function Vt(g,R){if(g.da)g=!0;else{R=new ue(R,this);var P=g.listener,$=g.ha||g.src;g.fa&&it(g),g=P.call($,R)}return g}function kt(g){return g=g[be],g instanceof je?g:null}var rt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ht(g){return typeof g=="function"?g:(g[rt]||(g[rt]=function(R){return g.handleEvent(R)}),g[rt])}function Je(){le.call(this),this.i=new je(this),this.M=this,this.F=null}I(Je,le),Je.prototype[Fe]=!0,Je.prototype.removeEventListener=function(g,R,P,$){Qe(this,g,R,P,$)};function tt(g,R){var P,$=g.F;if($)for(P=[];$;$=$.F)P.push($);if(g=g.M,$=R.type||R,typeof R=="string")R=new se(R,g);else if(R instanceof se)R.target=R.target||g;else{var fe=R;R=new se($,g),N(R,fe)}if(fe=!0,P)for(var we=P.length-1;0<=we;we--){var Pe=R.g=P[we];fe=mt(Pe,$,!0,R)&&fe}if(Pe=R.g=g,fe=mt(Pe,$,!0,R)&&fe,fe=mt(Pe,$,!1,R)&&fe,P)for(we=0;we<P.length;we++)Pe=R.g=P[we],fe=mt(Pe,$,!1,R)&&fe}Je.prototype.N=function(){if(Je.aa.N.call(this),this.i){var g=this.i,R;for(R in g.g){for(var P=g.g[R],$=0;$<P.length;$++)qe(P[$]);delete g.g[R],g.h--}}this.F=null},Je.prototype.K=function(g,R,P,$){return this.i.add(String(g),R,!1,P,$)},Je.prototype.L=function(g,R,P,$){return this.i.add(String(g),R,!0,P,$)};function mt(g,R,P,$){if(R=g.i.g[String(R)],!R)return!0;R=R.concat();for(var fe=!0,we=0;we<R.length;++we){var Pe=R[we];if(Pe&&!Pe.da&&Pe.capture==P){var Nt=Pe.listener,Cn=Pe.ha||Pe.src;Pe.fa&&Ze(g.i,Pe),fe=Nt.call(Cn,$)!==!1&&fe}}return fe&&!$.defaultPrevented}function qt(g,R,P){if(typeof g=="function")P&&(g=b(g,P));else if(g&&typeof g.handleEvent=="function")g=b(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:f.setTimeout(g,R||0)}function on(g){g.g=qt(()=>{g.g=null,g.i&&(g.i=!1,on(g))},g.l);const R=g.h;g.h=null,g.m.apply(null,R)}class mn extends le{constructor(R,P){super(),this.m=R,this.l=P,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:on(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ut(g){le.call(this),this.h=g,this.g={}}I(Ut,le);var ln=[];function gn(g){W(g.g,function(R,P){this.g.hasOwnProperty(P)&&it(R)},g),g.g={}}Ut.prototype.N=function(){Ut.aa.N.call(this),gn(this)},Ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Sn=f.JSON.stringify,Lr=f.JSON.parse,Li=class{stringify(g){return f.JSON.stringify(g,void 0)}parse(g){return f.JSON.parse(g,void 0)}};function is(){}is.prototype.h=null;function Is(g){return g.h||(g.h=g.i())}function Ki(){}var $i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){se.call(this,"d")}I(Mn,se);function yi(){se.call(this,"c")}I(yi,se);var Kn={},cr=null;function hr(){return cr=cr||new Je}Kn.La="serverreachability";function Ei(g){se.call(this,Kn.La,g)}I(Ei,se);function Jn(g){const R=hr();tt(R,new Ei(R))}Kn.STAT_EVENT="statevent";function Ha(g,R){se.call(this,Kn.STAT_EVENT,g),this.stat=R}I(Ha,se);function un(g){const R=hr();tt(R,new Ha(R,g))}Kn.Ma="timingevent";function Dn(g,R){se.call(this,Kn.Ma,g),this.size=R}I(Dn,se);function xn(g,R){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){g()},R)}function Yi(){this.g=!0}Yi.prototype.xa=function(){this.g=!1};function bi(g,R,P,$,fe,we){g.info(function(){if(g.g)if(we)for(var Pe="",Nt=we.split("&"),Cn=0;Cn<Nt.length;Cn++){var Ot=Nt[Cn].split("=");if(1<Ot.length){var Zt=Ot[0];Ot=Ot[1];var hn=Zt.split("_");Pe=2<=hn.length&&hn[1]=="type"?Pe+(Zt+"="+Ot+"&"):Pe+(Zt+"=redacted&")}}else Pe=null;else Pe=we;return"XMLHTTP REQ ("+$+") [attempt "+fe+"]: "+R+`
`+P+`
`+Pe})}function Ke(g,R,P,$,fe,we,Pe){g.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+fe+"]: "+R+`
`+P+`
`+we+" "+Pe})}function rs(g,R,P,$){g.info(function(){return"XMLHTTP TEXT ("+R+"): "+ks(g,P)+($?" "+$:"")})}function al(g,R){g.info(function(){return"TIMEOUT: "+R})}Yi.prototype.info=function(){};function ks(g,R){if(!g.g)return R;if(!R)return null;try{var P=JSON.parse(R);if(P){for(g=0;g<P.length;g++)if(Array.isArray(P[g])){var $=P[g];if(!(2>$.length)){var fe=$[1];if(Array.isArray(fe)&&!(1>fe.length)){var we=fe[0];if(we!="noop"&&we!="stop"&&we!="close")for(var Pe=1;Pe<fe.length;Pe++)fe[Pe]=""}}}}return Sn(P)}catch{return R}}var ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dr={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fr;function ui(){}I(ui,is),ui.prototype.g=function(){return new XMLHttpRequest},ui.prototype.i=function(){return{}},fr=new ui;function ei(g,R,P,$){this.j=g,this.i=R,this.l=P,this.R=$||1,this.U=new Ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bn}function bn(){this.i=null,this.g="",this.h=!1}var ol={},qa={};function pr(g,R,P){g.L=1,g.v=ji(cn(R)),g.m=P,g.P=!0,jr(g,null)}function jr(g,R){g.F=Date.now(),aa(g),g.A=cn(g.v);var P=g.A,$=g.R;Array.isArray($)||($=[String($)]),cl(P.i,"t",$),g.C=0,P=g.j.J,g.h=new bn,g.g=ou(g.j,P?R:null,!g.m),0<g.O&&(g.M=new mn(b(g.Y,g,g.g),g.O)),R=g.U,P=g.g,$=g.ca;var fe="readystatechange";Array.isArray(fe)||(fe&&(ln[0]=fe.toString()),fe=ln);for(var we=0;we<fe.length;we++){var Pe=Oe(P,fe[we],$||R.handleEvent,!1,R.h||R);if(!Pe)break;R.g[Pe.key]=Pe}R=g.H?S(g.H):{},g.m?(g.u||(g.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,R)):(g.u="GET",g.g.ea(g.A,g.u,null,R)),Jn(),bi(g.i,g.u,g.A,g.l,g.R,g.m)}ei.prototype.ca=function(g){g=g.target;const R=this.M;R&&ii(g)==3?R.j():this.Y(g)},ei.prototype.Y=function(g){try{if(g==this.g)e:{const hn=ii(this.g);var R=this.g.Ba();const fs=this.g.Z();if(!(3>hn)&&(hn!=3||this.g&&(this.h.h||this.g.oa()||hl(this.g)))){this.J||hn!=4||R==7||(R==8||0>=fs?Jn(3):Jn(2)),Ns(this);var P=this.g.Z();this.X=P;t:if(nu(this)){var $=hl(this.g);g="";var fe=$.length,we=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$n(this),Vr(this);var Pe="";break t}this.h.i=new f.TextDecoder}for(R=0;R<fe;R++)this.h.h=!0,g+=this.h.i.decode($[R],{stream:!(we&&R==fe-1)});$.length=0,this.h.g+=g,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=P==200,Ke(this.i,this.u,this.A,this.l,this.R,hn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var Nt,Cn=this.g;if((Nt=Cn.g?Cn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(Nt)){var Ot=Nt;break t}}Ot=null}if(P=Ot)rs(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,as(this,P);else{this.o=!1,this.s=3,un(12),$n(this),Vr(this);break e}}if(this.P){P=!0;let sn;for(;!this.J&&this.C<Pe.length;)if(sn=sa(this,Pe),sn==qa){hn==4&&(this.s=4,un(14),P=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==ol){this.s=4,un(15),rs(this.i,this.l,Pe,"[Invalid Chunk]"),P=!1;break}else rs(this.i,this.l,sn,null),as(this,sn);if(nu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hn!=4||Pe.length!=0||this.h.h||(this.s=1,un(16),P=!1),this.o=this.o&&P,!P)rs(this.i,this.l,Pe,"[Invalid Chunked Response]"),$n(this),Vr(this);else if(0<Pe.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),js(Zt),Zt.M=!0,un(11))}}else rs(this.i,this.l,Pe,null),as(this,Pe);hn==4&&$n(this),this.o&&!this.J&&(hn==4?fl(this.j,this):(this.o=!1,aa(this)))}else gc(this.g),P==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),$n(this),Vr(this)}}}catch{}finally{}};function nu(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function sa(g,R){var P=g.C,$=R.indexOf(`
`,P);return $==-1?qa:(P=Number(R.substring(P,$)),isNaN(P)?ol:($+=1,$+P>R.length?qa:(R=R.slice($,$+P),g.C=$+P,R)))}ei.prototype.cancel=function(){this.J=!0,$n(this)};function aa(g){g.S=Date.now()+g.I,iu(g,g.I)}function iu(g,R){if(g.B!=null)throw Error("WatchDog timer not null");g.B=xn(b(g.ba,g),R)}function Ns(g){g.B&&(f.clearTimeout(g.B),g.B=null)}ei.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(al(this.i,this.A),this.L!=2&&(Jn(),un(17)),$n(this),this.s=2,Vr(this)):iu(this,this.S-g)};function Vr(g){g.j.G==0||g.J||fl(g.j,g)}function $n(g){Ns(g);var R=g.M;R&&typeof R.ma=="function"&&R.ma(),g.M=null,gn(g.U),g.g&&(R=g.g,g.g=null,R.abort(),R.ma())}function as(g,R){try{var P=g.j;if(P.G!=0&&(P.g==g||At(P.h,g))){if(!g.K&&At(P.h,g)&&P.G==3){try{var $=P.Da.g.parse(R)}catch{$=null}if(Array.isArray($)&&$.length==3){var fe=$;if(fe[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<g.F)Ja(P),Qa(P);else break e;Wa(P),un(18)}}else P.za=fe[1],0<P.za-P.T&&37500>fe[2]&&P.F&&P.v==0&&!P.C&&(P.C=xn(b(P.Za,P),6e3));if(1>=Br(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else ds(P,11)}else if((g.K||P.g==g)&&Ja(P),!Y(R))for(fe=P.Da.g.parse(R),R=0;R<fe.length;R++){let Ot=fe[R];if(P.T=Ot[0],Ot=Ot[1],P.G==2)if(Ot[0]=="c"){P.K=Ot[1],P.ia=Ot[2];const Zt=Ot[3];Zt!=null&&(P.la=Zt,P.j.info("VER="+P.la));const hn=Ot[4];hn!=null&&(P.Aa=hn,P.j.info("SVER="+P.Aa));const fs=Ot[5];fs!=null&&typeof fs=="number"&&0<fs&&($=1.5*fs,P.L=$,P.j.info("backChannelRequestTimeoutMs_="+$)),$=P;const sn=g.g;if(sn){const Gr=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gr){var we=$.h;we.g||Gr.indexOf("spdy")==-1&&Gr.indexOf("quic")==-1&&Gr.indexOf("h2")==-1||(we.j=we.l,we.g=new Set,we.h&&(Gt(we,we.h),we.h=null))}if($.D){const Zr=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zr&&($.ya=Zr,at($.I,$.D,Zr))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-g.F,P.j.info("Handshake RTT: "+P.R+"ms")),$=P;var Pe=g;if($.qa=to($,$.J?$.ia:null,$.W),Pe.K){Bn($.h,Pe);var Nt=Pe,Cn=$.L;Cn&&(Nt.I=Cn),Nt.B&&(Ns(Nt),aa(Nt)),$.g=Pe}else Er($);0<P.i.length&&Ls(P)}else Ot[0]!="stop"&&Ot[0]!="close"||ds(P,7);else P.G==3&&(Ot[0]=="stop"||Ot[0]=="close"?Ot[0]=="stop"?ds(P,7):Ya(P):Ot[0]!="noop"&&P.l&&P.l.ta(Ot),P.v=0)}}Jn(4)}catch{}}var Os=class{constructor(g,R){this.g=g,this.map=R}};function Ur(g){this.l=g||10,f.PerformanceNavigationTiming?(g=f.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oa(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Br(g){return g.h?1:g.g?g.g.size:0}function At(g,R){return g.h?g.h==R:g.g?g.g.has(R):!1}function Gt(g,R){g.g?g.g.add(R):g.h=R}function Bn(g,R){g.h&&g.h==R?g.h=null:g.g&&g.g.has(R)&&g.g.delete(R)}Ur.prototype.cancel=function(){if(this.i=Fr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Fr(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let R=g.i;for(const P of g.g.values())R=R.concat(P.D);return R}return O(g.i)}function Ps(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(p(g)){for(var R=[],P=g.length,$=0;$<P;$++)R.push(g[$]);return R}R=[],P=0;for($ in g)R[P++]=g[$];return R}function Ms(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(p(g)||typeof g=="string"){var R=[];g=g.length;for(var P=0;P<g;P++)R.push(P);return R}R=[],P=0;for(const $ in g)R[P++]=$;return R}}}function ht(g,R){if(g.forEach&&typeof g.forEach=="function")g.forEach(R,void 0);else if(p(g)||typeof g=="string")Array.prototype.forEach.call(g,R,void 0);else for(var P=Ms(g),$=Ps(g),fe=$.length,we=0;we<fe;we++)R.call(void 0,$[we],P&&P[we],g)}var Yt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ll(g,R){if(g){g=g.split("&");for(var P=0;P<g.length;P++){var $=g[P].indexOf("="),fe=null;if(0<=$){var we=g[P].substring(0,$);fe=g[P].substring($+1)}else we=g[P];R(we,fe?decodeURIComponent(fe.replace(/\+/g," ")):"")}}}function _n(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof _n){this.h=g.h,la(this,g.j),this.o=g.o,this.g=g.g,mr(this,g.s),this.l=g.l;var R=g.i,P=new _r;P.i=R.i,R.g&&(P.g=new Map(R.g),P.h=R.h),ci(this,P),this.m=g.m}else g&&(R=String(g).match(Yt))?(this.h=!1,la(this,R[1]||"",!0),this.o=ti(R[2]||""),this.g=ti(R[3]||"",!0),mr(this,R[4]),this.l=ti(R[5]||"",!0),ci(this,R[6]||"",!0),this.m=ti(R[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}_n.prototype.toString=function(){var g=[],R=this.j;R&&g.push(gr(R,os,!0),":");var P=this.g;return(P||R=="file")&&(g.push("//"),(R=this.o)&&g.push(gr(R,os,!0),"@"),g.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&g.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&g.push("/"),g.push(gr(P,P.charAt(0)=="/"?ul:ua,!0))),(P=this.i.toString())&&g.push("?",P),(P=this.m)&&g.push("#",gr(P,Ds)),g.join("")};function cn(g){return new _n(g)}function la(g,R,P){g.j=P?ti(R,!0):R,g.j&&(g.j=g.j.replace(/:$/,""))}function mr(g,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);g.s=R}else g.s=null}function ci(g,R,P){R instanceof _r?(g.i=R,Vi(g.i,g.h)):(P||(R=gr(R,Za)),g.i=new _r(R,g.h))}function at(g,R,P){g.i.set(R,P)}function ji(g){return at(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function ti(g,R){return g?R?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function gr(g,R,P){return typeof g=="string"?(g=encodeURI(g).replace(R,Ga),P&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function Ga(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var os=/[#\/\?@]/g,ua=/[#\?:]/g,ul=/[#\?]/g,Za=/[#\?@]/g,Ds=/#/g;function _r(g,R){this.h=this.g=null,this.i=g||null,this.j=!!R}function hi(g){g.g||(g.g=new Map,g.h=0,g.i&&ll(g.i,function(R,P){g.add(decodeURIComponent(R.replace(/\+/g," ")),P)}))}n=_r.prototype,n.add=function(g,R){hi(this),this.i=null,g=et(this,g);var P=this.g.get(g);return P||this.g.set(g,P=[]),P.push(R),this.h+=1,this};function zr(g,R){hi(g),R=et(g,R),g.g.has(R)&&(g.i=null,g.h-=g.g.get(R).length,g.g.delete(R))}function vr(g,R){return hi(g),R=et(g,R),g.g.has(R)}n.forEach=function(g,R){hi(this),this.g.forEach(function(P,$){P.forEach(function(fe){g.call(R,fe,$,this)},this)},this)},n.na=function(){hi(this);const g=Array.from(this.g.values()),R=Array.from(this.g.keys()),P=[];for(let $=0;$<R.length;$++){const fe=g[$];for(let we=0;we<fe.length;we++)P.push(R[$])}return P},n.V=function(g){hi(this);let R=[];if(typeof g=="string")vr(this,g)&&(R=R.concat(this.g.get(et(this,g))));else{g=Array.from(this.g.values());for(let P=0;P<g.length;P++)R=R.concat(g[P])}return R},n.set=function(g,R){return hi(this),this.i=null,g=et(this,g),vr(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[R]),this.h+=1,this},n.get=function(g,R){return g?(g=this.V(g),0<g.length?String(g[0]):R):R};function cl(g,R,P){zr(g,R),0<P.length&&(g.i=null,g.g.set(et(g,R),O(P)),g.h+=P.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],R=Array.from(this.g.keys());for(var P=0;P<R.length;P++){var $=R[P];const we=encodeURIComponent(String($)),Pe=this.V($);for($=0;$<Pe.length;$++){var fe=we;Pe[$]!==""&&(fe+="="+encodeURIComponent(String(Pe[$]))),g.push(fe)}}return this.i=g.join("&")};function et(g,R){return R=String(R),g.j&&(R=R.toLowerCase()),R}function Vi(g,R){R&&!g.j&&(hi(g),g.i=null,g.g.forEach(function(P,$){var fe=$.toLowerCase();$!=fe&&(zr(this,$),cl(this,fe,P))},g)),g.j=R}function Dt(g,R){const P=new Yi;if(f.Image){const $=new Image;$.onload=C(wi,P,"TestLoadImage: loaded",!0,R,$),$.onerror=C(wi,P,"TestLoadImage: error",!1,R,$),$.onabort=C(wi,P,"TestLoadImage: abort",!1,R,$),$.ontimeout=C(wi,P,"TestLoadImage: timeout",!1,R,$),f.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=g}else R(!1)}function Qi(g,R){const P=new Yi,$=new AbortController,fe=setTimeout(()=>{$.abort(),wi(P,"TestPingServer: timeout",!1,R)},1e4);fetch(g,{signal:$.signal}).then(we=>{clearTimeout(fe),we.ok?wi(P,"TestPingServer: ok",!0,R):wi(P,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(fe),wi(P,"TestPingServer: error",!1,R)})}function wi(g,R,P,$,fe){try{fe&&(fe.onload=null,fe.onerror=null,fe.onabort=null,fe.ontimeout=null),$(P)}catch{}}function ls(){this.g=new Li}function Wi(g,R,P){const $=P||"";try{ht(g,function(fe,we){let Pe=fe;m(fe)&&(Pe=Sn(fe)),R.push($+we+"="+encodeURIComponent(Pe))})}catch(fe){throw R.push($+"type="+encodeURIComponent("_badmap")),fe}}function Ti(g){this.l=g.Ub||null,this.j=g.eb||!1}I(Ti,is),Ti.prototype.g=function(){return new yr(this.l,this.j)},Ti.prototype.i=function(g){return function(){return g}}({});function yr(g,R){Je.call(this),this.D=g,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(yr,Je),n=yr.prototype,n.open=function(g,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=R,this.readyState=1,ni(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(R.body=g),(this.D||f).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,en(this)),this.readyState=0},n.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;us(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function us(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}n.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var R=g.value?g.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!g.done}))&&(this.response=this.responseText+=R)}g.done?en(this):ni(this),this.readyState==3&&us(this)}},n.Ra=function(g){this.g&&(this.response=this.responseText=g,en(this))},n.Qa=function(g){this.g&&(this.response=g,en(this))},n.ga=function(){this.g&&en(this)};function en(g){g.readyState=4,g.l=null,g.j=null,g.v=null,ni(g)}n.setRequestHeader=function(g,R){this.u.append(g,R)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],R=this.h.entries();for(var P=R.next();!P.done;)P=P.value,g.push(P[0]+": "+P[1]),P=R.next();return g.join(`\r
`)};function ni(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(yr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Ka(g){let R="";return W(g,function(P,$){R+=$,R+=":",R+=P,R+=`\r
`}),R}function Ln(g,R,P){e:{for($ in P){var $=!1;break e}$=!0}$||(P=Ka(P),typeof g=="string"?P!=null&&encodeURIComponent(String(P)):at(g,R,P))}function Bt(g){Je.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Bt,Je);var ca=/^https?$/i,cs=["POST","PUT"];n=Bt.prototype,n.Ha=function(g){this.J=g},n.ea=function(g,R,P,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);R=R?R.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fr.g(),this.v=this.o?Is(this.o):Is(fr),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(R,String(g),!0),this.B=!1}catch(we){ru(this,we);return}if(g=P||"",P=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var fe in $)P.set(fe,$[fe]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const we of $.keys())P.set(we,$.get(we));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(P.keys()).find(we=>we.toLowerCase()=="content-type"),fe=f.FormData&&g instanceof f.FormData,!(0<=Array.prototype.indexOf.call(cs,R,void 0))||$||fe||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[we,Pe]of P)this.g.setRequestHeader(we,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yn(this),this.u=!0,this.g.send(g),this.u=!1}catch(we){ru(this,we)}};function ru(g,R){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=R,g.m=5,ha(g),Hr(g)}function ha(g){g.A||(g.A=!0,tt(g,"complete"),tt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,tt(this,"complete"),tt(this,"abort"),Hr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hr(this,!0)),Bt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vt(this):this.bb())},n.bb=function(){vt(this)};function vt(g){if(g.h&&typeof c<"u"&&(!g.v[1]||ii(g)!=4||g.Z()!=2)){if(g.u&&ii(g)==4)qt(g.Ea,0,g);else if(tt(g,"readystatechange"),ii(g)==4){g.h=!1;try{const Pe=g.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var P;if(!(P=R)){var $;if($=Pe===0){var fe=String(g.D).match(Yt)[1]||null;!fe&&f.self&&f.self.location&&(fe=f.self.location.protocol.slice(0,-1)),$=!ca.test(fe?fe.toLowerCase():"")}P=$}if(P)tt(g,"complete"),tt(g,"success");else{g.m=6;try{var we=2<ii(g)?g.g.statusText:""}catch{we=""}g.l=we+" ["+g.Z()+"]",ha(g)}}finally{Hr(g)}}}}function Hr(g,R){if(g.g){Yn(g);const P=g.g,$=g.v[0]?()=>{}:null;g.g=null,g.v=null,R||tt(g,"ready");try{P.onreadystatechange=$}catch{}}}function Yn(g){g.I&&(f.clearTimeout(g.I),g.I=null)}n.isActive=function(){return!!this.g};function ii(g){return g.g?g.g.readyState:0}n.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(g){if(this.g){var R=this.g.responseText;return g&&R.indexOf(g)==0&&(R=R.substring(g.length)),Lr(R)}};function hl(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function gc(g){const R={};g=(g.g&&2<=ii(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<g.length;$++){if(Y(g[$]))continue;var P=j(g[$]);const fe=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const we=R[fe]||[];R[fe]=we,we.push(P)}q(R,function($){return $.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hs(g,R,P){return P&&P.internalChannelParams&&P.internalChannelParams[g]||R}function $a(g){this.Aa=0,this.i=[],this.j=new Yi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hs("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hs("baseRetryDelayMs",5e3,g),this.cb=hs("retryDelaySeedMs",1e4,g),this.Wa=hs("forwardChannelMaxRetries",2,g),this.wa=hs("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Ur(g&&g.concurrentRequestLimit),this.Da=new ls,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=$a.prototype,n.la=8,n.G=1,n.connect=function(g,R,P,$){un(0),this.W=g,this.H=R||{},P&&$!==void 0&&(this.H.OSID=P,this.H.OAID=$),this.F=this.X,this.I=to(this,null,this.W),Ls(this)};function Ya(g){if(su(g),g.G==3){var R=g.U++,P=cn(g.I);if(at(P,"SID",g.K),at(P,"RID",R),at(P,"TYPE","terminate"),da(g,P),R=new ei(g,g.j,R),R.L=2,R.v=ji(cn(P)),P=!1,f.navigator&&f.navigator.sendBeacon)try{P=f.navigator.sendBeacon(R.v.toString(),"")}catch{}!P&&f.Image&&(new Image().src=R.v,P=!0),P||(R.g=ou(R.j,null),R.g.ea(R.v)),R.F=Date.now(),aa(R)}au(g)}function Qa(g){g.g&&(js(g),g.g.cancel(),g.g=null)}function su(g){Qa(g),g.u&&(f.clearTimeout(g.u),g.u=null),Ja(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&f.clearTimeout(g.s),g.s=null)}function Ls(g){if(!oa(g.h)&&!g.s){g.s=!0;var R=g.Ga;F||H(),X||(F(),X=!0),ee.add(R,g),g.B=0}}function _c(g,R){return Br(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=R.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=xn(b(g.Ga,g,R),eo(g,g.B)),g.B++,!0)}n.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const fe=new ei(this,this.j,g);let we=this.o;if(this.S&&(we?(we=S(we),N(we,this.S)):we=this.S),this.m!==null||this.O||(fe.H=we,we=null),this.P)e:{for(var R=0,P=0;P<this.i.length;P++){t:{var $=this.i[P];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(R+=$,4096<R){R=P;break e}if(R===4096||P===this.i.length-1){R=P+1;break e}}R=1e3}else R=1e3;R=dl(this,fe,R),P=cn(this.I),at(P,"RID",g),at(P,"CVER",22),this.D&&at(P,"X-HTTP-Session-Id",this.D),da(this,P),we&&(this.O?R="headers="+encodeURIComponent(String(Ka(we)))+"&"+R:this.m&&Ln(P,this.m,we)),Gt(this.h,fe),this.Ua&&at(P,"TYPE","init"),this.P?(at(P,"$req",R),at(P,"SID","null"),fe.T=!0,pr(fe,P,null)):pr(fe,P,R),this.G=2}}else this.G==3&&(g?Ai(this,g):this.i.length==0||oa(this.h)||Ai(this))};function Ai(g,R){var P;R?P=R.l:P=g.U++;const $=cn(g.I);at($,"SID",g.K),at($,"RID",P),at($,"AID",g.T),da(g,$),g.m&&g.o&&Ln($,g.m,g.o),P=new ei(g,g.j,P,g.B+1),g.m===null&&(P.H=g.o),R&&(g.i=R.D.concat(g.i)),R=dl(g,P,1e3),P.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Gt(g.h,P),pr(P,$,R)}function da(g,R){g.H&&W(g.H,function(P,$){at(R,$,P)}),g.l&&ht({},function(P,$){at(R,$,P)})}function dl(g,R,P){P=Math.min(g.i.length,P);var $=g.l?b(g.l.Na,g.l,g):null;e:{var fe=g.i;let we=-1;for(;;){const Pe=["count="+P];we==-1?0<P?(we=fe[0].g,Pe.push("ofs="+we)):we=0:Pe.push("ofs="+we);let Nt=!0;for(let Cn=0;Cn<P;Cn++){let Ot=fe[Cn].g;const Zt=fe[Cn].map;if(Ot-=we,0>Ot)we=Math.max(0,fe[Cn].g-100),Nt=!1;else try{Wi(Zt,Pe,"req"+Ot+"_")}catch{$&&$(Zt)}}if(Nt){$=Pe.join("&");break e}}}return g=g.i.splice(0,P),R.D=g,$}function Er(g){if(!g.g&&!g.u){g.Y=1;var R=g.Fa;F||H(),X||(F(),X=!0),ee.add(R,g),g.v=0}}function Wa(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=xn(b(g.Fa,g),eo(g,g.v)),g.v++,!0)}n.Fa=function(){if(this.u=null,Xa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=xn(b(this.ab,this),g)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Qa(this),Xa(this))};function js(g){g.A!=null&&(f.clearTimeout(g.A),g.A=null)}function Xa(g){g.g=new ei(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var R=cn(g.qa);at(R,"RID","rpc"),at(R,"SID",g.K),at(R,"AID",g.T),at(R,"CI",g.F?"0":"1"),!g.F&&g.ja&&at(R,"TO",g.ja),at(R,"TYPE","xmlhttp"),da(g,R),g.m&&g.o&&Ln(R,g.m,g.o),g.L&&(g.g.I=g.L);var P=g.g;g=g.ia,P.L=1,P.v=ji(cn(R)),P.m=null,P.P=!0,jr(P,g)}n.Za=function(){this.C!=null&&(this.C=null,Qa(this),Wa(this),un(19))};function Ja(g){g.C!=null&&(f.clearTimeout(g.C),g.C=null)}function fl(g,R){var P=null;if(g.g==R){Ja(g),js(g),g.g=null;var $=2}else if(At(g.h,R))P=R.D,Bn(g.h,R),$=1;else return;if(g.G!=0){if(R.o)if($==1){P=R.m?R.m.length:0,R=Date.now()-R.F;var fe=g.B;$=hr(),tt($,new Dn($,P)),Ls(g)}else Er(g);else if(fe=R.s,fe==3||fe==0&&0<R.X||!($==1&&_c(g,R)||$==2&&Wa(g)))switch(P&&0<P.length&&(R=g.h,R.i=R.i.concat(P)),fe){case 1:ds(g,5);break;case 4:ds(g,10);break;case 3:ds(g,6);break;default:ds(g,2)}}}function eo(g,R){let P=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(P*=2),P*R}function ds(g,R){if(g.j.info("Error code "+R),R==2){var P=b(g.fb,g),$=g.Xa;const fe=!$;$=new _n($||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||la($,"https"),ji($),fe?Dt($.toString(),P):Qi($.toString(),P)}else un(2);g.G=0,g.l&&g.l.sa(R),au(g),su(g)}n.fb=function(g){g?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function au(g){if(g.G=0,g.ka=[],g.l){const R=Fr(g.h);(R.length!=0||g.i.length!=0)&&(M(g.ka,R),M(g.ka,g.i),g.h.i.length=0,O(g.i),g.i.length=0),g.l.ra()}}function to(g,R,P){var $=P instanceof _n?cn(P):new _n(P);if($.g!="")R&&($.g=R+"."+$.g),mr($,$.s);else{var fe=f.location;$=fe.protocol,R=R?R+"."+fe.hostname:fe.hostname,fe=+fe.port;var we=new _n(null);$&&la(we,$),R&&(we.g=R),fe&&mr(we,fe),P&&(we.l=P),$=we}return P=g.D,R=g.ya,P&&R&&at($,P,R),at($,"VER",g.la),da(g,$),$}function ou(g,R,P){if(R&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=g.Ca&&!g.pa?new Bt(new Ti({eb:P})):new Bt(g.pa),R.Ha(g.J),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function pl(){}n=pl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function fa(){}fa.prototype.g=function(g,R){return new Fn(g,R)};function Fn(g,R){Je.call(this),this.g=new $a(R),this.l=g,this.h=R&&R.messageUrlParams||null,g=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(g?g["X-WebChannel-Content-Type"]=R.messageContentType:g={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(g?g["X-WebChannel-Client-Profile"]=R.va:g={"X-WebChannel-Client-Profile":R.va}),this.g.S=g,(g=R&&R.Sb)&&!Y(g)&&(this.g.m=g),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Y(R)&&(this.g.D=R,g=this.h,g!==null&&R in g&&(g=this.h,R in g&&delete g[R])),this.j=new Si(this)}I(Fn,Je),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Ya(this.g)},Fn.prototype.o=function(g){var R=this.g;if(typeof g=="string"){var P={};P.__data__=g,g=P}else this.u&&(P={},P.__data__=Sn(g),g=P);R.i.push(new Os(R.Ya++,g)),R.G==3&&Ls(R)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Ya(this.g),delete this.g,Fn.aa.N.call(this)};function qr(g){Mn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var R=g.__sm__;if(R){e:{for(const P in R){g=P;break e}g=void 0}(this.i=g)&&(g=this.i,R=R!==null&&g in R?R[g]:void 0),this.data=R}else this.data=g}I(qr,Mn);function lu(){yi.call(this),this.status=1}I(lu,yi);function Si(g){this.g=g}I(Si,pl),Si.prototype.ua=function(){tt(this.g,"a")},Si.prototype.ta=function(g){tt(this.g,new qr(g))},Si.prototype.sa=function(g){tt(this.g,new lu)},Si.prototype.ra=function(){tt(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,bA=function(){return new fa},EA=function(){return hr()},yA=Kn,P_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,kf=ss,dr.COMPLETE="complete",vA=dr,Ki.EventType=$i,$i.OPEN="a",$i.CLOSE="b",$i.ERROR="c",$i.MESSAGE="d",Je.prototype.listen=Je.prototype.K,mh=Ki,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,_A=Bt}).apply(typeof _f<"u"?_f:typeof self<"u"?self:typeof window<"u"?window:{});const wb="@firebase/firestore",Tb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ki.UNAUTHENTICATED=new ki(null),ki.GOOGLE_CREDENTIALS=new ki("google-credentials-uid"),ki.FIRST_PARTY=new ki("first-party-uid"),ki.MOCK_USER=new ki("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zl=new yv("@firebase/firestore");function Uu(){return Zl.logLevel}function Be(n,...e){if(Zl.logLevel<=Pt.DEBUG){const t=e.map(Ov);Zl.debug(`Firestore (${uc}): ${n}`,...t)}}function Va(n,...e){if(Zl.logLevel<=Pt.ERROR){const t=e.map(Ov);Zl.error(`Firestore (${uc}): ${n}`,...t)}}function $o(n,...e){if(Zl.logLevel<=Pt.WARN){const t=e.map(Ov);Zl.warn(`Firestore (${uc}): ${n}`,...t)}}function Ov(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,wA(n,i,t)}function wA(n,e,t){let i=`FIRESTORE (${uc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Va(i),new Error(i)}function $t(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||wA(e,s,i)}function pt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Cs{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ki.UNAUTHENTICATED))}shutdown(){}}class TP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class AP{constructor(e){this.t=e,this.currentUser=ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$t(this.o===void 0,42304);let i=this.i;const s=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Pa;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Pa,e.enqueueRetryable(()=>s(this.currentUser))};const c=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await s(this.currentUser)})},f=p=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Pa)}},0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?($t(typeof i.accessToken=="string",31837,{l:i}),new TA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $t(e===null||typeof e=="string",2055,{h:e}),new ki(e)}}class SP{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ki.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class xP{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new SP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ab{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$t(this.o===void 0,3512);const i=l=>{l.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Be("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>i(l))};const s=l=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?s(l):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Ab(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($t(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ab(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=RP(40);for(let l=0;l<s.length;++l)i.length<20&&s[l]<t&&(i+=e.charAt(s[l]%62))}return i}}function Tt(n,e){return n<e?-1:n>e?1:0}function M_(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),s=e.codePointAt(t);if(i!==s){if(i<128&&s<128)return Tt(i,s);{const l=AA(),c=IP(l.encode(Sb(n,t)),l.encode(Sb(e,t)));return c!==0?c:Tt(i,s)}}t+=i>65535?2:1}return Tt(n.length,e.length)}function Sb(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function IP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Tt(n[t],e[t]);return Tt(n.length,e.length)}function Wu(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="__name__";class Ks{constructor(e,t,i){t===void 0?t=0:t>e.length&&lt(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&lt(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ks.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ks?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const l=Ks.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Tt(e.length,t.length)}static compareSegments(e,t){const i=Ks.isNumericId(e),s=Ks.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Ks.extractNumericId(e).compare(Ks.extractNumericId(t)):M_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ho.fromString(e.substring(4,e.length-2))}}class pn extends Ks{construct(e,t,i){return new pn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ve(Se.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new pn(t)}static emptyPath(){return new pn([])}}const kP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gi extends Ks{construct(e,t,i){return new gi(e,t,i)}static isValidIdentifier(e){return kP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xb}static keyField(){return new gi([xb])}static fromServerFormat(e){const t=[];let i="",s=0;const l=()=>{if(i.length===0)throw new Ve(Se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new Ve(Se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new Ve(Se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,s+=2}else f==="`"?(c=!c,s++):f!=="."||c?(i+=f,s++):(l(),s++)}if(l(),c)throw new Ve(Se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gi(t)}static emptyPath(){return new gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(pn.fromString(e))}static fromName(e){return new Xe(pn.fromString(e).popFirst(5))}static empty(){return new Xe(pn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return pn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new pn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n,e,t){if(!t)throw new Ve(Se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NP(n,e,t,i){if(e===!0&&i===!0)throw new Ve(Se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cb(n){if(!Xe.isDocumentKey(n))throw new Ve(Se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Rb(n){if(Xe.isDocumentKey(n))throw new Ve(Se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Np(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":lt(12329,{type:typeof n})}function Gi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ve(Se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Np(n);throw new Ve(Se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(n,e){const t={typeString:n};return e&&(t.value=e),t}function Xh(n,e){if(!xA(n))throw new Ve(Se.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const c=n[i];if(s&&typeof c!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new Ve(Se.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=-62135596800,kb=1e6;class zt{static now(){return zt.fromMillis(Date.now())}static fromDate(e){return zt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*kb);return new zt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ve(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ve(Se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ib)throw new Ve(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(Se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kb}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:zt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xh(e,zt._jsonSchema))return new zt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ib;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}zt._jsonSchemaVersion="firestore/timestamp/1.0",zt._jsonSchema={type:Zn("string",zt._jsonSchemaVersion),seconds:Zn("number"),nanoseconds:Zn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{static fromTimestamp(e){return new ft(e)}static min(){return new ft(new zt(0,0))}static max(){return new ft(new zt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh=-1;function OP(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ft.fromTimestamp(i===1e9?new zt(t+1,0):new zt(t,i));return new Yo(s,Xe.empty(),e)}function PP(n){return new Yo(n.readTime,n.key,Oh)}class Yo{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Yo(ft.min(),Xe.empty(),Oh)}static max(){return new Yo(ft.max(),Xe.empty(),Oh)}}function MP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Xe.comparator(n.documentKey,e.documentKey),t!==0?t:Tt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(n){if(n.code!==Se.FAILED_PRECONDITION||n.message!==DP)throw n;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Re((i,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Re?t:Re.resolve(t)}catch(t){return Re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Re.reject(t)}static resolve(e){return new Re((t,i)=>{t(e)})}static reject(e){return new Re((t,i)=>{i(e)})}static waitFor(e){return new Re((t,i)=>{let s=0,l=0,c=!1;e.forEach(f=>{++s,f.next(()=>{++l,c&&l===s&&t()},p=>i(p))}),c=!0,l===s&&t()})}static or(e){let t=Re.resolve(!1);for(const i of e)t=t.next(s=>s?Re.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,l)=>{i.push(t.call(this,s,l))}),this.waitFor(i)}static mapArray(e,t){return new Re((i,s)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next(_=>{c[m]=_,++f,f===l&&i(c)},_=>s(_))}})}static doWhile(e,t){return new Re((i,s)=>{const l=()=>{e()===!0?t().next(()=>{l()},s):i()};l()})}}function jP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function hc(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this._e(i),this.ae=i=>t.writeSequenceNumber(i))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Op.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=-1;function Pp(n){return n==null}function Wf(n){return n===0&&1/n==-1/0}function VP(n){return typeof n=="number"&&Number.isInteger(n)&&!Wf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="";function UP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Nb(e)),e=BP(n.get(t),e);return Nb(e)}function BP(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case CA:t+="";break;default:t+=l}}return t}function Nb(n){return n+CA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function il(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function RA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t){this.comparator=e,this.root=t||mi.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vf(this.root,e,this.comparator,!1)}getReverseIterator(){return new vf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vf(this.root,e,this.comparator,!0)}}class vf{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,t,i,s,l){this.key=e,this.value=t,this.color=i??mi.RED,this.left=s??mi.EMPTY,this.right=l??mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,l){return new mi(e??this.key,t??this.value,i??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const l=i(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,i),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return mi.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw lt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw lt(27949);return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1;mi.EMPTY=new class{constructor(){this.size=0}get key(){throw lt(57766)}get value(){throw lt(16141)}get color(){throw lt(16727)}get left(){throw lt(29726)}get right(){throw lt(36894)}copy(e,t,i,s,l){return this}insert(e,t,i){return new mi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pb(this.data.getIterator())}getIteratorFrom(e){return new Pb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Xn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xn(this.comparator);return t.data=e,t}}class Pb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.fields=e,e.sort(gi.comparator)}static empty(){return new Or([])}unionWith(e){let t=new Xn(gi.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Or(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wu(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new IA("Invalid base64 string: "+l):l}}(e);return new vi(t)}static fromUint8Array(e){const t=function(s){let l="";for(let c=0;c<s.length;++c)l+=String.fromCharCode(s[c]);return l}(e);return new vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vi.EMPTY_BYTE_STRING=new vi("");const FP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qo(n){if($t(!!n,39018),typeof n=="string"){let e=0;const t=FP.exec(n);if($t(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Un(n.seconds),nanos:Un(n.nanos)}}function Un(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wo(n){return typeof n=="string"?vi.fromBase64String(n):vi.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA="server_timestamp",NA="__type__",OA="__previous_value__",PA="__local_write_time__";function Dv(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[NA])===null||t===void 0?void 0:t.stringValue)===kA}function Mp(n){const e=n.mapValue.fields[OA];return Dv(e)?Mp(e):e}function Ph(n){const e=Qo(n.mapValue.fields[PA].timestampValue);return new zt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t,i,s,l,c,f,p,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=_}}const Xf="(default)";class Mh{constructor(e,t){this.projectId=e,this.database=t||Xf}static empty(){return new Mh("","")}get isDefaultDatabase(){return this.database===Xf}isEqual(e){return e instanceof Mh&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA="__type__",HP="__max__",yf={mapValue:{}},DA="__vector__",Jf="value";function Xo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dv(n)?4:GP(n)?9007199254740991:qP(n)?10:11:lt(28295,{value:n})}function ia(n,e){if(n===e)return!0;const t=Xo(n);if(t!==Xo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ph(n).isEqual(Ph(e));case 3:return function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const c=Qo(s.timestampValue),f=Qo(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,l){return Wo(s.bytesValue).isEqual(Wo(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,l){return Un(s.geoPointValue.latitude)===Un(l.geoPointValue.latitude)&&Un(s.geoPointValue.longitude)===Un(l.geoPointValue.longitude)}(n,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return Un(s.integerValue)===Un(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const c=Un(s.doubleValue),f=Un(l.doubleValue);return c===f?Wf(c)===Wf(f):isNaN(c)&&isNaN(f)}return!1}(n,e);case 9:return Wu(n.arrayValue.values||[],e.arrayValue.values||[],ia);case 10:case 11:return function(s,l){const c=s.mapValue.fields||{},f=l.mapValue.fields||{};if(Ob(c)!==Ob(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!ia(c[p],f[p])))return!1;return!0}(n,e);default:return lt(52216,{left:n})}}function Dh(n,e){return(n.values||[]).find(t=>ia(t,e))!==void 0}function Xu(n,e){if(n===e)return 0;const t=Xo(n),i=Xo(e);if(t!==i)return Tt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(l,c){const f=Un(l.integerValue||l.doubleValue),p=Un(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(n,e);case 3:return Mb(n.timestampValue,e.timestampValue);case 4:return Mb(Ph(n),Ph(e));case 5:return M_(n.stringValue,e.stringValue);case 6:return function(l,c){const f=Wo(l),p=Wo(c);return f.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,c){const f=l.split("/"),p=c.split("/");for(let m=0;m<f.length&&m<p.length;m++){const _=Tt(f[m],p[m]);if(_!==0)return _}return Tt(f.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,c){const f=Tt(Un(l.latitude),Un(c.latitude));return f!==0?f:Tt(Un(l.longitude),Un(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Db(n.arrayValue,e.arrayValue);case 10:return function(l,c){var f,p,m,_;const E=l.fields||{},b=c.fields||{},C=(f=E[Jf])===null||f===void 0?void 0:f.arrayValue,I=(p=b[Jf])===null||p===void 0?void 0:p.arrayValue,O=Tt(((m=C?.values)===null||m===void 0?void 0:m.length)||0,((_=I?.values)===null||_===void 0?void 0:_.length)||0);return O!==0?O:Db(C,I)}(n.mapValue,e.mapValue);case 11:return function(l,c){if(l===yf.mapValue&&c===yf.mapValue)return 0;if(l===yf.mapValue)return 1;if(c===yf.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),m=c.fields||{},_=Object.keys(m);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const b=M_(p[E],_[E]);if(b!==0)return b;const C=Xu(f[p[E]],m[_[E]]);if(C!==0)return C}return Tt(p.length,_.length)}(n.mapValue,e.mapValue);default:throw lt(23264,{le:t})}}function Mb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Tt(n,e);const t=Qo(n),i=Qo(e),s=Tt(t.seconds,i.seconds);return s!==0?s:Tt(t.nanos,i.nanos)}function Db(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const l=Xu(t[s],i[s]);if(l)return l}return Tt(t.length,i.length)}function Ju(n){return D_(n)}function D_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Qo(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Wo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Xe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",s=!0;for(const l of t.values||[])s?s=!1:i+=",",i+=D_(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const c of i)l?l=!1:s+=",",s+=`${c}:${D_(t.fields[c])}`;return s+"}"}(n.mapValue):lt(61005,{value:n})}function Nf(n){switch(Xo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mp(n);return e?16+Nf(e):16;case 5:return 2*n.stringValue.length;case 6:return Wo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,l)=>s+Nf(l),0)}(n.arrayValue);case 10:case 11:return function(i){let s=0;return il(i.fields,(l,c)=>{s+=l.length+Nf(c)}),s}(n.mapValue);default:throw lt(13486,{value:n})}}function Lb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function L_(n){return!!n&&"integerValue"in n}function Lv(n){return!!n&&"arrayValue"in n}function jb(n){return!!n&&"nullValue"in n}function Vb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Of(n){return!!n&&"mapValue"in n}function qP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MA])===null||t===void 0?void 0:t.stringValue)===DA}function Th(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return il(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Th(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Th(n.arrayValue.values[t]);return e}return Object.assign({},n)}function GP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===HP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.value=e}static empty(){return new ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Of(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(t)}setAll(e){let t=gi.emptyPath(),i={},s=[];e.forEach((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,i,s),i={},s=[],t=f.popLast()}c?i[f.lastSegment()]=Th(c):s.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,i,s)}delete(e){const t=this.field(e.popLast());Of(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ia(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Of(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){il(t,(s,l)=>e[s]=l);for(const s of i)delete e[s]}clone(){return new ar(Th(this.value))}}function LA(n){const e=[];return il(n.fields,(t,i)=>{const s=new gi([t]);if(Of(i)){const l=LA(i.mapValue).fields;if(l.length===0)e.push(s);else for(const c of l)e.push(s.child(c))}else e.push(s)}),new Or(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,t,i,s,l,c,f){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new Ni(e,0,ft.min(),ft.min(),ft.min(),ar.empty(),0)}static newFoundDocument(e,t,i,s){return new Ni(e,1,t,ft.min(),i,s,0)}static newNoDocument(e,t){return new Ni(e,2,t,ft.min(),ft.min(),ar.empty(),0)}static newUnknownDocument(e,t){return new Ni(e,3,t,ft.min(),ft.min(),ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ft.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ft.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ni&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ni(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,t){this.position=e,this.inclusive=t}}function Ub(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const l=e[s],c=n.position[s];if(l.field.isKeyField()?i=Xe.comparator(Xe.fromName(c.referenceValue),t.key):i=Xu(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function Bb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ia(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t="asc"){this.field=e,this.dir=t}}function ZP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{}class Gn extends jA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new $P(e,t,i):t==="array-contains"?new WP(e,i):t==="in"?new XP(e,i):t==="not-in"?new JP(e,i):t==="array-contains-any"?new eM(e,i):new Gn(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new YP(e,i):new QP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xu(t,this.value)):t!==null&&Xo(this.value)===Xo(t)&&this.matchesComparison(Xu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class As extends jA{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new As(e,t)}matches(e){return VA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function VA(n){return n.op==="and"}function UA(n){return KP(n)&&VA(n)}function KP(n){for(const e of n.filters)if(e instanceof As)return!1;return!0}function j_(n){if(n instanceof Gn)return n.field.canonicalString()+n.op.toString()+Ju(n.value);if(UA(n))return n.filters.map(e=>j_(e)).join(",");{const e=n.filters.map(t=>j_(t)).join(",");return`${n.op}(${e})`}}function BA(n,e){return n instanceof Gn?function(i,s){return s instanceof Gn&&i.op===s.op&&i.field.isEqual(s.field)&&ia(i.value,s.value)}(n,e):n instanceof As?function(i,s){return s instanceof As&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((l,c,f)=>l&&BA(c,s.filters[f]),!0):!1}(n,e):void lt(19439)}function FA(n){return n instanceof Gn?function(t){return`${t.field.canonicalString()} ${t.op} ${Ju(t.value)}`}(n):n instanceof As?function(t){return t.op.toString()+" {"+t.getFilters().map(FA).join(" ,")+"}"}(n):"Filter"}class $P extends Gn{constructor(e,t,i){super(e,t,i),this.key=Xe.fromName(i.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class YP extends Gn{constructor(e,t){super(e,"in",t),this.keys=zA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QP extends Gn{constructor(e,t){super(e,"not-in",t),this.keys=zA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Xe.fromName(i.referenceValue))}class WP extends Gn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lv(t)&&Dh(t.arrayValue,this.value)}}class XP extends Gn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Dh(this.value.arrayValue,t)}}class JP extends Gn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Dh(this.value.arrayValue,t)}}class eM extends Gn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Dh(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,t=null,i=[],s=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=l,this.startAt=c,this.endAt=f,this.Pe=null}}function Fb(n,e=null,t=[],i=[],s=null,l=null,c=null){return new tM(n,e,t,i,s,l,c)}function jv(n){const e=pt(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>j_(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(l){return l.field.canonicalString()+l.dir}(i)).join(","),Pp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ju(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ju(i)).join(",")),e.Pe=t}return e.Pe}function Vv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ZP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bb(n.startAt,e.startAt)&&Bb(n.endAt,e.endAt)}function V_(n){return Xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t=null,i=[],s=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function nM(n,e,t,i,s,l,c,f){return new dc(n,e,t,i,s,l,c,f)}function Dp(n){return new dc(n)}function zb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function HA(n){return n.collectionGroup!==null}function Ah(n){const e=pt(n);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Xn(gi.comparator);return c.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(f=f.add(m.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new Lh(l,i))}),t.has(gi.keyField().canonicalString())||e.Te.push(new Lh(gi.keyField(),i))}return e.Te}function Js(n){const e=pt(n);return e.Ie||(e.Ie=iM(e,Ah(n))),e.Ie}function iM(n,e){if(n.limitType==="F")return Fb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const l=s.dir==="desc"?"asc":"desc";return new Lh(s.field,l)});const t=n.endAt?new ep(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ep(n.startAt.position,n.startAt.inclusive):null;return Fb(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function U_(n,e){const t=n.filters.concat([e]);return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function B_(n,e,t){return new dc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lp(n,e){return Vv(Js(n),Js(e))&&n.limitType===e.limitType}function qA(n){return`${jv(Js(n))}|lt:${n.limitType}`}function Bu(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(s=>FA(s)).join(", ")}]`),Pp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(s=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(s)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>Ju(s)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>Ju(s)).join(",")),`Target(${i})`}(Js(n))}; limitType=${n.limitType})`}function jp(n,e){return e.isFoundDocument()&&function(i,s){const l=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Xe.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)}(n,e)&&function(i,s){for(const l of Ah(i))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0}(n,e)&&function(i,s){for(const l of i.filters)if(!l.matches(s))return!1;return!0}(n,e)&&function(i,s){return!(i.startAt&&!function(c,f,p){const m=Ub(c,f,p);return c.inclusive?m<=0:m<0}(i.startAt,Ah(i),s)||i.endAt&&!function(c,f,p){const m=Ub(c,f,p);return c.inclusive?m>=0:m>0}(i.endAt,Ah(i),s))}(n,e)}function rM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function GA(n){return(e,t)=>{let i=!1;for(const s of Ah(n)){const l=sM(s,e,t);if(l!==0)return l;i=i||s.field.isKeyField()}return 0}}function sM(n,e,t){const i=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(l,c,f){const p=c.data.field(l),m=f.data.field(l);return p!==null&&m!==null?Xu(p,m):lt(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return lt(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,l]of i)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){il(this.inner,(t,i)=>{for(const[s,l]of i)e(s,l)})}isEmpty(){return RA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=new An(Xe.comparator);function Ua(){return aM}const ZA=new An(Xe.comparator);function gh(...n){let e=ZA;for(const t of n)e=e.insert(t.key,t);return e}function KA(n){let e=ZA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Dl(){return Sh()}function $A(){return Sh()}function Sh(){return new eu(n=>n.toString(),(n,e)=>n.isEqual(e))}const oM=new An(Xe.comparator),lM=new Xn(Xe.comparator);function Mt(...n){let e=lM;for(const t of n)e=e.add(t);return e}const uM=new Xn(Tt);function cM(){return uM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wf(e)?"-0":e}}function YA(n){return{integerValue:""+n}}function hM(n,e){return VP(e)?YA(e):Uv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this._=void 0}}function dM(n,e,t){return n instanceof jh?function(s,l){const c={fields:{[NA]:{stringValue:kA},[PA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&Dv(l)&&(l=Mp(l)),l&&(c.fields[OA]=l),{mapValue:c}}(t,e):n instanceof Vh?WA(n,e):n instanceof Uh?XA(n,e):function(s,l){const c=QA(s,l),f=Hb(c)+Hb(s.Ee);return L_(c)&&L_(s.Ee)?YA(f):Uv(s.serializer,f)}(n,e)}function fM(n,e,t){return n instanceof Vh?WA(n,e):n instanceof Uh?XA(n,e):t}function QA(n,e){return n instanceof tp?function(i){return L_(i)||function(l){return!!l&&"doubleValue"in l}(i)}(e)?e:{integerValue:0}:null}class jh extends Vp{}class Vh extends Vp{constructor(e){super(),this.elements=e}}function WA(n,e){const t=JA(e);for(const i of n.elements)t.some(s=>ia(s,i))||t.push(i);return{arrayValue:{values:t}}}class Uh extends Vp{constructor(e){super(),this.elements=e}}function XA(n,e){let t=JA(e);for(const i of n.elements)t=t.filter(s=>!ia(s,i));return{arrayValue:{values:t}}}class tp extends Vp{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Hb(n){return Un(n.integerValue||n.doubleValue)}function JA(n){return Lv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,t){this.field=e,this.transform=t}}function mM(n,e){return n.field.isEqual(e.field)&&function(i,s){return i instanceof Vh&&s instanceof Vh||i instanceof Uh&&s instanceof Uh?Wu(i.elements,s.elements,ia):i instanceof tp&&s instanceof tp?ia(i.Ee,s.Ee):i instanceof jh&&s instanceof jh}(n.transform,e.transform)}class gM{constructor(e,t){this.version=e,this.transformResults=t}}class Zi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zi}static exists(e){return new Zi(void 0,e)}static updateTime(e){return new Zi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Up{}function eS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bp(n.key,Zi.none()):new Jh(n.key,n.data,Zi.none());{const t=n.data,i=ar.empty();let s=new Xn(gi.comparator);for(let l of e.fields)if(!s.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),s=s.add(l)}return new rl(n.key,i,new Or(s.toArray()),Zi.none())}}function _M(n,e,t){n instanceof Jh?function(s,l,c){const f=s.value.clone(),p=Gb(s.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()}(n,e,t):n instanceof rl?function(s,l,c){if(!Pf(s.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Gb(s.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(tS(s)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):function(s,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function xh(n,e,t,i){return n instanceof Jh?function(l,c,f,p){if(!Pf(l.precondition,c))return f;const m=l.value.clone(),_=Zb(l.fieldTransforms,p,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof rl?function(l,c,f,p){if(!Pf(l.precondition,c))return f;const m=Zb(l.fieldTransforms,p,c),_=c.data;return _.setAll(tS(l)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,i):function(l,c,f){return Pf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f}(n,e,t)}function vM(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),l=QA(i.transform,s||null);l!=null&&(t===null&&(t=ar.empty()),t.set(i.field,l))}return t||null}function qb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Wu(i,s,(l,c)=>mM(l,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jh extends Up{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class rl extends Up{constructor(e,t,i,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function tS(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function Gb(n,e,t){const i=new Map;$t(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let s=0;s<t.length;s++){const l=n[s],c=l.transform,f=e.data.field(l.field);i.set(l.field,fM(c,f,t[s]))}return i}function Zb(n,e,t){const i=new Map;for(const s of n){const l=s.transform,c=t.data.field(s.field);i.set(s.field,dM(l,c,e))}return i}class Bp extends Up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yM extends Up{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&_M(l,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=xh(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=xh(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=$A();return this.mutations.forEach(s=>{const l=e.get(s.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(s.key)?null:f;const p=eS(c,f);p!==null&&i.set(s.key,p),c.isValidDocument()||c.convertToNoDocument(ft.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mt())}isEqual(e){return this.batchId===e.batchId&&Wu(this.mutations,e.mutations,(t,i)=>qb(t,i))&&Wu(this.baseMutations,e.baseMutations,(t,i)=>qb(t,i))}}class Bv{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){$t(e.mutations.length===i.length,58842,{Ve:e.mutations.length,me:i.length});let s=function(){return oM}();const l=e.mutations;for(let c=0;c<l.length;c++)s=s.insert(l[c].key,i[c].version);return new Bv(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn,jt;function TM(n){switch(n){case Se.OK:return lt(64938);case Se.CANCELLED:case Se.UNKNOWN:case Se.DEADLINE_EXCEEDED:case Se.RESOURCE_EXHAUSTED:case Se.INTERNAL:case Se.UNAVAILABLE:case Se.UNAUTHENTICATED:return!1;case Se.INVALID_ARGUMENT:case Se.NOT_FOUND:case Se.ALREADY_EXISTS:case Se.PERMISSION_DENIED:case Se.FAILED_PRECONDITION:case Se.ABORTED:case Se.OUT_OF_RANGE:case Se.UNIMPLEMENTED:case Se.DATA_LOSS:return!0;default:return lt(15467,{code:n})}}function nS(n){if(n===void 0)return Va("GRPC error has no .code"),Se.UNKNOWN;switch(n){case qn.OK:return Se.OK;case qn.CANCELLED:return Se.CANCELLED;case qn.UNKNOWN:return Se.UNKNOWN;case qn.DEADLINE_EXCEEDED:return Se.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return Se.RESOURCE_EXHAUSTED;case qn.INTERNAL:return Se.INTERNAL;case qn.UNAVAILABLE:return Se.UNAVAILABLE;case qn.UNAUTHENTICATED:return Se.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return Se.INVALID_ARGUMENT;case qn.NOT_FOUND:return Se.NOT_FOUND;case qn.ALREADY_EXISTS:return Se.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return Se.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return Se.FAILED_PRECONDITION;case qn.ABORTED:return Se.ABORTED;case qn.OUT_OF_RANGE:return Se.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return Se.UNIMPLEMENTED;case qn.DATA_LOSS:return Se.DATA_LOSS;default:return lt(39323,{code:n})}}(jt=qn||(qn={}))[jt.OK=0]="OK",jt[jt.CANCELLED=1]="CANCELLED",jt[jt.UNKNOWN=2]="UNKNOWN",jt[jt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jt[jt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jt[jt.NOT_FOUND=5]="NOT_FOUND",jt[jt.ALREADY_EXISTS=6]="ALREADY_EXISTS",jt[jt.PERMISSION_DENIED=7]="PERMISSION_DENIED",jt[jt.UNAUTHENTICATED=16]="UNAUTHENTICATED",jt[jt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jt[jt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jt[jt.ABORTED=10]="ABORTED",jt[jt.OUT_OF_RANGE=11]="OUT_OF_RANGE",jt[jt.UNIMPLEMENTED=12]="UNIMPLEMENTED",jt[jt.INTERNAL=13]="INTERNAL",jt[jt.UNAVAILABLE=14]="UNAVAILABLE",jt[jt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM=new Ho([4294967295,4294967295],0);function Kb(n){const e=AA().encode(n),t=new gA;return t.update(e),new Uint8Array(t.digest())}function $b(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ho([t,i],0),new Ho([s,l],0)]}class Fv{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new _h(`Invalid padding: ${t}`);if(i<0)throw new _h(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new _h(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new _h(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ho.fromNumber(this.fe)}pe(e,t,i){let s=e.add(t.multiply(Ho.fromNumber(i)));return s.compare(AM)===1&&(s=new Ho([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Kb(e),[i,s]=$b(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,s,l);if(!this.ye(c))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Fv(l,s,t);return i.forEach(f=>c.insert(f)),c}insert(e){if(this.fe===0)return;const t=Kb(e),[i,s]=$b(t);for(let l=0;l<this.hashCount;l++){const c=this.pe(i,s,l);this.we(c)}}we(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class _h extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fp{constructor(e,t,i,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,ed.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Fp(ft.min(),s,new An(Tt),Ua(),Mt())}}class ed{constructor(e,t,i,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ed(i,t,Mt(),Mt(),Mt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,i,s){this.Se=e,this.removedTargetIds=t,this.key=i,this.be=s}}class iS{constructor(e,t){this.targetId=e,this.De=t}}class rS{constructor(e,t,i=vi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class Yb{constructor(){this.ve=0,this.Ce=Qb(),this.Fe=vi.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Mt(),t=Mt(),i=Mt();return this.Ce.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:lt(38017,{changeType:l})}}),new ed(this.Fe,this.Me,e,t,i)}ke(){this.xe=!1,this.Ce=Qb()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,$t(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class SM{constructor(e){this.We=e,this.Ge=new Map,this.ze=Ua(),this.je=Ef(),this.Je=Ef(),this.He=new An(Tt)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const i=this.tt(t);switch(e.state){case 0:this.nt(t)&&i.Be(e.resumeToken);break;case 1:i.Ue(),i.Oe||i.ke(),i.Be(e.resumeToken);break;case 2:i.Ue(),i.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(i.Ke(),i.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),i.Be(e.resumeToken));break;default:lt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((i,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,i=e.De.count,s=this.st(t);if(s){const l=s.target;if(V_(l))if(i===0){const c=new Xe(l.path);this.Xe(t,c,Ni.newNoDocument(c,ft.min()))}else $t(i===1,20013,{expectedCount:i});else{const c=this.ot(t);if(c!==i){const f=this._t(e),p=f?this.ut(f,e,c):1;if(p!==0){this.rt(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,m)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:l=0}=t;let c,f;try{c=Wo(i).toUint8Array()}catch(p){if(p instanceof IA)return $o("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Fv(c,s,l)}catch(p){return $o(p instanceof _h?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.fe===0?null:f}ut(e,t,i){return t.De.count===i-this.ht(e,t.targetId)?0:2}ht(e,t){const i=this.We.getRemoteKeysForTarget(t);let s=0;return i.forEach(l=>{const c=this.We.lt(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((l,c)=>{const f=this.st(c);if(f){if(l.current&&V_(f.target)){const p=new Xe(f.target.path);this.Tt(p).has(c)||this.It(c,p)||this.Xe(c,p,Ni.newNoDocument(p,e))}l.Ne&&(t.set(c,l.Le()),l.ke())}});let i=Mt();this.Je.forEach((l,c)=>{let f=!0;c.forEachWhile(p=>{const m=this.st(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(i=i.add(l))}),this.ze.forEach((l,c)=>c.setReadTime(e));const s=new Fp(e,t,this.He,this.ze,i);return this.ze=Ua(),this.je=Ef(),this.Je=Ef(),this.He=new An(Tt),s}Ze(e,t){if(!this.nt(e))return;const i=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,i),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,i){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),i&&(this.ze=this.ze.insert(t,i))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Yb,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Xn(Tt),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Xn(Tt),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Be("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Yb),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ef(){return new An(Xe.comparator)}function Qb(){return new An(Xe.comparator)}const xM={asc:"ASCENDING",desc:"DESCENDING"},CM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RM={and:"AND",or:"OR"};class IM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function F_(n,e){return n.useProto3Json||Pp(e)?e:{value:e}}function np(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kM(n,e){return np(n,e.toTimestamp())}function ea(n){return $t(!!n,49232),ft.fromTimestamp(function(t){const i=Qo(t);return new zt(i.seconds,i.nanos)}(n))}function zv(n,e){return z_(n,e).canonicalString()}function z_(n,e){const t=function(s){return new pn(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aS(n){const e=pn.fromString(n);return $t(hS(e),10190,{key:e.toString()}),e}function H_(n,e){return zv(n.databaseId,e.path)}function i_(n,e){const t=aS(e);if(t.get(1)!==n.databaseId.projectId)throw new Ve(Se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ve(Se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(lS(t))}function oS(n,e){return zv(n.databaseId,e)}function NM(n){const e=aS(n);return e.length===4?pn.emptyPath():lS(e)}function q_(n){return new pn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lS(n){return $t(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Wb(n,e,t){return{name:H_(n,e),fields:t.value.mapValue.fields}}function OM(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:lt(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(m,_){return m.useProto3Json?($t(_===void 0||typeof _=="string",58123),vi.fromBase64String(_||"")):($t(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),vi.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&function(m){const _=m.code===void 0?Se.UNKNOWN:nS(m.code);return new Ve(_,m.message||"")}(c);t=new rS(i,s,l,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=i_(n,i.document.name),l=ea(i.document.updateTime),c=i.document.createTime?ea(i.document.createTime):ft.min(),f=new ar({mapValue:{fields:i.document.fields}}),p=Ni.newFoundDocument(s,l,c,f),m=i.targetIds||[],_=i.removedTargetIds||[];t=new Mf(m,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=i_(n,i.document),l=i.readTime?ea(i.readTime):ft.min(),c=Ni.newNoDocument(s,l),f=i.removedTargetIds||[];t=new Mf([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=i_(n,i.document),l=i.removedTargetIds||[];t=new Mf([],l,s,null)}else{if(!("filter"in e))return lt(11601,{At:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:l}=i,c=new wM(s,l),f=i.targetId;t=new iS(f,c)}}return t}function PM(n,e){let t;if(e instanceof Jh)t={update:Wb(n,e.key,e.value)};else if(e instanceof Bp)t={delete:H_(n,e.key)};else if(e instanceof rl)t={update:Wb(n,e.key,e.data),updateMask:zM(e.fieldMask)};else{if(!(e instanceof yM))return lt(16599,{Rt:e.type});t={verify:H_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(l,c){const f=c.transform;if(f instanceof jh)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Vh)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Uh)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof tp)return{fieldPath:c.field.canonicalString(),increment:f.Ee};throw lt(20930,{transform:c.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(s,l){return l.updateTime!==void 0?{updateTime:kM(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:lt(27497)}(n,e.precondition)),t}function MM(n,e){return n&&n.length>0?($t(e!==void 0,14353),n.map(t=>function(s,l){let c=s.updateTime?ea(s.updateTime):ea(l);return c.isEqual(ft.min())&&(c=ea(l)),new gM(c,s.transformResults||[])}(t,e))):[]}function DM(n,e){return{documents:[oS(n,e.path)]}}function LM(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=oS(n,s);const l=function(m){if(m.length!==0)return cS(As.create(m,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const c=function(m){if(m.length!==0)return m.map(_=>function(b){return{field:Fu(b.field),direction:UM(b.dir)}}(_))}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=F_(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{Vt:t,parent:s}}function jM(n){let e=NM(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){$t(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(E){const b=uS(E);return b instanceof As&&UA(b)?b.getFilters():[b]}(t.where));let c=[];t.orderBy&&(c=function(E){return E.map(b=>function(I){return new Lh(zu(I.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(b))}(t.orderBy));let f=null;t.limit&&(f=function(E){let b;return b=typeof E=="object"?E.value:E,Pp(b)?null:b}(t.limit));let p=null;t.startAt&&(p=function(E){const b=!!E.before,C=E.values||[];return new ep(C,b)}(t.startAt));let m=null;return t.endAt&&(m=function(E){const b=!E.before,C=E.values||[];return new ep(C,b)}(t.endAt)),nM(e,s,c,l,f,"F",p,m)}function VM(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=zu(t.unaryFilter.field);return Gn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=zu(t.unaryFilter.field);return Gn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=zu(t.unaryFilter.field);return Gn.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=zu(t.unaryFilter.field);return Gn.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return lt(61313);default:return lt(60726)}}(n):n.fieldFilter!==void 0?function(t){return Gn.create(zu(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return lt(58110);default:return lt(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return As.create(t.compositeFilter.filters.map(i=>uS(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return lt(1026)}}(t.compositeFilter.op))}(n):lt(30097,{filter:n})}function UM(n){return xM[n]}function BM(n){return CM[n]}function FM(n){return RM[n]}function Fu(n){return{fieldPath:n.canonicalString()}}function zu(n){return gi.fromServerFormat(n.fieldPath)}function cS(n){return n instanceof Gn?function(t){if(t.op==="=="){if(Vb(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NAN"}};if(jb(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Vb(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NAN"}};if(jb(t.value))return{unaryFilter:{field:Fu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fu(t.field),op:BM(t.op),value:t.value}}}(n):n instanceof As?function(t){const i=t.getFilters().map(s=>cS(s));return i.length===1?i[0]:{compositeFilter:{op:FM(t.op),filters:i}}}(n):lt(54877,{filter:n})}function zM(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t,i,s,l=ft.min(),c=ft.min(),f=vi.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Bo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.gt=e}}function qM(n){const e=jM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?B_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.Dn=new ZM}addToCollectionParentIndex(e,t){return this.Dn.add(t),Re.resolve()}getCollectionParents(e,t){return Re.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return Re.resolve()}deleteFieldIndex(e,t){return Re.resolve()}deleteAllFieldIndexes(e){return Re.resolve()}createTargetIndexes(e,t){return Re.resolve()}getDocumentsMatchingTarget(e,t){return Re.resolve(null)}getIndexType(e,t){return Re.resolve(0)}getFieldIndexes(e,t){return Re.resolve([])}getNextCollectionGroupToUpdate(e){return Re.resolve(null)}getMinOffset(e,t){return Re.resolve(Yo.min())}getMinOffsetFromCollectionGroup(e,t){return Re.resolve(Yo.min())}updateCollectionGroup(e,t,i){return Re.resolve()}updateIndexEntries(e,t){return Re.resolve()}}class ZM{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Xn(pn.comparator),l=!s.has(i);return this.index[t]=s.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Xn(pn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dS=41943040;class nr{static withCacheSize(e){return new nr(e,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(dS,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ec(0)}static ur(){return new ec(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="LruGarbageCollector",KM=1048576;function ew([n,e],[t,i]){const s=Tt(n,t);return s===0?Tt(e,i):s}class $M{constructor(e){this.Tr=e,this.buffer=new Xn(ew),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ew(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YM{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Be(Jb,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){hc(t)?Be(Jb,"Ignoring IndexedDB error during garbage collection: ",t):await cc(t)}await this.Rr(3e5)})}}class QM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Re.resolve(Op.ue);const i=new $M(t);return this.Vr.forEachTarget(e,s=>i.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>i.Er(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),Re.resolve(Xb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xb):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let i,s,l,c,f,p,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,c=Date.now(),this.nthSequenceNumber(e,s))).next(E=>(i=E,f=Date.now(),this.removeTargets(e,i,t))).next(E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,i))).next(E=>(m=Date.now(),Uu()<=Pt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${s} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-_}ms`),Re.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E})))}}function WM(n,e){return new QM(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.changes=new eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ni.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(i!==null&&xh(i.mutation,s,Or.empty(),zt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Mt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Mt()){const s=Dl();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(l=>{let c=gh();return l.forEach((f,p)=>{c=c.insert(f,p.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=Dl();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Mt()))}populateOverlays(e,t,i){const s=[];return i.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((c,f)=>{t.set(c,f)})})}computeViews(e,t,i,s){let l=Ua();const c=Sh(),f=function(){return Sh()}();return t.forEach((p,m)=>{const _=i.get(m.key);s.has(m.key)&&(_===void 0||_.mutation instanceof rl)?l=l.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),xh(_.mutation,m,_.mutation.getFieldMask(),zt.now())):c.set(m.key,Or.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((m,_)=>c.set(m,_)),t.forEach((m,_)=>{var E;return f.set(m,new JM(_,(E=c.get(m))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const i=Sh();let s=new An((c,f)=>c-f),l=Mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const f of c)f.keys().forEach(p=>{const m=t.get(p);if(m===null)return;let _=i.get(p)||Or.empty();_=f.applyToLocalView(m,_),i.set(p,_);const E=(s.get(f.batchId)||Mt()).add(p);s=s.insert(f.batchId,E)})}).next(()=>{const c=[],f=s.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),m=p.key,_=p.value,E=$A();_.forEach(b=>{if(!l.has(b)){const C=eS(t.get(b),i.get(b));C!==null&&E.set(b,C),l=l.add(b)}}),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return Re.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,s){return function(c){return Xe.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):HA(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(l=>{const c=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-l.size):Re.resolve(Dl());let f=Oh,p=l;return c.next(m=>Re.forEach(m,(_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?Re.resolve():this.remoteDocumentCache.getEntry(e,_).next(b=>{p=p.insert(_,b)}))).next(()=>this.populateOverlays(e,m,l)).next(()=>this.computeViews(e,p,m,Mt())).next(_=>({batchId:f,changes:KA(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(i=>{let s=gh();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const l=t.collectionGroup;let c=gh();return this.indexManager.getCollectionParents(e,l).next(f=>Re.forEach(f,p=>{const m=function(E,b){return new dc(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(_=>{_.forEach((E,b)=>{c=c.insert(E,b)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,s))).next(c=>{l.forEach((p,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,Ni.newInvalidDocument(_)))});let f=gh();return c.forEach((p,m)=>{const _=l.get(p);_!==void 0&&xh(_.mutation,m,Or.empty(),zt.now()),jp(t,m)&&(f=f.insert(p,m))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return Re.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:ea(s.createTime)}}(t)),Re.resolve()}getNamedQuery(e,t){return Re.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:qM(s.bundledQuery),readTime:ea(s.readTime)}}(t)),Re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(){this.overlays=new An(Xe.comparator),this.kr=new Map}getOverlay(e,t){return Re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Dl();return Re.forEach(t,s=>this.getOverlay(e,s).next(l=>{l!==null&&i.set(s,l)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,l)=>{this.wt(e,t,l)}),Re.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.kr.get(i);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.kr.delete(i)),Re.resolve()}getOverlaysForCollection(e,t,i){const s=Dl(),l=t.length+1,c=new Xe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>i&&s.set(p.getKey(),p)}return Re.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let l=new An((m,_)=>m-_);const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let _=l.get(m.largestBatchId);_===null&&(_=Dl(),l=l.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const f=Dl(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,_)=>f.set(m,_)),!(f.size()>=s)););return Re.resolve(f)}wt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const c=this.kr.get(s.largestBatchId).delete(i.key);this.kr.set(s.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new bM(t,i));let l=this.kr.get(t);l===void 0&&(l=Mt(),this.kr.set(t,l)),this.kr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.sessionToken=vi.EMPTY_BYTE_STRING}getSessionToken(e){return Re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.qr=new Xn(li.Qr),this.$r=new Xn(li.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const i=new li(e,t);this.qr=this.qr.add(i),this.$r=this.$r.add(i)}Kr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Wr(new li(e,t))}Gr(e,t){e.forEach(i=>this.removeReference(i,t))}zr(e){const t=new Xe(new pn([])),i=new li(t,e),s=new li(t,e+1),l=[];return this.$r.forEachInRange([i,s],c=>{this.Wr(c),l.push(c.key)}),l}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Xe(new pn([])),i=new li(t,e),s=new li(t,e+1);let l=Mt();return this.$r.forEachInRange([i,s],c=>{l=l.add(c.key)}),l}containsKey(e){const t=new li(e,0),i=this.qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class li{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Xe.comparator(e.key,t.key)||Tt(e.Hr,t.Hr)}static Ur(e,t){return Tt(e.Hr,t.Hr)||Xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Xn(li.Qr)}checkEmpty(e){return Re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new EM(l,t,i,s);this.mutationQueue.push(c);for(const f of s)this.Yr=this.Yr.add(new li(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Re.resolve(c)}lookupMutationBatch(e,t){return Re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Xr(i),l=s<0?0:s;return Re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Re.resolve(this.mutationQueue.length===0?Mv:this.er-1)}getAllMutationBatches(e){return Re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new li(t,0),s=new li(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([i,s],c=>{const f=this.Zr(c.Hr);l.push(f)}),Re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Xn(Tt);return t.forEach(s=>{const l=new li(s,0),c=new li(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,c],f=>{i=i.add(f.Hr)})}),Re.resolve(this.ei(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let l=i;Xe.isDocumentKey(l)||(l=l.child(""));const c=new li(new Xe(l),0);let f=new Xn(Tt);return this.Yr.forEachWhile(p=>{const m=p.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(f=f.add(p.Hr)),!0)},c),Re.resolve(this.ei(f))}ei(e){const t=[];return e.forEach(i=>{const s=this.Zr(i);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){$t(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Yr;return Re.forEach(t.mutations,s=>{const l=new li(s.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=i})}rr(e){}containsKey(e,t){const i=new li(t,0),s=this.Yr.firstAfterOrEqual(i);return Re.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Re.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.ni=e,this.docs=function(){return new An(Xe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),l=s?s.size:0,c=this.ni(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Re.resolve(i?i.document.mutableCopy():Ni.newInvalidDocument(t))}getEntries(e,t){let i=Ua();return t.forEach(s=>{const l=this.docs.get(s);i=i.insert(s,l?l.document.mutableCopy():Ni.newInvalidDocument(s))}),Re.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let l=Ua();const c=t.path,f=new Xe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:m,value:{document:_}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||MP(PP(_),i)<=0||(s.has(_.key)||jp(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return Re.resolve(l)}getAllFromCollectionGroup(e,t,i,s){lt(9500)}ri(e,t){return Re.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new aD(this)}getSize(e){return Re.resolve(this.size)}}class aD extends XM{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(i)}),Re.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.persistence=e,this.ii=new eu(t=>jv(t),Vv),this.lastRemoteSnapshotVersion=ft.min(),this.highestTargetId=0,this.si=0,this.oi=new Hv,this.targetCount=0,this._i=ec.ar()}forEachTarget(e,t){return this.ii.forEach((i,s)=>t(s)),Re.resolve()}getLastRemoteSnapshotVersion(e){return Re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Re.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.si&&(this.si=t),Re.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ec(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,Re.resolve()}updateTargetData(e,t){return this.hr(t),Re.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,Re.resolve()}removeTargets(e,t,i){let s=0;const l=[];return this.ii.forEach((c,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ii.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),Re.waitFor(l).next(()=>s)}getTargetCount(e){return Re.resolve(this.targetCount)}getTargetData(e,t){const i=this.ii.get(t)||null;return Re.resolve(i)}addMatchingKeys(e,t,i){return this.oi.Kr(t,i),Re.resolve()}removeMatchingKeys(e,t,i){this.oi.Gr(t,i);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(c=>{l.push(s.markPotentiallyOrphaned(e,c))}),Re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),Re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.oi.Jr(t);return Re.resolve(i)}containsKey(e,t){return Re.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e,t){this.ai={},this.overlays={},this.ui=new Op(0),this.ci=!1,this.ci=!0,this.li=new iD,this.referenceDelegate=e(this),this.hi=new oD(this),this.indexManager=new GM,this.remoteDocumentCache=function(s){return new sD(s)}(i=>this.referenceDelegate.Pi(i)),this.serializer=new HM(t),this.Ti=new tD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new nD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ai[e.toKey()];return i||(i=new rD(t,this.referenceDelegate),this.ai[e.toKey()]=i),i}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,i){Be("MemoryPersistence","Starting transaction:",e);const s=new lD(this.ui.next());return this.referenceDelegate.Ii(),i(s).next(l=>this.referenceDelegate.di(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}Ei(e,t){return Re.or(Object.values(this.ai).map(i=>()=>i.containsKey(e,t)))}}class lD extends LP{constructor(e){super(),this.currentSequenceNumber=e}}class qv{constructor(e){this.persistence=e,this.Ai=new Hv,this.Ri=null}static Vi(e){return new qv(e)}get mi(){if(this.Ri)return this.Ri;throw lt(60996)}addReference(e,t,i){return this.Ai.addReference(i,t),this.mi.delete(i.toString()),Re.resolve()}removeReference(e,t,i){return this.Ai.removeReference(i,t),this.mi.add(i.toString()),Re.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),Re.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.mi.add(l.toString()))}).next(()=>i.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Re.forEach(this.mi,i=>{const s=Xe.fromPath(i);return this.fi(e,s).next(l=>{l||t.removeEntry(s,ft.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(i=>{i?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return Re.or([()=>Re.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class ip{constructor(e,t){this.persistence=e,this.gi=new eu(i=>UP(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=WM(this,t)}static Vi(e,t){return new ip(e,t)}Ii(){}di(e){return Re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}yr(e){let t=0;return this.gr(e,i=>{t++}).next(()=>t)}gr(e,t){return Re.forEach(this.gi,(i,s)=>this.Sr(e,i,s).next(l=>l?Re.resolve():t(s)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.ri(e,c=>this.Sr(e,c,t).next(f=>{f||(i++,l.removeEntry(c,ft.min()))})).next(()=>l.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),Re.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Re.resolve()}removeReference(e,t,i){return this.gi.set(i,e.currentSequenceNumber),Re.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),Re.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nf(e.data.value)),t}Sr(e,t,i){return Re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return Re.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Is=i,this.ds=s}static Es(e,t){let i=Mt(),s=Mt();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Gv(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return GI()?8:jP(Di())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,i,s){const l={result:null};return this.ps(e,t).next(c=>{l.result=c}).next(()=>{if(!l.result)return this.ys(e,t,s,i).next(c=>{l.result=c})}).next(()=>{if(l.result)return;const c=new uD;return this.ws(e,t,c).next(f=>{if(l.result=f,this.Rs)return this.Ss(e,t,c,f.size)})}).next(()=>l.result)}Ss(e,t,i,s){return i.documentReadCount<this.Vs?(Uu()<=Pt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",Bu(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Re.resolve()):(Uu()<=Pt.DEBUG&&Be("QueryEngine","Query:",Bu(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.fs*s?(Uu()<=Pt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",Bu(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Js(t))):Re.resolve())}ps(e,t){if(zb(t))return Re.resolve(null);let i=Js(t);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=B_(t,null,"F"),i=Js(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(l=>{const c=Mt(...l);return this.gs.getDocuments(e,c).next(f=>this.indexManager.getMinOffset(e,i).next(p=>{const m=this.bs(t,f);return this.Ds(t,m,c,p.readTime)?this.ps(e,B_(t,null,"F")):this.vs(e,m,t,p)}))})))}ys(e,t,i,s){return zb(t)||s.isEqual(ft.min())?Re.resolve(null):this.gs.getDocuments(e,i).next(l=>{const c=this.bs(t,l);return this.Ds(t,c,i,s)?Re.resolve(null):(Uu()<=Pt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Bu(t)),this.vs(e,c,t,OP(s,Oh)).next(f=>f))})}bs(e,t){let i=new Xn(GA(e));return t.forEach((s,l)=>{jp(e,l)&&(i=i.add(l))}),i}Ds(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}ws(e,t,i){return Uu()<=Pt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Bu(t)),this.gs.getDocumentsMatchingQuery(e,t,Yo.min(),i)}vs(e,t,i,s){return this.gs.getDocumentsMatchingQuery(e,i,s).next(l=>(t.forEach(c=>{l=l.insert(c.key,c)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="LocalStore",hD=3e8;class dD{constructor(e,t,i,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new An(Tt),this.Ms=new eu(l=>jv(l),Vv),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(i)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eD(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function fD(n,e,t,i){return new dD(n,e,t,i)}async function pS(n,e){const t=pt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(l=>(s=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(i))).next(l=>{const c=[],f=[];let p=Mt();for(const m of s){c.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}for(const m of l){f.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next(m=>({Bs:m,removedBatchIds:c,addedBatchIds:f}))})})}function pD(n,e){const t=pt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return function(f,p,m,_){const E=m.batch,b=E.keys();let C=Re.resolve();return b.forEach(I=>{C=C.next(()=>_.getEntry(p,I)).next(O=>{const M=m.docVersions.get(I);$t(M!==null,48541),O.version.compareTo(M)<0&&(E.applyToRemoteDocument(O,m),O.isValidDocument()&&(O.setReadTime(m.commitVersion),_.addEntry(O)))})}),C.next(()=>f.mutationQueue.removeMutationBatch(p,E))}(t,i,e,l).next(()=>l.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(f){let p=Mt();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(p=p.add(f.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function mS(n){const e=pt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function mD(n,e){const t=pt(n),i=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const c=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const f=[];e.targetChanges.forEach((_,E)=>{const b=s.get(E);if(!b)return;f.push(t.hi.removeMatchingKeys(l,_.removedDocuments,E).next(()=>t.hi.addMatchingKeys(l,_.addedDocuments,E)));let C=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?C=C.withResumeToken(vi.EMPTY_BYTE_STRING,ft.min()).withLastLimboFreeSnapshotVersion(ft.min()):_.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(_.resumeToken,i)),s=s.insert(E,C),function(O,M,z){return O.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=hD?!0:z.addedDocuments.size+z.modifiedDocuments.size+z.removedDocuments.size>0}(b,C,_)&&f.push(t.hi.updateTargetData(l,C))});let p=Ua(),m=Mt();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),f.push(gD(l,c,e.documentUpdates).next(_=>{p=_.Ls,m=_.ks})),!i.isEqual(ft.min())){const _=t.hi.getLastRemoteSnapshotVersion(l).next(E=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,i));f.push(_)}return Re.waitFor(f).next(()=>c.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,m)).next(()=>p)}).then(l=>(t.Fs=s,l))}function gD(n,e,t){let i=Mt(),s=Mt();return t.forEach(l=>i=i.add(l)),e.getEntries(n,i).next(l=>{let c=Ua();return t.forEach((f,p)=>{const m=l.get(f);p.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(f)),p.isNoDocument()&&p.version.isEqual(ft.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):Be(Zv,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)}),{Ls:c,ks:s}})}function _D(n,e){const t=pt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Mv),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function vD(n,e){const t=pt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.hi.getTargetData(i,e).next(l=>l?(s=l,Re.resolve(s)):t.hi.allocateTargetId(i).next(c=>(s=new Bo(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.hi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Fs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(i.targetId,i),t.Ms.set(e,i.targetId)),i})}async function G_(n,e,t){const i=pt(n),s=i.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,c=>i.persistence.referenceDelegate.removeTarget(c,s))}catch(c){if(!hc(c))throw c;Be(Zv,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Fs=i.Fs.remove(e),i.Ms.delete(s.target)}function tw(n,e,t){const i=pt(n);let s=ft.min(),l=Mt();return i.persistence.runTransaction("Execute query","readwrite",c=>function(p,m,_){const E=pt(p),b=E.Ms.get(_);return b!==void 0?Re.resolve(E.Fs.get(b)):E.hi.getTargetData(m,_)}(i,c,Js(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.hi.getMatchingKeysForTargetId(c,f.targetId).next(p=>{l=p})}).next(()=>i.Cs.getDocumentsMatchingQuery(c,e,t?s:ft.min(),t?l:Mt())).next(f=>(yD(i,rM(e),f),{documents:f,qs:l})))}function yD(n,e,t){let i=n.xs.get(e)||ft.min();t.forEach((s,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)}),n.xs.set(e,i)}class nw{constructor(){this.activeTargetIds=cM()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ED{constructor(){this.Fo=new nw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,i){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new nw,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="ConnectivityMonitor";class rw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Be(iw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Be(iw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf=null;function Z_(){return bf===null?bf=function(){return 268435456+Math.round(2147483648*Math.random())}():bf++,"0x"+bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="RestConnection",wD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class TD{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.Ko=this.databaseId.database===Xf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,t,i,s,l){const c=Z_(),f=this.Go(e,t.toUriEncodedString());Be(r_,`Sending RPC '${e}' ${c}:`,f,i);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(p,s,l);const{host:m}=new URL(f),_=za(m);return this.jo(e,f,p,i,_).then(E=>(Be(r_,`Received RPC '${e}' ${c}: `,E),E),E=>{throw $o(r_,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",i),E})}Jo(e,t,i,s,l,c){return this.Wo(e,t,i,s,l)}zo(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,l)=>e[l]=s),i&&i.headers.forEach((s,l)=>e[l]=s)}Go(e,t){const i=wD[e];return`${this.$o}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="WebChannelConnection";class SD extends TD{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,i,s,l){const c=Z_();return new Promise((f,p)=>{const m=new _A;m.setWithCredentials(!0),m.listenOnce(vA.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case kf.NO_ERROR:const E=m.getResponseJson();Be(Ri,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case kf.TIMEOUT:Be(Ri,`RPC '${e}' ${c} timed out`),p(new Ve(Se.DEADLINE_EXCEEDED,"Request time out"));break;case kf.HTTP_ERROR:const b=m.getStatus();if(Be(Ri,`RPC '${e}' ${c} failed with status:`,b,"response text:",m.getResponseText()),b>0){let C=m.getResponseJson();Array.isArray(C)&&(C=C[0]);const I=C?.error;if(I&&I.status&&I.message){const O=function(z){const Y=z.toLowerCase().replace(/_/g,"-");return Object.values(Se).indexOf(Y)>=0?Y:Se.UNKNOWN}(I.status);p(new Ve(O,I.message))}else p(new Ve(Se.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new Ve(Se.UNAVAILABLE,"Connection failed."));break;default:lt(9055,{c_:e,streamId:c,l_:m.getLastErrorCode(),h_:m.getLastError()})}}finally{Be(Ri,`RPC '${e}' ${c} completed.`)}});const _=JSON.stringify(s);Be(Ri,`RPC '${e}' ${c} sending request:`,s),m.send(t,"POST",_,i,15)})}P_(e,t,i){const s=Z_(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bA(),f=EA(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.zo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");Be(Ri,`Creating RPC '${e}' stream ${s}: ${_}`,p);const E=c.createWebChannel(_,p);this.T_(E);let b=!1,C=!1;const I=new AD({Ho:M=>{C?Be(Ri,`Not sending because RPC '${e}' stream ${s} is closed:`,M):(b||(Be(Ri,`Opening RPC '${e}' stream ${s} transport.`),E.open(),b=!0),Be(Ri,`RPC '${e}' stream ${s} sending:`,M),E.send(M))},Yo:()=>E.close()}),O=(M,z,Y)=>{M.listen(z,K=>{try{Y(K)}catch(J){setTimeout(()=>{throw J},0)}})};return O(E,mh.EventType.OPEN,()=>{C||(Be(Ri,`RPC '${e}' stream ${s} transport opened.`),I.s_())}),O(E,mh.EventType.CLOSE,()=>{C||(C=!0,Be(Ri,`RPC '${e}' stream ${s} transport closed`),I.__(),this.I_(E))}),O(E,mh.EventType.ERROR,M=>{C||(C=!0,$o(Ri,`RPC '${e}' stream ${s} transport errored. Name:`,M.name,"Message:",M.message),I.__(new Ve(Se.UNAVAILABLE,"The operation could not be completed")))}),O(E,mh.EventType.MESSAGE,M=>{var z;if(!C){const Y=M.data[0];$t(!!Y,16349);const K=Y,J=K?.error||((z=K[0])===null||z===void 0?void 0:z.error);if(J){Be(Ri,`RPC '${e}' stream ${s} received error:`,J);const oe=J.status;let W=function(x){const N=qn[x];if(N!==void 0)return nS(N)}(oe),q=J.message;W===void 0&&(W=Se.INTERNAL,q="Unknown error status: "+oe+" with message "+J.message),C=!0,I.__(new Ve(W,q)),E.close()}else Be(Ri,`RPC '${e}' stream ${s} received:`,Y),I.a_(Y)}}),O(f,yA.STAT_EVENT,M=>{M.stat===P_.PROXY?Be(Ri,`RPC '${e}' stream ${s} detected buffering proxy`):M.stat===P_.NOPROXY&&Be(Ri,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.o_()},0),I}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function s_(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n){return new IM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,t,i=1e3,s=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=i,this.E_=s,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),i=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-i);s>0&&Be("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="PersistentStream";class _S{constructor(e,t,i,s,l,c,f,p){this.Fi=e,this.w_=i,this.S_=s,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new gS(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===Se.RESOURCE_EXHAUSTED?(Va(t.toString()),Va("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Se.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.b_===t&&this.W_(i,s)},i=>{e(()=>{const s=new Ve(Se.UNKNOWN,"Fetching auth token failed: "+i.message);return this.G_(s)})})}W_(e,t){const i=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{i(()=>this.listener.Zo())}),this.stream.e_(()=>{i(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{i(()=>this.G_(s))}),this.stream.onMessage(s=>{i(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Be(sw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Be(sw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xD extends _S{constructor(e,t,i,s,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,c),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=OM(this.serializer,e),i=function(l){if(!("targetChange"in l))return ft.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ft.min():c.readTime?ea(c.readTime):ft.min()}(e);return this.listener.J_(t,i)}H_(e){const t={};t.database=q_(this.serializer),t.addTarget=function(l,c){let f;const p=c.target;if(f=V_(p)?{documents:DM(l,p)}:{query:LM(l,p).Vt},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=sS(l,c.resumeToken);const m=F_(l,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(ft.min())>0){f.readTime=np(l,c.snapshotVersion.toTimestamp());const m=F_(l,c.expectedCount);m!==null&&(f.expectedCount=m)}return f}(this.serializer,e);const i=VM(this.serializer,e);i&&(t.labels=i),this.k_(t)}Y_(e){const t={};t.database=q_(this.serializer),t.removeTarget=e,this.k_(t)}}class CD extends _S{constructor(e,t,i,s,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,c),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return $t(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$t(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){$t(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=MM(e.writeResults,e.commitTime),i=ea(e.commitTime);return this.listener.ta(i,t)}na(){const e={};e.database=q_(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>PM(this.serializer,i))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{}class ID extends RD{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new Ve(Se.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,c])=>this.connection.Wo(e,z_(t,i),s,l,c)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new Ve(Se.UNKNOWN,l.toString())})}Jo(e,t,i,s,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Jo(e,z_(t,i),s,c,f,l)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ve(Se.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class kD{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Va(t),this._a=!1):Be("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl="RemoteStore";class ND{constructor(e,t,i,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo(c=>{i.enqueueAndForget(async()=>{tu(this)&&(Be(Kl,"Restarting streams for network reachability change."),await async function(p){const m=pt(p);m.Ia.add(4),await td(m),m.Aa.set("Unknown"),m.Ia.delete(4),await Hp(m)}(this))})}),this.Aa=new kD(i,s)}}async function Hp(n){if(tu(n))for(const e of n.da)await e(!0)}async function td(n){for(const e of n.da)await e(!1)}function vS(n,e){const t=pt(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Qv(t)?Yv(t):fc(t).x_()&&$v(t,e))}function Kv(n,e){const t=pt(n),i=fc(t);t.Ta.delete(e),i.x_()&&yS(t,e),t.Ta.size===0&&(i.x_()?i.B_():tu(t)&&t.Aa.set("Unknown"))}function $v(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ft.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fc(n).H_(e)}function yS(n,e){n.Ra.$e(e),fc(n).Y_(e)}function Yv(n){n.Ra=new SM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),fc(n).start(),n.Aa.aa()}function Qv(n){return tu(n)&&!fc(n).M_()&&n.Ta.size>0}function tu(n){return pt(n).Ia.size===0}function ES(n){n.Ra=void 0}async function OD(n){n.Aa.set("Online")}async function PD(n){n.Ta.forEach((e,t)=>{$v(n,e)})}async function MD(n,e){ES(n),Qv(n)?(n.Aa.la(e),Yv(n)):n.Aa.set("Unknown")}async function DD(n,e,t){if(n.Aa.set("Online"),e instanceof rS&&e.state===2&&e.cause)try{await async function(s,l){const c=l.cause;for(const f of l.targetIds)s.Ta.has(f)&&(await s.remoteSyncer.rejectListen(f,c),s.Ta.delete(f),s.Ra.removeTarget(f))}(n,e)}catch(i){Be(Kl,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await rp(n,i)}else if(e instanceof Mf?n.Ra.Ye(e):e instanceof iS?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ft.min()))try{const i=await mS(n.localStore);t.compareTo(i)>=0&&await function(l,c){const f=l.Ra.Pt(c);return f.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ta.get(m);_&&l.Ta.set(m,_.withResumeToken(p.resumeToken,c))}}),f.targetMismatches.forEach((p,m)=>{const _=l.Ta.get(p);if(!_)return;l.Ta.set(p,_.withResumeToken(vi.EMPTY_BYTE_STRING,_.snapshotVersion)),yS(l,p);const E=new Bo(_.target,p,m,_.sequenceNumber);$v(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(i){Be(Kl,"Failed to raise snapshot:",i),await rp(n,i)}}async function rp(n,e,t){if(!hc(e))throw e;n.Ia.add(1),await td(n),n.Aa.set("Offline"),t||(t=()=>mS(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Be(Kl,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Hp(n)})}function bS(n,e){return e().catch(t=>rp(n,t,e))}async function qp(n){const e=pt(n),t=Jo(e);let i=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Mv;for(;LD(e);)try{const s=await _D(e.localStore,i);if(s===null){e.Pa.length===0&&t.B_();break}i=s.batchId,jD(e,s)}catch(s){await rp(e,s)}wS(e)&&TS(e)}function LD(n){return tu(n)&&n.Pa.length<10}function jD(n,e){n.Pa.push(e);const t=Jo(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function wS(n){return tu(n)&&!Jo(n).M_()&&n.Pa.length>0}function TS(n){Jo(n).start()}async function VD(n){Jo(n).na()}async function UD(n){const e=Jo(n);for(const t of n.Pa)e.X_(t.mutations)}async function BD(n,e,t){const i=n.Pa.shift(),s=Bv.from(i,e,t);await bS(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await qp(n)}async function FD(n,e){e&&Jo(n).Z_&&await async function(i,s){if(function(c){return TM(c)&&c!==Se.ABORTED}(s.code)){const l=i.Pa.shift();Jo(i).N_(),await bS(i,()=>i.remoteSyncer.rejectFailedWrite(l.batchId,s)),await qp(i)}}(n,e),wS(n)&&TS(n)}async function aw(n,e){const t=pt(n);t.asyncQueue.verifyOperationInProgress(),Be(Kl,"RemoteStore received new credentials");const i=tu(t);t.Ia.add(3),await td(t),i&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Hp(t)}async function zD(n,e){const t=pt(n);e?(t.Ia.delete(2),await Hp(t)):e||(t.Ia.add(2),await td(t),t.Aa.set("Unknown"))}function fc(n){return n.Va||(n.Va=function(t,i,s){const l=pt(t);return l.ia(),new xD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{Zo:OD.bind(null,n),e_:PD.bind(null,n),n_:MD.bind(null,n),J_:DD.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Qv(n)?Yv(n):n.Aa.set("Unknown")):(await n.Va.stop(),ES(n))})),n.Va}function Jo(n){return n.ma||(n.ma=function(t,i,s){const l=pt(t);return l.ia(),new CD(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:VD.bind(null,n),n_:FD.bind(null,n),ea:UD.bind(null,n),ta:BD.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await qp(n)):(await n.ma.stop(),n.Pa.length>0&&(Be(Kl,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,t,i,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=l,this.deferred=new Pa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,l){const c=Date.now()+i,f=new Wv(e,t,c,s,l);return f.start(i),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(Se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xv(n,e){if(Va("AsyncQueue",`${e}: ${n}`),hc(n))return new Ve(Se.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{static emptySet(e){return new Yu(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Xe.comparator(t.key,i.key):(t,i)=>Xe.comparator(t.key,i.key),this.keyedMap=gh(),this.sortedSet=new An(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=i.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yu;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.fa=new An(Xe.comparator)}track(e){const t=e.doc.key,i=this.fa.get(t);i?e.type!==0&&i.type===3?this.fa=this.fa.insert(t,e):e.type===3&&i.type!==1?this.fa=this.fa.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.fa=this.fa.remove(t):e.type===1&&i.type===2?this.fa=this.fa.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):lt(63341,{At:e,ga:i}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,i)=>{e.push(i)}),e}}class tc{constructor(e,t,i,s,l,c,f,p,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,s,l){const c=[];return t.forEach(f=>{c.push({type:0,doc:f})}),new tc(e,t,Yu.emptySet(t),c,i,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class qD{constructor(){this.queries=lw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,i){const s=pt(t),l=s.queries;s.queries=lw(),l.forEach((c,f)=>{for(const p of f.wa)p.onError(i)})})(this,new Ve(Se.ABORTED,"Firestore shutting down"))}}function lw(){return new eu(n=>qA(n),Lp)}async function Jv(n,e){const t=pt(n);let i=3;const s=e.query;let l=t.queries.get(s);l?!l.Sa()&&e.ba()&&(i=2):(l=new HD,i=e.ba()?0:1);try{switch(i){case 0:l.ya=await t.onListen(s,!0);break;case 1:l.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(c){const f=Xv(c,`Initialization of query '${Bu(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&ty(t)}async function ey(n,e){const t=pt(n),i=e.query;let s=3;const l=t.queries.get(i);if(l){const c=l.wa.indexOf(e);c>=0&&(l.wa.splice(c,1),l.wa.length===0?s=e.ba()?0:1:!l.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function GD(n,e){const t=pt(n);let i=!1;for(const s of e){const l=s.query,c=t.queries.get(l);if(c){for(const f of c.wa)f.Ca(s)&&(i=!0);c.ya=s}}i&&ty(t)}function ZD(n,e,t){const i=pt(n),s=i.queries.get(e);if(s)for(const l of s.wa)l.onError(t);i.queries.delete(e)}function ty(n){n.Da.forEach(e=>{e.next()})}var K_,uw;(uw=K_||(K_={})).Fa="default",uw.Cache="cache";class ny{constructor(e,t,i){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=i||{}}Ca(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new tc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const i=t!=="Offline";return(!this.options.ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==K_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e){this.key=e}}class SS{constructor(e){this.key=e}}class KD{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Mt(),this.mutatedKeys=Mt(),this.Xa=GA(e),this.eu=new Yu(this.Xa)}get tu(){return this.Ha}nu(e,t){const i=t?t.ru:new ow,s=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,c=s,f=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,E)=>{const b=s.get(_),C=jp(this.query,E)?E:null,I=!!b&&this.mutatedKeys.has(b.key),O=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let M=!1;b&&C?b.data.isEqual(C.data)?I!==O&&(i.track({type:3,doc:C}),M=!0):this.iu(b,C)||(i.track({type:2,doc:C}),M=!0,(p&&this.Xa(C,p)>0||m&&this.Xa(C,m)<0)&&(f=!0)):!b&&C?(i.track({type:0,doc:C}),M=!0):b&&!C&&(i.track({type:1,doc:b}),M=!0,(p||m)&&(f=!0)),M&&(C?(c=c.add(C),l=O?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{eu:c,ru:i,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((_,E)=>function(C,I){const O=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt(20277,{At:M})}};return O(C)-O(I)}(_.type,E.type)||this.Xa(_.doc,E.doc)),this.su(i),s=s!=null&&s;const f=t&&!s?this.ou():[],p=this.Za.size===0&&this.current&&!s?1:0,m=p!==this.Ya;return this.Ya=p,c.length!==0||m?{snapshot:new tc(this.query,e.eu,l,c,e.mutatedKeys,p===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new ow,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Mt(),this.eu.forEach(i=>{this.au(i.key)&&(this.Za=this.Za.add(i.key))});const t=[];return e.forEach(i=>{this.Za.has(i)||t.push(new SS(i))}),this.Za.forEach(i=>{e.has(i)||t.push(new AS(i))}),t}uu(e){this.Ha=e.qs,this.Za=Mt();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return tc.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const iy="SyncEngine";class $D{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class YD{constructor(e){this.key=e,this.lu=!1}}class QD{constructor(e,t,i,s,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new eu(f=>qA(f),Lp),this.Tu=new Map,this.Iu=new Set,this.du=new An(Xe.comparator),this.Eu=new Map,this.Au=new Hv,this.Ru={},this.Vu=new Map,this.mu=ec.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function WD(n,e,t=!0){const i=NS(n);let s;const l=i.Pu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.cu()):s=await xS(i,e,t,!0),s}async function XD(n,e){const t=NS(n);await xS(t,e,!0,!1)}async function xS(n,e,t,i){const s=await vD(n.localStore,Js(e)),l=s.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return i&&(f=await JD(n,e,l,c==="current",s.resumeToken)),n.isPrimaryClient&&t&&vS(n.remoteStore,s),f}async function JD(n,e,t,i,s){n.gu=(E,b,C)=>async function(O,M,z,Y){let K=M.view.nu(z);K.Ds&&(K=await tw(O.localStore,M.query,!1).then(({documents:q})=>M.view.nu(q,K)));const J=Y&&Y.targetChanges.get(M.targetId),oe=Y&&Y.targetMismatches.get(M.targetId)!=null,W=M.view.applyChanges(K,O.isPrimaryClient,J,oe);return hw(O,M.targetId,W._u),W.snapshot}(n,E,b,C);const l=await tw(n.localStore,e,!0),c=new KD(e,l.qs),f=c.nu(l.documents),p=ed.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),m=c.applyChanges(f,n.isPrimaryClient,p);hw(n,t,m._u);const _=new $D(e,t,c);return n.Pu.set(e,_),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),m.snapshot}async function eL(n,e,t){const i=pt(n),s=i.Pu.get(e),l=i.Tu.get(s.targetId);if(l.length>1)return i.Tu.set(s.targetId,l.filter(c=>!Lp(c,e))),void i.Pu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await G_(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Kv(i.remoteStore,s.targetId),$_(i,s.targetId)}).catch(cc)):($_(i,s.targetId),await G_(i.localStore,s.targetId,!0))}async function tL(n,e){const t=pt(n),i=t.Pu.get(e),s=t.Tu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Kv(t.remoteStore,i.targetId))}async function nL(n,e,t){const i=uL(n);try{const s=await function(c,f){const p=pt(c),m=zt.now(),_=f.reduce((C,I)=>C.add(I.key),Mt());let E,b;return p.persistence.runTransaction("Locally write mutations","readwrite",C=>{let I=Ua(),O=Mt();return p.Os.getEntries(C,_).next(M=>{I=M,I.forEach((z,Y)=>{Y.isValidDocument()||(O=O.add(z))})}).next(()=>p.localDocuments.getOverlayedDocuments(C,I)).next(M=>{E=M;const z=[];for(const Y of f){const K=vM(Y,E.get(Y.key).overlayedDocument);K!=null&&z.push(new rl(Y.key,K,LA(K.value.mapValue),Zi.exists(!0)))}return p.mutationQueue.addMutationBatch(C,m,z,f)}).next(M=>{b=M;const z=M.applyToLocalDocumentSet(E,O);return p.documentOverlayCache.saveOverlays(C,M.batchId,z)})}).then(()=>({batchId:b.batchId,changes:KA(E)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(c,f,p){let m=c.Ru[c.currentUser.toKey()];m||(m=new An(Tt)),m=m.insert(f,p),c.Ru[c.currentUser.toKey()]=m}(i,s.batchId,t),await nd(i,s.changes),await qp(i.remoteStore)}catch(s){const l=Xv(s,"Failed to persist write");t.reject(l)}}async function CS(n,e){const t=pt(n);try{const i=await mD(t.localStore,e);e.targetChanges.forEach((s,l)=>{const c=t.Eu.get(l);c&&($t(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?c.lu=!0:s.modifiedDocuments.size>0?$t(c.lu,14607):s.removedDocuments.size>0&&($t(c.lu,42227),c.lu=!1))}),await nd(t,i,e)}catch(i){await cc(i)}}function cw(n,e,t){const i=pt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Pu.forEach((l,c)=>{const f=c.view.va(e);f.snapshot&&s.push(f.snapshot)}),function(c,f){const p=pt(c);p.onlineState=f;let m=!1;p.queries.forEach((_,E)=>{for(const b of E.wa)b.va(f)&&(m=!0)}),m&&ty(p)}(i.eventManager,e),s.length&&i.hu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function iL(n,e,t){const i=pt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Eu.get(e),l=s&&s.key;if(l){let c=new An(Xe.comparator);c=c.insert(l,Ni.newNoDocument(l,ft.min()));const f=Mt().add(l),p=new Fp(ft.min(),new Map,new An(Tt),c,f);await CS(i,p),i.du=i.du.remove(l),i.Eu.delete(e),ry(i)}else await G_(i.localStore,e,!1).then(()=>$_(i,e,t)).catch(cc)}async function rL(n,e){const t=pt(n),i=e.batch.batchId;try{const s=await pD(t.localStore,e);IS(t,i,null),RS(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await nd(t,s)}catch(s){await cc(s)}}async function sL(n,e,t){const i=pt(n);try{const s=await function(c,f){const p=pt(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return p.mutationQueue.lookupMutationBatch(m,f).next(E=>($t(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(m,E))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,_,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>p.localDocuments.getDocuments(m,_))})}(i.localStore,e);IS(i,e,t),RS(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await nd(i,s)}catch(s){await cc(s)}}function RS(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function IS(n,e,t){const i=pt(n);let s=i.Ru[i.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),i.Ru[i.currentUser.toKey()]=s}}function $_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Tu.get(e))n.Pu.delete(i),t&&n.hu.pu(i,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(i=>{n.Au.containsKey(i)||kS(n,i)})}function kS(n,e){n.Iu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Kv(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),ry(n))}function hw(n,e,t){for(const i of t)i instanceof AS?(n.Au.addReference(i.key,e),aL(n,i)):i instanceof SS?(Be(iy,"Document no longer in limbo: "+i.key),n.Au.removeReference(i.key,e),n.Au.containsKey(i.key)||kS(n,i.key)):lt(19791,{yu:i})}function aL(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Iu.has(i)||(Be(iy,"New document in limbo: "+t),n.Iu.add(i),ry(n))}function ry(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Iu.values().next().value;n.Iu.delete(e);const t=new Xe(pn.fromString(e)),i=n.mu.next();n.Eu.set(i,new YD(t)),n.du=n.du.insert(t,i),vS(n.remoteStore,new Bo(Js(Dp(t.path)),i,"TargetPurposeLimboResolution",Op.ue))}}async function nd(n,e,t){const i=pt(n),s=[],l=[],c=[];i.Pu.isEmpty()||(i.Pu.forEach((f,p)=>{c.push(i.gu(p,e,t).then(m=>{var _;if((m||t)&&i.isPrimaryClient){const E=m?!m.fromCache:(_=t?.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){s.push(m);const E=Gv.Es(p.targetId,m);l.push(E)}}))}),await Promise.all(c),i.hu.J_(s),await async function(p,m){const _=pt(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>Re.forEach(m,b=>Re.forEach(b.Is,C=>_.persistence.referenceDelegate.addReference(E,b.targetId,C)).next(()=>Re.forEach(b.ds,C=>_.persistence.referenceDelegate.removeReference(E,b.targetId,C)))))}catch(E){if(!hc(E))throw E;Be(Zv,"Failed to update sequence numbers: "+E)}for(const E of m){const b=E.targetId;if(!E.fromCache){const C=_.Fs.get(b),I=C.snapshotVersion,O=C.withLastLimboFreeSnapshotVersion(I);_.Fs=_.Fs.insert(b,O)}}}(i.localStore,l))}async function oL(n,e){const t=pt(n);if(!t.currentUser.isEqual(e)){Be(iy,"User change. New user:",e.toKey());const i=await pS(t.localStore,e);t.currentUser=e,function(l,c){l.Vu.forEach(f=>{f.forEach(p=>{p.reject(new Ve(Se.CANCELLED,c))})}),l.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nd(t,i.Bs)}}function lL(n,e){const t=pt(n),i=t.Eu.get(e);if(i&&i.lu)return Mt().add(i.key);{let s=Mt();const l=t.Tu.get(e);if(!l)return s;for(const c of l){const f=t.Pu.get(c);s=s.unionWith(f.view.tu)}return s}}function NS(n){const e=pt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=CS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iL.bind(null,e),e.hu.J_=GD.bind(null,e.eventManager),e.hu.pu=ZD.bind(null,e.eventManager),e}function uL(n){const e=pt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sL.bind(null,e),e}class sp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return fD(this.persistence,new cD,e.initialUser,this.serializer)}Du(e){return new fS(qv.Vi,this.serializer)}bu(e){return new ED}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sp.provider={build:()=>new sp};class cL extends sp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){$t(this.persistence.referenceDelegate instanceof ip,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new YM(i,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new fS(i=>ip.Vi(i,t),this.serializer)}}class Y_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>cw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oL.bind(null,this.syncEngine),await zD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qD}()}createDatastore(e){const t=zp(e.databaseInfo.databaseId),i=function(l){return new SD(l)}(e.databaseInfo);return function(l,c,f,p){return new ID(l,c,f,p)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,s,l,c,f){return new ND(i,s,l,c,f)}(this.localStore,this.datastore,e.asyncQueue,t=>cw(this.syncEngine,t,0),function(){return rw.C()?new rw:new bD}())}createSyncEngine(e,t){return function(s,l,c,f,p,m,_){const E=new QD(s,l,c,f,p,m);return _&&(E.fu=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const l=pt(s);Be(Kl,"RemoteStore shutting down."),l.Ia.add(5),await td(l),l.Ea.shutdown(),l.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Y_.provider={build:()=>new Y_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Va("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="FirestoreClient";class hL{constructor(e,t,i,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=ki.UNAUTHENTICATED,this.clientId=Pv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,async c=>{Be(el,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(i,c=>(Be(el,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Xv(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function a_(n,e){n.asyncQueue.verifyOperationInProgress(),Be(el,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async s=>{i.isEqual(s)||(await pS(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>{$o("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{Be("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{$o("Terminating Firestore due to IndexedDb database deletion failed",s)})}),n._offlineComponents=e}async function dw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dL(n);Be(el,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>aw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>aw(e.remoteStore,s)),n._onlineComponents=e}async function dL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Be(el,"Using user provided OfflineComponentProvider");try{await a_(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Se.FAILED_PRECONDITION||s.code===Se.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;$o("Error using user provided cache. Falling back to memory cache: "+t),await a_(n,new sp)}}else Be(el,"Using default OfflineComponentProvider"),await a_(n,new cL(void 0));return n._offlineComponents}async function OS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Be(el,"Using user provided OnlineComponentProvider"),await dw(n,n._uninitializedComponentsProvider._online)):(Be(el,"Using default OnlineComponentProvider"),await dw(n,new Y_))),n._onlineComponents}function fL(n){return OS(n).then(e=>e.syncEngine)}async function ap(n){const e=await OS(n),t=e.eventManager;return t.onListen=WD.bind(null,e.syncEngine),t.onUnlisten=eL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tL.bind(null,e.syncEngine),t}function pL(n,e,t={}){const i=new Pa;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,p,m){const _=new sy({next:b=>{_.Ou(),c.enqueueAndForget(()=>ey(l,E));const C=b.docs.has(f);!C&&b.fromCache?m.reject(new Ve(Se.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&b.fromCache&&p&&p.source==="server"?m.reject(new Ve(Se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(b)},error:b=>m.reject(b)}),E=new ny(Dp(f.path),_,{includeMetadataChanges:!0,ka:!0});return Jv(l,E)}(await ap(n),n.asyncQueue,e,t,i)),i.promise}function mL(n,e,t={}){const i=new Pa;return n.asyncQueue.enqueueAndForget(async()=>function(l,c,f,p,m){const _=new sy({next:b=>{_.Ou(),c.enqueueAndForget(()=>ey(l,E)),b.fromCache&&p.source==="server"?m.reject(new Ve(Se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(b)},error:b=>m.reject(b)}),E=new ny(f,_,{includeMetadataChanges:!0,ka:!0});return Jv(l,E)}(await ap(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="firestore.googleapis.com",pw=!0;class mw{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(Se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MS,this.ssl=pw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:pw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<KM)throw new Ve(Se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PS((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new Ve(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new Ve(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new Ve(Se.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gp{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(Se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(Se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wP;switch(i.type){case"firstParty":return new xP(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(Se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=fw.get(t);i&&(Be("ComponentProvider","Removing Datastore"),fw.delete(t),i.terminate())}(this),Promise.resolve()}}function gL(n,e,t,i={}){var s;n=Gi(n,Gp);const l=za(e),c=n._getSettings(),f=Object.assign(Object.assign({},c),{emulatorOptions:n._getEmulatorOptions()}),p=`${e}:${t}`;l&&(Sp(`https://${p}`),xp("Firestore",!0)),c.host!==MS&&c.host!==p&&$o("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},c),{host:p,ssl:l,emulatorOptions:i});if(!Hl(m,f)&&(n._setSettings(m),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=ki.MOCK_USER;else{_=kT(i.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const b=i.mockUserToken.sub||i.mockUserToken.user_id;if(!b)throw new Ve(Se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new ki(b)}n._authCredentials=new TP(new TA(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new sl(this.firestore,e,this._query)}}class kn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}toJSON(){return{type:kn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Xh(t,kn._jsonSchema))return new kn(e,i||null,new Xe(pn.fromString(t.referencePath)))}}kn._jsonSchemaVersion="firestore/documentReference/1.0",kn._jsonSchema={type:Zn("string",kn._jsonSchemaVersion),referencePath:Zn("string")};class qo extends sl{constructor(e,t,i){super(e,t,Dp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new Xe(e))}withConverter(e){return new qo(this.firestore,e,this._path)}}function Mr(n,e,...t){if(n=Jt(n),SA("collection","path",e),n instanceof Gp){const i=pn.fromString(e,...t);return Rb(i),new qo(n,null,i)}{if(!(n instanceof kn||n instanceof qo))throw new Ve(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pn.fromString(e,...t));return Rb(i),new qo(n.firestore,null,i)}}function _i(n,e,...t){if(n=Jt(n),arguments.length===1&&(e=Pv.newId()),SA("doc","path",e),n instanceof Gp){const i=pn.fromString(e,...t);return Cb(i),new kn(n,null,new Xe(i))}{if(!(n instanceof kn||n instanceof qo))throw new Ve(Se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(pn.fromString(e,...t));return Cb(i),new kn(n.firestore,n instanceof qo?n.converter:null,new Xe(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw="AsyncQueue";class _w{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new gS(this,"async_queue_retry"),this.oc=()=>{const i=s_();i&&Be(gw,"Visibility state changed to "+i.visibilityState),this.F_.y_()},this._c=e;const t=s_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=s_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Pa;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!hc(e))throw e;Be(gw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(i=>{throw this.tc=i,this.nc=!1,Va("INTERNAL UNHANDLED ERROR: ",vw(i)),i}).then(i=>(this.nc=!1,i))));return this._c=t,t}enqueueAfterDelay(e,t,i){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Wv.createAndSchedule(this,e,t,i,l=>this.lc(l));return this.ec.push(s),s}ac(){this.tc&&lt(47125,{hc:vw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function vw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of i)if(l in s&&typeof s[l]=="function")return!0;return!1}(n,["next","error","complete"])}class ra extends Gp{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new _w,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _w(e),this._firestoreClient=void 0,await e}}}function DS(n,e){const t=typeof n=="object"?n:Cp(),i=typeof n=="string"?n:Xf,s=Kh(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const l=vv("firestore");l&&gL(s,...l)}return s}function id(n){if(n._terminated)throw new Ve(Se.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||_L(n),n._firestoreClient}function _L(n){var e,t,i;const s=n._freezeSettings(),l=function(f,p,m,_){return new zP(f,p,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,PS(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new hL(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const p=f?._online.build();return{_offline:f?._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jr(vi.fromBase64String(e))}catch(t){throw new Ve(Se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Jr(vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xh(e,Jr._jsonSchema))return Jr.fromBase64String(e.bytes)}}Jr._jsonSchemaVersion="firestore/bytes/1.0",Jr._jsonSchema={type:Zn("string",Jr._jsonSchemaVersion),bytes:Zn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Ve(Se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ve(Se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ve(Se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ta._jsonSchemaVersion}}static fromJSON(e){if(Xh(e,ta._jsonSchema))return new ta(e.latitude,e.longitude)}}ta._jsonSchemaVersion="firestore/geoPoint/1.0",ta._jsonSchema={type:Zn("string",ta._jsonSchemaVersion),latitude:Zn("number"),longitude:Zn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==s[l])return!1;return!0}(this._values,e._values)}toJSON(){return{type:na._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xh(e,na._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new na(e.vectorValues);throw new Ve(Se.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}na._jsonSchemaVersion="firestore/vectorValue/1.0",na._jsonSchema={type:Zn("string",na._jsonSchemaVersion),vectorValues:Zn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vL=/^__.*__$/;class yL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new rl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jh(e,this.data,t,this.fieldTransforms)}}class LS{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new rl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt(40011,{Ec:n})}}class ay{constructor(e,t,i,s,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ay(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:i,mc:!1});return s.fc(e),s}gc(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:i,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return op(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(jS(this.Ec)&&vL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class EL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||zp(e)}Dc(e,t,i,s=!1){return new ay({Ec:e,methodName:t,bc:i,path:gi.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sd(n){const e=n._freezeSettings(),t=zp(n._databaseId);return new EL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oy(n,e,t,i,s,l={}){const c=n.Dc(l.merge||l.mergeFields?2:0,e,t,s);uy("Data must be an object, but it was:",c,i);const f=BS(i,c);let p,m;if(l.merge)p=new Or(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const b=Q_(e,E,t);if(!c.contains(b))throw new Ve(Se.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);zS(_,b)||_.push(b)}p=new Or(_),m=c.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,m=c.fieldTransforms;return new yL(new ar(f),p,m)}class Kp extends Zp{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kp}}class ly extends Zp{_toFieldTransform(e){return new pM(e.path,new jh)}isEqual(e){return e instanceof ly}}function VS(n,e,t,i){const s=n.Dc(1,e,t);uy("Data must be an object, but it was:",s,i);const l=[],c=ar.empty();il(i,(p,m)=>{const _=cy(e,p,t);m=Jt(m);const E=s.gc(_);if(m instanceof Kp)l.push(_);else{const b=ad(m,E);b!=null&&(l.push(_),c.set(_,b))}});const f=new Or(l);return new LS(c,f,s.fieldTransforms)}function US(n,e,t,i,s,l){const c=n.Dc(1,e,t),f=[Q_(e,i,t)],p=[s];if(l.length%2!=0)throw new Ve(Se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(Q_(e,l[b])),p.push(l[b+1]);const m=[],_=ar.empty();for(let b=f.length-1;b>=0;--b)if(!zS(m,f[b])){const C=f[b];let I=p[b];I=Jt(I);const O=c.gc(C);if(I instanceof Kp)m.push(C);else{const M=ad(I,O);M!=null&&(m.push(C),_.set(C,M))}}const E=new Or(m);return new LS(_,E,c.fieldTransforms)}function bL(n,e,t,i=!1){return ad(t,n.Dc(i?4:3,e))}function ad(n,e){if(FS(n=Jt(n)))return uy("Unsupported field value:",e,n),BS(n,e);if(n instanceof Zp)return function(i,s){if(!jS(s.Ec))throw s.wc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(i,s){const l=[];let c=0;for(const f of i){let p=ad(f,s.yc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}}(n,e)}return function(i,s){if((i=Jt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return hM(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=zt.fromDate(i);return{timestampValue:np(s.serializer,l)}}if(i instanceof zt){const l=new zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:np(s.serializer,l)}}if(i instanceof ta)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Jr)return{bytesValue:sS(s.serializer,i._byteString)};if(i instanceof kn){const l=s.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw s.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:zv(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof na)return function(c,f){return{mapValue:{fields:{[MA]:{stringValue:DA},[Jf]:{arrayValue:{values:c.toArray().map(m=>{if(typeof m!="number")throw f.wc("VectorValues must only contain numeric values.");return Uv(f.serializer,m)})}}}}}}(i,s);throw s.wc(`Unsupported field value: ${Np(i)}`)}(n,e)}function BS(n,e){const t={};return RA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):il(n,(i,s)=>{const l=ad(s,e.Vc(i));l!=null&&(t[i]=l)}),{mapValue:{fields:t}}}function FS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof zt||n instanceof ta||n instanceof Jr||n instanceof kn||n instanceof Zp||n instanceof na)}function uy(n,e,t){if(!FS(t)||!xA(t)){const i=Np(t);throw i==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+i)}}function Q_(n,e,t){if((e=Jt(e))instanceof rd)return e._internalPath;if(typeof e=="string")return cy(n,e);throw op("Field path arguments must be of type string or ",n,!1,void 0,t)}const wL=new RegExp("[~\\*/\\[\\]]");function cy(n,e,t){if(e.search(wL)>=0)throw op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch{throw op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function op(n,e,t,i,s){const l=i&&!i.isEmpty(),c=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${s}`),p+=")"),new Ve(Se.INVALID_ARGUMENT,f+n+p)}function zS(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(e,t,i,s,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field($p("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TL extends HS{data(){return super.data()}}function $p(n,e){return typeof e=="string"?cy(n,e):e instanceof rd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Ve(Se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class GS extends hy{}function ts(n,e,...t){let i=[];e instanceof hy&&i.push(e),i=i.concat(t),function(l){const c=l.filter(p=>p instanceof dy).length,f=l.filter(p=>p instanceof Yp).length;if(c>1||c>0&&f>0)throw new Ve(Se.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)n=s._apply(n);return n}class Yp extends GS{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Yp(e,t,i)}_apply(e){const t=this._parse(e);return ZS(e._query,t),new sl(e.firestore,e.converter,U_(e._query,t))}_parse(e){const t=sd(e.firestore);return function(l,c,f,p,m,_,E){let b;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new Ve(Se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){bw(E,_);const I=[];for(const O of E)I.push(Ew(p,l,O));b={arrayValue:{values:I}}}else b=Ew(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||bw(E,_),b=bL(f,c,E,_==="in"||_==="not-in");return Gn.create(m,_,b)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function es(n,e,t){const i=e,s=$p("where",n);return Yp._create(s,i,t)}class dy extends hy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new dy(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:As.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,l){let c=s;const f=l.getFlattenedFilters();for(const p of f)ZS(c,p),c=U_(c,p)}(e._query,t),new sl(e.firestore,e.converter,U_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class fy extends GS{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fy(e,t)}_apply(e){const t=function(s,l,c){if(s.startAt!==null)throw new Ve(Se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ve(Se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lh(l,c)}(e._query,this._field,this._direction);return new sl(e.firestore,e.converter,function(s,l){const c=s.explicitOrderBy.concat([l]);return new dc(s.path,s.collectionGroup,c,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function $l(n,e="asc"){const t=e,i=$p("orderBy",n);return fy._create(i,t)}function Ew(n,e,t){if(typeof(t=Jt(t))=="string"){if(t==="")throw new Ve(Se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!HA(e)&&t.indexOf("/")!==-1)throw new Ve(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(pn.fromString(t));if(!Xe.isDocumentKey(i))throw new Ve(Se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Lb(n,new Xe(i))}if(t instanceof kn)return Lb(n,t._key);throw new Ve(Se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Np(t)}.`)}function bw(n,e){if(!Array.isArray(n)||n.length===0)throw new Ve(Se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZS(n,e){const t=function(s,l){for(const c of s)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Ve(Se.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ve(Se.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AL{convertValue(e,t="none"){switch(Xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Un(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw lt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return il(e,(s,l)=>{i[s]=this.convertValue(l,t)}),i}convertVectorValue(e){var t,i,s;const l=(s=(i=(t=e.fields)===null||t===void 0?void 0:t[Jf].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(c=>Un(c.doubleValue));return new na(l)}convertGeoPoint(e){return new ta(Un(e.latitude),Un(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Mp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ph(e));default:return null}}convertTimestamp(e){const t=Qo(e);return new zt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=pn.fromString(e);$t(hS(i),9688,{name:e});const s=new Mh(i.get(1),i.get(3)),l=new Xe(i.popFirst(5));return s.isEqual(t)||Va(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class vh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ul extends HS{constructor(e,t,i,s,l,c){super(e,t,i,s,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Df(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field($p("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(Se.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ul._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ul._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ul._jsonSchema={type:Zn("string",Ul._jsonSchemaVersion),bundleSource:Zn("string","DocumentSnapshot"),bundleName:Zn("string"),bundle:Zn("string")};class Df extends Ul{data(e={}){return super.data(e)}}class Bl{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new vh(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Df(this._firestore,this._userDataWriter,i.key,i,new vh(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ve(Se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let c=0;return s._snapshot.docChanges.map(f=>{const p=new Df(s._firestore,s._userDataWriter,f.doc.key,f.doc,new vh(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}})}{let c=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new Df(s._firestore,s._userDataWriter,f.doc.key,f.doc,new vh(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,_=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:SL(f.type),doc:p,oldIndex:m,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ve(Se.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach(l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),s.push(l.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(n){n=Gi(n,kn);const e=Gi(n.firestore,ra);return pL(id(e),n._key).then(t=>KS(e,n,t))}Bl._jsonSchemaVersion="firestore/querySnapshot/1.0",Bl._jsonSchema={type:Zn("string",Bl._jsonSchemaVersion),bundleSource:Zn("string","QuerySnapshot"),bundleName:Zn("string"),bundle:Zn("string")};class my extends AL{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function up(n){n=Gi(n,sl);const e=Gi(n.firestore,ra),t=id(e),i=new my(e);return qS(n._query),mL(t,n._query).then(s=>new Bl(e,i,n,s))}function xL(n,e,t){n=Gi(n,kn);const i=Gi(n.firestore,ra),s=py(n.converter,e,t);return od(i,[oy(sd(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Zi.none())])}function Qu(n,e,t,...i){n=Gi(n,kn);const s=Gi(n.firestore,ra),l=sd(s);let c;return c=typeof(e=Jt(e))=="string"||e instanceof rd?US(l,"updateDoc",n._key,e,t,i):VS(l,"updateDoc",n._key,e),od(s,[c.toMutation(n._key,Zi.exists(!0))])}function gy(n){return od(Gi(n.firestore,ra),[new Bp(n._key,Zi.none())])}function Qp(n,e){const t=Gi(n.firestore,ra),i=_i(n),s=py(n.converter,e);return od(t,[oy(sd(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Zi.exists(!1))]).then(()=>i)}function nc(n,...e){var t,i,s;n=Jt(n);let l={includeMetadataChanges:!1,source:"default"},c=0;typeof e[c]!="object"||yw(e[c])||(l=e[c++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(yw(e[c])){const E=e[c];e[c]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[c+1]=(i=E.error)===null||i===void 0?void 0:i.bind(E),e[c+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let p,m,_;if(n instanceof kn)m=Gi(n.firestore,ra),_=Dp(n._key.path),p={next:E=>{e[c]&&e[c](KS(m,n,E))},error:e[c+1],complete:e[c+2]};else{const E=Gi(n,sl);m=Gi(E.firestore,ra),_=E._query;const b=new my(m);p={next:C=>{e[c]&&e[c](new Bl(m,b,E,C))},error:e[c+1],complete:e[c+2]},qS(n._query)}return function(b,C,I,O){const M=new sy(O),z=new ny(C,M,I);return b.asyncQueue.enqueueAndForget(async()=>Jv(await ap(b),z)),()=>{M.Ou(),b.asyncQueue.enqueueAndForget(async()=>ey(await ap(b),z))}}(id(m),_,f,p)}function od(n,e){return function(i,s){const l=new Pa;return i.asyncQueue.enqueueAndForget(async()=>nL(await fL(i),s,l)),l.promise}(id(n),e)}function KS(n,e,t){const i=t.docs.get(e._key),s=new my(n);return new Ul(n,s,e._key,i,new vh(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sd(e)}set(e,t,i){this._verifyNotCommitted();const s=o_(e,this._firestore),l=py(s.converter,t,i),c=oy(this._dataReader,"WriteBatch.set",s._key,l,s.converter!==null,i);return this._mutations.push(c.toMutation(s._key,Zi.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const l=o_(e,this._firestore);let c;return c=typeof(t=Jt(t))=="string"||t instanceof rd?US(this._dataReader,"WriteBatch.update",l._key,t,i,s):VS(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Zi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=o_(e,this._firestore);return this._mutations=this._mutations.concat(new Bp(t._key,Zi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ve(Se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function o_(n,e){if((n=Jt(n)).firestore!==e)throw new Ve(Se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function RL(){return new ly("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){return id(n=Gi(n,ra)),new CL(n,e=>od(n,e))}(function(e,t=!0){(function(s){uc=s})(Xl),Ko(new Da("firestore",(i,{instanceIdentifier:s,options:l})=>{const c=i.getProvider("app").getImmediate(),f=new ra(new AP(i.getProvider("auth-internal")),new CP(c,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ve(Se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mh(m.options.projectId,_)}(c,s),c);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),ns(wb,Tb,e),ns(wb,Tb,"esm2017")})();function IL(){const[n,e]=te.useState(null),[t,i]=te.useState(null),[s,l]=te.useState(!0),[c,f]=te.useState(null),p=Nv(),m=DS();return te.useEffect(()=>{const _=Rv(p,async E=>{if(E){const b=_i(m,"empresas",E.uid),C=await lp(b);if(C.exists()){const I=C.data();e(E),i(I.role||"cliente"),f(I)}else e(E),i(null),f(null)}else e(null),i(null),f(null);l(!1)});return()=>_()},[p,m]),{currentUser:n,userRole:t,loading:s,empresaData:c}}const YS=te.createContext();function kL({children:n}){const e=IL();return T.jsx(YS.Provider,{value:e,children:n})}function Wp(){return te.useContext(YS)}var NL="firebase",OL="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(NL,OL,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebasestorage.googleapis.com",WS="storageBucket",PL=2*60*1e3,ML=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends Cs{constructor(e,t,i=0){super(l_(e),`Firebase Storage: ${t} (${l_(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return l_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Nn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Nn||(Nn={}));function l_(n){return"storage/"+n}function _y(){const n="An unknown error occurred, please check the error payload for server response.";return new Pn(Nn.UNKNOWN,n)}function DL(n){return new Pn(Nn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function LL(n){return new Pn(Nn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function jL(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pn(Nn.UNAUTHENTICATED,n)}function VL(){return new Pn(Nn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UL(n){return new Pn(Nn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function BL(){return new Pn(Nn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FL(){return new Pn(Nn.CANCELED,"User canceled the upload/download.")}function zL(n){return new Pn(Nn.INVALID_URL,"Invalid URL '"+n+"'.")}function HL(n){return new Pn(Nn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function qL(){return new Pn(Nn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+WS+"' property when initializing the app?")}function GL(){return new Pn(Nn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZL(){return new Pn(Nn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KL(n){return new Pn(Nn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function W_(n){return new Pn(Nn.INVALID_ARGUMENT,n)}function XS(){return new Pn(Nn.APP_DELETED,"The Firebase app was deleted.")}function $L(n){return new Pn(Nn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ch(n,e){return new Pn(Nn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function lh(n){throw new Pn(Nn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Pr.makeFromUrl(e,t)}catch{return new Pr(e,"")}if(i.path==="")return i;throw HL(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function l(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}const c="(/(.*))?$",f=new RegExp("^gs://"+s+c,"i"),p={bucket:1,path:3};function m(J){J.path_=decodeURIComponent(J.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),b="(/([^?#]*).*)?$",C=new RegExp(`^https?://${E}/${_}/b/${s}/o${b}`,"i"),I={bucket:1,path:3},O=t===QS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,M="([^?#]*)",z=new RegExp(`^https?://${O}/${s}/${M}`,"i"),K=[{regex:f,indices:p,postModify:l},{regex:C,indices:I,postModify:m},{regex:z,indices:{bucket:1,path:2},postModify:m}];for(let J=0;J<K.length;J++){const oe=K[J],W=oe.regex.exec(e);if(W){const q=W[oe.indices.bucket];let S=W[oe.indices.path];S||(S=""),i=new Pr(q,S),oe.postModify(i);break}}if(i==null)throw zL(e);return i}}class YL{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(n,e,t){let i=1,s=null,l=null,c=!1,f=0;function p(){return f===2}let m=!1;function _(...M){m||(m=!0,e.apply(null,M))}function E(M){s=setTimeout(()=>{s=null,n(C,p())},M)}function b(){l&&clearTimeout(l)}function C(M,...z){if(m){b();return}if(M){b(),_.call(null,M,...z);return}if(p()||c){b(),_.call(null,M,...z);return}i<64&&(i*=2);let K;f===1?(f=2,K=0):K=(i+Math.random())*1e3,E(K)}let I=!1;function O(M){I||(I=!0,b(),!m&&(s!==null?(M||(f=2),clearTimeout(s),E(0)):M||(f=1)))}return E(0),l=setTimeout(()=>{c=!0,O(!0)},t),O}function WL(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XL(n){return n!==void 0}function JL(n){return typeof n=="object"&&!Array.isArray(n)}function vy(n){return typeof n=="string"||n instanceof String}function ww(n){return yy()&&n instanceof Blob}function yy(){return typeof Blob<"u"}function Tw(n,e,t,i){if(i<e)throw W_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw W_(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function JS(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var Fl;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Fl||(Fl={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,t,i,s,l,c,f,p,m,_,E,b=!0,C=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=c,this.callback_=f,this.errorCallback_=p,this.timeout_=m,this.progressCallback_=_,this.connectionFactory_=E,this.retry=b,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,O)=>{this.resolve_=I,this.reject_=O,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new wf(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const c=f=>{const p=f.loaded,m=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,m)};this.progressCallback_!==null&&l.addUploadProgressListener(c),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(c),this.pendingConnection_=null;const f=l.getErrorCode()===Fl.NO_ERROR,p=l.getStatus();if(!f||e4(p,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Fl.ABORT;i(!1,new wf(!1,null,_));return}const m=this.successCodes_.indexOf(p)!==-1;i(!0,new wf(m,l))})},t=(i,s)=>{const l=this.resolve_,c=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());XL(p)?l(p):l()}catch(p){c(p)}else if(f!==null){const p=_y();p.serverResponse=f.getErrorText(),this.errorCallback_?c(this.errorCallback_(f,p)):c(p)}else if(s.canceled){const p=this.appDelete_?XS():FL();c(p)}else{const p=BL();c(p)}};this.canceled_?t(!1,new wf(!1,null,!0)):this.backoffId_=QL(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WL(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class wf{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function n4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function i4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function r4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function s4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function a4(n,e,t,i,s,l,c=!0,f=!1){const p=JS(n.urlParams),m=n.url+p,_=Object.assign({},n.headers);return r4(_,e),n4(_,t),i4(_,l),s4(_,i),new t4(m,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,c,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function l4(...n){const e=o4();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(yy())return new Blob(n);throw new Pn(Nn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(n){if(typeof atob>"u")throw KL("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class u_{constructor(e,t){this.data=e,this.contentType=t||null}}function h4(n,e){switch(n){case Ys.RAW:return new u_(e2(e));case Ys.BASE64:case Ys.BASE64URL:return new u_(t2(n,e));case Ys.DATA_URL:return new u_(f4(e),p4(e))}throw _y()}function e2(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=i,c=n.charCodeAt(++t);i=65536|(l&1023)<<10|c&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function d4(n){let e;try{e=decodeURIComponent(n)}catch{throw Ch(Ys.DATA_URL,"Malformed data URL.")}return e2(e)}function t2(n,e){switch(n){case Ys.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw Ch(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ys.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw Ch(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=c4(e)}catch(s){throw s.message.includes("polyfill")?s:Ch(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}class n2{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ch(Ys.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=m4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function f4(n){const e=new n2(n);return e.base64?t2(Ys.BASE64,e.rest):d4(e.rest)}function p4(n){return new n2(n).contentType}function m4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e,t){let i=0,s="";ww(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(ww(this.data_)){const i=this.data_,s=u4(i,e,t);return s===null?null:new Uo(s)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new Uo(i,!0)}}static getBlob(...e){if(yy()){const t=e.map(i=>i instanceof Uo?i.data_:i);return new Uo(l4.apply(null,t))}else{const t=e.map(c=>vy(c)?h4(Ys.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const s=new Uint8Array(i);let l=0;return t.forEach(c=>{for(let f=0;f<c.length;f++)s[l++]=c[f]}),new Uo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(n){let e;try{e=JSON.parse(n)}catch{return null}return JL(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function _4(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function r2(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v4(n,e){return e}class qi{constructor(e,t,i,s){this.server=e,this.local=t||e,this.writable=!!i,this.xform=s||v4}}let Tf=null;function y4(n){return!vy(n)||n.length<2?n:r2(n)}function s2(){if(Tf)return Tf;const n=[];n.push(new qi("bucket")),n.push(new qi("generation")),n.push(new qi("metageneration")),n.push(new qi("name","fullPath",!0));function e(l,c){return y4(c)}const t=new qi("name");t.xform=e,n.push(t);function i(l,c){return c!==void 0?Number(c):c}const s=new qi("size");return s.xform=i,n.push(s),n.push(new qi("timeCreated")),n.push(new qi("updated")),n.push(new qi("md5Hash",null,!0)),n.push(new qi("cacheControl",null,!0)),n.push(new qi("contentDisposition",null,!0)),n.push(new qi("contentEncoding",null,!0)),n.push(new qi("contentLanguage",null,!0)),n.push(new qi("contentType",null,!0)),n.push(new qi("metadata","customMetadata",!0)),Tf=n,Tf}function E4(n,e){function t(){const i=n.bucket,s=n.fullPath,l=new Pr(i,s);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function b4(n,e,t){const i={};i.type="file";const s=t.length;for(let l=0;l<s;l++){const c=t[l];i[c.local]=c.xform(i,e[c.server])}return E4(i,n),i}function a2(n,e,t){const i=i2(e);return i===null?null:b4(n,i,t)}function w4(n,e,t,i){const s=i2(e);if(s===null||!vy(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const c=encodeURIComponent;return l.split(",").map(m=>{const _=n.bucket,E=n.fullPath,b="/b/"+c(_)+"/o/"+c(E),C=Xp(b,t,i),I=JS({alt:"media",token:m});return C+I})[0]}function T4(n,e){const t={},i=e.length;for(let s=0;s<i;s++){const l=e[s];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class Ey{constructor(e,t,i,s){this.url=e,this.method=t,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(n){if(!n)throw _y()}function A4(n,e){function t(i,s){const l=a2(n,s,e);return o2(l!==null),l}return t}function S4(n,e){function t(i,s){const l=a2(n,s,e);return o2(l!==null),w4(l,s,n.host,n._protocol)}return t}function l2(n){function e(t,i){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=VL():s=jL():t.getStatus()===402?s=LL(n.bucket):t.getStatus()===403?s=UL(n.path):s=i,s.status=t.getStatus(),s.serverResponse=i.serverResponse,s}return e}function u2(n){const e=l2(n);function t(i,s){let l=e(i,s);return i.getStatus()===404&&(l=DL(n.path)),l.serverResponse=s.serverResponse,l}return t}function x4(n,e,t){const i=e.fullServerUrl(),s=Xp(i,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,f=new Ey(s,l,S4(n,t),c);return f.errorHandler=u2(e),f}function C4(n,e){const t=e.fullServerUrl(),i=Xp(t,n.host,n._protocol),s="DELETE",l=n.maxOperationRetryTime;function c(p,m){}const f=new Ey(i,s,c,l);return f.successCodes=[200,204],f.errorHandler=u2(e),f}function R4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function I4(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=R4(null,e)),i}function k4(n,e,t,i,s){const l=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function f(){let K="";for(let J=0;J<2;J++)K=K+Math.random().toString().slice(2);return K}const p=f();c["Content-Type"]="multipart/related; boundary="+p;const m=I4(e,i,s),_=T4(m,t),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+p+`\r
Content-Type: `+m.contentType+`\r
\r
`,b=`\r
--`+p+"--",C=Uo.getBlob(E,i,b);if(C===null)throw GL();const I={name:m.fullPath},O=Xp(l,n.host,n._protocol),M="POST",z=n.maxUploadRetryTime,Y=new Ey(O,M,A4(n,t),z);return Y.urlParams=I,Y.headers=c,Y.body=C.uploadData(),Y.errorHandler=l2(e),Y}class N4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,s,l){if(this.sent_)throw lh("cannot .send() more than once");if(za(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const c in l)l.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,l[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw lh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw lh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw lh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw lh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class O4 extends N4{initXhr(){this.xhr_.responseType="text"}}function by(){return new O4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t){this._service=e,t instanceof Pr?this._location=t:this._location=Pr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Yl(e,t)}get root(){const e=new Pr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return r2(this._location.path)}get storage(){return this._service}get parent(){const e=g4(this._location.path);if(e===null)return null;const t=new Pr(this._location.bucket,e);return new Yl(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw $L(e)}}function P4(n,e,t){n._throwIfRoot("uploadBytes");const i=k4(n.storage,n._location,s2(),new Uo(e,!0),t);return n.storage.makeRequestWithTokens(i,by).then(s=>({metadata:s,ref:n}))}function M4(n){n._throwIfRoot("getDownloadURL");const e=x4(n.storage,n._location,s2());return n.storage.makeRequestWithTokens(e,by).then(t=>{if(t===null)throw ZL();return t})}function D4(n){n._throwIfRoot("deleteObject");const e=C4(n.storage,n._location);return n.storage.makeRequestWithTokens(e,by)}function L4(n,e){const t=_4(n._location.path,e),i=new Pr(n._location.bucket,t);return new Yl(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(n){return/^[A-Za-z]+:\/\//.test(n)}function V4(n,e){return new Yl(n,e)}function c2(n,e){if(n instanceof wy){const t=n;if(t._bucket==null)throw qL();const i=new Yl(t,t._bucket);return e!=null?c2(i,e):i}else return e!==void 0?L4(n,e):n}function U4(n,e){if(e&&j4(e)){if(n instanceof wy)return V4(n,e);throw W_("To use ref(service, url), the first argument must be a Storage instance.")}else return c2(n,e)}function Aw(n,e){const t=e?.[WS];return t==null?null:Pr.makeFromBucketSpec(t,n)}function B4(n,e,t,i={}){n.host=`${e}:${t}`;const s=za(e);s&&(Sp(`https://${n.host}/b`),xp("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:l}=i;l&&(n._overrideAuthToken=typeof l=="string"?l:kT(l,n.app.options.projectId))}class wy{constructor(e,t,i,s,l,c=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=l,this._isUsingEmulator=c,this._bucket=null,this._host=QS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=PL,this._maxUploadRetryTime=ML,this._requests=new Set,s!=null?this._bucket=Pr.makeFromBucketSpec(s,this._host):this._bucket=Aw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pr.makeFromBucketSpec(this._url,e):this._bucket=Aw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Tw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Tw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yl(this,e)}_makeRequest(e,t,i,s,l=!0){if(this._deleted)return new YL(XS());{const c=a4(e,this._appId,i,s,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const Sw="@firebase/storage",xw="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="storage";function Cw(n,e,t){return n=Jt(n),P4(n,e,t)}function Rw(n){return n=Jt(n),M4(n)}function F4(n){return n=Jt(n),D4(n)}function c_(n,e){return n=Jt(n),U4(n,e)}function z4(n=Cp(),e){n=Jt(n);const i=Kh(n,h2).getImmediate({identifier:e}),s=vv("storage");return s&&H4(i,...s),i}function H4(n,e,t,i={}){B4(n,e,t,i)}function q4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new wy(t,i,s,e,Xl)}function G4(){Ko(new Da(h2,q4,"PUBLIC").setMultipleInstances(!0)),ns(Sw,xw,""),ns(Sw,xw,"esm2017")}G4();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z4="type.googleapis.com/google.protobuf.Int64Value",K4="type.googleapis.com/google.protobuf.UInt64Value";function d2(n,e){const t={};for(const i in n)n.hasOwnProperty(i)&&(t[i]=e(n[i]));return t}function cp(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>cp(e));if(typeof n=="function"||typeof n=="object")return d2(n,e=>cp(e));throw new Error("Data cannot be encoded in JSON: "+n)}function ic(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case Z4:case K4:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>ic(e)):typeof n=="function"||typeof n=="object"?d2(n,e=>ic(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class or extends Cs{constructor(e,t,i){super(`${Ty}/${e}`,t||""),this.details=i,Object.setPrototypeOf(this,or.prototype)}}function $4(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function hp(n,e){let t=$4(n),i=t,s;try{const l=e&&e.error;if(l){const c=l.status;if(typeof c=="string"){if(!Iw[c])return new or("internal","internal");t=Iw[c],i=c}const f=l.message;typeof f=="string"&&(i=f),s=l.details,s!==void 0&&(s=ic(s))}}catch{}return t==="ok"?null:new or(t,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e,t,i,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,sr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||i.get().then(l=>this.messaging=l,()=>{}),this.appCheck||s?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:i,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="us-central1",Q4=/^data: (.*?)(?:\n|$)/;function W4(n){let e=null;return{promise:new Promise((t,i)=>{e=setTimeout(()=>{i(new or("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class X4{constructor(e,t,i,s,l=X_,c=(...f)=>fetch(...f)){this.app=e,this.fetchImpl=c,this.emulatorOrigin=null,this.contextProvider=new Y4(e,t,i,s),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(l);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=X_}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function J4(n,e,t){const i=za(e);n.emulatorOrigin=`http${i?"s":""}://${e}:${t}`,i&&(Sp(n.emulatorOrigin),xp("Functions",!0))}function e3(n,e,t){const i=s=>n3(n,e,s,{});return i.stream=(s,l)=>r3(n,e,s,l),i}async function t3(n,e,t,i){t["Content-Type"]="application/json";let s;try{s=await i(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await s.json()}catch{}return{status:s.status,json:l}}async function f2(n,e){const t={},i=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(t.Authorization="Bearer "+i.authToken),i.messagingToken&&(t["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=i.appCheckToken),t}function n3(n,e,t,i){const s=n._url(e);return i3(n,s,t,i)}async function i3(n,e,t,i){t=cp(t);const s={data:t},l=await f2(n,i),c=i.timeout||7e4,f=W4(c),p=await Promise.race([t3(e,s,l,n.fetchImpl),f.promise,n.cancelAllRequests]);if(f.cancel(),!p)throw new or("cancelled","Firebase Functions instance was deleted.");const m=hp(p.status,p.json);if(m)throw m;if(!p.json)throw new or("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new or("internal","Response is missing data field.");return{data:ic(_)}}function r3(n,e,t,i){const s=n._url(e);return s3(n,s,t,i||{})}async function s3(n,e,t,i){var s;t=cp(t);const l={data:t},c=await f2(n,i);c["Content-Type"]="application/json",c.Accept="text/event-stream";let f;try{f=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:c,signal:i?.signal})}catch(C){if(C instanceof Error&&C.name==="AbortError"){const O=new or("cancelled","Request was cancelled.");return{data:Promise.reject(O),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(O)}}}}}}const I=hp(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let p,m;const _=new Promise((C,I)=>{p=C,m=I});(s=i?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const C=new or("cancelled","Request was cancelled.");m(C)});const E=f.body.getReader(),b=a3(E,p,m,i?.signal);return{stream:{[Symbol.asyncIterator](){const C=b.getReader();return{async next(){const{value:I,done:O}=await C.read();return{value:I,done:O}},async return(){return await C.cancel(),{done:!0,value:void 0}}}}},data:_}}function a3(n,e,t,i){const s=(c,f)=>{const p=c.match(Q4);if(!p)return;const m=p[1];try{const _=JSON.parse(m);if("result"in _){e(ic(_.result));return}if("message"in _){f.enqueue(ic(_.message));return}if("error"in _){const E=hp(0,_);f.error(E),t(E);return}}catch(_){if(_ instanceof or){f.error(_),t(_);return}}},l=new TextDecoder;return new ReadableStream({start(c){let f="";return p();async function p(){if(i?.aborted){const m=new or("cancelled","Request was cancelled");return c.error(m),t(m),Promise.resolve()}try{const{value:m,done:_}=await n.read();if(_){f.trim()&&s(f.trim(),c),c.close();return}if(i?.aborted){const b=new or("cancelled","Request was cancelled");c.error(b),t(b),await n.cancel();return}f+=l.decode(m,{stream:!0});const E=f.split(`
`);f=E.pop()||"";for(const b of E)b.trim()&&s(b.trim(),c);return p()}catch(m){const _=m instanceof or?m:hp(0,null);c.error(_),t(_)}}},cancel(){return n.cancel()}})}const kw="@firebase/functions",Nw="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="auth-internal",l3="app-check-internal",u3="messaging-internal";function c3(n){const e=(t,{instanceIdentifier:i})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider(o3),c=t.getProvider(u3),f=t.getProvider(l3);return new X4(s,l,c,f,i)};Ko(new Da(Ty,e,"PUBLIC").setMultipleInstances(!0)),ns(kw,Nw,n),ns(kw,Nw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(n=Cp(),e=X_){const i=Kh(Jt(n),Ty).getImmediate({identifier:e}),s=vv("functions");return s&&h3(i,...s),i}function h3(n,e,t){J4(Jt(n),e,t)}function m2(n,e,t){return e3(Jt(n),e)}c3();const d3={apiKey:"AIzaSyBOzvTb9IAQ2-x9JhZq2cE1x-KtBK9wucE",authDomain:"chapa-amigo-empresas.firebaseapp.com",projectId:"chapa-amigo-empresas",storageBucket:"chapa-amigo-empresas.appspot.com",messagingSenderId:"912991691952",appId:"1:912991691952:web:339b7883ee6aee528c8775",measurementId:"G-SRM8HCL53Z"},Jp=PT(d3),ir=Nv(Jp),Xt=DS(Jp),h_=z4(Jp),f3=p2(Jp,"us-central1");function p3(){const[n,e]=te.useState(""),[t,i]=te.useState(""),s=oc(),l=c=>{c.preventDefault(),oO(ir,n,t).then(f=>{console.log("Login com sucesso:",f.user.email),s("/dashboard")}).catch(f=>{const p=f.message;alert("Falha no login: "+p)})};return T.jsx("div",{className:"login-page-container",children:T.jsxs("div",{className:"login-box",children:[T.jsx("img",{src:"/images/logo.svg",alt:"Logo Chapa Amigo",className:"login-logo"}),T.jsx("h1",{className:"login-title",children:"Painel Chapa Amigo Empresas"}),T.jsx("p",{className:"login-subtitle",children:"Por favor, insira suas credenciais para continuar."}),T.jsxs("form",{className:"login-form",onSubmit:l,children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"email",children:"E-mail Corporativo"}),T.jsx("input",{type:"email",id:"email",value:n,onChange:c=>e(c.target.value),required:!0})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"password",children:"Senha"}),T.jsx("input",{type:"password",id:"password",value:t,onChange:c=>i(c.target.value),required:!0})]}),T.jsx("button",{type:"submit",className:"login-button",children:"Entrar"})]})]})})}const m3=n=>n.replace(/\D/g,"").replace(/(\d{2})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1/$2").replace(/(\d{4})(\d)/,"$1-$2").replace(/(-\d{2})\d+?$/,"$1");function g3(){const[n,e]=te.useState(""),[t,i]=te.useState(""),[s,l]=te.useState(""),[c,f]=te.useState(""),[p,m]=te.useState(""),[_,E]=te.useState(""),[b,C]=te.useState(""),[I,O]=te.useState(!1),M=oc(),z=K=>{i(m3(K.target.value))},Y=async K=>{if(K.preventDefault(),C(""),!/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/.test(p)){C("A senha deve ter no mínimo 8 caracteres, com pelo menos uma letra e um número.");return}if(p!==_){C("As senhas não coincidem!");return}O(!0);try{const W=(await aO(ir,c,p)).user,q=_i(Xt,"empresas",W.uid);await xL(q,{adminUserId:W.uid,companyName:n,cnpj:t.replace(/\D/g,""),adminName:s,email:W.email,plan:"essencial",createdAt:RL(),limits:{lojas:1,frota:20,usuarios:3}}),M("/dashboard")}catch(oe){console.error("Erro no registro:",oe.code,oe.message),oe.code==="auth/email-already-in-use"?C("Este e-mail já está em uso por outra conta."):C("Ocorreu um erro ao criar a conta. Tente novamente.")}finally{O(!1)}};return T.jsx("div",{className:"register-page-container",children:T.jsxs("div",{className:"register-box",children:[T.jsx("img",{src:"/images/logo.svg",alt:"Logo Chapa Amigo",className:"register-logo"}),T.jsx("h1",{className:"register-title",children:"Crie sua Conta de Empresa"}),T.jsx("p",{className:"register-subtitle",children:"Comece a gerenciar suas operações com o Plano Essencial."}),T.jsxs("form",{className:"register-form",onSubmit:Y,children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"companyName",children:"Nome da Empresa"}),T.jsx("input",{type:"text",id:"companyName",value:n,onChange:K=>e(K.target.value),required:!0,disabled:I})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"cnpj",children:"CNPJ"}),T.jsx("input",{type:"text",id:"cnpj",value:t,onChange:z,required:!0,disabled:I})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"adminName",children:"Seu Nome Completo"}),T.jsx("input",{type:"text",id:"adminName",value:s,onChange:K=>l(K.target.value),required:!0,disabled:I})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"email",children:"Seu E-mail de Acesso"}),T.jsx("input",{type:"email",id:"email",value:c,onChange:K=>f(K.target.value),required:!0,disabled:I})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"password",children:"Crie uma Senha (mín. 8 caracteres, com letras e números)"}),T.jsx("input",{type:"password",id:"password",value:p,onChange:K=>m(K.target.value),required:!0,disabled:I})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"confirmPassword",children:"Confirme a Senha"}),T.jsx("input",{type:"password",id:"confirmPassword",value:_,onChange:K=>E(K.target.value),required:!0,disabled:I})]}),b&&T.jsx("p",{className:"error-message",children:b}),T.jsx("button",{type:"submit",className:"register-button",disabled:I,children:I?"Criando conta...":"Criar Conta"})]}),T.jsx("div",{className:"login-link",children:T.jsxs("p",{children:["Já tem uma conta? ",T.jsx(_v,{to:"/login",children:"Faça Login"})]})})]})})}function g2(n,e){const t=te.useRef(e);te.useEffect(function(){e!==t.current&&n.attributionControl!=null&&(t.current!=null&&n.attributionControl.removeAttribution(t.current),e!=null&&n.attributionControl.addAttribution(e)),t.current=e},[n,e])}const _3=1;function v3(n){return Object.freeze({__version:_3,map:n})}function y3(n,e){return Object.freeze({...n,...e})}const Ay=te.createContext(null);function _2(){const n=te.use(Ay);if(n==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return n}function E3(n){function e(t,i){const{instance:s,context:l}=n(t).current;te.useImperativeHandle(i,()=>s);const{children:c}=t;return c==null?null:Kt.createElement(Ay,{value:l},c)}return te.forwardRef(e)}function b3(n){function e(t,i){const[s,l]=te.useState(!1),{instance:c}=n(t,l).current;te.useImperativeHandle(i,()=>c),te.useEffect(function(){s&&c.update()},[c,s,t.children]);const f=c._contentNode;return f?CI.createPortal(t.children,f):null}return te.forwardRef(e)}function w3(n){function e(t,i){const{instance:s}=n(t).current;return te.useImperativeHandle(i,()=>s),null}return te.forwardRef(e)}function v2(n,e){const t=te.useRef(void 0);te.useEffect(function(){return e!=null&&n.instance.on(e),t.current=e,function(){t.current!=null&&n.instance.off(t.current),t.current=null}},[n,e])}function Sy(n,e){const t=n.pane??e.pane;return t?{...n,pane:t}:n}function T3(n,e){return function(i,s){const l=_2(),c=n(Sy(i,l),l);return g2(l.map,i.attribution),v2(c.current,i.eventHandlers),e(c.current,l,i,s),c}}var yh={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var A3=yh.exports,Ow;function S3(){return Ow||(Ow=1,function(n,e){(function(t,i){i(e)})(A3,function(t){var i="1.9.4";function s(o){var h,v,A,k;for(v=1,A=arguments.length;v<A;v++){k=arguments[v];for(h in k)o[h]=k[h]}return o}var l=Object.create||function(){function o(){}return function(h){return o.prototype=h,new o}}();function c(o,h){var v=Array.prototype.slice;if(o.bind)return o.bind.apply(o,v.call(arguments,1));var A=v.call(arguments,2);return function(){return o.apply(h,A.length?A.concat(v.call(arguments)):arguments)}}var f=0;function p(o){return"_leaflet_id"in o||(o._leaflet_id=++f),o._leaflet_id}function m(o,h,v){var A,k,G,ie;return ie=function(){A=!1,k&&(G.apply(v,k),k=!1)},G=function(){A?k=arguments:(o.apply(v,arguments),setTimeout(ie,h),A=!0)},G}function _(o,h,v){var A=h[1],k=h[0],G=A-k;return o===A&&v?o:((o-k)%G+G)%G+k}function E(){return!1}function b(o,h){if(h===!1)return o;var v=Math.pow(10,h===void 0?6:h);return Math.round(o*v)/v}function C(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,"")}function I(o){return C(o).split(/\s+/)}function O(o,h){Object.prototype.hasOwnProperty.call(o,"options")||(o.options=o.options?l(o.options):{});for(var v in h)o.options[v]=h[v];return o.options}function M(o,h,v){var A=[];for(var k in o)A.push(encodeURIComponent(v?k.toUpperCase():k)+"="+encodeURIComponent(o[k]));return(!h||h.indexOf("?")===-1?"?":"&")+A.join("&")}var z=/\{ *([\w_ -]+) *\}/g;function Y(o,h){return o.replace(z,function(v,A){var k=h[A];if(k===void 0)throw new Error("No value provided for variable "+v);return typeof k=="function"&&(k=k(h)),k})}var K=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};function J(o,h){for(var v=0;v<o.length;v++)if(o[v]===h)return v;return-1}var oe="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function W(o){return window["webkit"+o]||window["moz"+o]||window["ms"+o]}var q=0;function S(o){var h=+new Date,v=Math.max(0,16-(h-q));return q=h+v,window.setTimeout(o,v)}var x=window.requestAnimationFrame||W("RequestAnimationFrame")||S,N=window.cancelAnimationFrame||W("CancelAnimationFrame")||W("CancelRequestAnimationFrame")||function(o){window.clearTimeout(o)};function j(o,h,v){if(v&&x===S)o.call(h);else return x.call(window,c(o,h))}function B(o){o&&N.call(window,o)}var D={__proto__:null,extend:s,create:l,bind:c,get lastId(){return f},stamp:p,throttle:m,wrapNum:_,falseFn:E,formatNum:b,trim:C,splitWords:I,setOptions:O,getParamString:M,template:Y,isArray:K,indexOf:J,emptyImageUrl:oe,requestFn:x,cancelFn:N,requestAnimFrame:j,cancelAnimFrame:B};function Q(){}Q.extend=function(o){var h=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},v=h.__super__=this.prototype,A=l(v);A.constructor=h,h.prototype=A;for(var k in this)Object.prototype.hasOwnProperty.call(this,k)&&k!=="prototype"&&k!=="__super__"&&(h[k]=this[k]);return o.statics&&s(h,o.statics),o.includes&&(ae(o.includes),s.apply(null,[A].concat(o.includes))),s(A,o),delete A.statics,delete A.includes,A.options&&(A.options=v.options?l(v.options):{},s(A.options,o.options)),A._initHooks=[],A.callInitHooks=function(){if(!this._initHooksCalled){v.callInitHooks&&v.callInitHooks.call(this),this._initHooksCalled=!0;for(var G=0,ie=A._initHooks.length;G<ie;G++)A._initHooks[G].call(this)}},h},Q.include=function(o){var h=this.prototype.options;return s(this.prototype,o),o.options&&(this.prototype.options=h,this.mergeOptions(o.options)),this},Q.mergeOptions=function(o){return s(this.prototype.options,o),this},Q.addInitHook=function(o){var h=Array.prototype.slice.call(arguments,1),v=typeof o=="function"?o:function(){this[o].apply(this,h)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(v),this};function ae(o){if(!(typeof L>"u"||!L||!L.Mixin)){o=K(o)?o:[o];for(var h=0;h<o.length;h++)o[h]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var U={on:function(o,h,v){if(typeof o=="object")for(var A in o)this._on(A,o[A],h);else{o=I(o);for(var k=0,G=o.length;k<G;k++)this._on(o[k],h,v)}return this},off:function(o,h,v){if(!arguments.length)delete this._events;else if(typeof o=="object")for(var A in o)this._off(A,o[A],h);else{o=I(o);for(var k=arguments.length===1,G=0,ie=o.length;G<ie;G++)k?this._off(o[G]):this._off(o[G],h,v)}return this},_on:function(o,h,v,A){if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}if(this._listens(o,h,v)===!1){v===this&&(v=void 0);var k={fn:h,ctx:v};A&&(k.once=!0),this._events=this._events||{},this._events[o]=this._events[o]||[],this._events[o].push(k)}},_off:function(o,h,v){var A,k,G;if(this._events&&(A=this._events[o],!!A)){if(arguments.length===1){if(this._firingCount)for(k=0,G=A.length;k<G;k++)A[k].fn=E;delete this._events[o];return}if(typeof h!="function"){console.warn("wrong listener type: "+typeof h);return}var ie=this._listens(o,h,v);if(ie!==!1){var pe=A[ie];this._firingCount&&(pe.fn=E,this._events[o]=A=A.slice()),A.splice(ie,1)}}},fire:function(o,h,v){if(!this.listens(o,v))return this;var A=s({},h,{type:o,target:this,sourceTarget:h&&h.sourceTarget||this});if(this._events){var k=this._events[o];if(k){this._firingCount=this._firingCount+1||1;for(var G=0,ie=k.length;G<ie;G++){var pe=k[G],Ee=pe.fn;pe.once&&this.off(o,Ee,pe.ctx),Ee.call(pe.ctx||this,A)}this._firingCount--}}return v&&this._propagateEvent(A),this},listens:function(o,h,v,A){typeof o!="string"&&console.warn('"string" type argument expected');var k=h;typeof h!="function"&&(A=!!h,k=void 0,v=void 0);var G=this._events&&this._events[o];if(G&&G.length&&this._listens(o,k,v)!==!1)return!0;if(A){for(var ie in this._eventParents)if(this._eventParents[ie].listens(o,h,v,A))return!0}return!1},_listens:function(o,h,v){if(!this._events)return!1;var A=this._events[o]||[];if(!h)return!!A.length;v===this&&(v=void 0);for(var k=0,G=A.length;k<G;k++)if(A[k].fn===h&&A[k].ctx===v)return k;return!1},once:function(o,h,v){if(typeof o=="object")for(var A in o)this._on(A,o[A],h,!0);else{o=I(o);for(var k=0,G=o.length;k<G;k++)this._on(o[k],h,v,!0)}return this},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[p(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[p(o)],this},_propagateEvent:function(o){for(var h in this._eventParents)this._eventParents[h].fire(o.type,s({layer:o.target,propagatedFrom:o.target},o),!0)}};U.addEventListener=U.on,U.removeEventListener=U.clearAllEventListeners=U.off,U.addOneTimeEventListener=U.once,U.fireEvent=U.fire,U.hasEventListeners=U.listens;var F=Q.extend(U);function X(o,h,v){this.x=v?Math.round(o):o,this.y=v?Math.round(h):h}var ee=Math.trunc||function(o){return o>0?Math.floor(o):Math.ceil(o)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(o){return this.clone()._add(H(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(H(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new X(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new X(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ee(this.x),this.y=ee(this.y),this},distanceTo:function(o){o=H(o);var h=o.x-this.x,v=o.y-this.y;return Math.sqrt(h*h+v*v)},equals:function(o){return o=H(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=H(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function H(o,h,v){return o instanceof X?o:K(o)?new X(o[0],o[1]):o==null?o:typeof o=="object"&&"x"in o&&"y"in o?new X(o.x,o.y):new X(o,h,v)}function ne(o,h){if(o)for(var v=h?[o,h]:o,A=0,k=v.length;A<k;A++)this.extend(v[A])}ne.prototype={extend:function(o){var h,v;if(!o)return this;if(o instanceof X||typeof o[0]=="number"||"x"in o)h=v=H(o);else if(o=le(o),h=o.min,v=o.max,!h||!v)return this;return!this.min&&!this.max?(this.min=h.clone(),this.max=v.clone()):(this.min.x=Math.min(h.x,this.min.x),this.max.x=Math.max(v.x,this.max.x),this.min.y=Math.min(h.y,this.min.y),this.max.y=Math.max(v.y,this.max.y)),this},getCenter:function(o){return H((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return H(this.min.x,this.max.y)},getTopRight:function(){return H(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var h,v;return typeof o[0]=="number"||o instanceof X?o=H(o):o=le(o),o instanceof ne?(h=o.min,v=o.max):h=v=o,h.x>=this.min.x&&v.x<=this.max.x&&h.y>=this.min.y&&v.y<=this.max.y},intersects:function(o){o=le(o);var h=this.min,v=this.max,A=o.min,k=o.max,G=k.x>=h.x&&A.x<=v.x,ie=k.y>=h.y&&A.y<=v.y;return G&&ie},overlaps:function(o){o=le(o);var h=this.min,v=this.max,A=o.min,k=o.max,G=k.x>h.x&&A.x<v.x,ie=k.y>h.y&&A.y<v.y;return G&&ie},isValid:function(){return!!(this.min&&this.max)},pad:function(o){var h=this.min,v=this.max,A=Math.abs(h.x-v.x)*o,k=Math.abs(h.y-v.y)*o;return le(H(h.x-A,h.y-k),H(v.x+A,v.y+k))},equals:function(o){return o?(o=le(o),this.min.equals(o.getTopLeft())&&this.max.equals(o.getBottomRight())):!1}};function le(o,h){return!o||o instanceof ne?o:new ne(o,h)}function se(o,h){if(o)for(var v=h?[o,h]:o,A=0,k=v.length;A<k;A++)this.extend(v[A])}se.prototype={extend:function(o){var h=this._southWest,v=this._northEast,A,k;if(o instanceof ue)A=o,k=o;else if(o instanceof se){if(A=o._southWest,k=o._northEast,!A||!k)return this}else return o?this.extend(ye(o)||he(o)):this;return!h&&!v?(this._southWest=new ue(A.lat,A.lng),this._northEast=new ue(k.lat,k.lng)):(h.lat=Math.min(A.lat,h.lat),h.lng=Math.min(A.lng,h.lng),v.lat=Math.max(k.lat,v.lat),v.lng=Math.max(k.lng,v.lng)),this},pad:function(o){var h=this._southWest,v=this._northEast,A=Math.abs(h.lat-v.lat)*o,k=Math.abs(h.lng-v.lng)*o;return new se(new ue(h.lat-A,h.lng-k),new ue(v.lat+A,v.lng+k))},getCenter:function(){return new ue((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ue(this.getNorth(),this.getWest())},getSouthEast:function(){return new ue(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){typeof o[0]=="number"||o instanceof ue||"lat"in o?o=ye(o):o=he(o);var h=this._southWest,v=this._northEast,A,k;return o instanceof se?(A=o.getSouthWest(),k=o.getNorthEast()):A=k=o,A.lat>=h.lat&&k.lat<=v.lat&&A.lng>=h.lng&&k.lng<=v.lng},intersects:function(o){o=he(o);var h=this._southWest,v=this._northEast,A=o.getSouthWest(),k=o.getNorthEast(),G=k.lat>=h.lat&&A.lat<=v.lat,ie=k.lng>=h.lng&&A.lng<=v.lng;return G&&ie},overlaps:function(o){o=he(o);var h=this._southWest,v=this._northEast,A=o.getSouthWest(),k=o.getNorthEast(),G=k.lat>h.lat&&A.lat<v.lat,ie=k.lng>h.lng&&A.lng<v.lng;return G&&ie},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(o,h){return o?(o=he(o),this._southWest.equals(o.getSouthWest(),h)&&this._northEast.equals(o.getNorthEast(),h)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function he(o,h){return o instanceof se?o:new se(o,h)}function ue(o,h,v){if(isNaN(o)||isNaN(h))throw new Error("Invalid LatLng object: ("+o+", "+h+")");this.lat=+o,this.lng=+h,v!==void 0&&(this.alt=+v)}ue.prototype={equals:function(o,h){if(!o)return!1;o=ye(o);var v=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return v<=(h===void 0?1e-9:h)},toString:function(o){return"LatLng("+b(this.lat,o)+", "+b(this.lng,o)+")"},distanceTo:function(o){return ke.distance(this,ye(o))},wrap:function(){return ke.wrapLatLng(this)},toBounds:function(o){var h=180*o/40075017,v=h/Math.cos(Math.PI/180*this.lat);return he([this.lat-h,this.lng-v],[this.lat+h,this.lng+v])},clone:function(){return new ue(this.lat,this.lng,this.alt)}};function ye(o,h,v){return o instanceof ue?o:K(o)&&typeof o[0]!="object"?o.length===3?new ue(o[0],o[1],o[2]):o.length===2?new ue(o[0],o[1]):null:o==null?o:typeof o=="object"&&"lat"in o?new ue(o.lat,"lng"in o?o.lng:o.lon,o.alt):h===void 0?null:new ue(o,h,v)}var Fe={latLngToPoint:function(o,h){var v=this.projection.project(o),A=this.scale(h);return this.transformation._transform(v,A)},pointToLatLng:function(o,h){var v=this.scale(h),A=this.transformation.untransform(o,v);return this.projection.unproject(A)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var h=this.projection.bounds,v=this.scale(o),A=this.transformation.transform(h.min,v),k=this.transformation.transform(h.max,v);return new ne(A,k)},infinite:!1,wrapLatLng:function(o){var h=this.wrapLng?_(o.lng,this.wrapLng,!0):o.lng,v=this.wrapLat?_(o.lat,this.wrapLat,!0):o.lat,A=o.alt;return new ue(v,h,A)},wrapLatLngBounds:function(o){var h=o.getCenter(),v=this.wrapLatLng(h),A=h.lat-v.lat,k=h.lng-v.lng;if(A===0&&k===0)return o;var G=o.getSouthWest(),ie=o.getNorthEast(),pe=new ue(G.lat-A,G.lng-k),Ee=new ue(ie.lat-A,ie.lng-k);return new se(pe,Ee)}},ke=s({},Fe,{wrapLng:[-180,180],R:6371e3,distance:function(o,h){var v=Math.PI/180,A=o.lat*v,k=h.lat*v,G=Math.sin((h.lat-o.lat)*v/2),ie=Math.sin((h.lng-o.lng)*v/2),pe=G*G+Math.cos(A)*Math.cos(k)*ie*ie,Ee=2*Math.atan2(Math.sqrt(pe),Math.sqrt(1-pe));return this.R*Ee}}),De=6378137,qe={R:De,MAX_LATITUDE:85.0511287798,project:function(o){var h=Math.PI/180,v=this.MAX_LATITUDE,A=Math.max(Math.min(v,o.lat),-v),k=Math.sin(A*h);return new X(this.R*o.lng*h,this.R*Math.log((1+k)/(1-k))/2)},unproject:function(o){var h=180/Math.PI;return new ue((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*h,o.x*h/this.R)},bounds:function(){var o=De*Math.PI;return new ne([-o,-o],[o,o])}()};function je(o,h,v,A){if(K(o)){this._a=o[0],this._b=o[1],this._c=o[2],this._d=o[3];return}this._a=o,this._b=h,this._c=v,this._d=A}je.prototype={transform:function(o,h){return this._transform(o.clone(),h)},_transform:function(o,h){return h=h||1,o.x=h*(this._a*o.x+this._b),o.y=h*(this._c*o.y+this._d),o},untransform:function(o,h){return h=h||1,new X((o.x/h-this._b)/this._a,(o.y/h-this._d)/this._c)}};function Ze(o,h,v,A){return new je(o,h,v,A)}var Et=s({},ke,{code:"EPSG:3857",projection:qe,transformation:function(){var o=.5/(Math.PI*qe.R);return Ze(o,.5,-o,.5)}()}),be=s({},Et,{code:"EPSG:900913"});function Ne(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function Oe(o,h){var v="",A,k,G,ie,pe,Ee;for(A=0,G=o.length;A<G;A++){for(pe=o[A],k=0,ie=pe.length;k<ie;k++)Ee=pe[k],v+=(k?"L":"M")+Ee.x+" "+Ee.y;v+=h?Ke.svg?"z":"x":""}return v||"M0 0"}var Le=document.documentElement.style,Me="ActiveXObject"in window,Qe=Me&&!document.addEventListener,it="msLaunchUri"in navigator&&!("documentMode"in document),_t=bi("webkit"),Vt=bi("android"),kt=bi("android 2")||bi("android 3"),rt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ht=Vt&&bi("Google")&&rt<537&&!("AudioNode"in window),Je=!!window.opera,tt=!it&&bi("chrome"),mt=bi("gecko")&&!_t&&!Je&&!Me,qt=!tt&&bi("safari"),on=bi("phantom"),mn="OTransition"in Le,Ut=navigator.platform.indexOf("Win")===0,ln=Me&&"transition"in Le,gn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!kt,Sn="MozPerspective"in Le,Lr=!window.L_DISABLE_3D&&(ln||gn||Sn)&&!mn&&!on,Li=typeof orientation<"u"||bi("mobile"),is=Li&&_t,Is=Li&&gn,Ki=!window.PointerEvent&&window.MSPointerEvent,$i=!!(window.PointerEvent||Ki),Mn="ontouchstart"in window||!!window.TouchEvent,yi=!window.L_NO_TOUCH&&(Mn||$i),Kn=Li&&Je,cr=Li&&mt,hr=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ei=function(){var o=!1;try{var h=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("testPassiveEventSupport",E,h),window.removeEventListener("testPassiveEventSupport",E,h)}catch{}return o}(),Jn=function(){return!!document.createElement("canvas").getContext}(),Ha=!!(document.createElementNS&&Ne("svg").createSVGRect),un=!!Ha&&function(){var o=document.createElement("div");return o.innerHTML="<svg/>",(o.firstChild&&o.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Dn=!Ha&&function(){try{var o=document.createElement("div");o.innerHTML='<v:shape adj="1"/>';var h=o.firstChild;return h.style.behavior="url(#default#VML)",h&&typeof h.adj=="object"}catch{return!1}}(),xn=navigator.platform.indexOf("Mac")===0,Yi=navigator.platform.indexOf("Linux")===0;function bi(o){return navigator.userAgent.toLowerCase().indexOf(o)>=0}var Ke={ie:Me,ielt9:Qe,edge:it,webkit:_t,android:Vt,android23:kt,androidStock:Ht,opera:Je,chrome:tt,gecko:mt,safari:qt,phantom:on,opera12:mn,win:Ut,ie3d:ln,webkit3d:gn,gecko3d:Sn,any3d:Lr,mobile:Li,mobileWebkit:is,mobileWebkit3d:Is,msPointer:Ki,pointer:$i,touch:yi,touchNative:Mn,mobileOpera:Kn,mobileGecko:cr,retina:hr,passiveEvents:Ei,canvas:Jn,svg:Ha,vml:Dn,inlineSvg:un,mac:xn,linux:Yi},rs=Ke.msPointer?"MSPointerDown":"pointerdown",al=Ke.msPointer?"MSPointerMove":"pointermove",ks=Ke.msPointer?"MSPointerUp":"pointerup",ss=Ke.msPointer?"MSPointerCancel":"pointercancel",dr={touchstart:rs,touchmove:al,touchend:ks,touchcancel:ss},fr={touchstart:aa,touchmove:sa,touchend:sa,touchcancel:sa},ui={},ei=!1;function bn(o,h,v){return h==="touchstart"&&nu(),fr[h]?(v=fr[h].bind(this,v),o.addEventListener(dr[h],v,!1),v):(console.warn("wrong event specified:",h),E)}function ol(o,h,v){if(!dr[h]){console.warn("wrong event specified:",h);return}o.removeEventListener(dr[h],v,!1)}function qa(o){ui[o.pointerId]=o}function pr(o){ui[o.pointerId]&&(ui[o.pointerId]=o)}function jr(o){delete ui[o.pointerId]}function nu(){ei||(document.addEventListener(rs,qa,!0),document.addEventListener(al,pr,!0),document.addEventListener(ks,jr,!0),document.addEventListener(ss,jr,!0),ei=!0)}function sa(o,h){if(h.pointerType!==(h.MSPOINTER_TYPE_MOUSE||"mouse")){h.touches=[];for(var v in ui)h.touches.push(ui[v]);h.changedTouches=[h],o(h)}}function aa(o,h){h.MSPOINTER_TYPE_TOUCH&&h.pointerType===h.MSPOINTER_TYPE_TOUCH&&en(h),sa(o,h)}function iu(o){var h={},v,A;for(A in o)v=o[A],h[A]=v&&v.bind?v.bind(o):v;return o=h,h.type="dblclick",h.detail=2,h.isTrusted=!1,h._simulated=!0,h}var Ns=200;function Vr(o,h){o.addEventListener("dblclick",h);var v=0,A;function k(G){if(G.detail!==1){A=G.detail;return}if(!(G.pointerType==="mouse"||G.sourceCapabilities&&!G.sourceCapabilities.firesTouchEvents)){var ie=Ka(G);if(!(ie.some(function(Ee){return Ee instanceof HTMLLabelElement&&Ee.attributes.for})&&!ie.some(function(Ee){return Ee instanceof HTMLInputElement||Ee instanceof HTMLSelectElement}))){var pe=Date.now();pe-v<=Ns?(A++,A===2&&h(iu(G))):A=1,v=pe}}}return o.addEventListener("click",k),{dblclick:h,simDblclick:k}}function $n(o,h){o.removeEventListener("dblclick",h.dblclick),o.removeEventListener("click",h.simDblclick)}var as=mr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Os=mr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ur=Os==="webkitTransition"||Os==="OTransition"?Os+"End":"transitionend";function oa(o){return typeof o=="string"?document.getElementById(o):o}function Br(o,h){var v=o.style[h]||o.currentStyle&&o.currentStyle[h];if((!v||v==="auto")&&document.defaultView){var A=document.defaultView.getComputedStyle(o,null);v=A?A[h]:null}return v==="auto"?null:v}function At(o,h,v){var A=document.createElement(o);return A.className=h||"",v&&v.appendChild(A),A}function Gt(o){var h=o.parentNode;h&&h.removeChild(o)}function Bn(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function Fr(o){var h=o.parentNode;h&&h.lastChild!==o&&h.appendChild(o)}function Ps(o){var h=o.parentNode;h&&h.firstChild!==o&&h.insertBefore(o,h.firstChild)}function Ms(o,h){if(o.classList!==void 0)return o.classList.contains(h);var v=_n(o);return v.length>0&&new RegExp("(^|\\s)"+h+"(\\s|$)").test(v)}function ht(o,h){if(o.classList!==void 0)for(var v=I(h),A=0,k=v.length;A<k;A++)o.classList.add(v[A]);else if(!Ms(o,h)){var G=_n(o);ll(o,(G?G+" ":"")+h)}}function Yt(o,h){o.classList!==void 0?o.classList.remove(h):ll(o,C((" "+_n(o)+" ").replace(" "+h+" "," ")))}function ll(o,h){o.className.baseVal===void 0?o.className=h:o.className.baseVal=h}function _n(o){return o.correspondingElement&&(o=o.correspondingElement),o.className.baseVal===void 0?o.className:o.className.baseVal}function cn(o,h){"opacity"in o.style?o.style.opacity=h:"filter"in o.style&&la(o,h)}function la(o,h){var v=!1,A="DXImageTransform.Microsoft.Alpha";try{v=o.filters.item(A)}catch{if(h===1)return}h=Math.round(h*100),v?(v.Enabled=h!==100,v.Opacity=h):o.style.filter+=" progid:"+A+"(opacity="+h+")"}function mr(o){for(var h=document.documentElement.style,v=0;v<o.length;v++)if(o[v]in h)return o[v];return!1}function ci(o,h,v){var A=h||new X(0,0);o.style[as]=(Ke.ie3d?"translate("+A.x+"px,"+A.y+"px)":"translate3d("+A.x+"px,"+A.y+"px,0)")+(v?" scale("+v+")":"")}function at(o,h){o._leaflet_pos=h,Ke.any3d?ci(o,h):(o.style.left=h.x+"px",o.style.top=h.y+"px")}function ji(o){return o._leaflet_pos||new X(0,0)}var ti,gr,Ga;if("onselectstart"in document)ti=function(){et(window,"selectstart",en)},gr=function(){Dt(window,"selectstart",en)};else{var os=mr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ti=function(){if(os){var o=document.documentElement.style;Ga=o[os],o[os]="none"}},gr=function(){os&&(document.documentElement.style[os]=Ga,Ga=void 0)}}function ua(){et(window,"dragstart",en)}function ul(){Dt(window,"dragstart",en)}var Za,Ds;function _r(o){for(;o.tabIndex===-1;)o=o.parentNode;o.style&&(hi(),Za=o,Ds=o.style.outlineStyle,o.style.outlineStyle="none",et(window,"keydown",hi))}function hi(){Za&&(Za.style.outlineStyle=Ds,Za=void 0,Ds=void 0,Dt(window,"keydown",hi))}function zr(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function vr(o){var h=o.getBoundingClientRect();return{x:h.width/o.offsetWidth||1,y:h.height/o.offsetHeight||1,boundingClientRect:h}}var cl={__proto__:null,TRANSFORM:as,TRANSITION:Os,TRANSITION_END:Ur,get:oa,getStyle:Br,create:At,remove:Gt,empty:Bn,toFront:Fr,toBack:Ps,hasClass:Ms,addClass:ht,removeClass:Yt,setClass:ll,getClass:_n,setOpacity:cn,testProp:mr,setTransform:ci,setPosition:at,getPosition:ji,get disableTextSelection(){return ti},get enableTextSelection(){return gr},disableImageDrag:ua,enableImageDrag:ul,preventOutline:_r,restoreOutline:hi,getSizedParentNode:zr,getScale:vr};function et(o,h,v,A){if(h&&typeof h=="object")for(var k in h)ls(o,k,h[k],v);else{h=I(h);for(var G=0,ie=h.length;G<ie;G++)ls(o,h[G],v,A)}return this}var Vi="_leaflet_events";function Dt(o,h,v,A){if(arguments.length===1)Qi(o),delete o[Vi];else if(h&&typeof h=="object")for(var k in h)Wi(o,k,h[k],v);else if(h=I(h),arguments.length===2)Qi(o,function(pe){return J(h,pe)!==-1});else for(var G=0,ie=h.length;G<ie;G++)Wi(o,h[G],v,A);return this}function Qi(o,h){for(var v in o[Vi]){var A=v.split(/\d/)[0];(!h||h(A))&&Wi(o,A,null,null,v)}}var wi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ls(o,h,v,A){var k=h+p(v)+(A?"_"+p(A):"");if(o[Vi]&&o[Vi][k])return this;var G=function(pe){return v.call(A||o,pe||window.event)},ie=G;!Ke.touchNative&&Ke.pointer&&h.indexOf("touch")===0?G=bn(o,h,G):Ke.touch&&h==="dblclick"?G=Vr(o,G):"addEventListener"in o?h==="touchstart"||h==="touchmove"||h==="wheel"||h==="mousewheel"?o.addEventListener(wi[h]||h,G,Ke.passiveEvents?{passive:!1}:!1):h==="mouseenter"||h==="mouseleave"?(G=function(pe){pe=pe||window.event,cs(o,pe)&&ie(pe)},o.addEventListener(wi[h],G,!1)):o.addEventListener(h,ie,!1):o.attachEvent("on"+h,G),o[Vi]=o[Vi]||{},o[Vi][k]=G}function Wi(o,h,v,A,k){k=k||h+p(v)+(A?"_"+p(A):"");var G=o[Vi]&&o[Vi][k];if(!G)return this;!Ke.touchNative&&Ke.pointer&&h.indexOf("touch")===0?ol(o,h,G):Ke.touch&&h==="dblclick"?$n(o,G):"removeEventListener"in o?o.removeEventListener(wi[h]||h,G,!1):o.detachEvent("on"+h,G),o[Vi][k]=null}function Ti(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,this}function yr(o){return ls(o,"wheel",Ti),this}function us(o){return et(o,"mousedown touchstart dblclick contextmenu",Ti),o._leaflet_disable_click=!0,this}function en(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function ni(o){return en(o),Ti(o),this}function Ka(o){if(o.composedPath)return o.composedPath();for(var h=[],v=o.target;v;)h.push(v),v=v.parentNode;return h}function Ln(o,h){if(!h)return new X(o.clientX,o.clientY);var v=vr(h),A=v.boundingClientRect;return new X((o.clientX-A.left)/v.x-h.clientLeft,(o.clientY-A.top)/v.y-h.clientTop)}var Bt=Ke.linux&&Ke.chrome?window.devicePixelRatio:Ke.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ca(o){return Ke.edge?o.wheelDeltaY/2:o.deltaY&&o.deltaMode===0?-o.deltaY/Bt:o.deltaY&&o.deltaMode===1?-o.deltaY*20:o.deltaY&&o.deltaMode===2?-o.deltaY*60:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&Math.abs(o.detail)<32765?-o.detail*20:o.detail?o.detail/-32765*60:0}function cs(o,h){var v=h.relatedTarget;if(!v)return!0;try{for(;v&&v!==o;)v=v.parentNode}catch{return!1}return v!==o}var ru={__proto__:null,on:et,off:Dt,stopPropagation:Ti,disableScrollPropagation:yr,disableClickPropagation:us,preventDefault:en,stop:ni,getPropagationPath:Ka,getMousePosition:Ln,getWheelDelta:ca,isExternalTarget:cs,addListener:et,removeListener:Dt},ha=F.extend({run:function(o,h,v,A){this.stop(),this._el=o,this._inProgress=!0,this._duration=v||.25,this._easeOutPower=1/Math.max(A||.5,.2),this._startPos=ji(o),this._offset=h.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=j(this._animate,this),this._step()},_step:function(o){var h=+new Date-this._startTime,v=this._duration*1e3;h<v?this._runFrame(this._easeOut(h/v),o):(this._runFrame(1),this._complete())},_runFrame:function(o,h){var v=this._startPos.add(this._offset.multiplyBy(o));h&&v._round(),at(this._el,v),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),vt=F.extend({options:{crs:Et,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,h){h=O(this,h),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(o),this._initLayout(),this._onResize=c(this._onResize,this),this._initEvents(),h.maxBounds&&this.setMaxBounds(h.maxBounds),h.zoom!==void 0&&(this._zoom=this._limitZoom(h.zoom)),h.center&&h.zoom!==void 0&&this.setView(ye(h.center),h.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Os&&Ke.any3d&&!Ke.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),et(this._proxy,Ur,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,h,v){if(h=h===void 0?this._zoom:this._limitZoom(h),o=this._limitCenter(ye(o),h,this.options.maxBounds),v=v||{},this._stop(),this._loaded&&!v.reset&&v!==!0){v.animate!==void 0&&(v.zoom=s({animate:v.animate},v.zoom),v.pan=s({animate:v.animate,duration:v.duration},v.pan));var A=this._zoom!==h?this._tryAnimatedZoom&&this._tryAnimatedZoom(o,h,v.zoom):this._tryAnimatedPan(o,v.pan);if(A)return clearTimeout(this._sizeTimer),this}return this._resetView(o,h,v.pan&&v.pan.noMoveStart),this},setZoom:function(o,h){return this._loaded?this.setView(this.getCenter(),o,{zoom:h}):(this._zoom=o,this)},zoomIn:function(o,h){return o=o||(Ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,h)},zoomOut:function(o,h){return o=o||(Ke.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,h)},setZoomAround:function(o,h,v){var A=this.getZoomScale(h),k=this.getSize().divideBy(2),G=o instanceof X?o:this.latLngToContainerPoint(o),ie=G.subtract(k).multiplyBy(1-1/A),pe=this.containerPointToLatLng(k.add(ie));return this.setView(pe,h,{zoom:v})},_getBoundsCenterZoom:function(o,h){h=h||{},o=o.getBounds?o.getBounds():he(o);var v=H(h.paddingTopLeft||h.padding||[0,0]),A=H(h.paddingBottomRight||h.padding||[0,0]),k=this.getBoundsZoom(o,!1,v.add(A));if(k=typeof h.maxZoom=="number"?Math.min(h.maxZoom,k):k,k===1/0)return{center:o.getCenter(),zoom:k};var G=A.subtract(v).divideBy(2),ie=this.project(o.getSouthWest(),k),pe=this.project(o.getNorthEast(),k),Ee=this.unproject(ie.add(pe).divideBy(2).add(G),k);return{center:Ee,zoom:k}},fitBounds:function(o,h){if(o=he(o),!o.isValid())throw new Error("Bounds are not valid.");var v=this._getBoundsCenterZoom(o,h);return this.setView(v.center,v.zoom,h)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,h){return this.setView(o,this._zoom,{pan:h})},panBy:function(o,h){if(o=H(o).round(),h=h||{},!o.x&&!o.y)return this.fire("moveend");if(h.animate!==!0&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),h.noMoveStart||this.fire("movestart"),h.animate!==!1){ht(this._mapPane,"leaflet-pan-anim");var v=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,v,h.duration||.25,h.easeLinearity)}else this._rawPanBy(o),this.fire("move").fire("moveend");return this},flyTo:function(o,h,v){if(v=v||{},v.animate===!1||!Ke.any3d)return this.setView(o,h,v);this._stop();var A=this.project(this.getCenter()),k=this.project(o),G=this.getSize(),ie=this._zoom;o=ye(o),h=h===void 0?ie:h;var pe=Math.max(G.x,G.y),Ee=pe*this.getZoomScale(ie,h),Ie=k.distanceTo(A)||1,Ue=1.42,ze=Ue*Ue;function Ge(vn){var Yr=vn?-1:1,gs=vn?Ee:pe,Fs=Ee*Ee-pe*pe+Yr*ze*ze*Ie*Ie,_s=2*gs*ze*Ie,Sl=Fs/_s,_u=Math.sqrt(Sl*Sl+1)-Sl,xl=_u<1e-9?-18:Math.log(_u);return xl}function ct(vn){return(Math.exp(vn)-Math.exp(-vn))/2}function dn(vn){return(Math.exp(vn)+Math.exp(-vn))/2}function wn(vn){return ct(vn)/dn(vn)}var ri=Ge(0);function Xi(vn){return pe*(dn(ri)/dn(ri+Ue*vn))}function vd(vn){return pe*(dn(ri)*wn(ri+Ue*vn)-ct(ri))/ze}function yd(vn){return 1-Math.pow(1-vn,1.5)}var Al=Date.now(),co=(Ge(1)-ri)/Ue,Ed=v.duration?1e3*v.duration:1e3*co*.8;function ho(){var vn=(Date.now()-Al)/Ed,Yr=yd(vn)*co;vn<=1?(this._flyToFrame=j(ho,this),this._move(this.unproject(A.add(k.subtract(A).multiplyBy(vd(Yr)/Ie)),ie),this.getScaleZoom(pe/Xi(Yr),ie),{flyTo:!0})):this._move(o,h)._moveEnd(!0)}return this._moveStart(!0,v.noMoveStart),ho.call(this),this},flyToBounds:function(o,h){var v=this._getBoundsCenterZoom(o,h);return this.flyTo(v.center,v.zoom,h)},setMaxBounds:function(o){return o=he(o),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),o.isValid()?(this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(o){var h=this.options.minZoom;return this.options.minZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var h=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&h!==o&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,h){this._enforcingBounds=!0;var v=this.getCenter(),A=this._limitCenter(v,this._zoom,he(o));return v.equals(A)||this.panTo(A,h),this._enforcingBounds=!1,this},panInside:function(o,h){h=h||{};var v=H(h.paddingTopLeft||h.padding||[0,0]),A=H(h.paddingBottomRight||h.padding||[0,0]),k=this.project(this.getCenter()),G=this.project(o),ie=this.getPixelBounds(),pe=le([ie.min.add(v),ie.max.subtract(A)]),Ee=pe.getSize();if(!pe.contains(G)){this._enforcingBounds=!0;var Ie=G.subtract(pe.getCenter()),Ue=pe.extend(G).getSize().subtract(Ee);k.x+=Ie.x<0?-Ue.x:Ue.x,k.y+=Ie.y<0?-Ue.y:Ue.y,this.panTo(this.unproject(k),h),this._enforcingBounds=!1}return this},invalidateSize:function(o){if(!this._loaded)return this;o=s({animate:!1,pan:!0},o===!0?{animate:!0}:o);var h=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var v=this.getSize(),A=h.divideBy(2).round(),k=v.divideBy(2).round(),G=A.subtract(k);return!G.x&&!G.y?this:(o.animate&&o.pan?this.panBy(G):(o.pan&&this._rawPanBy(G),this.fire("move"),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(c(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:h,newSize:v}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(o){if(o=this._locateOptions=s({timeout:1e4,watch:!1},o),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var h=c(this._handleGeolocationResponse,this),v=c(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(h,v,o):navigator.geolocation.getCurrentPosition(h,v,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){if(this._container._leaflet_id){var h=o.code,v=o.message||(h===1?"permission denied":h===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:h,message:"Geolocation error: "+v+"."})}},_handleGeolocationResponse:function(o){if(this._container._leaflet_id){var h=o.coords.latitude,v=o.coords.longitude,A=new ue(h,v),k=A.toBounds(o.coords.accuracy*2),G=this._locateOptions;if(G.setView){var ie=this.getBoundsZoom(k);this.setView(A,G.maxZoom?Math.min(ie,G.maxZoom):ie)}var pe={latlng:A,bounds:k,timestamp:o.timestamp};for(var Ee in o.coords)typeof o.coords[Ee]=="number"&&(pe[Ee]=o.coords[Ee]);this.fire("locationfound",pe)}},addHandler:function(o,h){if(!h)return this;var v=this[o]=new h(this);return this._handlers.push(v),this.options[o]&&v.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Gt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var o;for(o in this._layers)this._layers[o].remove();for(o in this._panes)Gt(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,h){var v="leaflet-pane"+(o?" leaflet-"+o.replace("Pane","")+"-pane":""),A=At("div",v,h||this._mapPane);return o&&(this._panes[o]=A),A},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),h=this.unproject(o.getBottomLeft()),v=this.unproject(o.getTopRight());return new se(h,v)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,h,v){o=he(o),v=H(v||[0,0]);var A=this.getZoom()||0,k=this.getMinZoom(),G=this.getMaxZoom(),ie=o.getNorthWest(),pe=o.getSouthEast(),Ee=this.getSize().subtract(v),Ie=le(this.project(pe,A),this.project(ie,A)).getSize(),Ue=Ke.any3d?this.options.zoomSnap:1,ze=Ee.x/Ie.x,Ge=Ee.y/Ie.y,ct=h?Math.max(ze,Ge):Math.min(ze,Ge);return A=this.getScaleZoom(ct,A),Ue&&(A=Math.round(A/(Ue/100))*(Ue/100),A=h?Math.ceil(A/Ue)*Ue:Math.floor(A/Ue)*Ue),Math.max(k,Math.min(G,A))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,h){var v=this._getTopLeftPoint(o,h);return new ne(v,v.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return typeof o=="string"?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,h){var v=this.options.crs;return h=h===void 0?this._zoom:h,v.scale(o)/v.scale(h)},getScaleZoom:function(o,h){var v=this.options.crs;h=h===void 0?this._zoom:h;var A=v.zoom(o*v.scale(h));return isNaN(A)?1/0:A},project:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.latLngToPoint(ye(o),h)},unproject:function(o,h){return h=h===void 0?this._zoom:h,this.options.crs.pointToLatLng(H(o),h)},layerPointToLatLng:function(o){var h=H(o).add(this.getPixelOrigin());return this.unproject(h)},latLngToLayerPoint:function(o){var h=this.project(ye(o))._round();return h._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(ye(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(he(o))},distance:function(o,h){return this.options.crs.distance(ye(o),ye(h))},containerPointToLayerPoint:function(o){return H(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return H(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var h=this.containerPointToLayerPoint(H(o));return this.layerPointToLatLng(h)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ye(o)))},mouseEventToContainerPoint:function(o){return Ln(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var h=this._container=oa(o);if(h){if(h._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");et(h,"scroll",this._onScroll,this),this._containerId=p(h)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ke.any3d,ht(o,"leaflet-container"+(Ke.touch?" leaflet-touch":"")+(Ke.retina?" leaflet-retina":"")+(Ke.ielt9?" leaflet-oldie":"")+(Ke.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var h=Br(o,"position");h!=="absolute"&&h!=="relative"&&h!=="fixed"&&h!=="sticky"&&(o.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),at(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ht(o.markerPane,"leaflet-zoom-hide"),ht(o.shadowPane,"leaflet-zoom-hide"))},_resetView:function(o,h,v){at(this._mapPane,new X(0,0));var A=!this._loaded;this._loaded=!0,h=this._limitZoom(h),this.fire("viewprereset");var k=this._zoom!==h;this._moveStart(k,v)._move(o,h)._moveEnd(k),this.fire("viewreset"),A&&this.fire("load")},_moveStart:function(o,h){return o&&this.fire("zoomstart"),h||this.fire("movestart"),this},_move:function(o,h,v,A){h===void 0&&(h=this._zoom);var k=this._zoom!==h;return this._zoom=h,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),A?v&&v.pinch&&this.fire("zoom",v):((k||v&&v.pinch)&&this.fire("zoom",v),this.fire("move",v)),this},_moveEnd:function(o){return o&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){at(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(o){this._targets={},this._targets[p(this._container)]=this;var h=o?Dt:et;h(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&h(window,"resize",this._onResize,this),Ke.any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=j(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,h){for(var v=[],A,k=h==="mouseout"||h==="mouseover",G=o.target||o.srcElement,ie=!1;G;){if(A=this._targets[p(G)],A&&(h==="click"||h==="preclick")&&this._draggableMoved(A)){ie=!0;break}if(A&&A.listens(h,!0)&&(k&&!cs(G,o)||(v.push(A),k))||G===this._container)break;G=G.parentNode}return!v.length&&!ie&&!k&&this.listens(h,!0)&&(v=[this]),v},_isClickDisabled:function(o){for(;o&&o!==this._container;){if(o._leaflet_disable_click)return!0;o=o.parentNode}},_handleDOMEvent:function(o){var h=o.target||o.srcElement;if(!(!this._loaded||h._leaflet_disable_events||o.type==="click"&&this._isClickDisabled(h))){var v=o.type;v==="mousedown"&&_r(h),this._fireDOMEvent(o,v)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(o,h,v){if(o.type==="click"){var A=s({},o);A.type="preclick",this._fireDOMEvent(A,A.type,v)}var k=this._findEventTargets(o,h);if(v){for(var G=[],ie=0;ie<v.length;ie++)v[ie].listens(h,!0)&&G.push(v[ie]);k=G.concat(k)}if(k.length){h==="contextmenu"&&en(o);var pe=k[0],Ee={originalEvent:o};if(o.type!=="keypress"&&o.type!=="keydown"&&o.type!=="keyup"){var Ie=pe.getLatLng&&(!pe._radius||pe._radius<=10);Ee.containerPoint=Ie?this.latLngToContainerPoint(pe.getLatLng()):this.mouseEventToContainerPoint(o),Ee.layerPoint=this.containerPointToLayerPoint(Ee.containerPoint),Ee.latlng=Ie?pe.getLatLng():this.layerPointToLatLng(Ee.layerPoint)}for(ie=0;ie<k.length;ie++)if(k[ie].fire(h,Ee,!0),Ee.originalEvent._stopped||k[ie].options.bubblingMouseEvents===!1&&J(this._mouseEvents,h)!==-1)return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,h=this._handlers.length;o<h;o++)this._handlers[o].disable()},whenReady:function(o,h){return this._loaded?o.call(h||this,{target:this}):this.on("load",o,h),this},_getMapPanePos:function(){return ji(this._mapPane)||new X(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,h){var v=o&&h!==void 0?this._getNewPixelOrigin(o,h):this.getPixelOrigin();return v.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,h){var v=this.getSize()._divideBy(2);return this.project(o,h)._subtract(v)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,h,v){var A=this._getNewPixelOrigin(v,h);return this.project(o,h)._subtract(A)},_latLngBoundsToNewLayerBounds:function(o,h,v){var A=this._getNewPixelOrigin(v,h);return le([this.project(o.getSouthWest(),h)._subtract(A),this.project(o.getNorthWest(),h)._subtract(A),this.project(o.getSouthEast(),h)._subtract(A),this.project(o.getNorthEast(),h)._subtract(A)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,h,v){if(!v)return o;var A=this.project(o,h),k=this.getSize().divideBy(2),G=new ne(A.subtract(k),A.add(k)),ie=this._getBoundsOffset(G,v,h);return Math.abs(ie.x)<=1&&Math.abs(ie.y)<=1?o:this.unproject(A.add(ie),h)},_limitOffset:function(o,h){if(!h)return o;var v=this.getPixelBounds(),A=new ne(v.min.add(o),v.max.add(o));return o.add(this._getBoundsOffset(A,h))},_getBoundsOffset:function(o,h,v){var A=le(this.project(h.getNorthEast(),v),this.project(h.getSouthWest(),v)),k=A.min.subtract(o.min),G=A.max.subtract(o.max),ie=this._rebound(k.x,-G.x),pe=this._rebound(k.y,-G.y);return new X(ie,pe)},_rebound:function(o,h){return o+h>0?Math.round(o-h)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(h))},_limitZoom:function(o){var h=this.getMinZoom(),v=this.getMaxZoom(),A=Ke.any3d?this.options.zoomSnap:1;return A&&(o=Math.round(o/A)*A),Math.max(h,Math.min(v,o))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Yt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(o,h){var v=this._getCenterOffset(o)._trunc();return(h&&h.animate)!==!0&&!this.getSize().contains(v)?!1:(this.panBy(v,h),!0)},_createAnimProxy:function(){var o=this._proxy=At("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(o),this.on("zoomanim",function(h){var v=as,A=this._proxy.style[v];ci(this._proxy,this.project(h.center,h.zoom),this.getZoomScale(h.zoom,1)),A===this._proxy.style[v]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Gt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var o=this.getCenter(),h=this.getZoom();ci(this._proxy,this.project(o,h),this.getZoomScale(h,1))},_catchTransitionEnd:function(o){this._animatingZoom&&o.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(o,h,v){if(this._animatingZoom)return!0;if(v=v||{},!this._zoomAnimated||v.animate===!1||this._nothingToAnimate()||Math.abs(h-this._zoom)>this.options.zoomAnimationThreshold)return!1;var A=this.getZoomScale(h),k=this._getCenterOffset(o)._divideBy(1-1/A);return v.animate!==!0&&!this.getSize().contains(k)?!1:(j(function(){this._moveStart(!0,v.noMoveStart||!1)._animateZoom(o,h,!0)},this),!0)},_animateZoom:function(o,h,v,A){this._mapPane&&(v&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=h,ht(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:o,zoom:h,noUpdate:A}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(c(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Yt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Hr(o,h){return new vt(o,h)}var Yn=Q.extend({options:{position:"topright"},initialize:function(o){O(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var h=this._map;return h&&h.removeControl(this),this.options.position=o,h&&h.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var h=this._container=this.onAdd(o),v=this.getPosition(),A=o._controlCorners[v];return ht(h,"leaflet-control"),v.indexOf("bottom")!==-1?A.insertBefore(h,A.firstChild):A.appendChild(h),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Gt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&o.screenX>0&&o.screenY>0&&this._map.getContainer().focus()}}),ii=function(o){return new Yn(o)};vt.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){var o=this._controlCorners={},h="leaflet-",v=this._controlContainer=At("div",h+"control-container",this._container);function A(k,G){var ie=h+k+" "+h+G;o[k+G]=At("div",ie,v)}A("top","left"),A("top","right"),A("bottom","left"),A("bottom","right")},_clearControlPos:function(){for(var o in this._controlCorners)Gt(this._controlCorners[o]);Gt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var hl=Yn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,h,v,A){return v<A?-1:A<v?1:0}},initialize:function(o,h,v){O(this,v),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var A in o)this._addLayer(o[A],A);for(A in h)this._addLayer(h[A],A,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(o){return Yn.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(o,h){return this._addLayer(o,h),this._map?this._update():this},addOverlay:function(o,h){return this._addLayer(o,h,!0),this._map?this._update():this},removeLayer:function(o){o.off("add remove",this._onLayerChange,this);var h=this._getLayer(p(o));return h&&this._layers.splice(this._layers.indexOf(h),1),this._map?this._update():this},expand:function(){ht(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._section.clientHeight?(ht(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=o+"px"):Yt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Yt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var o="leaflet-control-layers",h=this._container=At("div",o),v=this.options.collapsed;h.setAttribute("aria-haspopup",!0),us(h),yr(h);var A=this._section=At("section",o+"-list");v&&(this._map.on("click",this.collapse,this),et(h,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var k=this._layersLink=At("a",o+"-toggle",h);k.href="#",k.title="Layers",k.setAttribute("role","button"),et(k,{keydown:function(G){G.keyCode===13&&this._expandSafely()},click:function(G){en(G),this._expandSafely()}},this),v||this.expand(),this._baseLayersList=At("div",o+"-base",A),this._separator=At("div",o+"-separator",A),this._overlaysList=At("div",o+"-overlays",A),h.appendChild(A)},_getLayer:function(o){for(var h=0;h<this._layers.length;h++)if(this._layers[h]&&p(this._layers[h].layer)===o)return this._layers[h]},_addLayer:function(o,h,v){this._map&&o.on("add remove",this._onLayerChange,this),this._layers.push({layer:o,name:h,overlay:v}),this.options.sortLayers&&this._layers.sort(c(function(A,k){return this.options.sortFunction(A.layer,k.layer,A.name,k.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Bn(this._baseLayersList),Bn(this._overlaysList),this._layerControlInputs=[];var o,h,v,A,k=0;for(v=0;v<this._layers.length;v++)A=this._layers[v],this._addItem(A),h=h||A.overlay,o=o||!A.overlay,k+=A.overlay?0:1;return this.options.hideSingleBase&&(o=o&&k>1,this._baseLayersList.style.display=o?"":"none"),this._separator.style.display=h&&o?"":"none",this},_onLayerChange:function(o){this._handlingClick||this._update();var h=this._getLayer(p(o.target)),v=h.overlay?o.type==="add"?"overlayadd":"overlayremove":o.type==="add"?"baselayerchange":null;v&&this._map.fire(v,h)},_createRadioElement:function(o,h){var v='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(h?' checked="checked"':"")+"/>",A=document.createElement("div");return A.innerHTML=v,A.firstChild},_addItem:function(o){var h=document.createElement("label"),v=this._map.hasLayer(o.layer),A;o.overlay?(A=document.createElement("input"),A.type="checkbox",A.className="leaflet-control-layers-selector",A.defaultChecked=v):A=this._createRadioElement("leaflet-base-layers_"+p(this),v),this._layerControlInputs.push(A),A.layerId=p(o.layer),et(A,"click",this._onInputClick,this);var k=document.createElement("span");k.innerHTML=" "+o.name;var G=document.createElement("span");h.appendChild(G),G.appendChild(A),G.appendChild(k);var ie=o.overlay?this._overlaysList:this._baseLayersList;return ie.appendChild(h),this._checkDisabledLayers(),h},_onInputClick:function(){if(!this._preventClick){var o=this._layerControlInputs,h,v,A=[],k=[];this._handlingClick=!0;for(var G=o.length-1;G>=0;G--)h=o[G],v=this._getLayer(h.layerId).layer,h.checked?A.push(v):h.checked||k.push(v);for(G=0;G<k.length;G++)this._map.hasLayer(k[G])&&this._map.removeLayer(k[G]);for(G=0;G<A.length;G++)this._map.hasLayer(A[G])||this._map.addLayer(A[G]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h,v,A=this._map.getZoom(),k=o.length-1;k>=0;k--)h=o[k],v=this._getLayer(h.layerId).layer,h.disabled=v.options.minZoom!==void 0&&A<v.options.minZoom||v.options.maxZoom!==void 0&&A>v.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var o=this._section;this._preventClick=!0,et(o,"click",en),this.expand();var h=this;setTimeout(function(){Dt(o,"click",en),h._preventClick=!1})}}),gc=function(o,h,v){return new hl(o,h,v)},hs=Yn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(o){var h="leaflet-control-zoom",v=At("div",h+" leaflet-bar"),A=this.options;return this._zoomInButton=this._createButton(A.zoomInText,A.zoomInTitle,h+"-in",v,this._zoomIn),this._zoomOutButton=this._createButton(A.zoomOutText,A.zoomOutTitle,h+"-out",v,this._zoomOut),this._updateDisabled(),o.on("zoomend zoomlevelschange",this._updateDisabled,this),v},onRemove:function(o){o.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,h,v,A,k){var G=At("a",v,A);return G.innerHTML=o,G.href="#",G.title=h,G.setAttribute("role","button"),G.setAttribute("aria-label",h),us(G),et(G,"click",ni),et(G,"click",k,this),et(G,"click",this._refocusOnMap,this),G},_updateDisabled:function(){var o=this._map,h="leaflet-disabled";Yt(this._zoomInButton,h),Yt(this._zoomOutButton,h),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||o._zoom===o.getMinZoom())&&(ht(this._zoomOutButton,h),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||o._zoom===o.getMaxZoom())&&(ht(this._zoomInButton,h),this._zoomInButton.setAttribute("aria-disabled","true"))}});vt.mergeOptions({zoomControl:!0}),vt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hs,this.addControl(this.zoomControl))});var $a=function(o){return new hs(o)},Ya=Yn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var h="leaflet-control-scale",v=At("div",h),A=this.options;return this._addScales(A,h+"-line",v),o.on(A.updateWhenIdle?"moveend":"move",this._update,this),o.whenReady(this._update,this),v},onRemove:function(o){o.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(o,h,v){o.metric&&(this._mScale=At("div",h,v)),o.imperial&&(this._iScale=At("div",h,v))},_update:function(){var o=this._map,h=o.getSize().y/2,v=o.distance(o.containerPointToLatLng([0,h]),o.containerPointToLatLng([this.options.maxWidth,h]));this._updateScales(v)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var h=this._getRoundNum(o),v=h<1e3?h+" m":h/1e3+" km";this._updateScale(this._mScale,v,h/o)},_updateImperial:function(o){var h=o*3.2808399,v,A,k;h>5280?(v=h/5280,A=this._getRoundNum(v),this._updateScale(this._iScale,A+" mi",A/v)):(k=this._getRoundNum(h),this._updateScale(this._iScale,k+" ft",k/h))},_updateScale:function(o,h,v){o.style.width=Math.round(this.options.maxWidth*v)+"px",o.innerHTML=h},_getRoundNum:function(o){var h=Math.pow(10,(Math.floor(o)+"").length-1),v=o/h;return v=v>=10?10:v>=5?5:v>=3?3:v>=2?2:1,h*v}}),Qa=function(o){return new Ya(o)},su='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ls=Yn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ke.inlineSvg?su+" ":"")+"Leaflet</a>"},initialize:function(o){O(this,o),this._attributions={}},onAdd:function(o){o.attributionControl=this,this._container=At("div","leaflet-control-attribution"),us(this._container);for(var h in o._layers)o._layers[h].getAttribution&&this.addAttribution(o._layers[h].getAttribution());return this._update(),o.on("layeradd",this._addAttribution,this),this._container},onRemove:function(o){o.off("layeradd",this._addAttribution,this)},_addAttribution:function(o){o.layer.getAttribution&&(this.addAttribution(o.layer.getAttribution()),o.layer.once("remove",function(){this.removeAttribution(o.layer.getAttribution())},this))},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var h in this._attributions)this._attributions[h]&&o.push(h);var v=[];this.options.prefix&&v.push(this.options.prefix),o.length&&v.push(o.join(", ")),this._container.innerHTML=v.join(' <span aria-hidden="true">|</span> ')}}});vt.mergeOptions({attributionControl:!0}),vt.addInitHook(function(){this.options.attributionControl&&new Ls().addTo(this)});var _c=function(o){return new Ls(o)};Yn.Layers=hl,Yn.Zoom=hs,Yn.Scale=Ya,Yn.Attribution=Ls,ii.layers=gc,ii.zoom=$a,ii.scale=Qa,ii.attribution=_c;var Ai=Q.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ai.addTo=function(o,h){return o.addHandler(h,this),this};var da={Events:U},dl=Ke.touch?"touchstart mousedown":"mousedown",Er=F.extend({options:{clickTolerance:3},initialize:function(o,h,v,A){O(this,A),this._element=o,this._dragStartTarget=h||o,this._preventOutline=v},enable:function(){this._enabled||(et(this._dragStartTarget,dl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Er._dragging===this&&this.finishDrag(!0),Dt(this._dragStartTarget,dl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(this._enabled&&(this._moved=!1,!Ms(this._element,"leaflet-zoom-anim"))){if(o.touches&&o.touches.length!==1){Er._dragging===this&&this.finishDrag();return}if(!(Er._dragging||o.shiftKey||o.which!==1&&o.button!==1&&!o.touches)&&(Er._dragging=this,this._preventOutline&&_r(this._element),ua(),ti(),!this._moving)){this.fire("down");var h=o.touches?o.touches[0]:o,v=zr(this._element);this._startPoint=new X(h.clientX,h.clientY),this._startPos=ji(this._element),this._parentScale=vr(v);var A=o.type==="mousedown";et(document,A?"mousemove":"touchmove",this._onMove,this),et(document,A?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(o){if(this._enabled){if(o.touches&&o.touches.length>1){this._moved=!0;return}var h=o.touches&&o.touches.length===1?o.touches[0]:o,v=new X(h.clientX,h.clientY)._subtract(this._startPoint);!v.x&&!v.y||Math.abs(v.x)+Math.abs(v.y)<this.options.clickTolerance||(v.x/=this._parentScale.x,v.y/=this._parentScale.y,en(o),this._moved||(this.fire("dragstart"),this._moved=!0,ht(document.body,"leaflet-dragging"),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ht(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(v),this._moving=!0,this._lastEvent=o,this._updatePosition())}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire("predrag",o),at(this._element,this._newPos),this.fire("drag",o)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(o){Yt(document.body,"leaflet-dragging"),this._lastTarget&&(Yt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dt(document,"mousemove touchmove",this._onMove,this),Dt(document,"mouseup touchend touchcancel",this._onUp,this),ul(),gr();var h=this._moved&&this._moving;this._moving=!1,Er._dragging=!1,h&&this.fire("dragend",{noInertia:o,distance:this._newPos.distanceTo(this._startPos)})}});function Wa(o,h,v){var A,k=[1,4,2,8],G,ie,pe,Ee,Ie,Ue,ze,Ge;for(G=0,Ue=o.length;G<Ue;G++)o[G]._code=qr(o[G],h);for(pe=0;pe<4;pe++){for(ze=k[pe],A=[],G=0,Ue=o.length,ie=Ue-1;G<Ue;ie=G++)Ee=o[G],Ie=o[ie],Ee._code&ze?Ie._code&ze||(Ge=Fn(Ie,Ee,ze,h,v),Ge._code=qr(Ge,h),A.push(Ge)):(Ie._code&ze&&(Ge=Fn(Ie,Ee,ze,h,v),Ge._code=qr(Ge,h),A.push(Ge)),A.push(Ee));o=A}return o}function js(o,h){var v,A,k,G,ie,pe,Ee,Ie,Ue;if(!o||o.length===0)throw new Error("latlngs not passed");g(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var ze=ye([0,0]),Ge=he(o),ct=Ge.getNorthWest().distanceTo(Ge.getSouthWest())*Ge.getNorthEast().distanceTo(Ge.getNorthWest());ct<1700&&(ze=Xa(o));var dn=o.length,wn=[];for(v=0;v<dn;v++){var ri=ye(o[v]);wn.push(h.project(ye([ri.lat-ze.lat,ri.lng-ze.lng])))}for(pe=Ee=Ie=0,v=0,A=dn-1;v<dn;A=v++)k=wn[v],G=wn[A],ie=k.y*G.x-G.y*k.x,Ee+=(k.x+G.x)*ie,Ie+=(k.y+G.y)*ie,pe+=ie*3;pe===0?Ue=wn[0]:Ue=[Ee/pe,Ie/pe];var Xi=h.unproject(H(Ue));return ye([Xi.lat+ze.lat,Xi.lng+ze.lng])}function Xa(o){for(var h=0,v=0,A=0,k=0;k<o.length;k++){var G=ye(o[k]);h+=G.lat,v+=G.lng,A++}return ye([h/A,v/A])}var Ja={__proto__:null,clipPolygon:Wa,polygonCenter:js,centroid:Xa};function fl(o,h){if(!h||!o.length)return o.slice();var v=h*h;return o=ou(o,v),o=au(o,v),o}function eo(o,h,v){return Math.sqrt(Si(o,h,v,!0))}function ds(o,h,v){return Si(o,h,v)}function au(o,h){var v=o.length,A=typeof Uint8Array<"u"?Uint8Array:Array,k=new A(v);k[0]=k[v-1]=1,to(o,k,h,0,v-1);var G,ie=[];for(G=0;G<v;G++)k[G]&&ie.push(o[G]);return ie}function to(o,h,v,A,k){var G=0,ie,pe,Ee;for(pe=A+1;pe<=k-1;pe++)Ee=Si(o[pe],o[A],o[k],!0),Ee>G&&(ie=pe,G=Ee);G>v&&(h[ie]=1,to(o,h,v,A,ie),to(o,h,v,ie,k))}function ou(o,h){for(var v=[o[0]],A=1,k=0,G=o.length;A<G;A++)lu(o[A],o[k])>h&&(v.push(o[A]),k=A);return k<G-1&&v.push(o[G-1]),v}var pl;function fa(o,h,v,A,k){var G=A?pl:qr(o,v),ie=qr(h,v),pe,Ee,Ie;for(pl=ie;;){if(!(G|ie))return[o,h];if(G&ie)return!1;pe=G||ie,Ee=Fn(o,h,pe,v,k),Ie=qr(Ee,v),pe===G?(o=Ee,G=Ie):(h=Ee,ie=Ie)}}function Fn(o,h,v,A,k){var G=h.x-o.x,ie=h.y-o.y,pe=A.min,Ee=A.max,Ie,Ue;return v&8?(Ie=o.x+G*(Ee.y-o.y)/ie,Ue=Ee.y):v&4?(Ie=o.x+G*(pe.y-o.y)/ie,Ue=pe.y):v&2?(Ie=Ee.x,Ue=o.y+ie*(Ee.x-o.x)/G):v&1&&(Ie=pe.x,Ue=o.y+ie*(pe.x-o.x)/G),new X(Ie,Ue,k)}function qr(o,h){var v=0;return o.x<h.min.x?v|=1:o.x>h.max.x&&(v|=2),o.y<h.min.y?v|=4:o.y>h.max.y&&(v|=8),v}function lu(o,h){var v=h.x-o.x,A=h.y-o.y;return v*v+A*A}function Si(o,h,v,A){var k=h.x,G=h.y,ie=v.x-k,pe=v.y-G,Ee=ie*ie+pe*pe,Ie;return Ee>0&&(Ie=((o.x-k)*ie+(o.y-G)*pe)/Ee,Ie>1?(k=v.x,G=v.y):Ie>0&&(k+=ie*Ie,G+=pe*Ie)),ie=o.x-k,pe=o.y-G,A?ie*ie+pe*pe:new X(k,G)}function g(o){return!K(o[0])||typeof o[0][0]!="object"&&typeof o[0][0]<"u"}function R(o){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),g(o)}function P(o,h){var v,A,k,G,ie,pe,Ee,Ie;if(!o||o.length===0)throw new Error("latlngs not passed");g(o)||(console.warn("latlngs are not flat! Only the first ring will be used"),o=o[0]);var Ue=ye([0,0]),ze=he(o),Ge=ze.getNorthWest().distanceTo(ze.getSouthWest())*ze.getNorthEast().distanceTo(ze.getNorthWest());Ge<1700&&(Ue=Xa(o));var ct=o.length,dn=[];for(v=0;v<ct;v++){var wn=ye(o[v]);dn.push(h.project(ye([wn.lat-Ue.lat,wn.lng-Ue.lng])))}for(v=0,A=0;v<ct-1;v++)A+=dn[v].distanceTo(dn[v+1])/2;if(A===0)Ie=dn[0];else for(v=0,G=0;v<ct-1;v++)if(ie=dn[v],pe=dn[v+1],k=ie.distanceTo(pe),G+=k,G>A){Ee=(G-A)/k,Ie=[pe.x-Ee*(pe.x-ie.x),pe.y-Ee*(pe.y-ie.y)];break}var ri=h.unproject(H(Ie));return ye([ri.lat+Ue.lat,ri.lng+Ue.lng])}var $={__proto__:null,simplify:fl,pointToSegmentDistance:eo,closestPointOnSegment:ds,clipSegment:fa,_getEdgeIntersection:Fn,_getBitCode:qr,_sqClosestPointOnSegment:Si,isFlat:g,_flat:R,polylineCenter:P},fe={project:function(o){return new X(o.lng,o.lat)},unproject:function(o){return new ue(o.y,o.x)},bounds:new ne([-180,-90],[180,90])},we={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(o){var h=Math.PI/180,v=this.R,A=o.lat*h,k=this.R_MINOR/v,G=Math.sqrt(1-k*k),ie=G*Math.sin(A),pe=Math.tan(Math.PI/4-A/2)/Math.pow((1-ie)/(1+ie),G/2);return A=-v*Math.log(Math.max(pe,1e-10)),new X(o.lng*h*v,A)},unproject:function(o){for(var h=180/Math.PI,v=this.R,A=this.R_MINOR/v,k=Math.sqrt(1-A*A),G=Math.exp(-o.y/v),ie=Math.PI/2-2*Math.atan(G),pe=0,Ee=.1,Ie;pe<15&&Math.abs(Ee)>1e-7;pe++)Ie=k*Math.sin(ie),Ie=Math.pow((1-Ie)/(1+Ie),k/2),Ee=Math.PI/2-2*Math.atan(G*Ie)-ie,ie+=Ee;return new ue(ie*h,o.x*h/v)}},Pe={__proto__:null,LonLat:fe,Mercator:we,SphericalMercator:qe},Nt=s({},ke,{code:"EPSG:3395",projection:we,transformation:function(){var o=.5/(Math.PI*we.R);return Ze(o,.5,-o,.5)}()}),Cn=s({},ke,{code:"EPSG:4326",projection:fe,transformation:Ze(1/180,1,-1/180,.5)}),Ot=s({},Fe,{projection:fe,transformation:Ze(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,h){var v=h.lng-o.lng,A=h.lat-o.lat;return Math.sqrt(v*v+A*A)},infinite:!0});Fe.Earth=ke,Fe.EPSG3395=Nt,Fe.EPSG3857=Et,Fe.EPSG900913=be,Fe.EPSG4326=Cn,Fe.Simple=Ot;var Zt=F.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[p(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[p(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var h=o.target;if(h.hasLayer(this)){if(this._map=h,this._zoomAnimated=h._zoomAnimated,this.getEvents){var v=this.getEvents();h.on(v,this),this.once("remove",function(){h.off(v,this)},this)}this.onAdd(h),this.fire("add"),h.fire("layeradd",{layer:this})}}});vt.include({addLayer:function(o){if(!o._layerAdd)throw new Error("The provided object is not a Layer.");var h=p(o);return this._layers[h]?this:(this._layers[h]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var h=p(o);return this._layers[h]?(this._loaded&&o.onRemove(this),delete this._layers[h],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return p(o)in this._layers},eachLayer:function(o,h){for(var v in this._layers)o.call(h,this._layers[v]);return this},_addLayers:function(o){o=o?K(o)?o:[o]:[];for(var h=0,v=o.length;h<v;h++)this.addLayer(o[h])},_addZoomLimit:function(o){(!isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[p(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var h=p(o);this._zoomBoundLayers[h]&&(delete this._zoomBoundLayers[h],this._updateZoomLevels())},_updateZoomLevels:function(){var o=1/0,h=-1/0,v=this._getZoomSpan();for(var A in this._zoomBoundLayers){var k=this._zoomBoundLayers[A].options;o=k.minZoom===void 0?o:Math.min(o,k.minZoom),h=k.maxZoom===void 0?h:Math.max(h,k.maxZoom)}this._layersMaxZoom=h===-1/0?void 0:h,this._layersMinZoom=o===1/0?void 0:o,v!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hn=Zt.extend({initialize:function(o,h){O(this,h),this._layers={};var v,A;if(o)for(v=0,A=o.length;v<A;v++)this.addLayer(o[v])},addLayer:function(o){var h=this.getLayerId(o);return this._layers[h]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var h=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[h]&&this._map.removeLayer(this._layers[h]),delete this._layers[h],this},hasLayer:function(o){var h=typeof o=="number"?o:this.getLayerId(o);return h in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var h=Array.prototype.slice.call(arguments,1),v,A;for(v in this._layers)A=this._layers[v],A[o]&&A[o].apply(A,h);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,h){for(var v in this._layers)o.call(h,this._layers[v]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke("setZIndex",o)},getLayerId:function(o){return p(o)}}),fs=function(o,h){return new hn(o,h)},sn=hn.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),hn.prototype.addLayer.call(this,o),this.fire("layeradd",{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),hn.prototype.removeLayer.call(this,o),this.fire("layerremove",{layer:o})):this},setStyle:function(o){return this.invoke("setStyle",o)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var o=new se;for(var h in this._layers){var v=this._layers[h];o.extend(v.getBounds?v.getBounds():v.getLatLng())}return o}}),Gr=function(o,h){return new sn(o,h)},Zr=Q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(o){O(this,o)},createIcon:function(o){return this._createIcon("icon",o)},createShadow:function(o){return this._createIcon("shadow",o)},_createIcon:function(o,h){var v=this._getIconUrl(o);if(!v){if(o==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var A=this._createImg(v,h&&h.tagName==="IMG"?h:null);return this._setIconStyles(A,o),(this.options.crossOrigin||this.options.crossOrigin==="")&&(A.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),A},_setIconStyles:function(o,h){var v=this.options,A=v[h+"Size"];typeof A=="number"&&(A=[A,A]);var k=H(A),G=H(h==="shadow"&&v.shadowAnchor||v.iconAnchor||k&&k.divideBy(2,!0));o.className="leaflet-marker-"+h+" "+(v.className||""),G&&(o.style.marginLeft=-G.x+"px",o.style.marginTop=-G.y+"px"),k&&(o.style.width=k.x+"px",o.style.height=k.y+"px")},_createImg:function(o,h){return h=h||document.createElement("img"),h.src=o,h},_getIconUrl:function(o){return Ke.retina&&this.options[o+"RetinaUrl"]||this.options[o+"Url"]}});function uu(o){return new Zr(o)}var no=Zr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return typeof no.imagePath!="string"&&(no.imagePath=this._detectIconPath()),(this.options.imagePath||no.imagePath)+Zr.prototype._getIconUrl.call(this,o)},_stripUrl:function(o){var h=function(v,A,k){var G=A.exec(v);return G&&G[k]};return o=h(o,/^url\((['"])?(.+)\1\)$/,2),o&&h(o,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var o=At("div","leaflet-default-icon-path",document.body),h=Br(o,"background-image")||Br(o,"backgroundImage");if(document.body.removeChild(o),h=this._stripUrl(h),h)return h;var v=document.querySelector('link[href$="leaflet.css"]');return v?v.href.substring(0,v.href.length-11-1):""}}),vc=Ai.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Er(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ht(o,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Yt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var h=this._marker,v=h._map,A=this._marker.options.autoPanSpeed,k=this._marker.options.autoPanPadding,G=ji(h._icon),ie=v.getPixelBounds(),pe=v.getPixelOrigin(),Ee=le(ie.min._subtract(pe).add(k),ie.max._subtract(pe).subtract(k));if(!Ee.contains(G)){var Ie=H((Math.max(Ee.max.x,G.x)-Ee.max.x)/(ie.max.x-Ee.max.x)-(Math.min(Ee.min.x,G.x)-Ee.min.x)/(ie.min.x-Ee.min.x),(Math.max(Ee.max.y,G.y)-Ee.max.y)/(ie.max.y-Ee.max.y)-(Math.min(Ee.min.y,G.y)-Ee.min.y)/(ie.min.y-Ee.min.y)).multiplyBy(A);v.panBy(Ie,{animate:!1}),this._draggable._newPos._add(Ie),this._draggable._startPos._add(Ie),at(h._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=j(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(o){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=j(this._adjustPan.bind(this,o)))},_onDrag:function(o){var h=this._marker,v=h._shadow,A=ji(h._icon),k=h._map.layerPointToLatLng(A);v&&at(v,A),h._latlng=k,o.latlng=k,o.oldLatLng=this._oldLatLng,h.fire("move",o).fire("drag",o)},_onDragEnd:function(o){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",o)}}),io=Zt.extend({options:{icon:new no,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,h){O(this,h),this._latlng=ye(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var h=this._latlng;return this._latlng=ye(o),this.update(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},getIcon:function(){return this.options.icon},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,h="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),v=o.icon.createIcon(this._icon),A=!1;v!==this._icon&&(this._icon&&this._removeIcon(),A=!0,o.title&&(v.title=o.title),v.tagName==="IMG"&&(v.alt=o.alt||"")),ht(v,h),o.keyboard&&(v.tabIndex="0",v.setAttribute("role","button")),this._icon=v,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&et(v,"focus",this._panOnFocus,this);var k=o.icon.createShadow(this._shadow),G=!1;k!==this._shadow&&(this._removeShadow(),G=!0),k&&(ht(k,h),k.alt=""),this._shadow=k,o.opacity<1&&this._updateOpacity(),A&&this.getPane().appendChild(this._icon),this._initInteraction(),k&&G&&this.getPane(o.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(this._icon,"focus",this._panOnFocus,this),Gt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Gt(this._shadow),this._shadow=null},_setPos:function(o){this._icon&&at(this._icon,o),this._shadow&&at(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon&&(this._icon.style.zIndex=this._zIndex+o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(h)},_initInteraction:function(){if(this.options.interactive&&(ht(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),vc)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new vc(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;this._icon&&cn(this._icon,o),this._shadow&&cn(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var o=this._map;if(o){var h=this.options.icon.options,v=h.iconSize?H(h.iconSize):H(0,0),A=h.iconAnchor?H(h.iconAnchor):H(0,0);o.panInside(this._latlng,{paddingTopLeft:A,paddingBottomRight:v.subtract(A)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yc(o,h){return new io(o,h)}var ps=Zt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return O(this,o),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&o&&Object.prototype.hasOwnProperty.call(o,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ml=ps.extend({options:{fill:!0,radius:10},initialize:function(o,h){O(this,h),this._latlng=ye(o),this._radius=this.options.radius},setLatLng:function(o){var h=this._latlng;return this._latlng=ye(o),this.redraw(),this.fire("move",{oldLatLng:h,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var h=o&&o.radius||this._radius;return ps.prototype.setStyle.call(this,o),this.setRadius(h),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,h=this._radiusY||o,v=this._clickTolerance(),A=[o+v,h+v];this._pxBounds=new ne(this._point.subtract(A),this._point.add(A))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function dd(o,h){return new ml(o,h)}var Ec=ml.extend({initialize:function(o,h,v){if(typeof h=="number"&&(h=s({},v,{radius:h})),O(this,h),this._latlng=ye(o),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new se(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:ps.prototype.setStyle,_project:function(){var o=this._latlng.lng,h=this._latlng.lat,v=this._map,A=v.options.crs;if(A.distance===ke.distance){var k=Math.PI/180,G=this._mRadius/ke.R/k,ie=v.project([h+G,o]),pe=v.project([h-G,o]),Ee=ie.add(pe).divideBy(2),Ie=v.unproject(Ee).lat,Ue=Math.acos((Math.cos(G*k)-Math.sin(h*k)*Math.sin(Ie*k))/(Math.cos(h*k)*Math.cos(Ie*k)))/k;(isNaN(Ue)||Ue===0)&&(Ue=G/Math.cos(Math.PI/180*h)),this._point=Ee.subtract(v.getPixelOrigin()),this._radius=isNaN(Ue)?0:Ee.x-v.project([Ie,o-Ue]).x,this._radiusY=Ee.y-ie.y}else{var ze=A.unproject(A.project(this._latlng).subtract([this._mRadius,0]));this._point=v.latLngToLayerPoint(this._latlng),this._radius=this._point.x-v.latLngToLayerPoint(ze).x}this._updateBounds()}});function dm(o,h,v){return new Ec(o,h,v)}var ms=ps.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,h){O(this,h),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var h=1/0,v=null,A=Si,k,G,ie=0,pe=this._parts.length;ie<pe;ie++)for(var Ee=this._parts[ie],Ie=1,Ue=Ee.length;Ie<Ue;Ie++){k=Ee[Ie-1],G=Ee[Ie];var ze=A(o,k,G,!0);ze<h&&(h=ze,v=A(o,k,G))}return v&&(v.distance=Math.sqrt(h)),v},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return P(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(o,h){return h=h||this._defaultShape(),o=ye(o),h.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new se,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return g(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var h=[],v=g(o),A=0,k=o.length;A<k;A++)v?(h[A]=ye(o[A]),this._bounds.extend(h[A])):h[A]=this._convertLatLngs(o[A]);return h},_project:function(){var o=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o),this._bounds.isValid()&&o.isValid()&&(this._rawPxBounds=o,this._updateBounds())},_updateBounds:function(){var o=this._clickTolerance(),h=new X(o,o);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(h),this._rawPxBounds.max.add(h)]))},_projectLatlngs:function(o,h,v){var A=o[0]instanceof ue,k=o.length,G,ie;if(A){for(ie=[],G=0;G<k;G++)ie[G]=this._map.latLngToLayerPoint(o[G]),v.extend(ie[G]);h.push(ie)}else for(G=0;G<k;G++)this._projectLatlngs(o[G],h,v)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}var h=this._parts,v,A,k,G,ie,pe,Ee;for(v=0,k=0,G=this._rings.length;v<G;v++)for(Ee=this._rings[v],A=0,ie=Ee.length;A<ie-1;A++)pe=fa(Ee[A],Ee[A+1],o,A,!0),pe&&(h[k]=h[k]||[],h[k].push(pe[0]),(pe[1]!==Ee[A+1]||A===ie-2)&&(h[k].push(pe[1]),k++))}},_simplifyPoints:function(){for(var o=this._parts,h=this.options.smoothFactor,v=0,A=o.length;v<A;v++)o[v]=fl(o[v],h)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,h){var v,A,k,G,ie,pe,Ee=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(v=0,G=this._parts.length;v<G;v++)for(pe=this._parts[v],A=0,ie=pe.length,k=ie-1;A<ie;k=A++)if(!(!h&&A===0)&&eo(o,pe[k],pe[A])<=Ee)return!0;return!1}});function fm(o,h){return new ms(o,h)}ms._flat=R;var ro=ms.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return js(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(o){var h=ms.prototype._convertLatLngs.call(this,o),v=h.length;return v>=2&&h[0]instanceof ue&&h[0].equals(h[v-1])&&h.pop(),h},_setLatLngs:function(o){ms.prototype._setLatLngs.call(this,o),g(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return g(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,h=this.options.weight,v=new X(h,h);if(o=new ne(o.min.subtract(v),o.max.add(v)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(o))){if(this.options.noClip){this._parts=this._rings;return}for(var A=0,k=this._rings.length,G;A<k;A++)G=Wa(this._rings[A],o,!0),G.length&&this._parts.push(G)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var h=!1,v,A,k,G,ie,pe,Ee,Ie;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(G=0,Ee=this._parts.length;G<Ee;G++)for(v=this._parts[G],ie=0,Ie=v.length,pe=Ie-1;ie<Ie;pe=ie++)A=v[ie],k=v[pe],A.y>o.y!=k.y>o.y&&o.x<(k.x-A.x)*(o.y-A.y)/(k.y-A.y)+A.x&&(h=!h);return h||ms.prototype._containsPoint.call(this,o,!0)}});function Ui(o,h){return new ro(o,h)}var Bi=sn.extend({initialize:function(o,h){O(this,h),this._layers={},o&&this.addData(o)},addData:function(o){var h=K(o)?o:o.features,v,A,k;if(h){for(v=0,A=h.length;v<A;v++)k=h[v],(k.geometries||k.geometry||k.features||k.coordinates)&&this.addData(k);return this}var G=this.options;if(G.filter&&!G.filter(o))return this;var ie=gl(o,G);return ie?(ie.feature=so(o),ie.defaultOptions=ie.options,this.resetStyle(ie),G.onEachFeature&&G.onEachFeature(o,ie),this.addLayer(ie)):this},resetStyle:function(o){return o===void 0?this.eachLayer(this.resetStyle,this):(o.options=s({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this)},setStyle:function(o){return this.eachLayer(function(h){this._setLayerStyle(h,o)},this)},_setLayerStyle:function(o,h){o.setStyle&&(typeof h=="function"&&(h=h(o.feature)),o.setStyle(h))}});function gl(o,h){var v=o.type==="Feature"?o.geometry:o,A=v?v.coordinates:null,k=[],G=h&&h.pointToLayer,ie=h&&h.coordsToLatLng||cu,pe,Ee,Ie,Ue;if(!A&&!v)return null;switch(v.type){case"Point":return pe=ie(A),bc(G,o,pe,h);case"MultiPoint":for(Ie=0,Ue=A.length;Ie<Ue;Ie++)pe=ie(A[Ie]),k.push(bc(G,o,pe,h));return new sn(k);case"LineString":case"MultiLineString":return Ee=_l(A,v.type==="LineString"?0:1,ie),new ms(Ee,h);case"Polygon":case"MultiPolygon":return Ee=_l(A,v.type==="Polygon"?1:2,ie),new ro(Ee,h);case"GeometryCollection":for(Ie=0,Ue=v.geometries.length;Ie<Ue;Ie++){var ze=gl({geometry:v.geometries[Ie],type:"Feature",properties:o.properties},h);ze&&k.push(ze)}return new sn(k);case"FeatureCollection":for(Ie=0,Ue=v.features.length;Ie<Ue;Ie++){var Ge=gl(v.features[Ie],h);Ge&&k.push(Ge)}return new sn(k);default:throw new Error("Invalid GeoJSON object.")}}function bc(o,h,v,A){return o?o(h,v):new io(v,A&&A.markersInheritOptions&&A)}function cu(o){return new ue(o[1],o[0],o[2])}function _l(o,h,v){for(var A=[],k=0,G=o.length,ie;k<G;k++)ie=h?_l(o[k],h-1,v):(v||cu)(o[k]),A.push(ie);return A}function vl(o,h){return o=ye(o),o.alt!==void 0?[b(o.lng,h),b(o.lat,h),b(o.alt,h)]:[b(o.lng,h),b(o.lat,h)]}function hu(o,h,v,A){for(var k=[],G=0,ie=o.length;G<ie;G++)k.push(h?hu(o[G],g(o[G])?0:h-1,v,A):vl(o[G],A));return!h&&v&&k.length>0&&k.push(k[0].slice()),k}function br(o,h){return o.feature?s({},o.feature,{geometry:h}):so(h)}function so(o){return o.type==="Feature"||o.type==="FeatureCollection"?o:{type:"Feature",properties:{},geometry:o}}var pa={toGeoJSON:function(o){return br(this,{type:"Point",coordinates:vl(this.getLatLng(),o)})}};io.include(pa),Ec.include(pa),ml.include(pa),ms.include({toGeoJSON:function(o){var h=!g(this._latlngs),v=hu(this._latlngs,h?1:0,!1,o);return br(this,{type:(h?"Multi":"")+"LineString",coordinates:v})}}),ro.include({toGeoJSON:function(o){var h=!g(this._latlngs),v=h&&!g(this._latlngs[0]),A=hu(this._latlngs,v?2:h?1:0,!0,o);return h||(A=[A]),br(this,{type:(v?"Multi":"")+"Polygon",coordinates:A})}}),hn.include({toMultiPoint:function(o){var h=[];return this.eachLayer(function(v){h.push(v.toGeoJSON(o).geometry.coordinates)}),br(this,{type:"MultiPoint",coordinates:h})},toGeoJSON:function(o){var h=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(h==="MultiPoint")return this.toMultiPoint(o);var v=h==="GeometryCollection",A=[];return this.eachLayer(function(k){if(k.toGeoJSON){var G=k.toGeoJSON(o);if(v)A.push(G.geometry);else{var ie=so(G);ie.type==="FeatureCollection"?A.push.apply(A,ie.features):A.push(ie)}}}),v?br(this,{geometries:A,type:"GeometryCollection"}):{type:"FeatureCollection",features:A}}});function du(o,h){return new Bi(o,h)}var fd=du,Kr=Zt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(o,h,v){this._url=o,this._bounds=he(h),O(this,v)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ht(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Gt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&Fr(this._image),this},bringToBack:function(){return this._map&&Ps(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=he(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o=this._url.tagName==="IMG",h=this._image=o?this._url:At("img");if(ht(h,"leaflet-image-layer"),this._zoomAnimated&&ht(h,"leaflet-zoom-animated"),this.options.className&&ht(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onload=c(this.fire,this,"load"),h.onerror=c(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o){this._url=h.src;return}h.src=this._url,h.alt=this.options.alt},_animateZoom:function(o){var h=this._map.getZoomScale(o.zoom),v=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;ci(this._image,v,h)},_reset:function(){var o=this._image,h=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),v=h.getSize();at(o,h.min),o.style.width=v.x+"px",o.style.height=v.y+"px"},_updateOpacity:function(){cn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)},getCenter:function(){return this._bounds.getCenter()}}),ao=function(o,h,v){return new Kr(o,h,v)},fu=Kr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var o=this._url.tagName==="VIDEO",h=this._image=o?this._url:At("video");if(ht(h,"leaflet-image-layer"),this._zoomAnimated&&ht(h,"leaflet-zoom-animated"),this.options.className&&ht(h,this.options.className),h.onselectstart=E,h.onmousemove=E,h.onloadeddata=c(this.fire,this,"load"),o){for(var v=h.getElementsByTagName("source"),A=[],k=0;k<v.length;k++)A.push(v[k].src);this._url=v.length>0?A:[h.src];return}K(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(h.style,"objectFit")&&(h.style.objectFit="fill"),h.autoplay=!!this.options.autoplay,h.loop=!!this.options.loop,h.muted=!!this.options.muted,h.playsInline=!!this.options.playsInline;for(var G=0;G<this._url.length;G++){var ie=At("source");ie.src=this._url[G],h.appendChild(ie)}}});function pd(o,h,v){return new fu(o,h,v)}var Vs=Kr.extend({_initImage:function(){var o=this._image=this._url;ht(o,"leaflet-image-layer"),this._zoomAnimated&&ht(o,"leaflet-zoom-animated"),this.options.className&&ht(o,this.options.className),o.onselectstart=E,o.onmousemove=E}});function md(o,h,v){return new Vs(o,h,v)}var wr=Zt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(o,h){o&&(o instanceof ue||K(o))?(this._latlng=ye(o),O(this,h)):(O(this,o),this._source=h),this.options.content&&(this._content=this.options.content)},openOn:function(o){return o=arguments.length?o:this._source._map,o.hasLayer(this)||o.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(o){return this._map?this.close():(arguments.length?this._source=o:o=this._source,this._prepareOpen(),this.openOn(o._map)),this},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&cn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&cn(this._container,1),this.bringToFront(),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(o){o._fadeAnimated?(cn(this._container,0),this._removeTimeout=setTimeout(c(Gt,void 0,this._container),200)):Gt(this._container),this.options.interactive&&(Yt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=ye(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Fr(this._container),this},bringToBack:function(){return this._map&&Ps(this._container),this},_prepareOpen:function(o){var h=this._source;if(!h._map)return!1;if(h instanceof sn){h=null;var v=this._source._layers;for(var A in v)if(v[A]._map){h=v[A];break}if(!h)return!1;this._source=h}if(!o)if(h.getCenter)o=h.getCenter();else if(h.getLatLng)o=h.getLatLng();else if(h.getBounds)o=h.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(o),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var o=this._contentNode,h=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof h=="string")o.innerHTML=h;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(h)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),h=H(this.options.offset),v=this._getAnchor();this._zoomAnimated?at(this._container,o.add(v)):h=h.add(o).add(v);var A=this._containerBottom=-h.y,k=this._containerLeft=-Math.round(this._containerWidth/2)+h.x;this._container.style.bottom=A+"px",this._container.style.left=k+"px"}},_getAnchor:function(){return[0,0]}});vt.include({_initOverlay:function(o,h,v,A){var k=h;return k instanceof o||(k=new o(A).setContent(h)),v&&k.setLatLng(v),k}}),Zt.include({_initOverlay:function(o,h,v,A){var k=v;return k instanceof o?(O(k,A),k._source=this):(k=h&&!A?h:new o(A,this),k.setContent(v)),k}});var yl=wr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(o){return o=arguments.length?o:this._source._map,!o.hasLayer(this)&&o._popup&&o._popup.options.autoClose&&o.removeLayer(o._popup),o._popup=this,wr.prototype.openOn.call(this,o)},onAdd:function(o){wr.prototype.onAdd.call(this,o),o.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ps||this._source.on("preclick",Ti))},onRemove:function(o){wr.prototype.onRemove.call(this,o),o.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ps||this._source.off("preclick",Ti))},getEvents:function(){var o=wr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(o.preclick=this.close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_initLayout:function(){var o="leaflet-popup",h=this._container=At("div",o+" "+(this.options.className||"")+" leaflet-zoom-animated"),v=this._wrapper=At("div",o+"-content-wrapper",h);if(this._contentNode=At("div",o+"-content",v),us(h),yr(this._contentNode),et(h,"contextmenu",Ti),this._tipContainer=At("div",o+"-tip-container",h),this._tip=At("div",o+"-tip",this._tipContainer),this.options.closeButton){var A=this._closeButton=At("a",o+"-close-button",h);A.setAttribute("role","button"),A.setAttribute("aria-label","Close popup"),A.href="#close",A.innerHTML='<span aria-hidden="true">&#215;</span>',et(A,"click",function(k){en(k),this.close()},this)}},_updateLayout:function(){var o=this._contentNode,h=o.style;h.width="",h.whiteSpace="nowrap";var v=o.offsetWidth;v=Math.min(v,this.options.maxWidth),v=Math.max(v,this.options.minWidth),h.width=v+1+"px",h.whiteSpace="",h.height="";var A=o.offsetHeight,k=this.options.maxHeight,G="leaflet-popup-scrolled";k&&A>k?(h.height=k+"px",ht(o,G)):Yt(o,G),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),v=this._getAnchor();at(this._container,h.add(v))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var o=this._map,h=parseInt(Br(this._container,"marginBottom"),10)||0,v=this._container.offsetHeight+h,A=this._containerWidth,k=new X(this._containerLeft,-v-this._containerBottom);k._add(ji(this._container));var G=o.layerPointToContainerPoint(k),ie=H(this.options.autoPanPadding),pe=H(this.options.autoPanPaddingTopLeft||ie),Ee=H(this.options.autoPanPaddingBottomRight||ie),Ie=o.getSize(),Ue=0,ze=0;G.x+A+Ee.x>Ie.x&&(Ue=G.x+A-Ie.x+Ee.x),G.x-Ue-pe.x<0&&(Ue=G.x-pe.x),G.y+v+Ee.y>Ie.y&&(ze=G.y+v-Ie.y+Ee.y),G.y-ze-pe.y<0&&(ze=G.y-pe.y),(Ue||ze)&&(this.options.keepInView&&(this._autopanning=!0),o.fire("autopanstart").panBy([Ue,ze]))}},_getAnchor:function(){return H(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),pm=function(o,h){return new yl(o,h)};vt.mergeOptions({closePopupOnClick:!0}),vt.include({openPopup:function(o,h,v){return this._initOverlay(yl,o,h,v).openOn(this),this},closePopup:function(o){return o=arguments.length?o:this._popup,o&&o.close(),this}}),Zt.include({bindPopup:function(o,h){return this._popup=this._initOverlay(yl,this._popup,o,h),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o){return this._popup&&(this instanceof sn||(this._popup._source=this),this._popup._prepareOpen(o||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){if(!(!this._popup||!this._map)){ni(o);var h=o.layer||o.target;if(this._popup._source===h&&!(h instanceof ps)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(o.latlng);return}this._popup._source=h,this.openPopup(o.latlng)}},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){o.originalEvent.keyCode===13&&this._openPopup(o)}});var pu=wr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(o){wr.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(o){wr.prototype.onRemove.call(this,o),o.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var o=wr.prototype.getEvents.call(this);return this.options.permanent||(o.preclick=this.close),o},_initLayout:function(){var o="leaflet-tooltip",h=o+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=At("div",h),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var h,v,A=this._map,k=this._container,G=A.latLngToContainerPoint(A.getCenter()),ie=A.layerPointToContainerPoint(o),pe=this.options.direction,Ee=k.offsetWidth,Ie=k.offsetHeight,Ue=H(this.options.offset),ze=this._getAnchor();pe==="top"?(h=Ee/2,v=Ie):pe==="bottom"?(h=Ee/2,v=0):pe==="center"?(h=Ee/2,v=Ie/2):pe==="right"?(h=0,v=Ie/2):pe==="left"?(h=Ee,v=Ie/2):ie.x<G.x?(pe="right",h=0,v=Ie/2):(pe="left",h=Ee+(Ue.x+ze.x)*2,v=Ie/2),o=o.subtract(H(h,v,!0)).add(Ue).add(ze),Yt(k,"leaflet-tooltip-right"),Yt(k,"leaflet-tooltip-left"),Yt(k,"leaflet-tooltip-top"),Yt(k,"leaflet-tooltip-bottom"),ht(k,"leaflet-tooltip-"+pe),at(k,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&cn(this._container,o)},_animateZoom:function(o){var h=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(h)},_getAnchor:function(){return H(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),mm=function(o,h){return new pu(o,h)};vt.include({openTooltip:function(o,h,v){return this._initOverlay(pu,o,h,v).openOn(this),this},closeTooltip:function(o){return o.close(),this}}),Zt.include({bindTooltip:function(o,h){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(pu,this._tooltip,o,h),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(!(!o&&this._tooltipHandlersAdded)){var h=o?"off":"on",v={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?v.add=this._openTooltip:(v.mouseover=this._openTooltip,v.mouseout=this.closeTooltip,v.click=this._openTooltip,this._map?this._addFocusListeners():v.add=this._addFocusListeners),this._tooltip.options.sticky&&(v.mousemove=this._moveTooltip),this[h](v),this._tooltipHandlersAdded=!o}},openTooltip:function(o){return this._tooltip&&(this instanceof sn||(this._tooltip._source=this),this._tooltip._prepareOpen(o)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&(et(h,"focus",function(){this._tooltip._source=o,this.openTooltip()},this),et(h,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(o){var h=typeof o.getElement=="function"&&o.getElement();h&&h.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(o){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var h=this;this._map.once("moveend",function(){h._openOnceFlag=!1,h._openTooltip(o)});return}this._tooltip._source=o.layer||o.target,this.openTooltip(this._tooltip.options.sticky?o.latlng:void 0)}},_moveTooltip:function(o){var h=o.latlng,v,A;this._tooltip.options.sticky&&o.originalEvent&&(v=this._map.mouseEventToContainerPoint(o.originalEvent),A=this._map.containerPointToLayerPoint(v),h=this._map.layerPointToLatLng(A)),this._tooltip.setLatLng(h)}});var wc=Zr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(o){var h=o&&o.tagName==="DIV"?o:document.createElement("div"),v=this.options;if(v.html instanceof Element?(Bn(h),h.appendChild(v.html)):h.innerHTML=v.html!==!1?v.html:"",v.bgPos){var A=H(v.bgPos);h.style.backgroundPosition=-A.x+"px "+-A.y+"px"}return this._setIconStyles(h,"icon"),h},createShadow:function(){return null}});function gd(o){return new wc(o)}Zr.Default=no;var ma=Zt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ke.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(o){O(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),Gt(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Fr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ps(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var o=this._clampZoom(this._map.getZoom());o!==this._tileZoom&&(this._tileZoom=o,this._updateLevels()),this._update()}return this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement("div")},getTileSize:function(){var o=this.options.tileSize;return o instanceof X?o:new X(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var h=this.getPane().children,v=-o(-1/0,1/0),A=0,k=h.length,G;A<k;A++)G=h[A].style.zIndex,h[A]!==this._container&&G&&(v=o(v,+G));isFinite(v)&&(this.options.zIndex=v+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ke.ielt9){cn(this._container,this.options.opacity);var o=+new Date,h=!1,v=!1;for(var A in this._tiles){var k=this._tiles[A];if(!(!k.current||!k.loaded)){var G=Math.min(1,(o-k.loaded)/200);cn(k.el,G),G<1?h=!0:(k.active?v=!0:this._onOpaqueTile(k),k.active=!0)}}v&&!this._noPrune&&this._pruneTiles(),h&&(B(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=At("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,h=this.options.maxZoom;if(o!==void 0){for(var v in this._levels)v=Number(v),this._levels[v].el.children.length||v===o?(this._levels[v].el.style.zIndex=h-Math.abs(o-v),this._onUpdateLevel(v)):(Gt(this._levels[v].el),this._removeTilesAtZoom(v),this._onRemoveLevel(v),delete this._levels[v]);var A=this._levels[o],k=this._map;return A||(A=this._levels[o]={},A.el=At("div","leaflet-tile-container leaflet-zoom-animated",this._container),A.el.style.zIndex=h,A.origin=k.project(k.unproject(k.getPixelOrigin()),o).round(),A.zoom=o,this._setZoomTransform(A,k.getCenter(),k.getZoom()),E(A.el.offsetWidth),this._onCreateLevel(A)),this._level=A,A}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(this._map){var o,h,v=this._map.getZoom();if(v>this.options.maxZoom||v<this.options.minZoom){this._removeAllTiles();return}for(o in this._tiles)h=this._tiles[o],h.retain=h.current;for(o in this._tiles)if(h=this._tiles[o],h.current&&!h.active){var A=h.coords;this._retainParent(A.x,A.y,A.z,A.z-5)||this._retainChildren(A.x,A.y,A.z,A.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var h in this._tiles)this._tiles[h].coords.z===o&&this._removeTile(h)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)Gt(this._levels[o].el),this._onRemoveLevel(Number(o)),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,h,v,A){var k=Math.floor(o/2),G=Math.floor(h/2),ie=v-1,pe=new X(+k,+G);pe.z=+ie;var Ee=this._tileCoordsToKey(pe),Ie=this._tiles[Ee];return Ie&&Ie.active?(Ie.retain=!0,!0):(Ie&&Ie.loaded&&(Ie.retain=!0),ie>A?this._retainParent(k,G,ie,A):!1)},_retainChildren:function(o,h,v,A){for(var k=2*o;k<2*o+2;k++)for(var G=2*h;G<2*h+2;G++){var ie=new X(k,G);ie.z=v+1;var pe=this._tileCoordsToKey(ie),Ee=this._tiles[pe];if(Ee&&Ee.active){Ee.retain=!0;continue}else Ee&&Ee.loaded&&(Ee.retain=!0);v+1<A&&this._retainChildren(k,G,v+1,A)}},_resetView:function(o){var h=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),h,h)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var h=this.options;return h.minNativeZoom!==void 0&&o<h.minNativeZoom?h.minNativeZoom:h.maxNativeZoom!==void 0&&h.maxNativeZoom<o?h.maxNativeZoom:o},_setView:function(o,h,v,A){var k=Math.round(h);this.options.maxZoom!==void 0&&k>this.options.maxZoom||this.options.minZoom!==void 0&&k<this.options.minZoom?k=void 0:k=this._clampZoom(k);var G=this.options.updateWhenZooming&&k!==this._tileZoom;(!A||G)&&(this._tileZoom=k,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),k!==void 0&&this._update(o),v||this._pruneTiles(),this._noPrune=!!v),this._setZoomTransforms(o,h)},_setZoomTransforms:function(o,h){for(var v in this._levels)this._setZoomTransform(this._levels[v],o,h)},_setZoomTransform:function(o,h,v){var A=this._map.getZoomScale(v,o.zoom),k=o.origin.multiplyBy(A).subtract(this._map._getNewPixelOrigin(h,v)).round();Ke.any3d?ci(o.el,k,A):at(o.el,k)},_resetGrid:function(){var o=this._map,h=o.options.crs,v=this._tileSize=this.getTileSize(),A=this._tileZoom,k=this._map.getPixelWorldBounds(this._tileZoom);k&&(this._globalTileRange=this._pxBoundsToTileRange(k)),this._wrapX=h.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,h.wrapLng[0]],A).x/v.x),Math.ceil(o.project([0,h.wrapLng[1]],A).x/v.y)],this._wrapY=h.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([h.wrapLat[0],0],A).y/v.x),Math.ceil(o.project([h.wrapLat[1],0],A).y/v.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var h=this._map,v=h._animatingZoom?Math.max(h._animateToZoom,h.getZoom()):h.getZoom(),A=h.getZoomScale(v,this._tileZoom),k=h.project(o,this._tileZoom).floor(),G=h.getSize().divideBy(A*2);return new ne(k.subtract(G),k.add(G))},_update:function(o){var h=this._map;if(h){var v=this._clampZoom(h.getZoom());if(o===void 0&&(o=h.getCenter()),this._tileZoom!==void 0){var A=this._getTiledPixelBounds(o),k=this._pxBoundsToTileRange(A),G=k.getCenter(),ie=[],pe=this.options.keepBuffer,Ee=new ne(k.getBottomLeft().subtract([pe,-pe]),k.getTopRight().add([pe,-pe]));if(!(isFinite(k.min.x)&&isFinite(k.min.y)&&isFinite(k.max.x)&&isFinite(k.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ie in this._tiles){var Ue=this._tiles[Ie].coords;(Ue.z!==this._tileZoom||!Ee.contains(new X(Ue.x,Ue.y)))&&(this._tiles[Ie].current=!1)}if(Math.abs(v-this._tileZoom)>1){this._setView(o,v);return}for(var ze=k.min.y;ze<=k.max.y;ze++)for(var Ge=k.min.x;Ge<=k.max.x;Ge++){var ct=new X(Ge,ze);if(ct.z=this._tileZoom,!!this._isValidTile(ct)){var dn=this._tiles[this._tileCoordsToKey(ct)];dn?dn.current=!0:ie.push(ct)}}if(ie.sort(function(ri,Xi){return ri.distanceTo(G)-Xi.distanceTo(G)}),ie.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wn=document.createDocumentFragment();for(Ge=0;Ge<ie.length;Ge++)this._addTile(ie[Ge],wn);this._level.el.appendChild(wn)}}}},_isValidTile:function(o){var h=this._map.options.crs;if(!h.infinite){var v=this._globalTileRange;if(!h.wrapLng&&(o.x<v.min.x||o.x>v.max.x)||!h.wrapLat&&(o.y<v.min.y||o.y>v.max.y))return!1}if(!this.options.bounds)return!0;var A=this._tileCoordsToBounds(o);return he(this.options.bounds).overlaps(A)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var h=this._map,v=this.getTileSize(),A=o.scaleBy(v),k=A.add(v),G=h.unproject(A,o.z),ie=h.unproject(k,o.z);return[G,ie]},_tileCoordsToBounds:function(o){var h=this._tileCoordsToNwSe(o),v=new se(h[0],h[1]);return this.options.noWrap||(v=this._map.wrapLatLngBounds(v)),v},_tileCoordsToKey:function(o){return o.x+":"+o.y+":"+o.z},_keyToTileCoords:function(o){var h=o.split(":"),v=new X(+h[0],+h[1]);return v.z=+h[2],v},_removeTile:function(o){var h=this._tiles[o];h&&(Gt(h.el),delete this._tiles[o],this.fire("tileunload",{tile:h.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){ht(o,"leaflet-tile");var h=this.getTileSize();o.style.width=h.x+"px",o.style.height=h.y+"px",o.onselectstart=E,o.onmousemove=E,Ke.ielt9&&this.options.opacity<1&&cn(o,this.options.opacity)},_addTile:function(o,h){var v=this._getTilePos(o),A=this._tileCoordsToKey(o),k=this.createTile(this._wrapCoords(o),c(this._tileReady,this,o));this._initTile(k),this.createTile.length<2&&j(c(this._tileReady,this,o,null,k)),at(k,v),this._tiles[A]={el:k,coords:o,current:!0},h.appendChild(k),this.fire("tileloadstart",{tile:k,coords:o})},_tileReady:function(o,h,v){h&&this.fire("tileerror",{error:h,tile:v,coords:o});var A=this._tileCoordsToKey(o);v=this._tiles[A],v&&(v.loaded=+new Date,this._map._fadeAnimated?(cn(v.el,0),B(this._fadeFrame),this._fadeFrame=j(this._updateOpacity,this)):(v.active=!0,this._pruneTiles()),h||(ht(v.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:v.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ke.ielt9||!this._map._fadeAnimated?j(this._pruneTiles,this):setTimeout(c(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var h=new X(this._wrapX?_(o.x,this._wrapX):o.x,this._wrapY?_(o.y,this._wrapY):o.y);return h.z=o.z,h},_pxBoundsToTileRange:function(o){var h=this.getTileSize();return new ne(o.min.unscaleBy(h).floor(),o.max.unscaleBy(h).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function Tr(o){return new ma(o)}var ga=ma.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(o,h){this._url=o,h=O(this,h),h.detectRetina&&Ke.retina&&h.maxZoom>0?(h.tileSize=Math.floor(h.tileSize/2),h.zoomReverse?(h.zoomOffset--,h.minZoom=Math.min(h.maxZoom,h.minZoom+1)):(h.zoomOffset++,h.maxZoom=Math.max(h.minZoom,h.maxZoom-1)),h.minZoom=Math.max(0,h.minZoom)):h.zoomReverse?h.minZoom=Math.min(h.maxZoom,h.minZoom):h.maxZoom=Math.max(h.minZoom,h.maxZoom),typeof h.subdomains=="string"&&(h.subdomains=h.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(o,h){return this._url===o&&h===void 0&&(h=!0),this._url=o,h||this.redraw(),this},createTile:function(o,h){var v=document.createElement("img");return et(v,"load",c(this._tileOnLoad,this,h,v)),et(v,"error",c(this._tileOnError,this,h,v)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(v.referrerPolicy=this.options.referrerPolicy),v.alt="",v.src=this.getTileUrl(o),v},getTileUrl:function(o){var h={r:Ke.retina?"@2x":"",s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var v=this._globalTileRange.max.y-o.y;this.options.tms&&(h.y=v),h["-y"]=v}return Y(this._url,s(h,this.options))},_tileOnLoad:function(o,h){Ke.ielt9?setTimeout(c(o,this,null,h),0):o(null,h)},_tileOnError:function(o,h,v){var A=this.options.errorTileUrl;A&&h.getAttribute("src")!==A&&(h.src=A),o(v,h)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,h=this.options.maxZoom,v=this.options.zoomReverse,A=this.options.zoomOffset;return v&&(o=h-o),o+A},_getSubdomain:function(o){var h=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[h]},_abortLoading:function(){var o,h;for(o in this._tiles)if(this._tiles[o].coords.z!==this._tileZoom&&(h=this._tiles[o].el,h.onload=E,h.onerror=E,!h.complete)){h.src=oe;var v=this._tiles[o].coords;Gt(h),delete this._tiles[o],this.fire("tileabort",{tile:h,coords:v})}},_removeTile:function(o){var h=this._tiles[o];if(h)return h.el.setAttribute("src",oe),ma.prototype._removeTile.call(this,o)},_tileReady:function(o,h,v){if(!(!this._map||v&&v.getAttribute("src")===oe))return ma.prototype._tileReady.call(this,o,h,v)}});function Fi(o,h){return new ga(o,h)}var zi=ga.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(o,h){this._url=o;var v=s({},this.defaultWmsParams);for(var A in h)A in this.options||(v[A]=h[A]);h=O(this,h);var k=h.detectRetina&&Ke.retina?2:1,G=this.getTileSize();v.width=G.x*k,v.height=G.y*k,this.wmsParams=v},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var h=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[h]=this._crs.code,ga.prototype.onAdd.call(this,o)},getTileUrl:function(o){var h=this._tileCoordsToNwSe(o),v=this._crs,A=le(v.project(h[0]),v.project(h[1])),k=A.min,G=A.max,ie=(this._wmsVersion>=1.3&&this._crs===Cn?[k.y,k.x,G.y,G.x]:[k.x,k.y,G.x,G.y]).join(","),pe=ga.prototype.getTileUrl.call(this,o);return pe+M(this.wmsParams,pe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ie},setParams:function(o,h){return s(this.wmsParams,o),h||this.redraw(),this}});function oo(o,h){return new zi(o,h)}ga.WMS=zi,Fi.wms=oo;var Ar=Zt.extend({options:{padding:.1},initialize:function(o){O(this,o),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ht(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,h){var v=this._map.getZoomScale(h,this._zoom),A=this._map.getSize().multiplyBy(.5+this.options.padding),k=this._map.project(this._center,h),G=A.multiplyBy(-v).add(k).subtract(this._map._getNewPixelOrigin(o,h));Ke.any3d?ci(this._container,G,v):at(this._container,G)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var o in this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,h=this._map.getSize(),v=this._map.containerPointToLayerPoint(h.multiplyBy(-o)).round();this._bounds=new ne(v,v.add(h.multiplyBy(1+o*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),El=Ar.extend({options:{tolerance:0},getEvents:function(){var o=Ar.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ar.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement("canvas");et(o,"mousemove",this._onMouseMove,this),et(o,"click dblclick mousedown mouseup contextmenu",this._onClick,this),et(o,"mouseout",this._handleMouseOut,this),o._leaflet_disable_events=!0,this._ctx=o.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Gt(this._container),Dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;this._redrawBounds=null;for(var h in this._layers)o=this._layers[h],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var o=this._bounds,h=this._container,v=o.getSize(),A=Ke.retina?2:1;at(h,o.min),h.width=A*v.x,h.height=A*v.y,h.style.width=v.x+"px",h.style.height=v.y+"px",Ke.retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire("update")}},_reset:function(){Ar.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[p(o)]=o;var h=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=h),this._drawLast=h,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var h=o._order,v=h.next,A=h.prev;v?v.prev=A:this._drawLast=A,A?A.next=v:this._drawFirst=v,delete o._order,delete this._layers[p(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if(typeof o.options.dashArray=="string"){var h=o.options.dashArray.split(/[, ]+/),v=[],A,k;for(k=0;k<h.length;k++){if(A=Number(h[k]),isNaN(A))return;v.push(A)}o.options._dashArray=v}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||j(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var h=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(o._pxBounds.min.subtract([h,h])),this._redrawBounds.extend(o._pxBounds.max.add([h,h]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var h=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,h.x,h.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var o,h=this._redrawBounds;if(this._ctx.save(),h){var v=h.getSize();this._ctx.beginPath(),this._ctx.rect(h.min.x,h.min.y,v.x,v.y),this._ctx.clip()}this._drawing=!0;for(var A=this._drawFirst;A;A=A.next)o=A.layer,(!h||o._pxBounds&&o._pxBounds.intersects(h))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,h){if(this._drawing){var v,A,k,G,ie=o._parts,pe=ie.length,Ee=this._ctx;if(pe){for(Ee.beginPath(),v=0;v<pe;v++){for(A=0,k=ie[v].length;A<k;A++)G=ie[v][A],Ee[A?"lineTo":"moveTo"](G.x,G.y);h&&Ee.closePath()}this._fillStroke(Ee,o)}}},_updateCircle:function(o){if(!(!this._drawing||o._empty())){var h=o._point,v=this._ctx,A=Math.max(Math.round(o._radius),1),k=(Math.max(Math.round(o._radiusY),1)||A)/A;k!==1&&(v.save(),v.scale(1,k)),v.beginPath(),v.arc(h.x,h.y/k,A,0,Math.PI*2,!1),k!==1&&v.restore(),this._fillStroke(v,o)}},_fillStroke:function(o,h){var v=h.options;v.fill&&(o.globalAlpha=v.fillOpacity,o.fillStyle=v.fillColor||v.color,o.fill(v.fillRule||"evenodd")),v.stroke&&v.weight!==0&&(o.setLineDash&&o.setLineDash(h.options&&h.options._dashArray||[]),o.globalAlpha=v.opacity,o.lineWidth=v.weight,o.strokeStyle=v.color,o.lineCap=v.lineCap,o.lineJoin=v.lineJoin,o.stroke())},_onClick:function(o){for(var h=this._map.mouseEventToLayerPoint(o),v,A,k=this._drawFirst;k;k=k.next)v=k.layer,v.options.interactive&&v._containsPoint(h)&&(!(o.type==="click"||o.type==="preclick")||!this._map._draggableMoved(v))&&(A=v);this._fireEvent(A?[A]:!1,o)},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var h=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,h)}},_handleMouseOut:function(o){var h=this._hoveredLayer;h&&(Yt(this._container,"leaflet-interactive"),this._fireEvent([h],o,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(o,h){if(!this._mouseHoverThrottled){for(var v,A,k=this._drawFirst;k;k=k.next)v=k.layer,v.options.interactive&&v._containsPoint(h)&&(A=v);A!==this._hoveredLayer&&(this._handleMouseOut(o),A&&(ht(this._container,"leaflet-interactive"),this._fireEvent([A],o,"mouseover"),this._hoveredLayer=A)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,o),this._mouseHoverThrottled=!0,setTimeout(c(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(o,h,v){this._map._fireDOMEvent(h,v||h.type,o)},_bringToFront:function(o){var h=o._order;if(h){var v=h.next,A=h.prev;if(v)v.prev=A;else return;A?A.next=v:v&&(this._drawFirst=v),h.prev=this._drawLast,this._drawLast.next=h,h.next=null,this._drawLast=h,this._requestRedraw(o)}},_bringToBack:function(o){var h=o._order;if(h){var v=h.next,A=h.prev;if(A)A.next=v;else return;v?v.prev=A:A&&(this._drawLast=A),h.prev=null,h.next=this._drawFirst,this._drawFirst.prev=h,this._drawFirst=h,this._requestRedraw(o)}}});function bl(o){return Ke.canvas?new El(o):null}var _a=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(o){return document.createElement("<lvml:"+o+' class="lvml">')}}catch{}return function(o){return document.createElement("<"+o+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),lo={_initContainer:function(){this._container=At("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ar.prototype._update.call(this),this.fire("update"))},_initPath:function(o){var h=o._container=_a("shape");ht(h,"leaflet-vml-shape "+(this.options.className||"")),h.coordsize="1 1",o._path=_a("path"),h.appendChild(o._path),this._updateStyle(o),this._layers[p(o)]=o},_addPath:function(o){var h=o._container;this._container.appendChild(h),o.options.interactive&&o.addInteractiveTarget(h)},_removePath:function(o){var h=o._container;Gt(h),o.removeInteractiveTarget(h),delete this._layers[p(o)]},_updateStyle:function(o){var h=o._stroke,v=o._fill,A=o.options,k=o._container;k.stroked=!!A.stroke,k.filled=!!A.fill,A.stroke?(h||(h=o._stroke=_a("stroke")),k.appendChild(h),h.weight=A.weight+"px",h.color=A.color,h.opacity=A.opacity,A.dashArray?h.dashStyle=K(A.dashArray)?A.dashArray.join(" "):A.dashArray.replace(/( *, *)/g," "):h.dashStyle="",h.endcap=A.lineCap.replace("butt","flat"),h.joinstyle=A.lineJoin):h&&(k.removeChild(h),o._stroke=null),A.fill?(v||(v=o._fill=_a("fill")),k.appendChild(v),v.color=A.fillColor||A.color,v.opacity=A.fillOpacity):v&&(k.removeChild(v),o._fill=null)},_updateCircle:function(o){var h=o._point.round(),v=Math.round(o._radius),A=Math.round(o._radiusY||v);this._setPath(o,o._empty()?"M0 0":"AL "+h.x+","+h.y+" "+v+","+A+" 0,"+65535*360)},_setPath:function(o,h){o._path.v=h},_bringToFront:function(o){Fr(o._container)},_bringToBack:function(o){Ps(o._container)}},wl=Ke.vml?_a:Ne,Us=Ar.extend({_initContainer:function(){this._container=wl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=wl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Gt(this._container),Dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ar.prototype._update.call(this);var o=this._bounds,h=o.getSize(),v=this._container;(!this._svgSize||!this._svgSize.equals(h))&&(this._svgSize=h,v.setAttribute("width",h.x),v.setAttribute("height",h.y)),at(v,o.min),v.setAttribute("viewBox",[o.min.x,o.min.y,h.x,h.y].join(" ")),this.fire("update")}},_initPath:function(o){var h=o._path=wl("path");o.options.className&&ht(h,o.options.className),o.options.interactive&&ht(h,"leaflet-interactive"),this._updateStyle(o),this._layers[p(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){Gt(o._path),o.removeInteractiveTarget(o._path),delete this._layers[p(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var h=o._path,v=o.options;h&&(v.stroke?(h.setAttribute("stroke",v.color),h.setAttribute("stroke-opacity",v.opacity),h.setAttribute("stroke-width",v.weight),h.setAttribute("stroke-linecap",v.lineCap),h.setAttribute("stroke-linejoin",v.lineJoin),v.dashArray?h.setAttribute("stroke-dasharray",v.dashArray):h.removeAttribute("stroke-dasharray"),v.dashOffset?h.setAttribute("stroke-dashoffset",v.dashOffset):h.removeAttribute("stroke-dashoffset")):h.setAttribute("stroke","none"),v.fill?(h.setAttribute("fill",v.fillColor||v.color),h.setAttribute("fill-opacity",v.fillOpacity),h.setAttribute("fill-rule",v.fillRule||"evenodd")):h.setAttribute("fill","none"))},_updatePoly:function(o,h){this._setPath(o,Oe(o._parts,h))},_updateCircle:function(o){var h=o._point,v=Math.max(Math.round(o._radius),1),A=Math.max(Math.round(o._radiusY),1)||v,k="a"+v+","+A+" 0 1,0 ",G=o._empty()?"M0 0":"M"+(h.x-v)+","+h.y+k+v*2+",0 "+k+-v*2+",0 ";this._setPath(o,G)},_setPath:function(o,h){o._path.setAttribute("d",h)},_bringToFront:function(o){Fr(o._path)},_bringToBack:function(o){Ps(o._path)}});Ke.vml&&Us.include(lo);function va(o){return Ke.svg||Ke.vml?new Us(o):null}vt.include({getRenderer:function(o){var h=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return h||(h=this._renderer=this._createRenderer()),this.hasLayer(h)||this.addLayer(h),h},_getPaneRenderer:function(o){if(o==="overlayPane"||o===void 0)return!1;var h=this._paneRenderers[o];return h===void 0&&(h=this._createRenderer({pane:o}),this._paneRenderers[o]=h),h},_createRenderer:function(o){return this.options.preferCanvas&&bl(o)||va(o)}});var _d=ro.extend({initialize:function(o,h){ro.prototype.initialize.call(this,this._boundsToLatLngs(o),h)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=he(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function Hi(o,h){return new _d(o,h)}Us.create=wl,Us.pointsToPath=Oe,Bi.geometryToLayer=gl,Bi.coordsToLatLng=cu,Bi.coordsToLatLngs=_l,Bi.latLngToCoords=vl,Bi.latLngsToCoords=hu,Bi.getFeature=br,Bi.asFeature=so,vt.mergeOptions({boxZoom:!0});var mu=Ai.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on("unload",this._destroy,this)},addHooks:function(){et(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Gt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){if(!o.shiftKey||o.which!==1&&o.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ti(),ua(),this._startPoint=this._map.mouseEventToContainerPoint(o),et(document,{contextmenu:ni,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=At("div","leaflet-zoom-box",this._container),ht(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(o);var h=new ne(this._point,this._startPoint),v=h.getSize();at(this._box,h.min),this._box.style.width=v.x+"px",this._box.style.height=v.y+"px"},_finish:function(){this._moved&&(Gt(this._box),Yt(this._container,"leaflet-crosshair")),gr(),ul(),Dt(document,{contextmenu:ni,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if(!(o.which!==1&&o.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(c(this._resetState,this),0);var h=new se(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(h).fire("boxzoomend",{boxZoomBounds:h})}},_onKeyDown:function(o){o.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});vt.addInitHook("addHandler","boxZoom",mu),vt.mergeOptions({doubleClickZoom:!0});var $r=Ai.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(o){var h=this._map,v=h.getZoom(),A=h.options.zoomDelta,k=o.originalEvent.shiftKey?v-A:v+A;h.options.doubleClickZoom==="center"?h.setZoom(k):h.setZoomAround(o.containerPoint,k)}});vt.addInitHook("addHandler","doubleClickZoom",$r),vt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Tc=Ai.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Er(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),o.on("zoomend",this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}ht(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Yt(this._map._container,"leaflet-grab"),Yt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var h=he(this._map.options.maxBounds);this._offsetLimit=le(this._map.latLngToContainerPoint(h.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(h.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire("movestart").fire("dragstart"),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var h=this._lastTime=+new Date,v=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(v),this._times.push(h),this._prunePositions(h)}this._map.fire("move",o).fire("drag",o)},_prunePositions:function(o){for(;this._positions.length>1&&o-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),h=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=h.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,h){return o-(o-h)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var o=this._draggable._newPos.subtract(this._draggable._startPos),h=this._offsetLimit;o.x<h.min.x&&(o.x=this._viscousLimit(o.x,h.min.x)),o.y<h.min.y&&(o.y=this._viscousLimit(o.y,h.min.y)),o.x>h.max.x&&(o.x=this._viscousLimit(o.x,h.max.x)),o.y>h.max.y&&(o.y=this._viscousLimit(o.y,h.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,h=Math.round(o/2),v=this._initialWorldOffset,A=this._draggable._newPos.x,k=(A-h+v)%o+h-v,G=(A+h+v)%o-h-v,ie=Math.abs(k+v)<Math.abs(G+v)?k:G;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ie},_onDragEnd:function(o){var h=this._map,v=h.options,A=!v.inertia||o.noInertia||this._times.length<2;if(h.fire("dragend",o),A)h.fire("moveend");else{this._prunePositions(+new Date);var k=this._lastPos.subtract(this._positions[0]),G=(this._lastTime-this._times[0])/1e3,ie=v.easeLinearity,pe=k.multiplyBy(ie/G),Ee=pe.distanceTo([0,0]),Ie=Math.min(v.inertiaMaxSpeed,Ee),Ue=pe.multiplyBy(Ie/Ee),ze=Ie/(v.inertiaDeceleration*ie),Ge=Ue.multiplyBy(-ze/2).round();!Ge.x&&!Ge.y?h.fire("moveend"):(Ge=h._limitOffset(Ge,h.options.maxBounds),j(function(){h.panBy(Ge,{duration:ze,easeLinearity:ie,noMoveStart:!0,animate:!0})}))}}});vt.addInitHook("addHandler","dragging",Tc),vt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Tl=Ai.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;o.tabIndex<=0&&(o.tabIndex="0"),et(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,h=document.documentElement,v=o.scrollTop||h.scrollTop,A=o.scrollLeft||h.scrollLeft;this._map._container.focus(),window.scrollTo(A,v)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(o){var h=this._panKeys={},v=this.keyCodes,A,k;for(A=0,k=v.left.length;A<k;A++)h[v.left[A]]=[-1*o,0];for(A=0,k=v.right.length;A<k;A++)h[v.right[A]]=[o,0];for(A=0,k=v.down.length;A<k;A++)h[v.down[A]]=[0,o];for(A=0,k=v.up.length;A<k;A++)h[v.up[A]]=[0,-1*o]},_setZoomDelta:function(o){var h=this._zoomKeys={},v=this.keyCodes,A,k;for(A=0,k=v.zoomIn.length;A<k;A++)h[v.zoomIn[A]]=o;for(A=0,k=v.zoomOut.length;A<k;A++)h[v.zoomOut[A]]=-o},_addHooks:function(){et(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var h=o.keyCode,v=this._map,A;if(h in this._panKeys){if(!v._panAnim||!v._panAnim._inProgress)if(A=this._panKeys[h],o.shiftKey&&(A=H(A).multiplyBy(3)),v.options.maxBounds&&(A=v._limitOffset(H(A),v.options.maxBounds)),v.options.worldCopyJump){var k=v.wrapLatLng(v.unproject(v.project(v.getCenter()).add(A)));v.panTo(k)}else v.panBy(A)}else if(h in this._zoomKeys)v.setZoom(v.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[h]);else if(h===27&&v._popup&&v._popup.options.closeOnEscapeKey)v.closePopup();else return;ni(o)}}});vt.addInitHook("addHandler","keyboard",Tl),vt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Bs=Ai.extend({addHooks:function(){et(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(o){var h=ca(o),v=this._map.options.wheelDebounceTime;this._delta+=h,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var A=Math.max(v-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(c(this._performZoom,this),A),ni(o)},_performZoom:function(){var o=this._map,h=o.getZoom(),v=this._map.options.zoomSnap||0;o._stop();var A=this._delta/(this._map.options.wheelPxPerZoomLevel*4),k=4*Math.log(2/(1+Math.exp(-Math.abs(A))))/Math.LN2,G=v?Math.ceil(k/v)*v:k,ie=o._limitZoom(h+(this._delta>0?G:-G))-h;this._delta=0,this._startTime=null,ie&&(o.options.scrollWheelZoom==="center"?o.setZoom(h+ie):o.setZoomAround(this._lastMousePos,h+ie))}});vt.addInitHook("addHandler","scrollWheelZoom",Bs);var Ac=600;vt.mergeOptions({tapHold:Ke.touchNative&&Ke.safari&&Ke.mobile,tapTolerance:15});var gu=Ai.extend({addHooks:function(){et(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(o){if(clearTimeout(this._holdTimeout),o.touches.length===1){var h=o.touches[0];this._startPos=this._newPos=new X(h.clientX,h.clientY),this._holdTimeout=setTimeout(c(function(){this._cancel(),this._isTapValid()&&(et(document,"touchend",en),et(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",h))},this),Ac),et(document,"touchend touchcancel contextmenu",this._cancel,this),et(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function o(){Dt(document,"touchend",en),Dt(document,"touchend touchcancel",o)},_cancel:function(){clearTimeout(this._holdTimeout),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)},_onMove:function(o){var h=o.touches[0];this._newPos=new X(h.clientX,h.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(o,h){var v=new MouseEvent(o,{bubbles:!0,cancelable:!0,view:window,screenX:h.screenX,screenY:h.screenY,clientX:h.clientX,clientY:h.clientY});v._simulated=!0,h.target.dispatchEvent(v)}});vt.addInitHook("addHandler","tapHold",gu),vt.mergeOptions({touchZoom:Ke.touch,bounceAtZoomLimits:!0});var ya=Ai.extend({addHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),et(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Yt(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(o){var h=this._map;if(!(!o.touches||o.touches.length!==2||h._animatingZoom||this._zooming)){var v=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=h.getSize()._divideBy(2),this._startLatLng=h.containerPointToLatLng(this._centerPoint),h.options.touchZoom!=="center"&&(this._pinchStartLatLng=h.containerPointToLatLng(v.add(A)._divideBy(2))),this._startDist=v.distanceTo(A),this._startZoom=h.getZoom(),this._moved=!1,this._zooming=!0,h._stop(),et(document,"touchmove",this._onTouchMove,this),et(document,"touchend touchcancel",this._onTouchEnd,this),en(o)}},_onTouchMove:function(o){if(!(!o.touches||o.touches.length!==2||!this._zooming)){var h=this._map,v=h.mouseEventToContainerPoint(o.touches[0]),A=h.mouseEventToContainerPoint(o.touches[1]),k=v.distanceTo(A)/this._startDist;if(this._zoom=h.getScaleZoom(k,this._startZoom),!h.options.bounceAtZoomLimits&&(this._zoom<h.getMinZoom()&&k<1||this._zoom>h.getMaxZoom()&&k>1)&&(this._zoom=h._limitZoom(this._zoom)),h.options.touchZoom==="center"){if(this._center=this._startLatLng,k===1)return}else{var G=v._add(A)._divideBy(2)._subtract(this._centerPoint);if(k===1&&G.x===0&&G.y===0)return;this._center=h.unproject(h.project(this._pinchStartLatLng,this._zoom).subtract(G),this._zoom)}this._moved||(h._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var ie=c(h._move,h,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=j(ie,this,!0),en(o)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});vt.addInitHook("addHandler","touchZoom",ya),vt.BoxZoom=mu,vt.DoubleClickZoom=$r,vt.Drag=Tc,vt.Keyboard=Tl,vt.ScrollWheelZoom=Bs,vt.TapHold=gu,vt.TouchZoom=ya,t.Bounds=ne,t.Browser=Ke,t.CRS=Fe,t.Canvas=El,t.Circle=Ec,t.CircleMarker=ml,t.Class=Q,t.Control=Yn,t.DivIcon=wc,t.DivOverlay=wr,t.DomEvent=ru,t.DomUtil=cl,t.Draggable=Er,t.Evented=F,t.FeatureGroup=sn,t.GeoJSON=Bi,t.GridLayer=ma,t.Handler=Ai,t.Icon=Zr,t.ImageOverlay=Kr,t.LatLng=ue,t.LatLngBounds=se,t.Layer=Zt,t.LayerGroup=hn,t.LineUtil=$,t.Map=vt,t.Marker=io,t.Mixin=da,t.Path=ps,t.Point=X,t.PolyUtil=Ja,t.Polygon=ro,t.Polyline=ms,t.Popup=yl,t.PosAnimation=ha,t.Projection=Pe,t.Rectangle=_d,t.Renderer=Ar,t.SVG=Us,t.SVGOverlay=Vs,t.TileLayer=ga,t.Tooltip=pu,t.Transformation=je,t.Util=D,t.VideoOverlay=fu,t.bind=c,t.bounds=le,t.canvas=bl,t.circle=dm,t.circleMarker=dd,t.control=ii,t.divIcon=gd,t.extend=s,t.featureGroup=Gr,t.geoJSON=du,t.geoJson=fd,t.gridLayer=Tr,t.icon=uu,t.imageOverlay=ao,t.latLng=ye,t.latLngBounds=he,t.layerGroup=fs,t.map=Hr,t.marker=yc,t.point=H,t.polygon=Ui,t.polyline=fm,t.popup=pm,t.rectangle=Hi,t.setOptions=O,t.stamp=p,t.svg=va,t.svgOverlay=md,t.tileLayer=Fi,t.tooltip=mm,t.transformation=Ze,t.version=i,t.videoOverlay=pd;var uo=window.L;t.noConflict=function(){return window.L=uo,this},window.L=t})}(yh,yh.exports)),yh.exports}var ld=S3();const xy=zh(ld);function Cy(n,e,t){return Object.freeze({instance:n,context:e,container:t})}function Ry(n,e){return e==null?function(i,s){const l=te.useRef(void 0);return l.current||(l.current=n(i,s)),l}:function(i,s){const l=te.useRef(void 0);l.current||(l.current=n(i,s));const c=te.useRef(i),{instance:f}=l.current;return te.useEffect(function(){c.current!==i&&(e(f,i,c.current),c.current=i)},[f,i,e]),l}}function x3(n,e){te.useEffect(function(){return(e.layerContainer??e.map).addLayer(n.instance),function(){e.layerContainer?.removeLayer(n.instance),e.map.removeLayer(n.instance)}},[e,n])}function y2(n){return function(t){const i=_2(),s=n(Sy(t,i),i);return g2(i.map,t.attribution),v2(s.current,t.eventHandlers),x3(s.current,i),s}}function C3(n,e){const t=Ry(n,e),i=y2(t);return E3(i)}function R3(n,e){const t=Ry(n),i=T3(t,e);return b3(i)}function I3(n,e){const t=Ry(n,e),i=y2(t);return w3(i)}function k3(n,e,t){const{opacity:i,zIndex:s}=e;i!=null&&i!==t.opacity&&n.setOpacity(i),s!=null&&s!==t.zIndex&&n.setZIndex(s)}function N3({bounds:n,boundsOptions:e,center:t,children:i,className:s,id:l,placeholder:c,style:f,whenReady:p,zoom:m,..._},E){const[b]=te.useState({className:s,id:l,style:f}),[C,I]=te.useState(null),O=te.useRef(void 0);te.useImperativeHandle(E,()=>C?.map??null,[C]);const M=te.useCallback(Y=>{if(Y!==null&&!O.current){const K=new ld.Map(Y,_);O.current=K,t!=null&&m!=null?K.setView(t,m):n!=null&&K.fitBounds(n,e),p!=null&&K.whenReady(p),I(v3(K))}},[]);te.useEffect(()=>()=>{C?.map.remove()},[C]);const z=C?Kt.createElement(Ay,{value:C},i):c??null;return Kt.createElement("div",{...b,ref:M},z)}const O3=te.forwardRef(N3),P3=C3(function({position:e,...t},i){const s=new ld.Marker(e,t);return Cy(s,y3(i,{overlayContainer:s}))},function(e,t,i){t.position!==i.position&&e.setLatLng(t.position),t.icon!=null&&t.icon!==i.icon&&e.setIcon(t.icon),t.zIndexOffset!=null&&t.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(t.zIndexOffset),t.opacity!=null&&t.opacity!==i.opacity&&e.setOpacity(t.opacity),e.dragging!=null&&t.draggable!==i.draggable&&(t.draggable===!0?e.dragging.enable():e.dragging.disable())}),M3=R3(function(e,t){const i=new ld.Popup(e,t.overlayContainer);return Cy(i,t)},function(e,t,{position:i},s){te.useEffect(function(){const{instance:c}=e;function f(m){m.popup===c&&(c.update(),s(!0))}function p(m){m.popup===c&&s(!1)}return t.map.on({popupopen:f,popupclose:p}),t.overlayContainer==null?(i!=null&&c.setLatLng(i),c.openOn(t.map)):t.overlayContainer.bindPopup(c),function(){t.map.off({popupopen:f,popupclose:p}),t.overlayContainer?.unbindPopup(),t.map.removeLayer(c)}},[e,t,s,i])}),D3=I3(function({url:e,...t},i){const s=new ld.TileLayer(e,Sy(t,i));return Cy(s,i)},function(e,t,i){k3(e,t,i);const{url:s}=t;s!=null&&s!==i.url&&e.setUrl(s)}),L3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAMAAAAhFXfZAAAC91BMVEVMaXEzeak2f7I4g7g3g7cua5gzeKg8hJo3grY4g7c3grU0gLI2frE0daAubJc2gbQwd6QzeKk2gLMtd5sxdKIua5g1frA2f7IydaM0e6w2fq41fK01eqo3grgubJgta5cxdKI1f7AydaQydaMxc6EubJgvbJkwcZ4ubZkwcJwubZgubJcydqUydKIxapgubJctbJcubZcubJcvbJYubJcvbZkubJctbJctbZcubJg2f7AubJcrbZcubJcubJcua5g3grY0fq8ubJcubJdEkdEwhsw6i88vhswuhcsuhMtBjMgthMsrg8srgss6is8qgcs8i9A9iMYtg8spgcoogMo7hcMngMonf8olfso4gr8kfck5iM8jfMk4iM8he8k1fro7itAgesk2hs8eecgzfLcofssdeMg0hc4cd8g2hcsxeLQbdsgZdcgxeLImfcszhM0vda4xgckzhM4xg84wf8Yxgs4udKsvfcQucqhUndROmdM1fK0wcZ8vb5w0eqpQm9MzeKhXoNVcpdYydKNWn9VZotVKltJFjsIwcJ1Rms9OlslLmtH///8+kc9epdYzd6dbo9VHkMM2f7FHmNBClM8ydqVcpNY9hro3gLM9hLczealQmcw3fa46f7A8gLMxc6I3eagyc6FIldJMl9JSnNRSntNNl9JPnNJFi75UnM9ZodVKksg8kM45jc09e6ZHltFBk883gbRBh7pDk9EwcaBzn784g7dKkcY2i81Om9M7j85Llc81is09g7Q4grY/j9A0eqxKmdFFltBEjcXf6fFImdBCiLxJl9FGlNFBi78yiMxVndEvbpo6js74+vx+psPP3+o/ks5HkcpGmNCjwdZCkNDM3ehYoNJEls+lxNkxh8xHks0+jdC1zd5Lg6r+/v/H2ufz9/o3jM3t8/edvdM/k89Th61OiLBSjbZklbaTt9BfptdjmL1AicBHj8hGk9FAgK1dkLNTjLRekrdClc/k7fM0icy0y9tgp9c4jc2NtM9Dlc8zicxeXZn3AAAAQ3RSTlMAHDdTb4yPA+LtnEQmC4L2EmHqB7XA0d0sr478x4/Yd5i1zOfyPkf1sLVq4Nh3FvjxopQ2/STNuFzUwFIwxKaejILpIBEV9wAABhVJREFUeF6s1NdyFEcYBeBeoQIhRAkLlRDGrhIgY3BJL8CVeKzuyXFzzjkn5ZxzzuScg3PO8cKzu70JkO0LfxdTU//pM9vTu7Xgf6KqOVTb9X7toRrVEfBf1HTVjZccrT/2by1VV928Yty9ZbVuucdz90frG8DBjl9pVApbOstvmMuvVgaNXSfAAd6pGxpy6yxf5ph43pS/4f3uoaGm2rdu72S9xzOvMymkZFq/ptDrk90mhW7e4zl7HLzhxGWPR20xmSxJ/VqldG5m9XhaVOA1DadsNh3Pu5L2N6QtPO/32JpqQBVVk20oy/Pi2s23WEvyfHbe1thadVQttvm7Llf65gGmXK67XtupyoM7HQhmXdLS8oGWJNeOJ3C5fG5XCEJnkez3/oFdsvgJ4l2ANZwhrJKk/7OSXa+3Vw2WJMlKnGkobouYk6T0TyX30klOUnTD9HJ5qpckL3EW/w4XF3Xd0FGywXUrstrclVsqz5Pd/sXFYyDnPdrLcQODmGOK47IZb4CmibmMn+MYRzFZ5jg33ZL/EJrWcszHmANy3ARBK/IXtciJy8VsitPSdE3uuHxzougojcUdr8/32atnz/ev3f/K5wtpxUTpcaI45zusVDpYtZi+jg0oU9b3x74h7+n9ABvYEZeKaVq0sh0AtLKsFtqNBdeT0MrSzwwlq9+x6xAO4tgOtSzbCjrNQQiNvQUbUEubvzBUeGw26yDCsRHCoLkTHDa7IdOLIThs/gHvChszh2CimE8peRs47cxANI0lYNB5y1DljpOF0IhzBDPOZnDOqYYbeGKECbPzWnXludPphw5c2YBq5zlwXphIbO4VDCZ0gnPfUO1TwZoYwAs2ExPCedAu9DAjfQUjzITQb3jNj0KG2Sgt6BHaQUdYzWz+XmBktOHwanXjaSTcwwziBcuMOtwBmqPrTOxFQR/DRKKPqyur0aiW6cULYsx6tBm0jXpR/AUWR6HRq9WVW6MRhIq5jLyjbaCTDCijyYJNpCajdyobP/eTw0iexBAKkJ3gA5KcQb2zBXsIBckn+xVv8jkZSaEFHE+jFEleAEfayRU0MouNoBmB/L50Ai/HSLIHxcrpCvnhSQAuakKp2C/YbCylJjXRVy/z3+Kv/RrNcCo+WUzlVEhzKffnTQnxeN9fWF88fiNCUdSTsaufaChKWInHeysygfpIqagoakW+vV20J8uyl6TyNKEZWV4oRSPyCkWpgOLSbkCObT8o2r6tlG58HQquf6O0v50tB7JM7F4EORd2dx/K0w/KHsVkLPaoYrwgP/y7krr3SSMA4zj+OBgmjYkxcdIJQyQRKgg2viX9Hddi9UBb29LrKR7CVVEEEXWojUkXNyfTNDE14W9gbHJNuhjDettN3ZvbOvdOqCD3Jp/9l+/wJE+9PkYGjx/fqkys3S2rMozM/o2106rfMUINo6hVqz+eu/hd1c4xTg0TAfy5kV+4UG6+IthHTU9woWmxuKNbTfuCSfovBCxq7EtHqvYL4Sm6F8GVxsSXHMQ07TOi1DKtZxjWaaIyi4CXWjxPccUw8WVbMYY5wxC1mzEyXMJWkllpRloi+Kkoq69sxBTlElF6aAxYUbjXNlhlDZilDnM4U5SlN5biRsRHnbx3mbeWjEh4mEyiuJDl5XcWVmX5GvNkFgLWZM5qwsop4/AWfLhU1cR7k1VVvcYCWRkOI6Xy5gmnphCYIkvzuNYzHzosq2oNk2RtSs8khfUOfHIDgR6ysYBaMpl4uEgk2U/oJTs9AaTSwma7dT69geAE2ZpEjUsn2ieJNHeKfrI3EcAGJ2ZaNgVuC8EBctCLc57P5u5led6IOBkIYkuQMrmmjChs4VkfOerHqSBkPzZlhe06RslZ3zMjk2sscqKwY0RcjKK+LWbzd7KiHhkncs/siFJ+V5eXxD34B8nVuJEpGJNmxN2gH3vSvp7J70tF+D1Ej8qUJD1TkErAND2GZwTFg/LubvmgiBG3SOvdlsqFQrkEzJCL1rstlnVFROixZoDDSuXQFHESwVGlcuQcMb/b42NgjLowh5MTDFE3vNB5qStRIErdCQEh6pLPR92anSUb/wAIhldAaDMpGgAAAABJRU5ErkJggg==",j3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",V3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC",d_=n=>{const e=`
    <svg viewBox="0 0 24 24" width="32" height="32" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"
            fill="${n}"/>
    </svg>`;return new xy.DivIcon({html:e,className:"leaflet-div-icon",iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]})},Pw={pendente:d_("#f97316"),aguardando_resposta:d_("#3b82f6"),confirmado:d_("#22c55e")};delete xy.Icon.Default.prototype._getIconUrl;xy.Icon.Default.mergeOptions({iconRetinaUrl:L3,iconUrl:j3,shadowUrl:V3});function U3({solicitacoes:n=[]}){const e=[-14.235,-51.9253];return T.jsx("div",{className:"leaflet-container",style:{height:"450px",width:"100%",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:T.jsxs(O3,{center:e,zoom:4,style:{height:"100%",width:"100%"},children:[T.jsx(D3,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),n.map(t=>t.latitude&&t.longitude&&Pw[t.status]?T.jsx(P3,{position:[t.latitude,t.longitude],icon:Pw[t.status],children:T.jsxs(M3,{children:[T.jsx("strong",{children:"Cliente:"})," ",t.cliente," ",T.jsx("br",{}),T.jsx("strong",{children:"Endereço:"})," ",t.endereco?.logradouro,", ",t.endereco?.numero," ",T.jsx("br",{}),T.jsx("strong",{children:"Status:"})," ",t.status]})},t.id):null)]})})}/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),F3=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()),Mw=n=>{const e=F3(n);return e.charAt(0).toUpperCase()+e.slice(1)},E2=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim(),z3=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=te.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c,...f},p)=>te.createElement("svg",{ref:p,...H3,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:E2("lucide",s),...!l&&!z3(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,_])=>te.createElement(m,_)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=(n,e)=>{const t=te.forwardRef(({className:i,...s},l)=>te.createElement(q3,{ref:l,iconNode:e,className:E2(`lucide-${B3(Mw(n))}`,`lucide-${n}`,i),...s}));return t.displayName=Mw(n),t};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Iy=xt("archive",G3);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],K3=xt("award",Z3);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Y3=xt("banknote",$3);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],b2=xt("briefcase",Q3);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],X3=xt("building-2",W3);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],w2=xt("building",J3);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],t6=xt("camera",e6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],i6=xt("chart-no-axes-column",n6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],s6=xt("circle-check-big",r6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ky=xt("circle-plus",a6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dp=xt("circle-x",o6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],u6=xt("clipboard-list",l6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],h6=xt("clock",c6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],f6=xt("credit-card",d6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ny=xt("file-text",p6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]],Dw=xt("gem",m6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],_6=xt("hash",g6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],y6=xt("hourglass",v6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],b6=xt("house",E6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],T6=xt("info",w6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],S6=xt("layout-dashboard",A6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Dr=xt("loader-circle",x6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R6=xt("log-out",C6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Oy=xt("map-pin",I6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],N6=xt("paperclip",k6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],P6=xt("printer",O6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],D6=xt("search",M6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],T2=xt("shield-check",L6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Py=xt("square-pen",j6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],A2=xt("star",V6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"qn84l0"}],["path",{d:"M13 5v2",key:"dyzc3o"}],["path",{d:"M13 17v2",key:"1ont0d"}],["path",{d:"M13 11v2",key:"1wjjxi"}]],B6=xt("ticket",U6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],My=xt("trash-2",F6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],S2=xt("triangle-alert",z6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],q6=xt("truck",H6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Z6=xt("upload",G6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ud=xt("user",K6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],x2=xt("users",$6);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Q6=xt("x",Y6);function W6(){const[n,e]=te.useState(""),[t,i]=te.useState([]),[s,l]=te.useState(!0),[c,f]=te.useState(0);return te.useEffect(()=>{const p=Rv(ir,m=>{e(m?m.email:"")});return()=>p()},[]),te.useEffect(()=>{const p=["pendente","aguardando_resposta","confirmado"],m=Mr(Xt,"solicitacoes"),_=ts(m,es("status","in",p)),E=nc(_,b=>{const C=[];let I=0;const O=new Date,M=new Date(O.getFullYear(),O.getMonth(),1);b.forEach(z=>{const Y={...z.data(),id:z.id};C.push(Y),Y.dataSolicitacao&&typeof Y.dataSolicitacao.toDate=="function"&&Y.dataSolicitacao.toDate()>=M&&typeof Y.valorServicoBruto=="number"&&(I+=Y.valorServicoBruto)}),i(C),f(I),l(!1)},b=>{console.error("Erro ao buscar dados do dashboard: ",b),l(!1)});return()=>E()},[]),T.jsxs("div",{className:"dashboard-container",children:[T.jsxs("header",{className:"dashboard-header",children:[T.jsxs("h1",{className:"dashboard-welcome",children:["Olá, ",n||"Gestor","!"]}),T.jsx("p",{children:"Aqui está um resumo da sua operação hoje."})]}),s?T.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"150px"},children:T.jsx(Dr,{size:32,className:"animate-spin"})}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"kpi-grid",children:[T.jsxs("div",{className:"kpi-card",children:[T.jsx("div",{className:"kpi-icon",style:{backgroundColor:"#e0f2fe"},children:T.jsx(b2,{size:24,color:"#0ea5e9"})}),T.jsxs("div",{className:"kpi-info",children:[T.jsx("div",{className:"kpi-value",children:t.length}),T.jsx("div",{className:"kpi-title",children:"Serviços Ativos"})]})]}),T.jsxs("div",{className:"kpi-card",children:[T.jsx("div",{className:"kpi-icon",style:{backgroundColor:"#dcfce7"},children:T.jsx(i6,{size:24,color:"#22c55e"})}),T.jsxs("div",{className:"kpi-info",children:[T.jsx("div",{className:"kpi-value",children:c.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),T.jsx("div",{className:"kpi-title",children:"Custo (Mês Atual)"})]})]}),T.jsxs("div",{className:"kpi-card",children:[T.jsx("div",{className:"kpi-icon",style:{backgroundColor:"#fef3c7"},children:T.jsx(A2,{size:24,color:"#f59e0b"})}),T.jsxs("div",{className:"kpi-info",children:[T.jsx("div",{className:"kpi-value",children:"4.8"}),T.jsx("div",{className:"kpi-title",children:"Avaliação Média"})]})]})]}),T.jsxs("div",{style:{marginTop:"2.5rem"},children:[T.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem",color:"#333"},children:"Mapa de Operações"}),T.jsxs("div",{className:"map-legend",style:{display:"flex",gap:"20px",marginBottom:"1rem",flexWrap:"wrap"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("span",{style:{height:"15px",width:"15px",backgroundColor:"#f97316",borderRadius:"50%"}}),T.jsx("span",{children:"Pendente"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("span",{style:{height:"15px",width:"15px",backgroundColor:"#3b82f6",borderRadius:"50%"}}),T.jsx("span",{children:"Aguardando Resposta"})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("span",{style:{height:"15px",width:"15px",backgroundColor:"#22c55e",borderRadius:"50%"}}),T.jsx("span",{children:"Confirmado"})]})]}),T.jsx(U3,{solicitacoes:t})]})]})]})}function Go(n){return typeof n=="string"||n instanceof String}function Lw(n){var e;return typeof n=="object"&&n!=null&&(n==null||(e=n.constructor)==null?void 0:e.name)==="Object"}function C2(n,e){return Array.isArray(e)?C2(n,(t,i)=>e.includes(i)):Object.entries(n).reduce((t,i)=>{let[s,l]=i;return e(l,s)&&(t[s]=l),t},{})}const We={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function X6(n){switch(n){case We.LEFT:return We.FORCE_LEFT;case We.RIGHT:return We.FORCE_RIGHT;default:return n}}function f_(n){return n.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function fp(n,e){if(e===n)return!0;const t=Array.isArray(e),i=Array.isArray(n);let s;if(t&&i){if(e.length!=n.length)return!1;for(s=0;s<e.length;s++)if(!fp(e[s],n[s]))return!1;return!0}if(t!=i)return!1;if(e&&n&&typeof e=="object"&&typeof n=="object"){const l=e instanceof Date,c=n instanceof Date;if(l&&c)return e.getTime()==n.getTime();if(l!=c)return!1;const f=e instanceof RegExp,p=n instanceof RegExp;if(f&&p)return e.toString()==n.toString();if(f!=p)return!1;const m=Object.keys(e);for(s=0;s<m.length;s++)if(!Object.prototype.hasOwnProperty.call(n,m[s]))return!1;for(s=0;s<m.length;s++)if(!fp(n[m[s]],e[m[s]]))return!1;return!0}else if(e&&n&&typeof e=="function"&&typeof n=="function")return e.toString()===n.toString();return!1}class J6{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?We.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?We.RIGHT:We.LEFT}}function dt(n,e){return new dt.InputMask(n,e)}function R2(n){if(n==null)throw new Error("mask property should be defined");return n instanceof RegExp?dt.MaskedRegExp:Go(n)?dt.MaskedPattern:n===Date?dt.MaskedDate:n===Number?dt.MaskedNumber:Array.isArray(n)||n===Array?dt.MaskedDynamic:dt.Masked&&n.prototype instanceof dt.Masked?n:dt.Masked&&n instanceof dt.Masked?n.constructor:n instanceof Function?dt.MaskedFunction:(console.warn("Mask not found for mask",n),dt.Masked)}function Bh(n){if(!n)throw new Error("Options in not defined");if(dt.Masked){if(n.prototype instanceof dt.Masked)return{mask:n};const{mask:e=void 0,...t}=n instanceof dt.Masked?{mask:n}:Lw(n)&&n.mask instanceof dt.Masked?n:{};if(e){const i=e.mask;return{...C2(e,(s,l)=>!l.startsWith("_")),mask:e.constructor,_mask:i,...t}}}return Lw(n)?{...n}:{mask:n}}function Ba(n){if(dt.Masked&&n instanceof dt.Masked)return n;const e=Bh(n),t=R2(e.mask);if(!t)throw new Error("Masked class is not found for provided mask "+e.mask+", appropriate module needs to be imported manually before creating mask.");return e.mask===t&&delete e.mask,e._mask&&(e.mask=e._mask,delete e._mask),new t(e)}dt.createMask=Ba;class Dy{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch{}return e??this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch{}return e??this.value.length}select(e,t){if(!(e==null||t==null||e===this.selectionStart&&t===this.selectionEnd))try{this._unsafeSelect(e,t)}catch{}}get isActive(){return!1}}dt.MaskElement=Dy;const jw=90,e5=89;class em extends Dy{constructor(e){super(),this.input=e,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var e,t,i;return(e=(t=(i=this.input).getRootNode)==null?void 0:t.call(i))!=null?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",e.drop),this.input.addEventListener("click",e.click),this.input.addEventListener("focus",e.focus),this.input.addEventListener("blur",e.commit),this._handlers=e}_onKeydown(e){if(this._handlers.redo&&(e.keyCode===jw&&e.shiftKey&&(e.metaKey||e.ctrlKey)||e.keyCode===e5&&e.ctrlKey))return e.preventDefault(),this._handlers.redo(e);if(this._handlers.undo&&e.keyCode===jw&&(e.metaKey||e.ctrlKey))return e.preventDefault(),this._handlers.undo(e);e.isComposing||this._handlers.selectionChange(e)}_onBeforeinput(e){if(e.inputType==="historyUndo"&&this._handlers.undo)return e.preventDefault(),this._handlers.undo(e);if(e.inputType==="historyRedo"&&this._handlers.redo)return e.preventDefault(),this._handlers.redo(e)}_onCompositionEnd(e){this._handlers.input(e)}_onInput(e){e.isComposing||this._handlers.input(e)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}dt.HTMLMaskElement=em;class t5 extends em{constructor(e){super(e),this.input=e}get _unsafeSelectionStart(){return this.input.selectionStart!=null?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,t){this.input.setSelectionRange(e,t)}get value(){return this.input.value}set value(e){this.input.value=e}}dt.HTMLMaskElement=em;class I2 extends em{get _unsafeSelectionStart(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),i=t&&t.anchorOffset,s=t&&t.focusOffset;return s==null||i==null||i<s?i:s}get _unsafeSelectionEnd(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),i=t&&t.anchorOffset,s=t&&t.focusOffset;return s==null||i==null||i>s?i:s}_unsafeSelect(e,t){if(!this.rootElement.createRange)return;const i=this.rootElement.createRange();i.setStart(this.input.firstChild||this.input,e),i.setEnd(this.input.lastChild||this.input,t);const s=this.rootElement,l=s.getSelection&&s.getSelection();l&&(l.removeAllRanges(),l.addRange(i))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}}dt.HTMLContenteditableMaskElement=I2;class tm{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return this.states.length===0}push(e){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(e),this.states.length>tm.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(e){return this.currentIndex=Math.min(Math.max(this.currentIndex+e,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}tm.MAX_LENGTH=100;class n5{constructor(e,t){this.el=e instanceof Dy?e:e.isContentEditable&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"?new I2(e):new t5(e),this.masked=Ba(t),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new tm,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var t;return e==null||((t=this.masked)==null?void 0:t.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof dt.Masked)&&this.masked.constructor===R2(e)){this.masked.updateOptions({mask:e});return}const t=e instanceof dt.Masked?e:Ba({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(e){this.rawInputValue!==e&&(this.masked.rawInputValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,t){const i=this._listeners[e];i&&i.forEach(s=>s(t))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){!this.el||!this.el.isActive||(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(e){const t=this.masked.unmaskedValue,i=this.masked.value,s=this.masked.rawInputValue,l=this.displayValue,c=this.unmaskedValue!==t||this.value!==i||this._rawInputValue!==s;this._unmaskedValue=t,this._value=i,this._rawInputValue=s,this.el.value!==l&&(this.el.value=l),e==="auto"?this.alignCursor():e!=null&&(this.cursorPos=e),c&&this._fireChangeEvents(),!this._historyChanging&&(c||this.history.isEmpty)&&this.history.push({unmaskedValue:t,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(e){const{mask:t,...i}=e,s=!this.maskEquals(t),l=this.masked.optionsIsChanged(i);s&&(this.mask=t),l&&this.masked.updateOptions(i),(s||l)&&this.updateControl()}updateCursor(e){e!=null&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,We.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}off(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;const i=this._listeners[e].indexOf(t);return i>=0&&this._listeners[e].splice(i,1),this}_onInput(e){this._inputEvent=e,this._abortUpdateCursor();const t=new J6({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),i=this.masked.rawInputValue,s=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,l=i===this.masked.rawInputValue?t.removeDirection:We.NONE;let c=this.masked.nearestInputPos(t.startChangePos+s,l);l!==We.NONE&&(c=this.masked.nearestInputPos(c,We.NONE)),this.updateControl(c),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(e){e&&(this._historyChanging=!0,this.unmaskedValue=e.unmaskedValue,this.el.select(e.selection.start,e.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}}dt.InputMask=n5;class bt{static normalize(e){return Array.isArray(e)?e:[e,new bt]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},e)}aggregate(e){return this.inserted+=e.inserted,this.rawInserted+=e.rawInserted,this.tailShift+=e.tailShift,this.skip=this.skip||e.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return!!this.rawInserted||this.skip}equals(e){return this.inserted===e.inserted&&this.tailShift===e.tailShift&&this.rawInserted===e.rawInserted&&this.skip===e.skip}}dt.ChangeDetails=bt;class Qs{constructor(e,t,i){e===void 0&&(e=""),t===void 0&&(t=0),this.value=e,this.from=t,this.stop=i}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||e!=null&&this.from>=e)return"";const t=this.value[0];return this.value=this.value.slice(1),t}shift(){if(!this.value.length)return"";const e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}class Pi{constructor(e){this._value="",this._update({...Pi.DEFAULTS,...e}),this._initialized=!0}updateOptions(e){this.optionsIsChanged(e)&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,t){t===void 0&&(t={input:!0}),this.reset(),this.append(e,t,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,t){return e}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),Math.min(this.displayValue.length,t-e)}extractInput(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),this.displayValue.slice(e,t)}extractTail(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),new Qs(this.extractInput(e,t),e)}appendTail(e){return Go(e)&&(e=new Qs(String(e))),e.appendTo(this)}_appendCharRaw(e,t){return e?(this._value+=e,new bt({inserted:e,rawInserted:e})):new bt}_appendChar(e,t,i){t===void 0&&(t={});const s=this.state;let l;if([e,l]=this.doPrepareChar(e,t),e&&(l=l.aggregate(this._appendCharRaw(e,t)),!l.rawInserted&&this.autofix==="pad")){const c=this.state;this.state=s;let f=this.pad(t);const p=this._appendCharRaw(e,t);f=f.aggregate(p),p.rawInserted||f.equals(l)?l=f:this.state=c}if(l.inserted){let c,f=this.doValidate(t)!==!1;if(f&&i!=null){const p=this.state;if(this.overwrite===!0){c=i.state;for(let _=0;_<l.rawInserted.length;++_)i.unshift(this.displayValue.length-l.tailShift)}let m=this.appendTail(i);if(f=m.rawInserted.length===i.toString().length,!(f&&m.inserted)&&this.overwrite==="shift"){this.state=p,c=i.state;for(let _=0;_<l.rawInserted.length;++_)i.shift();m=this.appendTail(i),f=m.rawInserted.length===i.toString().length}f&&m.inserted&&(this.state=p)}f||(l=new bt,this.state=s,i&&c&&(i.state=c))}return l}_appendPlaceholder(){return new bt}_appendEager(){return new bt}append(e,t,i){if(!Go(e))throw new Error("value should be string");const s=Go(i)?new Qs(String(i)):i;t!=null&&t.tail&&(t._beforeTailState=this.state);let l;[e,l]=this.doPrepare(e,t);for(let c=0;c<e.length;++c){const f=this._appendChar(e[c],t,s);if(!f.rawInserted&&!this.doSkipInvalid(e[c],t,s))break;l.aggregate(f)}return(this.eager===!0||this.eager==="append")&&t!=null&&t.input&&e&&l.aggregate(this._appendEager()),s!=null&&(l.tailShift+=this.appendTail(s).tailShift),l}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),this._value=this.displayValue.slice(0,e)+this.displayValue.slice(t),new bt}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;const t=this.rawInputValue,i=this.value,s=e();return this.rawInputValue=t,this.value&&this.value!==i&&i.indexOf(this.value)===0&&(this.append(i.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,s}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;const t=this.state,i=e(this);return this.state=t,delete this._isolated,i}doSkipInvalid(e,t,i){return!!this.skipInvalid}doPrepare(e,t){return t===void 0&&(t={}),bt.normalize(this.prepare?this.prepare(e,this,t):e)}doPrepareChar(e,t){return t===void 0&&(t={}),bt.normalize(this.prepareChar?this.prepareChar(e,this,t):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,t,i,s,l){i===void 0&&(i=""),s===void 0&&(s=We.NONE),l===void 0&&(l={input:!0});const c=e+t,f=this.extractTail(c),p=this.eager===!0||this.eager==="remove";let m;p&&(s=X6(s),m=this.extractInput(0,c,{raw:!0}));let _=e;const E=new bt;if(s!==We.NONE&&(_=this.nearestInputPos(e,t>1&&e!==0&&!p?We.NONE:s),E.tailShift=_-e),E.aggregate(this.remove(_)),p&&s!==We.NONE&&m===this.rawInputValue)if(s===We.FORCE_LEFT){let b;for(;m===this.rawInputValue&&(b=this.displayValue.length);)E.aggregate(new bt({tailShift:-1})).aggregate(this.remove(b-1))}else s===We.FORCE_RIGHT&&f.unshift();return E.aggregate(this.append(i,l,f))}maskEquals(e){return this.mask===e}optionsIsChanged(e){return!fp(this,e)}typedValueEquals(e){const t=this.typedValue;return e===t||Pi.EMPTY_VALUES.includes(e)&&Pi.EMPTY_VALUES.includes(t)||(this.format?this.format(e,this)===this.format(this.typedValue,this):!1)}pad(e){return new bt}}Pi.DEFAULTS={skipInvalid:!0};Pi.EMPTY_VALUES=[void 0,null,""];dt.Masked=Pi;class Ll{constructor(e,t){e===void 0&&(e=[]),t===void 0&&(t=0),this.chunks=e,this.from=t}toString(){return this.chunks.map(String).join("")}extend(e){if(!String(e))return;e=Go(e)?new Qs(String(e)):e;const t=this.chunks[this.chunks.length-1],i=t&&(t.stop===e.stop||e.stop==null)&&e.from===t.from+t.toString().length;if(e instanceof Qs)i?t.extend(e.toString()):this.chunks.push(e);else if(e instanceof Ll){if(e.stop==null){let s;for(;e.chunks.length&&e.chunks[0].stop==null;)s=e.chunks.shift(),s.from+=e.from,this.extend(s)}e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}appendTo(e){if(!(e instanceof dt.MaskedPattern))return new Qs(this.toString()).appendTo(e);const t=new bt;for(let i=0;i<this.chunks.length;++i){const s=this.chunks[i],l=e._mapPosToBlock(e.displayValue.length),c=s.stop;let f;if(c!=null&&(!l||l.index<=c)&&((s instanceof Ll||e._stops.indexOf(c)>=0)&&t.aggregate(e._appendPlaceholder(c)),f=s instanceof Ll&&e._blocks[c]),f){const p=f.appendTail(s);t.aggregate(p);const m=s.toString().slice(p.rawInserted.length);m&&t.aggregate(e.append(m,{tail:!0}))}else t.aggregate(e.append(s.toString(),{tail:!0}))}return t}get state(){return{chunks:this.chunks.map(e=>e.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){const{chunks:t,...i}=e;Object.assign(this,i),this.chunks=t.map(s=>{const l="chunks"in s?new Ll:new Qs;return l.state=s,l})}unshift(e){if(!this.chunks.length||e!=null&&this.from>=e)return"";const t=e!=null?e-this.from:e;let i=0;for(;i<this.chunks.length;){const s=this.chunks[i],l=s.unshift(t);if(s.toString()){if(!l)break;++i}else this.chunks.splice(i,1);if(l)return l}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){const t=this.chunks[e],i=t.shift();if(t.toString()){if(!i)break;--e}else this.chunks.splice(e,1);if(i)return i}return""}}class i5{constructor(e,t){this.masked=e,this._log=[];const{offset:i,index:s}=e._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=i,this.index=s,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){const e=this._log.pop();return e&&(this.state=e),e}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=((t=this.block)==null?void 0:t.displayValue.length)||0){var t;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,We.FORCE_LEFT),this.offset!==0))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,We.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,We.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!(this.block.isFixed||!this.block.value)&&(this.offset=this.block.nearestInputPos(this.offset,We.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,We.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,We.NONE),!0})}}class k2{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new bt}nearestInputPos(e,t){t===void 0&&(t=We.NONE);const i=0,s=this._value.length;switch(t){case We.LEFT:case We.FORCE_LEFT:return i;case We.NONE:case We.RIGHT:case We.FORCE_RIGHT:default:return s}}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),this._isRawInput?t-e:0}extractInput(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=this._value.length),i===void 0&&(i={}),i.raw&&this._isRawInput&&this._value.slice(e,t)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(e,t){if(t===void 0&&(t={}),this.isFilled)return new bt;const i=this.eager===!0||this.eager==="append",l=this.char===e&&(this.isUnmasking||t.input||t.raw)&&(!t.raw||!i)&&!t.tail,c=new bt({inserted:this.char,rawInserted:l?this.char:""});return this._value=this.char,this._isRawInput=l&&(t.raw||t.input),c}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const e=new bt;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new Qs("")}appendTail(e){return Go(e)&&(e=new Qs(String(e))),e.appendTo(this)}append(e,t,i){const s=this._appendChar(e[0],t);return i!=null&&(s.tailShift+=this.appendTail(i).tailShift),s}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=!!e._rawInputValue}pad(e){return this._appendPlaceholder()}}class pp{constructor(e){const{parent:t,isOptional:i,placeholderChar:s,displayChar:l,lazy:c,eager:f,...p}=e;this.masked=Ba(p),Object.assign(this,{parent:t,isOptional:i,placeholderChar:s,displayChar:l,lazy:c,eager:f})}reset(){this.isFilled=!1,this.masked.reset()}remove(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.value.length),e===0&&t>=1?(this.isFilled=!1,this.masked.remove(e,t)):new bt}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(e,t){if(t===void 0&&(t={}),this.isFilled)return new bt;const i=this.masked.state;let s=this.masked._appendChar(e,this.currentMaskFlags(t));return s.inserted&&this.doValidate(t)===!1&&(s=new bt,this.masked.state=i),!s.inserted&&!this.isOptional&&!this.lazy&&!t.input&&(s.inserted=this.placeholderChar),s.skip=!s.inserted&&!this.isOptional,this.isFilled=!!s.inserted,s}append(e,t,i){return this.masked.append(e,this.currentMaskFlags(t),i)}_appendPlaceholder(){return this.isFilled||this.isOptional?new bt:(this.isFilled=!0,new bt({inserted:this.placeholderChar}))}_appendEager(){return new bt}extractTail(e,t){return this.masked.extractTail(e,t)}appendTail(e){return this.masked.appendTail(e)}extractInput(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=this.value.length),this.masked.extractInput(e,t,i)}nearestInputPos(e,t){t===void 0&&(t=We.NONE);const i=0,s=this.value.length,l=Math.min(Math.max(e,i),s);switch(t){case We.LEFT:case We.FORCE_LEFT:return this.isComplete?l:i;case We.RIGHT:case We.FORCE_RIGHT:return this.isComplete?l:s;case We.NONE:default:return l}}totalInputPositions(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.value.length),this.value.slice(e,t).length}doValidate(e){return this.masked.doValidate(this.currentMaskFlags(e))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(e)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(e){this.masked.state=e.masked,this.isFilled=e.isFilled}currentMaskFlags(e){var t;return{...e,_beforeTailState:(e==null||(t=e._beforeTailState)==null?void 0:t.masked)||e?._beforeTailState}}pad(e){return new bt}}pp.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./};class r5 extends Pi{updateOptions(e){super.updateOptions(e)}_update(e){const t=e.mask;t&&(e.validate=i=>i.search(t)>=0),super._update(e)}}dt.MaskedRegExp=r5;class Mi extends Pi{constructor(e){super({...Mi.DEFAULTS,...e,definitions:Object.assign({},pp.DEFAULT_DEFINITIONS,e?.definitions)})}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){const e=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const t=this.mask;if(!t||!e)return;let i=!1,s=!1;for(let l=0;l<t.length;++l){if(this.blocks){const m=t.slice(l),_=Object.keys(this.blocks).filter(b=>m.indexOf(b)===0);_.sort((b,C)=>C.length-b.length);const E=_[0];if(E){const{expose:b,repeat:C,...I}=Bh(this.blocks[E]),O={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...I,repeat:C,parent:this},M=C!=null?new dt.RepeatBlock(O):Ba(O);M&&(this._blocks.push(M),b&&(this.exposeBlock=M),this._maskedBlocks[E]||(this._maskedBlocks[E]=[]),this._maskedBlocks[E].push(this._blocks.length-1)),l+=E.length-1;continue}}let c=t[l],f=c in e;if(c===Mi.STOP_CHAR){this._stops.push(this._blocks.length);continue}if(c==="{"||c==="}"){i=!i;continue}if(c==="["||c==="]"){s=!s;continue}if(c===Mi.ESCAPE_CHAR){if(++l,c=t[l],!c)break;f=!1}const p=f?new pp({isOptional:s,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...Bh(e[c]),parent:this}):new k2({char:c,eager:this.eager,isUnmasking:i});this._blocks.push(p)}}get state(){return{...super.state,_blocks:this._blocks.map(e=>e.state)}}set state(e){if(!e){this.reset();return}const{_blocks:t,...i}=e;this._blocks.forEach((s,l)=>s.state=t[l]),super.state=i}reset(){super.reset(),this._blocks.forEach(e=>e.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(e=>e.isComplete)}get isFilled(){return this._blocks.every(e=>e.isFilled)}get isFixed(){return this._blocks.every(e=>e.isFixed)}get isOptional(){return this._blocks.every(e=>e.isOptional)}doCommit(){this._blocks.forEach(e=>e.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((e,t)=>e+=t.unmaskedValue,"")}set unmaskedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=e,this.appendTail(t),this.doCommit()}else super.unmaskedValue=e}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((e,t)=>e+=t.value,"")}set value(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=e,this.appendTail(t),this.doCommit()}else super.value=e}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=e,this.appendTail(t),this.doCommit()}else super.typedValue=e}get displayValue(){return this._blocks.reduce((e,t)=>e+=t.displayValue,"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;const t=new bt;let i=(e=this._mapPosToBlock(this.displayValue.length))==null?void 0:e.index;if(i==null)return t;this._blocks[i].isFilled&&++i;for(let s=i;s<this._blocks.length;++s){const l=this._blocks[s]._appendEager();if(!l.inserted)break;t.aggregate(l)}return t}_appendCharRaw(e,t){t===void 0&&(t={});const i=this._mapPosToBlock(this.displayValue.length),s=new bt;if(!i)return s;for(let c=i.index,f;f=this._blocks[c];++c){var l;const p=f._appendChar(e,{...t,_beforeTailState:(l=t._beforeTailState)==null||(l=l._blocks)==null?void 0:l[c]});if(s.aggregate(p),p.consumed)break}return s}extractTail(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);const i=new Ll;return e===t||this._forEachBlocksInRange(e,t,(s,l,c,f)=>{const p=s.extractTail(c,f);p.stop=this._findStopBefore(l),p.from=this._blockStartPos(l),p instanceof Ll&&(p.blockIndex=l),i.extend(p)}),i}extractInput(e,t,i){if(e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),i===void 0&&(i={}),e===t)return"";let s="";return this._forEachBlocksInRange(e,t,(l,c,f,p)=>{s+=l.extractInput(f,p,i)}),s}_findStopBefore(e){let t;for(let i=0;i<this._stops.length;++i){const s=this._stops[i];if(s<=e)t=s;else break}return t}_appendPlaceholder(e){const t=new bt;if(this.lazy&&e==null)return t;const i=this._mapPosToBlock(this.displayValue.length);if(!i)return t;const s=i.index,l=e??this._blocks.length;return this._blocks.slice(s,l).forEach(c=>{if(!c.lazy||e!=null){var f;t.aggregate(c._appendPlaceholder((f=c._blocks)==null?void 0:f.length))}}),t}_mapPosToBlock(e){let t="";for(let i=0;i<this._blocks.length;++i){const s=this._blocks[i],l=t.length;if(t+=s.displayValue,e<=t.length)return{index:i,offset:e-l}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce((t,i)=>t+=i.displayValue.length,0)}_forEachBlocksInRange(e,t,i){t===void 0&&(t=this.displayValue.length);const s=this._mapPosToBlock(e);if(s){const l=this._mapPosToBlock(t),c=l&&s.index===l.index,f=s.offset,p=l&&c?l.offset:this._blocks[s.index].displayValue.length;if(i(this._blocks[s.index],s.index,f,p),l&&!c){for(let m=s.index+1;m<l.index;++m)i(this._blocks[m],m,0,this._blocks[m].displayValue.length);i(this._blocks[l.index],l.index,0,l.offset)}}}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);const i=super.remove(e,t);return this._forEachBlocksInRange(e,t,(s,l,c,f)=>{i.aggregate(s.remove(c,f))}),i}nearestInputPos(e,t){if(t===void 0&&(t=We.NONE),!this._blocks.length)return 0;const i=new i5(this,e);if(t===We.NONE)return i.pushRightBeforeInput()||(i.popState(),i.pushLeftBeforeInput())?i.pos:this.displayValue.length;if(t===We.LEFT||t===We.FORCE_LEFT){if(t===We.LEFT){if(i.pushRightBeforeFilled(),i.ok&&i.pos===e)return e;i.popState()}if(i.pushLeftBeforeInput(),i.pushLeftBeforeRequired(),i.pushLeftBeforeFilled(),t===We.LEFT){if(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.ok&&i.pos<=e||(i.popState(),i.ok&&i.pos<=e))return i.pos;i.popState()}return i.ok?i.pos:t===We.FORCE_LEFT?0:(i.popState(),i.ok||(i.popState(),i.ok)?i.pos:0)}return t===We.RIGHT||t===We.FORCE_RIGHT?(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.pushRightBeforeFilled()?i.pos:t===We.FORCE_RIGHT?this.displayValue.length:(i.popState(),i.ok||(i.popState(),i.ok)?i.pos:this.nearestInputPos(e,We.LEFT))):e}totalInputPositions(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);let i=0;return this._forEachBlocksInRange(e,t,(s,l,c,f)=>{i+=s.totalInputPositions(c,f)}),i}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){const t=this._maskedBlocks[e];return t?t.map(i=>this._blocks[i]):[]}pad(e){const t=new bt;return this._forEachBlocksInRange(0,this.displayValue.length,i=>t.aggregate(i.pad(e))),t}}Mi.DEFAULTS={...Pi.DEFAULTS,lazy:!0,placeholderChar:"_"};Mi.STOP_CHAR="`";Mi.ESCAPE_CHAR="\\";Mi.InputDefinition=pp;Mi.FixedDefinition=k2;dt.MaskedPattern=Mi;class Lf extends Mi{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){const{to:t=this.to||0,from:i=this.from||0,maxLength:s=this.maxLength||0,autofix:l=this.autofix,...c}=e;this.to=t,this.from=i,this.maxLength=Math.max(String(t).length,s),this.autofix=l;const f=String(this.from).padStart(this.maxLength,"0"),p=String(this.to).padStart(this.maxLength,"0");let m=0;for(;m<p.length&&p[m]===f[m];)++m;c.mask=p.slice(0,m).replace(/0/g,"\\0")+"0".repeat(this.maxLength-m),super._update(c)}get isComplete(){return super.isComplete&&!!this.value}boundaries(e){let t="",i="";const[,s,l]=e.match(/^(\D*)(\d*)(\D*)/)||[];return l&&(t="0".repeat(s.length)+l,i="9".repeat(s.length)+l),t=t.padEnd(this.maxLength,"0"),i=i.padEnd(this.maxLength,"9"),[t,i]}doPrepareChar(e,t){t===void 0&&(t={});let i;return[e,i]=super.doPrepareChar(e.replace(/\D/g,""),t),e||(i.skip=!this.isComplete),[e,i]}_appendCharRaw(e,t){if(t===void 0&&(t={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(e,t);const i=String(this.from).padStart(this.maxLength,"0"),s=String(this.to).padStart(this.maxLength,"0"),[l,c]=this.boundaries(this.value+e);return Number(c)<this.from?super._appendCharRaw(i[this.value.length],t):Number(l)>this.to?!t.tail&&this.autofix==="pad"&&this.value.length+1<this.maxLength?super._appendCharRaw(i[this.value.length],t).aggregate(this._appendCharRaw(e,t)):super._appendCharRaw(s[this.value.length],t):super._appendCharRaw(e,t)}doValidate(e){const t=this.value;if(t.search(/[^0]/)===-1&&t.length<=this._matchFrom)return!0;const[s,l]=this.boundaries(t);return this.from<=Number(l)&&Number(s)<=this.to&&super.doValidate(e)}pad(e){const t=new bt;if(this.value.length===this.maxLength)return t;const i=this.value,s=this.maxLength-this.value.length;if(s){this.reset();for(let l=0;l<s;++l)t.aggregate(super._appendCharRaw("0",e));i.split("").forEach(l=>this._appendCharRaw(l))}return t}}dt.MaskedRange=Lf;const s5="d{.}`m{.}`Y";class Ra extends Mi{static extractPatternOptions(e){const{mask:t,pattern:i,...s}=e;return{...s,mask:Go(t)?t:i}}constructor(e){super(Ra.extractPatternOptions({...Ra.DEFAULTS,...e}))}updateOptions(e){super.updateOptions(e)}_update(e){const{mask:t,pattern:i,blocks:s,...l}={...Ra.DEFAULTS,...e},c=Object.assign({},Ra.GET_DEFAULT_BLOCKS());e.min&&(c.Y.from=e.min.getFullYear()),e.max&&(c.Y.to=e.max.getFullYear()),e.min&&e.max&&c.Y.from===c.Y.to&&(c.m.from=e.min.getMonth()+1,c.m.to=e.max.getMonth()+1,c.m.from===c.m.to&&(c.d.from=e.min.getDate(),c.d.to=e.max.getDate())),Object.assign(c,this.blocks,s),super._update({...l,mask:Go(t)?t:i,blocks:c})}doValidate(e){const t=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&t!=null&&(this.min==null||this.min<=t)&&(this.max==null||t<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}optionsIsChanged(e){return super.optionsIsChanged(Ra.extractPatternOptions(e))}}Ra.GET_DEFAULT_BLOCKS=()=>({d:{mask:Lf,from:1,to:31,maxLength:2},m:{mask:Lf,from:1,to:12,maxLength:2},Y:{mask:Lf,from:1900,to:9999}});Ra.DEFAULTS={...Mi.DEFAULTS,mask:Date,pattern:s5,format:(n,e)=>{if(!n)return"";const t=String(n.getDate()).padStart(2,"0"),i=String(n.getMonth()+1).padStart(2,"0"),s=n.getFullYear();return[t,i,s].join(".")},parse:(n,e)=>{const[t,i,s]=n.split(".").map(Number);return new Date(s,i-1,t)}};dt.MaskedDate=Ra;class nm extends Pi{constructor(e){super({...nm.DEFAULTS,...e}),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(e.mask)?e.mask.map(t=>{const{expose:i,...s}=Bh(t),l=Ba({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...s});return i&&(this.exposeMask=l),l}):[])}_appendCharRaw(e,t){t===void 0&&(t={});const i=this._applyDispatch(e,t);return this.currentMask&&i.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t))),i}_applyDispatch(e,t,i){e===void 0&&(e=""),t===void 0&&(t={}),i===void 0&&(i="");const s=t.tail&&t._beforeTailState!=null?t._beforeTailState._value:this.value,l=this.rawInputValue,c=t.tail&&t._beforeTailState!=null?t._beforeTailState._rawInputValue:l,f=l.slice(c.length),p=this.currentMask,m=new bt,_=p?.state;return this.currentMask=this.doDispatch(e,{...t},i),this.currentMask&&(this.currentMask!==p?(this.currentMask.reset(),c&&(this.currentMask.append(c,{raw:!0}),m.tailShift=this.currentMask.value.length-s.length),f&&(m.tailShift+=this.currentMask.append(f,{raw:!0,tail:!0}).tailShift)):_&&(this.currentMask.state=_)),m}_appendPlaceholder(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){const t=new bt;return e&&t.aggregate(this._applyDispatch("",{},e)),t.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var t,i;return{...e,_beforeTailState:((t=e._beforeTailState)==null?void 0:t.currentMaskRef)===this.currentMask&&((i=e._beforeTailState)==null?void 0:i.currentMask)||e._beforeTailState}}doDispatch(e,t,i){return t===void 0&&(t={}),i===void 0&&(i=""),this.dispatch(e,this,t,i)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,t){t===void 0&&(t={});let[i,s]=super.doPrepare(e,t);if(this.currentMask){let l;[i,l]=super.doPrepare(i,this.currentMaskFlags(t)),s=s.aggregate(l)}return[i,s]}doPrepareChar(e,t){t===void 0&&(t={});let[i,s]=super.doPrepareChar(e,t);if(this.currentMask){let l;[i,l]=super.doPrepareChar(i,this.currentMaskFlags(t)),s=s.aggregate(l)}return[i,s]}reset(){var e;(e=this.currentMask)==null||e.reset(),this.compiledMasks.forEach(t=>t.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(e){this.exposeMask?(this.exposeMask.value=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=e}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){this.exposeMask?(this.exposeMask.unmaskedValue=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=e}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(e){if(this.exposeMask){this.exposeMask.typedValue=e,this.currentMask=this.exposeMask,this._applyDispatch();return}let t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return!!((e=this.currentMask)!=null&&e.isComplete)}get isFilled(){var e;return!!((e=this.currentMask)!=null&&e.isFilled)}remove(e,t){const i=new bt;return this.currentMask&&i.aggregate(this.currentMask.remove(e,t)).aggregate(this._applyDispatch()),i}get state(){var e;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(t=>t.state),currentMaskRef:this.currentMask,currentMask:(e=this.currentMask)==null?void 0:e.state}}set state(e){const{compiledMasks:t,currentMaskRef:i,currentMask:s,...l}=e;t&&this.compiledMasks.forEach((c,f)=>c.state=t[f]),i!=null&&(this.currentMask=i,this.currentMask.state=s),super.state=l}extractInput(e,t,i){return this.currentMask?this.currentMask.extractInput(e,t,i):""}extractTail(e,t){return this.currentMask?this.currentMask.extractTail(e,t):super.extractTail(e,t)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,t){return this.currentMask?this.currentMask.nearestInputPos(e,t):super.nearestInputPos(e,t)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(e){this._autofix=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every((t,i)=>{if(!e[i])return;const{mask:s,...l}=e[i];return fp(t,l)&&t.maskEquals(s)}):super.maskEquals(e)}typedValueEquals(e){var t;return!!((t=this.currentMask)!=null&&t.typedValueEquals(e))}}nm.DEFAULTS={...Pi.DEFAULTS,dispatch:(n,e,t,i)=>{if(!e.compiledMasks.length)return;const s=e.rawInputValue,l=e.compiledMasks.map((c,f)=>{const p=e.currentMask===c,m=p?c.displayValue.length:c.nearestInputPos(c.displayValue.length,We.FORCE_LEFT);return c.rawInputValue!==s?(c.reset(),c.append(s,{raw:!0})):p||c.remove(m),c.append(n,e.currentMaskFlags(t)),c.appendTail(i),{index:f,weight:c.rawInputValue.length,totalInputPositions:c.totalInputPositions(0,Math.max(m,c.nearestInputPos(c.displayValue.length,We.FORCE_LEFT)))}});return l.sort((c,f)=>f.weight-c.weight||f.totalInputPositions-c.totalInputPositions),e.compiledMasks[l[0].index]}};dt.MaskedDynamic=nm;class im extends Mi{constructor(e){super({...im.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){const{enum:t,...i}=e;if(t){const s=t.map(f=>f.length),l=Math.min(...s),c=Math.max(...s)-l;i.mask="*".repeat(l),c&&(i.mask+="["+"*".repeat(c)+"]"),this.enum=t}super._update(i)}_appendCharRaw(e,t){t===void 0&&(t={});const i=Math.min(this.nearestInputPos(0,We.FORCE_RIGHT),this.value.length),s=this.enum.filter(l=>this.matchValue(l,this.unmaskedValue+e,i));if(s.length){s.length===1&&this._forEachBlocksInRange(0,this.value.length,(c,f)=>{const p=s[0][f];f>=this.value.length||p===c.value||(c.reset(),c._appendChar(p,t))});const l=super._appendCharRaw(s[0][this.value.length],t);return s.length===1&&s[0].slice(this.unmaskedValue.length).split("").forEach(c=>l.aggregate(super._appendCharRaw(c))),l}return new bt({skip:!this.isComplete})}extractTail(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),new Qs("",e)}remove(e,t){if(e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),e===t)return new bt;const i=Math.min(super.nearestInputPos(0,We.FORCE_RIGHT),this.value.length);let s;for(s=e;s>=0&&!(this.enum.filter(f=>this.matchValue(f,this.value.slice(i,s),i)).length>1);--s);const l=super.remove(s,t);return l.tailShift+=s-e,l}get isComplete(){return this.enum.indexOf(this.value)>=0}}im.DEFAULTS={...Mi.DEFAULTS,matchValue:(n,e,t)=>n.indexOf(e,t)===t};dt.MaskedEnum=im;class a5 extends Pi{updateOptions(e){super.updateOptions(e)}_update(e){super._update({...e,validate:e.mask})}}dt.MaskedFunction=a5;var N2;class Nr extends Pi{constructor(e){super({...Nr.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){const e="^"+(this.allowNegative?"[+|\\-]?":""),t="\\d*",i=(this.scale?"("+f_(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(e+t+i),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(f_).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(f_(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){const t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}doPrepareChar(e,t){t===void 0&&(t={});const[i,s]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(t.input&&t.raw||!t.input&&!t.raw)?e.replace(this._mapToRadixRegExp,this.radix):e),t);return e&&!i&&(s.skip=!0),i&&!this.allowPositive&&!this.value&&i!=="-"&&s.aggregate(this._appendChar("-")),[i,s]}_separatorsCount(e,t){t===void 0&&(t=!1);let i=0;for(let s=0;s<e;++s)this._value.indexOf(this.thousandsSeparator,s)===s&&(++i,t&&(e+=this.thousandsSeparator.length));return i}_separatorsCountFromSlice(e){return e===void 0&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,t,i){return e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t),this._removeThousandsSeparators(super.extractInput(e,t,i))}_appendCharRaw(e,t){t===void 0&&(t={});const i=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,s=this._separatorsCountFromSlice(i);this._value=this._removeThousandsSeparators(this.value);const l=this._value;this._value+=e;const c=this.number;let f=!isNaN(c),p=!1;if(f){let b;this.min!=null&&this.min<0&&this.number<this.min&&(b=this.min),this.max!=null&&this.max>0&&this.number>this.max&&(b=this.max),b!=null&&(this.autofix?(this._value=this.format(b,this).replace(Nr.UNMASKED_RADIX,this.radix),p||(p=l===this._value&&!t.tail)):f=!1),f&&(f=!!this._value.match(this._numberRegExp))}let m;f?m=new bt({inserted:this._value.slice(l.length),rawInserted:p?"":e,skip:p}):(this._value=l,m=new bt),this._value=this._insertThousandsSeparators(this._value);const _=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,E=this._separatorsCountFromSlice(_);return m.tailShift+=(E-s)*this.thousandsSeparator.length,m}_findSeparatorAround(e){if(this.thousandsSeparator){const t=e-this.thousandsSeparator.length+1,i=this.value.indexOf(this.thousandsSeparator,t);if(i<=e)return i}return-1}_adjustRangeWithSeparators(e,t){const i=this._findSeparatorAround(e);i>=0&&(e=i);const s=this._findSeparatorAround(t);return s>=0&&(t=s+this.thousandsSeparator.length),[e,t]}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t);const i=this.value.slice(0,e),s=this.value.slice(t),l=this._separatorsCount(i.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(i+s));const c=this._separatorsCountFromSlice(i);return new bt({tailShift:(c-l)*this.thousandsSeparator.length})}nearestInputPos(e,t){if(!this.thousandsSeparator)return e;switch(t){case We.NONE:case We.LEFT:case We.FORCE_LEFT:{const i=this._findSeparatorAround(e-1);if(i>=0){const s=i+this.thousandsSeparator.length;if(e<s||this.value.length<=s||t===We.FORCE_LEFT)return i}break}case We.RIGHT:case We.FORCE_RIGHT:{const i=this._findSeparatorAround(e);if(i>=0)return i+this.thousandsSeparator.length}}return e}doCommit(){if(this.value){const e=this.number;let t=e;this.min!=null&&(t=Math.max(t,this.min)),this.max!=null&&(t=Math.min(t,this.max)),t!==e&&(this.unmaskedValue=this.format(t,this));let i=this.value;this.normalizeZeros&&(i=this._normalizeZeros(i)),this.padFractionalZeros&&this.scale>0&&(i=this._padFractionalZeros(i)),this._value=i}super.doCommit()}_normalizeZeros(e){const t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,(i,s,l,c)=>s+c),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}_padFractionalZeros(e){if(!e)return e;const t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}doSkipInvalid(e,t,i){t===void 0&&(t={});const s=this.scale===0&&e!==this.thousandsSeparator&&(e===this.radix||e===Nr.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,t,i)&&!s}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,Nr.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(Nr.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return this.min!=null&&this.min<0||this.max!=null&&this.max<0}get allowPositive(){return this.min!=null&&this.min>0||this.max!=null&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||Nr.EMPTY_VALUES.includes(e)&&Nr.EMPTY_VALUES.includes(this.typedValue))&&!(e===0&&this.value==="")}}N2=Nr;Nr.UNMASKED_RADIX=".";Nr.EMPTY_VALUES=[...Pi.EMPTY_VALUES,0];Nr.DEFAULTS={...Pi.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[N2.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:n=>n.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})};dt.MaskedNumber=Nr;const J_={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function O2(n,e,t){e===void 0&&(e=J_.MASKED),t===void 0&&(t=J_.MASKED);const i=Ba(n);return s=>i.runIsolated(l=>(l[e]=s,l[t]))}function o5(n,e,t,i){return O2(e,t,i)(n)}dt.PIPE_TYPE=J_;dt.createPipe=O2;dt.pipe=o5;class l5 extends Mi{get repeatFrom(){var e;return(e=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)!=null?e:0}get repeatTo(){var e;return(e=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)!=null?e:1/0}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){var t,i,s;const{repeat:l,...c}=Bh(e);this._blockOpts=Object.assign({},this._blockOpts,c);const f=Ba(this._blockOpts);this.repeat=(t=(i=l??f.repeat)!=null?i:this.repeat)!=null?t:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&((s=this._blocks)==null?void 0:s.length)||0,this.repeatFrom)),blocks:{m:f},eager:f.eager,overwrite:f.overwrite,skipInvalid:f.skipInvalid,lazy:f.lazy,placeholderChar:f.placeholderChar,displayChar:f.displayChar})}_allocateBlock(e){if(e<this._blocks.length)return this._blocks[e];if(this.repeatTo===1/0||this._blocks.length<this.repeatTo)return this._blocks.push(Ba(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]}_appendCharRaw(e,t){t===void 0&&(t={});const i=new bt;for(let p=(s=(l=this._mapPosToBlock(this.displayValue.length))==null?void 0:l.index)!=null?s:Math.max(this._blocks.length-1,0),m,_;m=(c=this._blocks[p])!=null?c:_=!_&&this._allocateBlock(p);++p){var s,l,c,f;const E=m._appendChar(e,{...t,_beforeTailState:(f=t._beforeTailState)==null||(f=f._blocks)==null?void 0:f[p]});if(E.skip&&_){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(i.aggregate(E),E.consumed)break}return i}_trimEmptyTail(e,t){var i,s;e===void 0&&(e=0);const l=Math.max(((i=this._mapPosToBlock(e))==null?void 0:i.index)||0,this.repeatFrom,0);let c;t!=null&&(c=(s=this._mapPosToBlock(t))==null?void 0:s.index),c==null&&(c=this._blocks.length-1);let f=0;for(let p=c;l<=p&&!this._blocks[p].unmaskedValue;--p,++f);f&&(this._blocks.splice(c-f+1,f),this.mask=this.mask.slice(f))}reset(){super.reset(),this._trimEmptyTail()}remove(e,t){e===void 0&&(e=0),t===void 0&&(t=this.displayValue.length);const i=super.remove(e,t);return this._trimEmptyTail(e,t),i}totalInputPositions(e,t){return e===void 0&&(e=0),t==null&&this.repeatTo===1/0?1/0:super.totalInputPositions(e,t)}get state(){return super.state}set state(e){this._blocks.length=e._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=e}}dt.RepeatBlock=l5;try{globalThis.IMask=dt}catch{}var p_={exports:{}},m_,Vw;function u5(){if(Vw)return m_;Vw=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return m_=n,m_}var g_,Uw;function c5(){if(Uw)return g_;Uw=1;var n=u5();function e(){}function t(){}return t.resetWarningCache=e,g_=function(){function i(c,f,p,m,_,E){if(E!==n){var b=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw b.name="Invariant Violation",b}}i.isRequired=i;function s(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},g_}var Bw;function h5(){return Bw||(Bw=1,p_.exports=c5()()),p_.exports}var d5=h5();const $e=zh(d5),P2={mask:$e.oneOfType([$e.array,$e.func,$e.string,$e.instanceOf(RegExp),$e.oneOf([Date,Number,dt.Masked]),$e.instanceOf(dt.Masked)]),value:$e.any,unmask:$e.oneOfType([$e.bool,$e.oneOf(["typed"])]),prepare:$e.func,prepareChar:$e.func,validate:$e.func,commit:$e.func,overwrite:$e.oneOfType([$e.bool,$e.oneOf(["shift"])]),eager:$e.oneOfType([$e.bool,$e.oneOf(["append","remove"])]),skipInvalid:$e.bool,onAccept:$e.func,onComplete:$e.func,placeholderChar:$e.string,displayChar:$e.string,lazy:$e.bool,definitions:$e.object,blocks:$e.object,enum:$e.arrayOf($e.string),maxLength:$e.number,from:$e.number,to:$e.number,pattern:$e.string,format:$e.func,parse:$e.func,autofix:$e.oneOfType([$e.bool,$e.oneOf(["pad"])]),radix:$e.string,thousandsSeparator:$e.string,mapToRadix:$e.arrayOf($e.string),scale:$e.number,normalizeZeros:$e.bool,padFractionalZeros:$e.bool,min:$e.oneOfType([$e.number,$e.instanceOf(Date)]),max:$e.oneOfType([$e.number,$e.instanceOf(Date)]),dispatch:$e.func,inputRef:$e.oneOfType([$e.func,$e.shape({current:$e.object})])},M2=Object.keys(P2).filter(n=>n!=="value"),f5=["value","unmask","onAccept","onComplete","inputRef"],p5=M2.filter(n=>f5.indexOf(n)<0);function m5(n){var e;const t=(e=class extends Kt.Component{constructor(l){super(l),this._inputRef=this._inputRef.bind(this)}componentDidMount(){this.props.mask&&this.initMask()}componentDidUpdate(){const l=this.props,c=this._extractMaskOptionsFromProps(l);if(c.mask)this.maskRef?(this.maskRef.updateOptions(c),"value"in l&&l.value!==void 0&&(this.maskValue=l.value)):this.initMask(c);else if(this.destroyMask(),"value"in l&&l.value!==void 0){var f;(f=this.element)!=null&&f.isContentEditable&&this.element.tagName!=="INPUT"&&this.element.tagName!=="TEXTAREA"?this.element.textContent=l.value:this.element.value=l.value}}componentWillUnmount(){this.destroyMask()}_inputRef(l){this.element=l,this.props.inputRef&&(Object.prototype.hasOwnProperty.call(this.props.inputRef,"current")?this.props.inputRef.current=l:this.props.inputRef(l))}initMask(l){l===void 0&&(l=this._extractMaskOptionsFromProps(this.props)),this.maskRef=dt(this.element,l).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this)),"value"in this.props&&this.props.value!==void 0&&(this.maskValue=this.props.value)}destroyMask(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)}_extractMaskOptionsFromProps(l){const{...c}=l;return Object.keys(c).filter(f=>p5.indexOf(f)<0).forEach(f=>{delete c[f]}),c}_extractNonMaskProps(l){const{...c}=l;return M2.forEach(f=>{f!=="maxLength"&&delete c[f]}),"defaultValue"in c||(c.defaultValue=l.mask?"":c.value),delete c.value,c}get maskValue(){return this.maskRef?this.props.unmask==="typed"?this.maskRef.typedValue:this.props.unmask?this.maskRef.unmaskedValue:this.maskRef.value:""}set maskValue(l){this.maskRef&&(l=l==null&&this.props.unmask!=="typed"?"":l,this.props.unmask==="typed"?this.maskRef.typedValue=l:this.props.unmask?this.maskRef.unmaskedValue=l:this.maskRef.value=l)}_onAccept(l){this.props.onAccept&&this.maskRef&&this.props.onAccept(this.maskValue,this.maskRef,l)}_onComplete(l){this.props.onComplete&&this.maskRef&&this.props.onComplete(this.maskValue,this.maskRef,l)}render(){return Kt.createElement(n,{...this._extractNonMaskProps(this.props),inputRef:this._inputRef})}},e.displayName=void 0,e.propTypes=void 0,e),i=n.displayName||n.name||"Component";return t.displayName="IMask("+i+")",t.propTypes=P2,Kt.forwardRef((s,l)=>Kt.createElement(t,{...s,ref:l}))}const g5=m5(n=>{let{inputRef:e,...t}=n;return Kt.createElement("input",{...t,ref:e})}),_5=(n,e)=>Kt.createElement(g5,{...n,ref:e}),Eh=Kt.forwardRef(_5);function D2(n,e){return function(){return n.apply(e,arguments)}}const{toString:v5}=Object.prototype,{getPrototypeOf:Ly}=Object,{iterator:rm,toStringTag:L2}=Symbol,sm=(n=>e=>{const t=v5.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Rs=n=>(n=n.toLowerCase(),e=>sm(e)===n),am=n=>e=>typeof e===n,{isArray:pc}=Array,Fh=am("undefined");function y5(n){return n!==null&&!Fh(n)&&n.constructor!==null&&!Fh(n.constructor)&&lr(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const j2=Rs("ArrayBuffer");function E5(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&j2(n.buffer),e}const b5=am("string"),lr=am("function"),V2=am("number"),om=n=>n!==null&&typeof n=="object",w5=n=>n===!0||n===!1,jf=n=>{if(sm(n)!=="object")return!1;const e=Ly(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(L2 in n)&&!(rm in n)},T5=Rs("Date"),A5=Rs("File"),S5=Rs("Blob"),x5=Rs("FileList"),C5=n=>om(n)&&lr(n.pipe),R5=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||lr(n.append)&&((e=sm(n))==="formdata"||e==="object"&&lr(n.toString)&&n.toString()==="[object FormData]"))},I5=Rs("URLSearchParams"),[k5,N5,O5,P5]=["ReadableStream","Request","Response","Headers"].map(Rs),M5=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function cd(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),pc(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{const l=t?Object.getOwnPropertyNames(n):Object.keys(n),c=l.length;let f;for(i=0;i<c;i++)f=l[i],e.call(null,n[f],f,n)}}function U2(n,e){e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,B2=n=>!Fh(n)&&n!==jl;function ev(){const{caseless:n}=B2(this)&&this||{},e={},t=(i,s)=>{const l=n&&U2(e,s)||s;jf(e[l])&&jf(i)?e[l]=ev(e[l],i):jf(i)?e[l]=ev({},i):pc(i)?e[l]=i.slice():e[l]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&cd(arguments[i],t);return e}const D5=(n,e,t,{allOwnKeys:i}={})=>(cd(e,(s,l)=>{t&&lr(s)?n[l]=D2(s,t):n[l]=s},{allOwnKeys:i}),n),L5=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),j5=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},V5=(n,e,t,i)=>{let s,l,c;const f={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),l=s.length;l-- >0;)c=s[l],(!i||i(c,n,e))&&!f[c]&&(e[c]=n[c],f[c]=!0);n=t!==!1&&Ly(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},U5=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},B5=n=>{if(!n)return null;if(pc(n))return n;let e=n.length;if(!V2(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},F5=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Ly(Uint8Array)),z5=(n,e)=>{const i=(n&&n[rm]).call(n);let s;for(;(s=i.next())&&!s.done;){const l=s.value;e.call(n,l[0],l[1])}},H5=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},q5=Rs("HTMLFormElement"),G5=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),Fw=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Z5=Rs("RegExp"),F2=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};cd(t,(s,l)=>{let c;(c=e(s,l,n))!==!1&&(i[l]=c||s)}),Object.defineProperties(n,i)},K5=n=>{F2(n,(e,t)=>{if(lr(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(lr(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},$5=(n,e)=>{const t={},i=s=>{s.forEach(l=>{t[l]=!0})};return pc(n)?i(n):i(String(n).split(e)),t},Y5=()=>{},Q5=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function W5(n){return!!(n&&lr(n.append)&&n[L2]==="FormData"&&n[rm])}const X5=n=>{const e=new Array(10),t=(i,s)=>{if(om(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const l=pc(i)?[]:{};return cd(i,(c,f)=>{const p=t(c,s+1);!Fh(p)&&(l[f]=p)}),e[s]=void 0,l}}return i};return t(n,0)},J5=Rs("AsyncFunction"),ej=n=>n&&(om(n)||lr(n))&&lr(n.then)&&lr(n.catch),z2=((n,e)=>n?setImmediate:e?((t,i)=>(jl.addEventListener("message",({source:s,data:l})=>{s===jl&&l===t&&i.length&&i.shift()()},!1),s=>{i.push(s),jl.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",lr(jl.postMessage)),tj=typeof queueMicrotask<"u"?queueMicrotask.bind(jl):typeof process<"u"&&process.nextTick||z2,nj=n=>n!=null&&lr(n[rm]),Te={isArray:pc,isArrayBuffer:j2,isBuffer:y5,isFormData:R5,isArrayBufferView:E5,isString:b5,isNumber:V2,isBoolean:w5,isObject:om,isPlainObject:jf,isReadableStream:k5,isRequest:N5,isResponse:O5,isHeaders:P5,isUndefined:Fh,isDate:T5,isFile:A5,isBlob:S5,isRegExp:Z5,isFunction:lr,isStream:C5,isURLSearchParams:I5,isTypedArray:F5,isFileList:x5,forEach:cd,merge:ev,extend:D5,trim:M5,stripBOM:L5,inherits:j5,toFlatObject:V5,kindOf:sm,kindOfTest:Rs,endsWith:U5,toArray:B5,forEachEntry:z5,matchAll:H5,isHTMLForm:q5,hasOwnProperty:Fw,hasOwnProp:Fw,reduceDescriptors:F2,freezeMethods:K5,toObjectSet:$5,toCamelCase:G5,noop:Y5,toFiniteNumber:Q5,findKey:U2,global:jl,isContextDefined:B2,isSpecCompliantForm:W5,toJSONObject:X5,isAsyncFn:J5,isThenable:ej,setImmediate:z2,asap:tj,isIterable:nj};function gt(n,e,t,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}Te.inherits(gt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Te.toJSONObject(this.config),code:this.code,status:this.status}}});const H2=gt.prototype,q2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{q2[n]={value:n}});Object.defineProperties(gt,q2);Object.defineProperty(H2,"isAxiosError",{value:!0});gt.from=(n,e,t,i,s,l)=>{const c=Object.create(H2);return Te.toFlatObject(n,c,function(p){return p!==Error.prototype},f=>f!=="isAxiosError"),gt.call(c,n.message,e,t,i,s),c.cause=n,c.name=n.name,l&&Object.assign(c,l),c};const ij=null;function tv(n){return Te.isPlainObject(n)||Te.isArray(n)}function G2(n){return Te.endsWith(n,"[]")?n.slice(0,-2):n}function zw(n,e,t){return n?n.concat(e).map(function(s,l){return s=G2(s),!t&&l?"["+s+"]":s}).join(t?".":""):e}function rj(n){return Te.isArray(n)&&!n.some(tv)}const sj=Te.toFlatObject(Te,{},null,function(e){return/^is[A-Z]/.test(e)});function lm(n,e,t){if(!Te.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=Te.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(O,M){return!Te.isUndefined(M[O])});const i=t.metaTokens,s=t.visitor||_,l=t.dots,c=t.indexes,p=(t.Blob||typeof Blob<"u"&&Blob)&&Te.isSpecCompliantForm(e);if(!Te.isFunction(s))throw new TypeError("visitor must be a function");function m(I){if(I===null)return"";if(Te.isDate(I))return I.toISOString();if(Te.isBoolean(I))return I.toString();if(!p&&Te.isBlob(I))throw new gt("Blob is not supported. Use a Buffer instead.");return Te.isArrayBuffer(I)||Te.isTypedArray(I)?p&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function _(I,O,M){let z=I;if(I&&!M&&typeof I=="object"){if(Te.endsWith(O,"{}"))O=i?O:O.slice(0,-2),I=JSON.stringify(I);else if(Te.isArray(I)&&rj(I)||(Te.isFileList(I)||Te.endsWith(O,"[]"))&&(z=Te.toArray(I)))return O=G2(O),z.forEach(function(K,J){!(Te.isUndefined(K)||K===null)&&e.append(c===!0?zw([O],J,l):c===null?O:O+"[]",m(K))}),!1}return tv(I)?!0:(e.append(zw(M,O,l),m(I)),!1)}const E=[],b=Object.assign(sj,{defaultVisitor:_,convertValue:m,isVisitable:tv});function C(I,O){if(!Te.isUndefined(I)){if(E.indexOf(I)!==-1)throw Error("Circular reference detected in "+O.join("."));E.push(I),Te.forEach(I,function(z,Y){(!(Te.isUndefined(z)||z===null)&&s.call(e,z,Te.isString(Y)?Y.trim():Y,O,b))===!0&&C(z,O?O.concat(Y):[Y])}),E.pop()}}if(!Te.isObject(n))throw new TypeError("data must be an object");return C(n),e}function Hw(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function jy(n,e){this._pairs=[],n&&lm(n,this,e)}const Z2=jy.prototype;Z2.append=function(e,t){this._pairs.push([e,t])};Z2.toString=function(e){const t=e?function(i){return e.call(this,i,Hw)}:Hw;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function aj(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function K2(n,e,t){if(!e)return n;const i=t&&t.encode||aj;Te.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let l;if(s?l=s(e,t):l=Te.isURLSearchParams(e)?e.toString():new jy(e,t).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class qw{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Te.forEach(this.handlers,function(i){i!==null&&e(i)})}}const $2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oj=typeof URLSearchParams<"u"?URLSearchParams:jy,lj=typeof FormData<"u"?FormData:null,uj=typeof Blob<"u"?Blob:null,cj={isBrowser:!0,classes:{URLSearchParams:oj,FormData:lj,Blob:uj},protocols:["http","https","file","blob","url","data"]},Vy=typeof window<"u"&&typeof document<"u",nv=typeof navigator=="object"&&navigator||void 0,hj=Vy&&(!nv||["ReactNative","NativeScript","NS"].indexOf(nv.product)<0),dj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fj=Vy&&window.location.href||"http://localhost",pj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Vy,hasStandardBrowserEnv:hj,hasStandardBrowserWebWorkerEnv:dj,navigator:nv,origin:fj},Symbol.toStringTag,{value:"Module"})),Oi={...pj,...cj};function mj(n,e){return lm(n,new Oi.classes.URLSearchParams,Object.assign({visitor:function(t,i,s,l){return Oi.isNode&&Te.isBuffer(t)?(this.append(i,t.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function gj(n){return Te.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function _j(n){const e={},t=Object.keys(n);let i;const s=t.length;let l;for(i=0;i<s;i++)l=t[i],e[l]=n[l];return e}function Y2(n){function e(t,i,s,l){let c=t[l++];if(c==="__proto__")return!0;const f=Number.isFinite(+c),p=l>=t.length;return c=!c&&Te.isArray(s)?s.length:c,p?(Te.hasOwnProp(s,c)?s[c]=[s[c],i]:s[c]=i,!f):((!s[c]||!Te.isObject(s[c]))&&(s[c]=[]),e(t,i,s[c],l)&&Te.isArray(s[c])&&(s[c]=_j(s[c])),!f)}if(Te.isFormData(n)&&Te.isFunction(n.entries)){const t={};return Te.forEachEntry(n,(i,s)=>{e(gj(i),s,t,0)}),t}return null}function vj(n,e,t){if(Te.isString(n))try{return(e||JSON.parse)(n),Te.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const hd={transitional:$2,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,l=Te.isObject(e);if(l&&Te.isHTMLForm(e)&&(e=new FormData(e)),Te.isFormData(e))return s?JSON.stringify(Y2(e)):e;if(Te.isArrayBuffer(e)||Te.isBuffer(e)||Te.isStream(e)||Te.isFile(e)||Te.isBlob(e)||Te.isReadableStream(e))return e;if(Te.isArrayBufferView(e))return e.buffer;if(Te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let f;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return mj(e,this.formSerializer).toString();if((f=Te.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return lm(f?{"files[]":e}:e,p&&new p,this.formSerializer)}}return l||s?(t.setContentType("application/json",!1),vj(e)):e}],transformResponse:[function(e){const t=this.transitional||hd.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(Te.isResponse(e)||Te.isReadableStream(e))return e;if(e&&Te.isString(e)&&(i&&!this.responseType||s)){const c=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(f){if(c)throw f.name==="SyntaxError"?gt.from(f,gt.ERR_BAD_RESPONSE,this,null,this.response):f}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oi.classes.FormData,Blob:Oi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Te.forEach(["delete","get","head","post","put","patch"],n=>{hd.headers[n]={}});const yj=Te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ej=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(c){s=c.indexOf(":"),t=c.substring(0,s).trim().toLowerCase(),i=c.substring(s+1).trim(),!(!t||e[t]&&yj[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Gw=Symbol("internals");function uh(n){return n&&String(n).trim().toLowerCase()}function Vf(n){return n===!1||n==null?n:Te.isArray(n)?n.map(Vf):String(n)}function bj(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const wj=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function __(n,e,t,i,s){if(Te.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!Te.isString(e)){if(Te.isString(i))return e.indexOf(i)!==-1;if(Te.isRegExp(i))return i.test(e)}}function Tj(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function Aj(n,e){const t=Te.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,l,c){return this[i].call(this,e,s,l,c)},configurable:!0})})}let ur=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function l(f,p,m){const _=uh(p);if(!_)throw new Error("header name must be a non-empty string");const E=Te.findKey(s,_);(!E||s[E]===void 0||m===!0||m===void 0&&s[E]!==!1)&&(s[E||p]=Vf(f))}const c=(f,p)=>Te.forEach(f,(m,_)=>l(m,_,p));if(Te.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(Te.isString(e)&&(e=e.trim())&&!wj(e))c(Ej(e),t);else if(Te.isObject(e)&&Te.isIterable(e)){let f={},p,m;for(const _ of e){if(!Te.isArray(_))throw TypeError("Object iterator must return a key-value pair");f[m=_[0]]=(p=f[m])?Te.isArray(p)?[...p,_[1]]:[p,_[1]]:_[1]}c(f,t)}else e!=null&&l(t,e,i);return this}get(e,t){if(e=uh(e),e){const i=Te.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return bj(s);if(Te.isFunction(t))return t.call(this,s,i);if(Te.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=uh(e),e){const i=Te.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||__(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function l(c){if(c=uh(c),c){const f=Te.findKey(i,c);f&&(!t||__(i,i[f],f,t))&&(delete i[f],s=!0)}}return Te.isArray(e)?e.forEach(l):l(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const l=t[i];(!e||__(this,this[l],l,e,!0))&&(delete this[l],s=!0)}return s}normalize(e){const t=this,i={};return Te.forEach(this,(s,l)=>{const c=Te.findKey(i,l);if(c){t[c]=Vf(s),delete t[l];return}const f=e?Tj(l):String(l).trim();f!==l&&delete t[l],t[f]=Vf(s),i[f]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Te.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&Te.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Gw]=this[Gw]={accessors:{}}).accessors,s=this.prototype;function l(c){const f=uh(c);i[f]||(Aj(s,c),i[f]=!0)}return Te.isArray(e)?e.forEach(l):l(e),this}};ur.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Te.reduceDescriptors(ur.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});Te.freezeMethods(ur);function v_(n,e){const t=this||hd,i=e||t,s=ur.from(i.headers);let l=i.data;return Te.forEach(n,function(f){l=f.call(t,l,s.normalize(),e?e.status:void 0)}),s.normalize(),l}function Q2(n){return!!(n&&n.__CANCEL__)}function mc(n,e,t){gt.call(this,n??"canceled",gt.ERR_CANCELED,e,t),this.name="CanceledError"}Te.inherits(mc,gt,{__CANCEL__:!0});function W2(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new gt("Request failed with status code "+t.status,[gt.ERR_BAD_REQUEST,gt.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Sj(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function xj(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,l=0,c;return e=e!==void 0?e:1e3,function(p){const m=Date.now(),_=i[l];c||(c=m),t[s]=p,i[s]=m;let E=l,b=0;for(;E!==s;)b+=t[E++],E=E%n;if(s=(s+1)%n,s===l&&(l=(l+1)%n),m-c<e)return;const C=_&&m-_;return C?Math.round(b*1e3/C):void 0}}function Cj(n,e){let t=0,i=1e3/e,s,l;const c=(m,_=Date.now())=>{t=_,s=null,l&&(clearTimeout(l),l=null),n.apply(null,m)};return[(...m)=>{const _=Date.now(),E=_-t;E>=i?c(m,_):(s=m,l||(l=setTimeout(()=>{l=null,c(s)},i-E)))},()=>s&&c(s)]}const mp=(n,e,t=3)=>{let i=0;const s=xj(50,250);return Cj(l=>{const c=l.loaded,f=l.lengthComputable?l.total:void 0,p=c-i,m=s(p),_=c<=f;i=c;const E={loaded:c,total:f,progress:f?c/f:void 0,bytes:p,rate:m||void 0,estimated:m&&f&&_?(f-c)/m:void 0,event:l,lengthComputable:f!=null,[e?"download":"upload"]:!0};n(E)},t)},Zw=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Kw=n=>(...e)=>Te.asap(()=>n(...e)),Rj=Oi.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Oi.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Oi.origin),Oi.navigator&&/(msie|trident)/i.test(Oi.navigator.userAgent)):()=>!0,Ij=Oi.hasStandardBrowserEnv?{write(n,e,t,i,s,l){const c=[n+"="+encodeURIComponent(e)];Te.isNumber(t)&&c.push("expires="+new Date(t).toGMTString()),Te.isString(i)&&c.push("path="+i),Te.isString(s)&&c.push("domain="+s),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function kj(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Nj(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function X2(n,e,t){let i=!kj(e);return n&&(i||t==!1)?Nj(n,e):e}const $w=n=>n instanceof ur?{...n}:n;function Ql(n,e){e=e||{};const t={};function i(m,_,E,b){return Te.isPlainObject(m)&&Te.isPlainObject(_)?Te.merge.call({caseless:b},m,_):Te.isPlainObject(_)?Te.merge({},_):Te.isArray(_)?_.slice():_}function s(m,_,E,b){if(Te.isUndefined(_)){if(!Te.isUndefined(m))return i(void 0,m,E,b)}else return i(m,_,E,b)}function l(m,_){if(!Te.isUndefined(_))return i(void 0,_)}function c(m,_){if(Te.isUndefined(_)){if(!Te.isUndefined(m))return i(void 0,m)}else return i(void 0,_)}function f(m,_,E){if(E in e)return i(m,_);if(E in n)return i(void 0,m)}const p={url:l,method:l,data:l,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:f,headers:(m,_,E)=>s($w(m),$w(_),E,!0)};return Te.forEach(Object.keys(Object.assign({},n,e)),function(_){const E=p[_]||s,b=E(n[_],e[_],_);Te.isUndefined(b)&&E!==f||(t[_]=b)}),t}const J2=n=>{const e=Ql({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:l,headers:c,auth:f}=e;e.headers=c=ur.from(c),e.url=K2(X2(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),f&&c.set("Authorization","Basic "+btoa((f.username||"")+":"+(f.password?unescape(encodeURIComponent(f.password)):"")));let p;if(Te.isFormData(t)){if(Oi.hasStandardBrowserEnv||Oi.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if((p=c.getContentType())!==!1){const[m,..._]=p?p.split(";").map(E=>E.trim()).filter(Boolean):[];c.setContentType([m||"multipart/form-data",..._].join("; "))}}if(Oi.hasStandardBrowserEnv&&(i&&Te.isFunction(i)&&(i=i(e)),i||i!==!1&&Rj(e.url))){const m=s&&l&&Ij.read(l);m&&c.set(s,m)}return e},Oj=typeof XMLHttpRequest<"u",Pj=Oj&&function(n){return new Promise(function(t,i){const s=J2(n);let l=s.data;const c=ur.from(s.headers).normalize();let{responseType:f,onUploadProgress:p,onDownloadProgress:m}=s,_,E,b,C,I;function O(){C&&C(),I&&I(),s.cancelToken&&s.cancelToken.unsubscribe(_),s.signal&&s.signal.removeEventListener("abort",_)}let M=new XMLHttpRequest;M.open(s.method.toUpperCase(),s.url,!0),M.timeout=s.timeout;function z(){if(!M)return;const K=ur.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),oe={data:!f||f==="text"||f==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:K,config:n,request:M};W2(function(q){t(q),O()},function(q){i(q),O()},oe),M=null}"onloadend"in M?M.onloadend=z:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(z)},M.onabort=function(){M&&(i(new gt("Request aborted",gt.ECONNABORTED,n,M)),M=null)},M.onerror=function(){i(new gt("Network Error",gt.ERR_NETWORK,n,M)),M=null},M.ontimeout=function(){let J=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const oe=s.transitional||$2;s.timeoutErrorMessage&&(J=s.timeoutErrorMessage),i(new gt(J,oe.clarifyTimeoutError?gt.ETIMEDOUT:gt.ECONNABORTED,n,M)),M=null},l===void 0&&c.setContentType(null),"setRequestHeader"in M&&Te.forEach(c.toJSON(),function(J,oe){M.setRequestHeader(oe,J)}),Te.isUndefined(s.withCredentials)||(M.withCredentials=!!s.withCredentials),f&&f!=="json"&&(M.responseType=s.responseType),m&&([b,I]=mp(m,!0),M.addEventListener("progress",b)),p&&M.upload&&([E,C]=mp(p),M.upload.addEventListener("progress",E),M.upload.addEventListener("loadend",C)),(s.cancelToken||s.signal)&&(_=K=>{M&&(i(!K||K.type?new mc(null,n,M):K),M.abort(),M=null)},s.cancelToken&&s.cancelToken.subscribe(_),s.signal&&(s.signal.aborted?_():s.signal.addEventListener("abort",_)));const Y=Sj(s.url);if(Y&&Oi.protocols.indexOf(Y)===-1){i(new gt("Unsupported protocol "+Y+":",gt.ERR_BAD_REQUEST,n));return}M.send(l||null)})},Mj=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const l=function(m){if(!s){s=!0,f();const _=m instanceof Error?m:this.reason;i.abort(_ instanceof gt?_:new mc(_ instanceof Error?_.message:_))}};let c=e&&setTimeout(()=>{c=null,l(new gt(`timeout ${e} of ms exceeded`,gt.ETIMEDOUT))},e);const f=()=>{n&&(c&&clearTimeout(c),c=null,n.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),n=null)};n.forEach(m=>m.addEventListener("abort",l));const{signal:p}=i;return p.unsubscribe=()=>Te.asap(f),p}},Dj=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},Lj=async function*(n,e){for await(const t of jj(n))yield*Dj(t,e)},jj=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Yw=(n,e,t,i)=>{const s=Lj(n,e);let l=0,c,f=p=>{c||(c=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:m,value:_}=await s.next();if(m){f(),p.close();return}let E=_.byteLength;if(t){let b=l+=E;t(b)}p.enqueue(new Uint8Array(_))}catch(m){throw f(m),m}},cancel(p){return f(p),s.return()}},{highWaterMark:2})},um=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",ex=um&&typeof ReadableStream=="function",Vj=um&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),tx=(n,...e)=>{try{return!!n(...e)}catch{return!1}},Uj=ex&&tx(()=>{let n=!1;const e=new Request(Oi.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e}),Qw=64*1024,iv=ex&&tx(()=>Te.isReadableStream(new Response("").body)),gp={stream:iv&&(n=>n.body)};um&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!gp[e]&&(gp[e]=Te.isFunction(n[e])?t=>t[e]():(t,i)=>{throw new gt(`Response type '${e}' is not supported`,gt.ERR_NOT_SUPPORT,i)})})})(new Response);const Bj=async n=>{if(n==null)return 0;if(Te.isBlob(n))return n.size;if(Te.isSpecCompliantForm(n))return(await new Request(Oi.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Te.isArrayBufferView(n)||Te.isArrayBuffer(n))return n.byteLength;if(Te.isURLSearchParams(n)&&(n=n+""),Te.isString(n))return(await Vj(n)).byteLength},Fj=async(n,e)=>{const t=Te.toFiniteNumber(n.getContentLength());return t??Bj(e)},zj=um&&(async n=>{let{url:e,method:t,data:i,signal:s,cancelToken:l,timeout:c,onDownloadProgress:f,onUploadProgress:p,responseType:m,headers:_,withCredentials:E="same-origin",fetchOptions:b}=J2(n);m=m?(m+"").toLowerCase():"text";let C=Mj([s,l&&l.toAbortSignal()],c),I;const O=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let M;try{if(p&&Uj&&t!=="get"&&t!=="head"&&(M=await Fj(_,i))!==0){let oe=new Request(e,{method:"POST",body:i,duplex:"half"}),W;if(Te.isFormData(i)&&(W=oe.headers.get("content-type"))&&_.setContentType(W),oe.body){const[q,S]=Zw(M,mp(Kw(p)));i=Yw(oe.body,Qw,q,S)}}Te.isString(E)||(E=E?"include":"omit");const z="credentials"in Request.prototype;I=new Request(e,{...b,signal:C,method:t.toUpperCase(),headers:_.normalize().toJSON(),body:i,duplex:"half",credentials:z?E:void 0});let Y=await fetch(I,b);const K=iv&&(m==="stream"||m==="response");if(iv&&(f||K&&O)){const oe={};["status","statusText","headers"].forEach(x=>{oe[x]=Y[x]});const W=Te.toFiniteNumber(Y.headers.get("content-length")),[q,S]=f&&Zw(W,mp(Kw(f),!0))||[];Y=new Response(Yw(Y.body,Qw,q,()=>{S&&S(),O&&O()}),oe)}m=m||"text";let J=await gp[Te.findKey(gp,m)||"text"](Y,n);return!K&&O&&O(),await new Promise((oe,W)=>{W2(oe,W,{data:J,headers:ur.from(Y.headers),status:Y.status,statusText:Y.statusText,config:n,request:I})})}catch(z){throw O&&O(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new gt("Network Error",gt.ERR_NETWORK,n,I),{cause:z.cause||z}):gt.from(z,z&&z.code,n,I)}}),rv={http:ij,xhr:Pj,fetch:zj};Te.forEach(rv,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Ww=n=>`- ${n}`,Hj=n=>Te.isFunction(n)||n===null||n===!1,nx={getAdapter:n=>{n=Te.isArray(n)?n:[n];const{length:e}=n;let t,i;const s={};for(let l=0;l<e;l++){t=n[l];let c;if(i=t,!Hj(t)&&(i=rv[(c=String(t)).toLowerCase()],i===void 0))throw new gt(`Unknown adapter '${c}'`);if(i)break;s[c||"#"+l]=i}if(!i){const l=Object.entries(s).map(([f,p])=>`adapter ${f} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=e?l.length>1?`since :
`+l.map(Ww).join(`
`):" "+Ww(l[0]):"as no adapter specified";throw new gt("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i},adapters:rv};function y_(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new mc(null,n)}function Xw(n){return y_(n),n.headers=ur.from(n.headers),n.data=v_.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),nx.getAdapter(n.adapter||hd.adapter)(n).then(function(i){return y_(n),i.data=v_.call(n,n.transformResponse,i),i.headers=ur.from(i.headers),i},function(i){return Q2(i)||(y_(n),i&&i.response&&(i.response.data=v_.call(n,n.transformResponse,i.response),i.response.headers=ur.from(i.response.headers))),Promise.reject(i)})}const ix="1.10.0",cm={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{cm[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const Jw={};cm.transitional=function(e,t,i){function s(l,c){return"[Axios v"+ix+"] Transitional option '"+l+"'"+c+(i?". "+i:"")}return(l,c,f)=>{if(e===!1)throw new gt(s(c," has been removed"+(t?" in "+t:"")),gt.ERR_DEPRECATED);return t&&!Jw[c]&&(Jw[c]=!0,console.warn(s(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(l,c,f):!0}};cm.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function qj(n,e,t){if(typeof n!="object")throw new gt("options must be an object",gt.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const l=i[s],c=e[l];if(c){const f=n[l],p=f===void 0||c(f,l,n);if(p!==!0)throw new gt("option "+l+" must be "+p,gt.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new gt("Unknown option "+l,gt.ERR_BAD_OPTION)}}const Uf={assertOptions:qj,validators:cm},Zs=Uf.validators;let zl=class{constructor(e){this.defaults=e||{},this.interceptors={request:new qw,response:new qw}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const l=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ql(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:l}=t;i!==void 0&&Uf.assertOptions(i,{silentJSONParsing:Zs.transitional(Zs.boolean),forcedJSONParsing:Zs.transitional(Zs.boolean),clarifyTimeoutError:Zs.transitional(Zs.boolean)},!1),s!=null&&(Te.isFunction(s)?t.paramsSerializer={serialize:s}:Uf.assertOptions(s,{encode:Zs.function,serialize:Zs.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Uf.assertOptions(t,{baseUrl:Zs.spelling("baseURL"),withXsrfToken:Zs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=l&&Te.merge(l.common,l[t.method]);l&&Te.forEach(["delete","get","head","post","put","patch","common"],I=>{delete l[I]}),t.headers=ur.concat(c,l);const f=[];let p=!0;this.interceptors.request.forEach(function(O){typeof O.runWhen=="function"&&O.runWhen(t)===!1||(p=p&&O.synchronous,f.unshift(O.fulfilled,O.rejected))});const m=[];this.interceptors.response.forEach(function(O){m.push(O.fulfilled,O.rejected)});let _,E=0,b;if(!p){const I=[Xw.bind(this),void 0];for(I.unshift.apply(I,f),I.push.apply(I,m),b=I.length,_=Promise.resolve(t);E<b;)_=_.then(I[E++],I[E++]);return _}b=f.length;let C=t;for(E=0;E<b;){const I=f[E++],O=f[E++];try{C=I(C)}catch(M){O.call(this,M);break}}try{_=Xw.call(this,C)}catch(I){return Promise.reject(I)}for(E=0,b=m.length;E<b;)_=_.then(m[E++],m[E++]);return _}getUri(e){e=Ql(this.defaults,e);const t=X2(e.baseURL,e.url,e.allowAbsoluteUrls);return K2(t,e.params,e.paramsSerializer)}};Te.forEach(["delete","get","head","options"],function(e){zl.prototype[e]=function(t,i){return this.request(Ql(i||{},{method:e,url:t,data:(i||{}).data}))}});Te.forEach(["post","put","patch"],function(e){function t(i){return function(l,c,f){return this.request(Ql(f||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:c}))}}zl.prototype[e]=t(),zl.prototype[e+"Form"]=t(!0)});let Gj=class rx{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(l){t=l});const i=this;this.promise.then(s=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](s);i._listeners=null}),this.promise.then=s=>{let l;const c=new Promise(f=>{i.subscribe(f),l=f}).then(s);return c.cancel=function(){i.unsubscribe(l)},c},e(function(l,c,f){i.reason||(i.reason=new mc(l,c,f),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new rx(function(s){e=s}),cancel:e}}};function Zj(n){return function(t){return n.apply(null,t)}}function Kj(n){return Te.isObject(n)&&n.isAxiosError===!0}const sv={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sv).forEach(([n,e])=>{sv[e]=n});function sx(n){const e=new zl(n),t=D2(zl.prototype.request,e);return Te.extend(t,zl.prototype,e,{allOwnKeys:!0}),Te.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return sx(Ql(n,s))},t}const On=sx(hd);On.Axios=zl;On.CanceledError=mc;On.CancelToken=Gj;On.isCancel=Q2;On.VERSION=ix;On.toFormData=lm;On.AxiosError=gt;On.Cancel=On.CanceledError;On.all=function(e){return Promise.all(e)};On.spread=Zj;On.isAxiosError=Kj;On.mergeConfig=Ql;On.AxiosHeaders=ur;On.formToJSON=n=>Y2(Te.isHTMLForm(n)?new FormData(n):n);On.getAdapter=nx.getAdapter;On.HttpStatusCode=sv;On.default=On;const{Axios:UV,AxiosError:BV,CanceledError:FV,isCancel:zV,CancelToken:HV,VERSION:qV,all:GV,Cancel:ZV,isAxiosError:KV,spread:$V,toFormData:YV,AxiosHeaders:QV,HttpStatusCode:WV,formToJSON:XV,getAdapter:JV,mergeConfig:eU}=On,eT={frotaId:"",descricaoServico:"",estabelecimento:"",endereco:{cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:""},dataServico:"",periodoInicio:"Manhã (08:00 - 12:00)",outroHorario:"",prazoTermino:"",valorServicoBruto:"",formaPagamento:"PIX",requisitos:{"Uso de botas/calçado de segurança":!1,"Uso de óculos de proteção":!1,"Uso de colete refletivo":!1,"Uso de capacete":!1,"Uso de cinta ergonômica":!1,"Uso de luvas":!1,"Levar documento original":!1,"Proibido uso de celular":!1},termosAceitos:!1},$j=({onClose:n})=>{const[e,t]=te.useState(eT),[i,s]=te.useState(!1),[l,c]=te.useState([]);te.useEffect(()=>{const O=Rv(ir,M=>{if(M){const z=Mr(Xt,"frota"),Y=ts(z,es("empresaId","==",M.uid),$l("nomeCompleto")),K=nc(Y,J=>{const oe=J.docs.map(W=>({id:W.id,...W.data()}));c(oe)});return()=>K()}else c([])});return()=>O()},[]);const f=O=>{const{name:M,value:z}=O.target;t(Y=>({...Y,[M]:z}))},p=O=>{const{name:M,value:z}=O.target;t(Y=>({...Y,endereco:{...Y.endereco,[M]:z}}))},m=async O=>{const M=O.target.value.replace(/\D/g,""),z=M.replace(/(\d{5})(\d)/,"$1-$2").slice(0,9);if(t(Y=>({...Y,endereco:{...Y.endereco,cep:z}})),M.length===8)try{const{data:Y}=await On.get(`https://viacep.com.br/ws/${M}/json/`);Y.erro||t(K=>({...K,endereco:{...K.endereco,logradouro:Y.logradouro,bairro:Y.bairro,cidade:Y.localidade,estado:Y.uf}}))}catch(Y){console.error("Erro ao buscar CEP:",Y)}},_=O=>{const{name:M,checked:z}=O.target;t(Y=>({...Y,requisitos:{...Y.requisitos,[M]:z}}))},E=O=>{t(M=>({...M,valorServicoBruto:O}))},b=e.formaPagamento==="Pagamento pela Plataforma",C=b&&!e.termosAceitos,I=async O=>{if(O.preventDefault(),C){alert("Você deve aceitar os termos e condições para pagamentos via plataforma.");return}if(!e.frotaId){alert("Por favor, selecione um motorista/veículo da sua frota.");return}if(!ir.currentUser){alert("Erro de autenticação. Por favor, faça login novamente.");return}s(!0);try{const M=l.find(x=>x.id===e.frotaId),z=parseFloat(e.valorServicoBruto)||0,Y=e.dataServico?zt.fromDate(new Date(e.dataServico)):zt.now(),K=e.prazoTermino?zt.fromDate(new Date(e.prazoTermino)):null,J=Object.entries(e.requisitos).filter(([,x])=>x===!0).map(([x])=>x),{cliente:oe,veiculo:W,...q}=e,S={...q,cliente:M.nomeCompleto,veiculo:M.veiculo,valorServicoBruto:z,requisitos:J,dataSolicitacao:zt.now(),dataServico:Y,prazoTermino:K,status:"pendente",empresaId:ir.currentUser.uid};await Qp(Mr(Xt,"solicitacoes"),S),alert("Ordem de Serviço criada com sucesso!"),n()}catch(M){console.error("Erro ao criar Ordem de Serviço: ",M),alert("Falha ao criar a Ordem de Serviço. Tente novamente.")}finally{s(!1)}};return T.jsxs("form",{onSubmit:I,children:[T.jsxs("div",{className:"form-grid",children:[T.jsxs("div",{className:"form-section",children:[T.jsx("h4",{className:"form-section-title",children:"Informações Gerais"}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Cliente / Veículo da Frota"}),T.jsxs("select",{name:"frotaId",value:e.frotaId,onChange:f,required:!0,children:[T.jsx("option",{value:"",disabled:!0,children:"-- Selecione um motorista da frota --"}),l.map(O=>T.jsxs("option",{value:O.id,children:[O.nomeCompleto," (Placa: ",O.veiculo?.placa||"N/A",")"]},O.id))]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Descrição do Serviço"}),T.jsx("textarea",{name:"descricaoServico",value:e.descricaoServico,onChange:f,rows:"3",required:!0,placeholder:"Ex: Carga e descarga de caixas..."})]})]}),T.jsxs("div",{className:"form-section",children:[T.jsx("h4",{className:"form-section-title",children:"Endereço do Serviço"}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Estabelecimento (Opcional)"}),T.jsx("input",{type:"text",name:"estabelecimento",value:e.estabelecimento,onChange:f,placeholder:"Ex: Hypermercado Vende Mais"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"CEP"}),T.jsx("input",{type:"text",name:"cep",value:e.endereco.cep,onChange:m,maxLength:"9",placeholder:"Digite o CEP"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Rua / Logradouro"}),T.jsx("input",{type:"text",name:"logradouro",value:e.endereco.logradouro,onChange:p,required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Número"}),T.jsx("input",{type:"text",name:"numero",value:e.endereco.numero,onChange:p,required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Bairro"}),T.jsx("input",{type:"text",name:"bairro",value:e.endereco.bairro,onChange:p,required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Cidade"}),T.jsx("input",{type:"text",name:"cidade",value:e.endereco.cidade,onChange:p,required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Estado"}),T.jsx("input",{type:"text",name:"estado",value:e.endereco.estado,onChange:p,required:!0,maxLength:"2"})]})]}),T.jsxs("div",{className:"form-section",children:[T.jsx("h4",{className:"form-section-title",children:"Data e Hora"}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Data e Hora do Serviço"}),T.jsx("input",{type:"datetime-local",name:"dataServico",value:e.dataServico,onChange:f,required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Período de Início"}),T.jsxs("div",{className:"horario-outro-group",children:[T.jsxs("select",{name:"periodoInicio",value:e.periodoInicio,onChange:f,children:[T.jsx("option",{children:"Manhã (08:00 - 12:00)"}),T.jsx("option",{children:"Tarde (13:00 - 18:00)"}),T.jsx("option",{children:"Noite (19:00 - 22:00)"}),T.jsx("option",{children:"Outro"})]}),e.periodoInicio==="Outro"&&T.jsx("input",{type:"text",name:"outroHorario",placeholder:"Digite o horário",value:e.outroHorario,onChange:f})]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Prazo para Término (Opcional)"}),T.jsx("input",{type:"datetime-local",name:"prazoTermino",value:e.prazoTermino,onChange:f})]})]}),T.jsxs("div",{className:"form-section",children:[T.jsx("h4",{className:"form-section-title",children:"Detalhes Financeiros"}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Valor Ofertado"}),T.jsx(Eh,{mask:"R$ num",blocks:{num:{mask:Number,thousandsSeparator:".",radix:",",scale:2,padFractionalZeros:!0}},unmask:!0,onAccept:E,placeholder:"R$ 0,00",className:"form-input-style",required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Forma de Pagamento"}),T.jsxs("select",{name:"formaPagamento",value:e.formaPagamento,onChange:f,children:[T.jsx("option",{children:"PIX"}),T.jsx("option",{children:"Dinheiro no Ato"}),T.jsx("option",{children:"Pagamento pela Plataforma"})]})]})]}),T.jsxs("div",{className:"form-section",style:{gridColumn:"1 / -1"},children:[T.jsx("h4",{className:"form-section-title",children:"Requisitos e Advertências"}),T.jsx("div",{className:"requisitos-container",children:Object.keys(eT.requisitos).map(O=>T.jsxs("div",{className:"requisito-item",children:[T.jsx("input",{type:"checkbox",id:O,name:O,checked:e.requisitos[O],onChange:_}),T.jsx("label",{htmlFor:O,children:O})]},O))})]}),T.jsx("div",{className:"form-section",style:{gridColumn:"1 / -1"},children:T.jsxs("div",{className:`termos-container ${b?"":"disabled"}`,children:[T.jsx("input",{type:"checkbox",id:"termosAceitos",name:"termosAceitos",checked:e.termosAceitos,onChange:O=>t(M=>({...M,termosAceitos:O.target.checked})),disabled:!b}),T.jsx("label",{htmlFor:"termosAceitos",children:"Li e aceito os termos e condições de pagamento pela Plataforma."})]})})]}),T.jsxs("div",{className:"form-actions",children:[T.jsx("button",{type:"button",className:"cancel-button",onClick:n,children:"Cancelar"}),T.jsx("button",{type:"submit",className:"submit-os-button",disabled:i||C,children:i?T.jsx(Dr,{className:"animate-spin"}):"Criar Ordem de Serviço"})]})]})};function Zo({isOpen:n,onClose:e,title:t,children:i}){return n?T.jsx("div",{className:"modal-overlay",onClick:e,children:T.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[T.jsxs("div",{className:"modal-header",children:[T.jsx("h2",{className:"modal-title",children:t}),T.jsx("button",{onClick:e,className:"modal-close-button",children:T.jsx(Q6,{size:24})})]}),T.jsxs("div",{className:"modal-body",children:[i," "]})]})}):null}var Yj=Object.defineProperty,_p=Object.getOwnPropertySymbols,ax=Object.prototype.hasOwnProperty,ox=Object.prototype.propertyIsEnumerable,tT=(n,e,t)=>e in n?Yj(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,av=(n,e)=>{for(var t in e||(e={}))ax.call(e,t)&&tT(n,t,e[t]);if(_p)for(var t of _p(e))ox.call(e,t)&&tT(n,t,e[t]);return n},ov=(n,e)=>{var t={};for(var i in n)ax.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&_p)for(var i of _p(n))e.indexOf(i)<0&&ox.call(n,i)&&(t[i]=n[i]);return t};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Wl;(n=>{const e=class It{constructor(p,m,_,E){if(this.version=p,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],p<It.MIN_VERSION||p>It.MAX_VERSION)throw new RangeError("Version value out of range");if(E<-1||E>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let b=[];for(let I=0;I<this.size;I++)b.push(!1);for(let I=0;I<this.size;I++)this.modules.push(b.slice()),this.isFunction.push(b.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(_);if(this.drawCodewords(C),E==-1){let I=1e9;for(let O=0;O<8;O++){this.applyMask(O),this.drawFormatBits(O);const M=this.getPenaltyScore();M<I&&(E=O,I=M),this.applyMask(O)}}s(0<=E&&E<=7),this.mask=E,this.applyMask(E),this.drawFormatBits(E),this.isFunction=[]}static encodeText(p,m){const _=n.QrSegment.makeSegments(p);return It.encodeSegments(_,m)}static encodeBinary(p,m){const _=n.QrSegment.makeBytes(p);return It.encodeSegments([_],m)}static encodeSegments(p,m,_=1,E=40,b=-1,C=!0){if(!(It.MIN_VERSION<=_&&_<=E&&E<=It.MAX_VERSION)||b<-1||b>7)throw new RangeError("Invalid value");let I,O;for(I=_;;I++){const K=It.getNumDataCodewords(I,m)*8,J=c.getTotalBits(p,I);if(J<=K){O=J;break}if(I>=E)throw new RangeError("Data too long")}for(const K of[It.Ecc.MEDIUM,It.Ecc.QUARTILE,It.Ecc.HIGH])C&&O<=It.getNumDataCodewords(I,K)*8&&(m=K);let M=[];for(const K of p){t(K.mode.modeBits,4,M),t(K.numChars,K.mode.numCharCountBits(I),M);for(const J of K.getData())M.push(J)}s(M.length==O);const z=It.getNumDataCodewords(I,m)*8;s(M.length<=z),t(0,Math.min(4,z-M.length),M),t(0,(8-M.length%8)%8,M),s(M.length%8==0);for(let K=236;M.length<z;K^=253)t(K,8,M);let Y=[];for(;Y.length*8<M.length;)Y.push(0);return M.forEach((K,J)=>Y[J>>>3]|=K<<7-(J&7)),new It(I,m,Y,b)}getModule(p,m){return 0<=p&&p<this.size&&0<=m&&m<this.size&&this.modules[m][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let _=0;_<this.size;_++)this.setFunctionModule(6,_,_%2==0),this.setFunctionModule(_,6,_%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),m=p.length;for(let _=0;_<m;_++)for(let E=0;E<m;E++)_==0&&E==0||_==0&&E==m-1||_==m-1&&E==0||this.drawAlignmentPattern(p[_],p[E]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const m=this.errorCorrectionLevel.formatBits<<3|p;let _=m;for(let b=0;b<10;b++)_=_<<1^(_>>>9)*1335;const E=(m<<10|_)^21522;s(E>>>15==0);for(let b=0;b<=5;b++)this.setFunctionModule(8,b,i(E,b));this.setFunctionModule(8,7,i(E,6)),this.setFunctionModule(8,8,i(E,7)),this.setFunctionModule(7,8,i(E,8));for(let b=9;b<15;b++)this.setFunctionModule(14-b,8,i(E,b));for(let b=0;b<8;b++)this.setFunctionModule(this.size-1-b,8,i(E,b));for(let b=8;b<15;b++)this.setFunctionModule(8,this.size-15+b,i(E,b));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let _=0;_<12;_++)p=p<<1^(p>>>11)*7973;const m=this.version<<12|p;s(m>>>18==0);for(let _=0;_<18;_++){const E=i(m,_),b=this.size-11+_%3,C=Math.floor(_/3);this.setFunctionModule(b,C,E),this.setFunctionModule(C,b,E)}}drawFinderPattern(p,m){for(let _=-4;_<=4;_++)for(let E=-4;E<=4;E++){const b=Math.max(Math.abs(E),Math.abs(_)),C=p+E,I=m+_;0<=C&&C<this.size&&0<=I&&I<this.size&&this.setFunctionModule(C,I,b!=2&&b!=4)}}drawAlignmentPattern(p,m){for(let _=-2;_<=2;_++)for(let E=-2;E<=2;E++)this.setFunctionModule(p+E,m+_,Math.max(Math.abs(E),Math.abs(_))!=1)}setFunctionModule(p,m,_){this.modules[m][p]=_,this.isFunction[m][p]=!0}addEccAndInterleave(p){const m=this.version,_=this.errorCorrectionLevel;if(p.length!=It.getNumDataCodewords(m,_))throw new RangeError("Invalid argument");const E=It.NUM_ERROR_CORRECTION_BLOCKS[_.ordinal][m],b=It.ECC_CODEWORDS_PER_BLOCK[_.ordinal][m],C=Math.floor(It.getNumRawDataModules(m)/8),I=E-C%E,O=Math.floor(C/E);let M=[];const z=It.reedSolomonComputeDivisor(b);for(let K=0,J=0;K<E;K++){let oe=p.slice(J,J+O-b+(K<I?0:1));J+=oe.length;const W=It.reedSolomonComputeRemainder(oe,z);K<I&&oe.push(0),M.push(oe.concat(W))}let Y=[];for(let K=0;K<M[0].length;K++)M.forEach((J,oe)=>{(K!=O-b||oe>=I)&&Y.push(J[K])});return s(Y.length==C),Y}drawCodewords(p){if(p.length!=Math.floor(It.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let _=this.size-1;_>=1;_-=2){_==6&&(_=5);for(let E=0;E<this.size;E++)for(let b=0;b<2;b++){const C=_-b,O=(_+1&2)==0?this.size-1-E:E;!this.isFunction[O][C]&&m<p.length*8&&(this.modules[O][C]=i(p[m>>>3],7-(m&7)),m++)}}s(m==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let _=0;_<this.size;_++){let E;switch(p){case 0:E=(_+m)%2==0;break;case 1:E=m%2==0;break;case 2:E=_%3==0;break;case 3:E=(_+m)%3==0;break;case 4:E=(Math.floor(_/3)+Math.floor(m/2))%2==0;break;case 5:E=_*m%2+_*m%3==0;break;case 6:E=(_*m%2+_*m%3)%2==0;break;case 7:E=((_+m)%2+_*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][_]&&E&&(this.modules[m][_]=!this.modules[m][_])}}getPenaltyScore(){let p=0;for(let b=0;b<this.size;b++){let C=!1,I=0,O=[0,0,0,0,0,0,0];for(let M=0;M<this.size;M++)this.modules[b][M]==C?(I++,I==5?p+=It.PENALTY_N1:I>5&&p++):(this.finderPenaltyAddHistory(I,O),C||(p+=this.finderPenaltyCountPatterns(O)*It.PENALTY_N3),C=this.modules[b][M],I=1);p+=this.finderPenaltyTerminateAndCount(C,I,O)*It.PENALTY_N3}for(let b=0;b<this.size;b++){let C=!1,I=0,O=[0,0,0,0,0,0,0];for(let M=0;M<this.size;M++)this.modules[M][b]==C?(I++,I==5?p+=It.PENALTY_N1:I>5&&p++):(this.finderPenaltyAddHistory(I,O),C||(p+=this.finderPenaltyCountPatterns(O)*It.PENALTY_N3),C=this.modules[M][b],I=1);p+=this.finderPenaltyTerminateAndCount(C,I,O)*It.PENALTY_N3}for(let b=0;b<this.size-1;b++)for(let C=0;C<this.size-1;C++){const I=this.modules[b][C];I==this.modules[b][C+1]&&I==this.modules[b+1][C]&&I==this.modules[b+1][C+1]&&(p+=It.PENALTY_N2)}let m=0;for(const b of this.modules)m=b.reduce((C,I)=>C+(I?1:0),m);const _=this.size*this.size,E=Math.ceil(Math.abs(m*20-_*10)/_)-1;return s(0<=E&&E<=9),p+=E*It.PENALTY_N4,s(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let _=[6];for(let E=this.size-7;_.length<p;E-=m)_.splice(1,0,E);return _}}static getNumRawDataModules(p){if(p<It.MIN_VERSION||p>It.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*p+128)*p+64;if(p>=2){const _=Math.floor(p/7)+2;m-=(25*_-10)*_-55,p>=7&&(m-=36)}return s(208<=m&&m<=29648),m}static getNumDataCodewords(p,m){return Math.floor(It.getNumRawDataModules(p)/8)-It.ECC_CODEWORDS_PER_BLOCK[m.ordinal][p]*It.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let m=[];for(let E=0;E<p-1;E++)m.push(0);m.push(1);let _=1;for(let E=0;E<p;E++){for(let b=0;b<m.length;b++)m[b]=It.reedSolomonMultiply(m[b],_),b+1<m.length&&(m[b]^=m[b+1]);_=It.reedSolomonMultiply(_,2)}return m}static reedSolomonComputeRemainder(p,m){let _=m.map(E=>0);for(const E of p){const b=E^_.shift();_.push(0),m.forEach((C,I)=>_[I]^=It.reedSolomonMultiply(C,b))}return _}static reedSolomonMultiply(p,m){if(p>>>8||m>>>8)throw new RangeError("Byte out of range");let _=0;for(let E=7;E>=0;E--)_=_<<1^(_>>>7)*285,_^=(m>>>E&1)*p;return s(_>>>8==0),_}finderPenaltyCountPatterns(p){const m=p[1];s(m<=this.size*3);const _=m>0&&p[2]==m&&p[3]==m*3&&p[4]==m&&p[5]==m;return(_&&p[0]>=m*4&&p[6]>=m?1:0)+(_&&p[6]>=m*4&&p[0]>=m?1:0)}finderPenaltyTerminateAndCount(p,m,_){return p&&(this.finderPenaltyAddHistory(m,_),m=0),m+=this.size,this.finderPenaltyAddHistory(m,_),this.finderPenaltyCountPatterns(_)}finderPenaltyAddHistory(p,m){m[0]==0&&(p+=this.size),m.pop(),m.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],n.QrCode=e;function t(f,p,m){if(p<0||p>31||f>>>p)throw new RangeError("Value out of range");for(let _=p-1;_>=0;_--)m.push(f>>>_&1)}function i(f,p){return(f>>>p&1)!=0}function s(f){if(!f)throw new Error("Assertion error")}const l=class In{constructor(p,m,_){if(this.mode=p,this.numChars=m,this.bitData=_,m<0)throw new RangeError("Invalid argument");this.bitData=_.slice()}static makeBytes(p){let m=[];for(const _ of p)t(_,8,m);return new In(In.Mode.BYTE,p.length,m)}static makeNumeric(p){if(!In.isNumeric(p))throw new RangeError("String contains non-numeric characters");let m=[];for(let _=0;_<p.length;){const E=Math.min(p.length-_,3);t(parseInt(p.substring(_,_+E),10),E*3+1,m),_+=E}return new In(In.Mode.NUMERIC,p.length,m)}static makeAlphanumeric(p){if(!In.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],_;for(_=0;_+2<=p.length;_+=2){let E=In.ALPHANUMERIC_CHARSET.indexOf(p.charAt(_))*45;E+=In.ALPHANUMERIC_CHARSET.indexOf(p.charAt(_+1)),t(E,11,m)}return _<p.length&&t(In.ALPHANUMERIC_CHARSET.indexOf(p.charAt(_)),6,m),new In(In.Mode.ALPHANUMERIC,p.length,m)}static makeSegments(p){return p==""?[]:In.isNumeric(p)?[In.makeNumeric(p)]:In.isAlphanumeric(p)?[In.makeAlphanumeric(p)]:[In.makeBytes(In.toUtf8ByteArray(p))]}static makeEci(p){let m=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)t(p,8,m);else if(p<16384)t(2,2,m),t(p,14,m);else if(p<1e6)t(6,3,m),t(p,21,m);else throw new RangeError("ECI assignment value out of range");return new In(In.Mode.ECI,0,m)}static isNumeric(p){return In.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return In.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,m){let _=0;for(const E of p){const b=E.mode.numCharCountBits(m);if(E.numChars>=1<<b)return 1/0;_+=4+b+E.bitData.length}return _}static toUtf8ByteArray(p){p=encodeURI(p);let m=[];for(let _=0;_<p.length;_++)p.charAt(_)!="%"?m.push(p.charCodeAt(_)):(m.push(parseInt(p.substring(_+1,_+3),16)),_+=2);return m}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=l;n.QrSegment=l})(Wl||(Wl={}));(n=>{(e=>{const t=class{constructor(s,l){this.ordinal=s,this.formatBits=l}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2),e.Ecc=t})(n.QrCode||(n.QrCode={}))})(Wl||(Wl={}));(n=>{(e=>{const t=class{constructor(s,l){this.modeBits=s,this.numBitsCharCount=l}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]),e.Mode=t})(n.QrSegment||(n.QrSegment={}))})(Wl||(Wl={}));var qu=Wl;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Qj={L:qu.QrCode.Ecc.LOW,M:qu.QrCode.Ecc.MEDIUM,Q:qu.QrCode.Ecc.QUARTILE,H:qu.QrCode.Ecc.HIGH},lx=128,ux="L",cx="#FFFFFF",hx="#000000",dx=!1,fx=1,Wj=4,Xj=0,Jj=.1;function px(n,e=0){const t=[];return n.forEach(function(i,s){let l=null;i.forEach(function(c,f){if(!c&&l!==null){t.push(`M${l+e} ${s+e}h${f-l}v1H${l+e}z`),l=null;return}if(f===i.length-1){if(!c)return;l===null?t.push(`M${f+e},${s+e} h1v1H${f+e}z`):t.push(`M${l+e},${s+e} h${f+1-l}v1H${l+e}z`);return}c&&l===null&&(l=f)})}),t.join("")}function mx(n,e){return n.slice().map((t,i)=>i<e.y||i>=e.y+e.h?t:t.map((s,l)=>l<e.x||l>=e.x+e.w?s:!1))}function eV(n,e,t,i){if(i==null)return null;const s=n.length+t*2,l=Math.floor(e*Jj),c=s/e,f=(i.width||l)*c,p=(i.height||l)*c,m=i.x==null?n.length/2-f/2:i.x*c,_=i.y==null?n.length/2-p/2:i.y*c,E=i.opacity==null?1:i.opacity;let b=null;if(i.excavate){let I=Math.floor(m),O=Math.floor(_),M=Math.ceil(f+m-I),z=Math.ceil(p+_-O);b={x:I,y:O,w:M,h:z}}const C=i.crossOrigin;return{x:m,y:_,h:p,w:f,excavation:b,opacity:E,crossOrigin:C}}function tV(n,e){return e!=null?Math.max(Math.floor(e),0):n?Wj:Xj}function gx({value:n,level:e,minVersion:t,includeMargin:i,marginSize:s,imageSettings:l,size:c,boostLevel:f}){let p=Kt.useMemo(()=>{const I=(Array.isArray(n)?n:[n]).reduce((O,M)=>(O.push(...qu.QrSegment.makeSegments(M)),O),[]);return qu.QrCode.encodeSegments(I,Qj[e],t,void 0,void 0,f)},[n,e,t,f]);const{cells:m,margin:_,numCells:E,calculatedImageSettings:b}=Kt.useMemo(()=>{let C=p.getModules();const I=tV(i,s),O=C.length+I*2,M=eV(C,c,I,l);return{cells:C,margin:I,numCells:O,calculatedImageSettings:M}},[p,c,l,i,s]);return{qrcode:p,margin:_,cells:m,numCells:E,calculatedImageSettings:b}}var nV=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),iV=Kt.forwardRef(function(e,t){const i=e,{value:s,size:l=lx,level:c=ux,bgColor:f=cx,fgColor:p=hx,includeMargin:m=dx,minVersion:_=fx,boostLevel:E,marginSize:b,imageSettings:C}=i,O=ov(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:M}=O,z=ov(O,["style"]),Y=C?.src,K=Kt.useRef(null),J=Kt.useRef(null),oe=Kt.useCallback(Q=>{K.current=Q,typeof t=="function"?t(Q):t&&(t.current=Q)},[t]),[W,q]=Kt.useState(!1),{margin:S,cells:x,numCells:N,calculatedImageSettings:j}=gx({value:s,level:c,minVersion:_,boostLevel:E,includeMargin:m,marginSize:b,imageSettings:C,size:l});Kt.useEffect(()=>{if(K.current!=null){const Q=K.current,ae=Q.getContext("2d");if(!ae)return;let U=x;const F=J.current,X=j!=null&&F!==null&&F.complete&&F.naturalHeight!==0&&F.naturalWidth!==0;X&&j.excavation!=null&&(U=mx(x,j.excavation));const ee=window.devicePixelRatio||1;Q.height=Q.width=l*ee;const H=l/N*ee;ae.scale(H,H),ae.fillStyle=f,ae.fillRect(0,0,N,N),ae.fillStyle=p,nV?ae.fill(new Path2D(px(U,S))):x.forEach(function(ne,le){ne.forEach(function(se,he){se&&ae.fillRect(he+S,le+S,1,1)})}),j&&(ae.globalAlpha=j.opacity),X&&ae.drawImage(F,j.x+S,j.y+S,j.w,j.h)}}),Kt.useEffect(()=>{q(!1)},[Y]);const B=av({height:l,width:l},M);let D=null;return Y!=null&&(D=Kt.createElement("img",{src:Y,key:Y,style:{display:"none"},onLoad:()=>{q(!0)},ref:J,crossOrigin:j?.crossOrigin})),Kt.createElement(Kt.Fragment,null,Kt.createElement("canvas",av({style:B,height:l,width:l,ref:oe,role:"img"},z)),D)});iV.displayName="QRCodeCanvas";var _x=Kt.forwardRef(function(e,t){const i=e,{value:s,size:l=lx,level:c=ux,bgColor:f=cx,fgColor:p=hx,includeMargin:m=dx,minVersion:_=fx,boostLevel:E,title:b,marginSize:C,imageSettings:I}=i,O=ov(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:M,cells:z,numCells:Y,calculatedImageSettings:K}=gx({value:s,level:c,minVersion:_,boostLevel:E,includeMargin:m,marginSize:C,imageSettings:I,size:l});let J=z,oe=null;I!=null&&K!=null&&(K.excavation!=null&&(J=mx(z,K.excavation)),oe=Kt.createElement("image",{href:I.src,height:K.h,width:K.w,x:K.x+M,y:K.y+M,preserveAspectRatio:"none",opacity:K.opacity,crossOrigin:K.crossOrigin}));const W=px(J,M);return Kt.createElement("svg",av({height:l,width:l,viewBox:`0 0 ${Y} ${Y}`,ref:t,role:"img"},O),!!b&&Kt.createElement("title",null,b),Kt.createElement("path",{fill:f,d:`M0,0 h${Y}v${Y}H0z`,shapeRendering:"crispEdges"}),Kt.createElement("path",{fill:p,d:W,shapeRendering:"crispEdges"}),oe)});_x.displayName="QRCodeSVG";const nT=(n,e)=>n?e==="cpf"?n.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.***.***-$4"):e==="rg"?n.replace(/(\d{2})(\d{3})(\d{3})(\d{1})/,"$1.***.***-$4"):n:"N/A";function lv({solicitacao:n,trabalhador:e}){if(!n)return T.jsx("div",{className:"cartao-os-loading",children:"Carregando dados do Ticket..."});const t=`https://verificar.chapaamigo.com.br/servico/${n.id}`,i=_x,s=`OS-${n.id.slice(-6).toUpperCase()}`;if(!i)return T.jsx("div",{children:"Erro ao carregar o componente de QR Code."});const l=e?.nomeCompleto||n.chapaAlocadoNome||"Trabalhador não informado",c=e?.fotoURL;return T.jsxs("div",{id:"cartao-os-para-exportar",className:"cartao-os-container",children:[T.jsxs("header",{className:"cartao-os-header",children:[T.jsx("h2",{children:"TICKET DE SERVIÇO"}),T.jsxs("div",{className:"cartao-os-os",children:[T.jsx(_6,{size:16}),T.jsx("span",{children:s})]})]}),T.jsxs("section",{className:"cartao-os-secao-solicitante",children:[T.jsx("div",{className:"solicitante-icone",children:T.jsx(X3,{size:40})}),T.jsxs("div",{className:"solicitante-info",children:[T.jsx("span",{className:"solicitante-label",children:"SOLICITADO POR"}),T.jsx("h3",{className:"solicitante-nome",children:n?.cliente||"Cliente não informado"})]})]}),T.jsxs("section",{className:"cartao-os-secao-trabalhador",children:[T.jsx("div",{className:"trabalhador-avatar",children:c?T.jsx("img",{src:c,alt:l}):T.jsx(ud,{size:60})}),T.jsxs("div",{className:"trabalhador-info",children:[T.jsx("span",{className:"trabalhador-label",children:"Trabalhador"}),T.jsx("h3",{className:"trabalhador-nome",children:l}),e&&T.jsxs("div",{className:"trabalhador-docs",children:[T.jsxs("span",{children:[T.jsx("strong",{children:"CPF:"})," ",nT(e.cpf,"cpf")]}),T.jsxs("span",{children:[T.jsx("strong",{children:"RG:"})," ",nT(e.rg,"rg")]})]})]})]}),T.jsxs("section",{className:"cartao-os-secao",children:[T.jsxs("h4",{children:[T.jsx(b2,{size:14})," Detalhes da Operação"]}),T.jsxs("div",{className:"detalhe-item-cartao-os",children:[T.jsx("span",{className:"detalhe-label",children:"LOCAL DE APRESENTAÇÃO"}),T.jsx("p",{children:n?.endereco?.logradouro?`${n.endereco.logradouro}, ${n.endereco.numero} - ${n.endereco.bairro}`:"Não informado"})]}),T.jsxs("div",{className:"detalhe-item-cartao-os",children:[T.jsx("span",{className:"detalhe-label",children:"DESCRIÇÃO DO SERVIÇO"}),T.jsx("p",{children:n?.descricaoServico||"Não informado"})]})]}),T.jsxs("section",{className:"cartao-os-secao",children:[T.jsxs("h4",{children:[T.jsx(T6,{size:14})," Requisitos e Equipamentos (EPIs)"]}),T.jsx("p",{className:"requisitos-texto-cartao-os",children:n?.requisitos||"Nenhum requisito específico."})]}),n?.advertencia&&T.jsxs("section",{className:"cartao-os-secao advertencia",children:[T.jsxs("h4",{children:[T.jsx(S2,{size:14})," Advertência Importante"]}),T.jsx("p",{children:n.advertencia})]}),T.jsxs("footer",{className:"cartao-os-footer",children:[T.jsx("div",{className:"qr-code-placeholder",children:T.jsx(i,{value:t,size:60,bgColor:"#ffffff",fgColor:"#000000",level:"M"})}),T.jsxs("div",{className:"plataforma-info",children:[T.jsx("span",{children:"Operação gerenciada pela"}),T.jsx("p",{children:"Plataforma Chapa Amigo"})]})]})]})}function rV(){const[n,e]=te.useState([]),[t,i]=te.useState(!0),[s,l]=te.useState(!1),[c,f]=te.useState(!1),[p,m]=te.useState(null),[_,E]=te.useState([]),[b,C]=te.useState(!1),[I,O]=te.useState(!1),[M,z]=te.useState(null),[Y,K]=te.useState(""),[J,oe]=te.useState(!1),[W,q]=te.useState("cidade"),S=X=>{switch(X){case"pendente":return{icon:T.jsx(h6,{size:16}),text:"Pendente",color:"text-yellow-500"};case"aguardando_resposta":return{icon:T.jsx(y6,{size:16}),text:"Aguardando Resposta",color:"text-cyan-500"};case"confirmado":return{icon:T.jsx(s6,{size:16}),text:"Chapa Confirmado",color:"text-green-500"};case"cancelado":return{icon:T.jsx(dp,{size:16}),text:"Cancelado",color:"text-red-500"};default:return{icon:T.jsx(Ny,{size:16}),text:"Status Desconhecido",color:"text-gray-500"}}},x=m2(f3,"enviarConviteOS");te.useEffect(()=>{if(ir.currentUser){i(!0);const X=Mr(Xt,"solicitacoes"),ee=["pendente","aguardando_resposta","confirmado","cancelado"],H=ts(X,es("empresaId","==",ir.currentUser.uid),es("status","in",ee),$l("dataSolicitacao","desc")),ne=nc(H,le=>{const se=le.docs.map(he=>({id:he.id,...he.data()}));e(se),i(!1)},le=>{console.error("Erro ao escutar atualizações de solicitações: ",le),i(!1)});return()=>ne()}else e([]),i(!1)},[]);const N=async()=>{if(p){C(!0),E([]);try{const X=Mr(Xt,"chapas_b2b");let ee=ts(X,es("status","==","Disponível"));W==="cidade"&&p.endereco?.cidade?ee=ts(ee,es("cidade","==",p.endereco.cidade)):W==="estado"&&p.endereco?.estado&&(ee=ts(ee,es("estado","==",p.endereco.estado)));let ne=(await up(ee)).docs.map(le=>({...le.data(),id:le.id}));if(Y){const le=Y.toLowerCase();ne=ne.filter(se=>se.nomeCompleto&&se.nomeCompleto.toLowerCase().includes(le))}E(ne)}catch(X){console.error("Erro ao buscar trabalhadores:",X),alert("Ocorreu um erro ao buscar trabalhadores. Verifique se os índices do Firestore foram criados.")}finally{C(!1)}}};te.useEffect(()=>{s&&p?.status==="pendente"&&N()},[W,Y,s]);const j=X=>{q("cidade"),K(""),m(X),l(!0)},B=X=>{K(X.target.value)},D=()=>{l(!1),m(null),E([]),K("")},Q=()=>{O(!1),m(null),z(null)},ae=async X=>{if(!p||!X){alert("Erro: Solicitação ou trabalhador não selecionado.");return}oe(!0);const ee=_i(Xt,"solicitacoes",p.id);try{await Qu(ee,{status:"aguardando_resposta"}),await x({chapaId:X.id,nomeChapa:X.nomeCompleto,telefoneChapa:X.telefone,idOS:p.id,solicitacaoData:p}),alert(`Convite via WhatsApp enviado para ${X.nomeCompleto}!`),D()}catch(H){console.error("Erro ao enviar convite: ",H),alert(`Ocorreu um erro ao tentar enviar o convite: ${H.message}`),await Qu(ee,{status:"pendente"})}finally{oe(!1)}},U=async X=>{if(X.chapaAlocadoId&&window.confirm(`Tem certeza que deseja finalizar este serviço e liberar o trabalhador ${X.chapaAlocadoNome}?`))try{const ee=$S(Xt),H=_i(Xt,"solicitacoes",X.id);ee.update(H,{status:"finalizado",timestampFim:new Date});const ne=_i(Xt,"chapas_b2b",X.chapaAlocadoId);ee.update(ne,{status:"Disponível"}),await ee.commit()}catch(ee){console.error("Erro ao finalizar serviço: ",ee)}},F=async X=>{if(window.confirm("Tem certeza que deseja arquivar este serviço?"))try{const ee=_i(Xt,"solicitacoes",X);await Qu(ee,{status:"arquivado"})}catch(ee){console.error("Erro ao arquivar serviço:",ee),alert("Ocorreu um erro ao tentar arquivar o serviço.")}};return T.jsxs("div",{children:[T.jsxs("div",{className:"solicitacoes-header",children:[T.jsxs("div",{children:[T.jsx("h1",{className:"solicitacoes-title",children:"Mesa de Operações"}),T.jsx("p",{className:"solicitacoes-subtitle",children:"Visão geral de todas as solicitações de serviço da sua empresa."})]}),T.jsx("button",{className:"new-os-button",onClick:()=>f(!0),children:"+ Criar Nova Ordem de Serviço"})]}),T.jsx("div",{className:"table-container",children:T.jsxs("table",{className:"solicitacoes-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Cliente / Trabalhador"}),T.jsx("th",{children:"Datas"}),T.jsx("th",{children:"Status"}),T.jsx("th",{children:"Ações"})]})}),T.jsx("tbody",{children:t?T.jsx("tr",{children:T.jsxs("td",{colSpan:"4",className:"text-center p-8",children:[T.jsx(Dr,{size:24,className:"animate-spin inline-block mr-2"})," Carregando..."]})}):n.length>0?n.map(X=>{const ee=S(X.status);return T.jsxs("tr",{children:[T.jsxs("td",{children:[T.jsx("div",{className:"font-semibold",children:X.cliente}),X.chapaAlocadoNome&&T.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[T.jsx("span",{className:"font-medium",children:"Alocado:"})," ",X.chapaAlocadoNome]})]}),T.jsx("td",{children:T.jsxs("div",{className:"datas-cell",children:[X.dataServico?.toDate&&T.jsxs("span",{children:[T.jsx("strong",{children:"Serviço:"})," ",X.dataServico.toDate().toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"})]}),X.timestampFim?.toDate&&T.jsxs("span",{children:[T.jsx("strong",{children:"Finalizado:"})," ",X.timestampFim.toDate().toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"short"})]})]})}),T.jsx("td",{children:T.jsxs("div",{className:`status-cell ${ee.color}`,children:[ee.icon,T.jsx("span",{children:ee.text})]})}),T.jsx("td",{children:T.jsxs("div",{className:"acoes-cell",children:[X.status==="pendente"&&T.jsx("button",{className:"view-details-button",onClick:()=>j(X),children:" Encontrar Chapa "}),X.status==="aguardando_resposta"&&T.jsx("button",{className:"view-details-button-disabled",disabled:!0,children:" Aguardando... "}),X.status==="confirmado"&&T.jsxs(T.Fragment,{children:[" ",T.jsx("button",{className:"view-details-button",onClick:()=>j(X),children:" Ver Detalhes "})," ",T.jsxs("button",{className:"ticket-button",onClick:()=>{m(X),O(!0)},children:[" ",T.jsx(B6,{size:16})," Ver Ticket "]})," ",T.jsx("button",{className:"finish-button",onClick:()=>U(X),children:" Finalizar "})," "]}),X.status==="cancelado"&&T.jsxs(T.Fragment,{children:[" ",T.jsx("button",{className:"view-details-button",onClick:()=>j(X),children:" Ver Detalhes "})," ",T.jsxs("button",{className:"archive-button",onClick:()=>F(X.id),children:[" ",T.jsx(Iy,{size:16})," Arquivar "]})," "]})]})})]},X.id)}):T.jsx("tr",{children:T.jsx("td",{colSpan:"4",className:"text-center p-8",children:"Nenhuma solicitação ativa encontrada para sua empresa."})})})]})}),T.jsx(Zo,{isOpen:c,onClose:()=>f(!1),title:"Criar Nova Ordem de Serviço",children:T.jsx($j,{onClose:()=>f(!1)})}),T.jsx(Zo,{isOpen:s,onClose:D,title:p?.status==="pendente"?"Encontrar Trabalhador":"Detalhes do Serviço",children:p?.status!=="pendente"?T.jsx("div",{children:p&&T.jsx(lv,{solicitacao:p})}):T.jsx("div",{className:"curadoria-container",children:T.jsxs("div",{className:"curadoria-coluna",children:[T.jsx("h3",{children:"Buscar Trabalhadores"}),T.jsxs("div",{className:"search-filters",children:[T.jsxs("label",{className:"filter-label",children:[T.jsx(Oy,{size:14})," Filtrar por:"]}),T.jsxs("div",{className:"filter-options",children:[T.jsx("button",{onClick:()=>q("cidade"),className:W==="cidade"?"active":"",children:"Mesma Cidade"}),T.jsx("button",{onClick:()=>q("estado"),className:W==="estado"?"active":"",children:"Mesmo Estado"}),T.jsx("button",{onClick:()=>q("pais"),className:W==="pais"?"active":"",children:"Todo Brasil"})]})]}),T.jsx("div",{className:"search-container",children:T.jsxs("div",{className:"search-input-wrapper",children:[T.jsx(D6,{size:18,className:"search-icon"}),T.jsx("input",{type:"text",placeholder:"Buscar por nome...",value:Y,onChange:B})]})}),b?T.jsxs("div",{className:"loading-sugeridos",children:[T.jsx(Dr,{size:20,className:"animate-spin"})," Carregando..."]}):T.jsx("div",{className:"lista-sugeridos",children:_.length>0?_.map(X=>T.jsxs("div",{className:"sugerido-item",children:[T.jsxs("div",{className:"sugerido-info",children:[X.fotoURL?T.jsx("img",{src:X.fotoURL,alt:X.nomeCompleto,className:"sugerido-avatar"}):T.jsx("div",{className:"user-avatar",style:{width:"40px",height:"40px"},children:T.jsx(ud,{size:18})}),T.jsxs("div",{children:[T.jsx("span",{className:"sugerido-nome",children:X.nomeCompleto}),T.jsxs("span",{className:"sugerido-regiao",children:[X.cidade,", ",X.estado]})]})]}),T.jsx("button",{className:"alocar-btn",onClick:()=>ae(X),disabled:J,children:J?T.jsx(Dr,{size:16,className:"animate-spin"}):"Alocar"})]},X.id)):T.jsx("p",{style:{textAlign:"center",padding:"1rem"},children:"Nenhum trabalhador encontrado para os filtros selecionados."})})]})})}),T.jsx(Zo,{isOpen:I,onClose:Q,title:"Ticket de Serviço",children:T.jsx(lv,{solicitacao:p,trabalhador:M})})]})}function Uy({isOpen:n,onClose:e,onConfirm:t,title:i,children:s}){return n?T.jsx("div",{className:"confirm-modal-overlay",children:T.jsxs("div",{className:"confirm-modal-content",children:[T.jsxs("div",{className:"confirm-modal-header",children:[T.jsx(S2,{size:24,className:"confirm-modal-icon"}),T.jsx("h2",{className:"confirm-modal-title",children:i})]}),T.jsx("div",{className:"confirm-modal-body",children:s}),T.jsxs("div",{className:"confirm-modal-footer",children:[T.jsx("button",{onClick:e,className:"confirm-modal-btn cancel-btn",children:"Cancelar"}),T.jsx("button",{onClick:t,className:"confirm-modal-btn confirm-btn",children:"Confirmar Exclusão"})]})]})}):null}var Bf={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var sV=Bf.exports,iT;function aV(){return iT||(iT=1,function(n,e){((t,i)=>{n.exports=i()})(sV,function t(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},s,l=!i.document&&!!i.postMessage,c=i.IS_PAPA_WORKER||!1,f={},p=0,m={};function _(S){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(x){var N=oe(x);N.chunkSize=parseInt(N.chunkSize),x.step||x.chunk||(N.chunkSize=null),this._handle=new O(N),(this._handle.streamer=this)._config=N}).call(this,S),this.parseChunk=function(x,N){var j=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<j){let D=this._config.newline;D||(B=this._config.quoteChar||'"',D=this._handle.guessLineEndings(x,B)),x=[...x.split(D).slice(j)].join(D)}this.isFirstChunk&&q(this._config.beforeFirstChunk)&&(B=this._config.beforeFirstChunk(x))!==void 0&&(x=B),this.isFirstChunk=!1,this._halted=!1;var j=this._partialLine+x,B=(this._partialLine="",this._handle.parse(j,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(x=B.meta.cursor,j=(this._finished||(this._partialLine=j.substring(x-this._baseIndex),this._baseIndex=x),B&&B.data&&(this._rowCount+=B.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)i.postMessage({results:B,workerId:m.WORKER_ID,finished:j});else if(q(this._config.chunk)&&!N){if(this._config.chunk(B,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=B=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(B.data),this._completeResults.errors=this._completeResults.errors.concat(B.errors),this._completeResults.meta=B.meta),this._completed||!j||!q(this._config.complete)||B&&B.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),j||B&&B.meta.paused||this._nextChunk(),B}this._halted=!0},this._sendError=function(x){q(this._config.error)?this._config.error(x):c&&this._config.error&&i.postMessage({workerId:m.WORKER_ID,error:x,finished:!1})}}function E(S){var x;(S=S||{}).chunkSize||(S.chunkSize=m.RemoteChunkSize),_.call(this,S),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(N){this._input=N,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(x=new XMLHttpRequest,this._config.withCredentials&&(x.withCredentials=this._config.withCredentials),l||(x.onload=W(this._chunkLoaded,this),x.onerror=W(this._chunkError,this)),x.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var N,j=this._config.downloadRequestHeaders;for(N in j)x.setRequestHeader(N,j[N])}var B;this._config.chunkSize&&(B=this._start+this._config.chunkSize-1,x.setRequestHeader("Range","bytes="+this._start+"-"+B));try{x.send(this._config.downloadRequestBody)}catch(D){this._chunkError(D.message)}l&&x.status===0&&this._chunkError()}},this._chunkLoaded=function(){x.readyState===4&&(x.status<200||400<=x.status?this._chunkError():(this._start+=this._config.chunkSize||x.responseText.length,this._finished=!this._config.chunkSize||this._start>=(N=>(N=N.getResponseHeader("Content-Range"))!==null?parseInt(N.substring(N.lastIndexOf("/")+1)):-1)(x),this.parseChunk(x.responseText)))},this._chunkError=function(N){N=x.statusText||N,this._sendError(new Error(N))}}function b(S){(S=S||{}).chunkSize||(S.chunkSize=m.LocalChunkSize),_.call(this,S);var x,N,j=typeof FileReader<"u";this.stream=function(B){this._input=B,N=B.slice||B.webkitSlice||B.mozSlice,j?((x=new FileReader).onload=W(this._chunkLoaded,this),x.onerror=W(this._chunkError,this)):x=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var B=this._input,D=(this._config.chunkSize&&(D=Math.min(this._start+this._config.chunkSize,this._input.size),B=N.call(B,this._start,D)),x.readAsText(B,this._config.encoding));j||this._chunkLoaded({target:{result:D}})},this._chunkLoaded=function(B){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(B.target.result)},this._chunkError=function(){this._sendError(x.error)}}function C(S){var x;_.call(this,S=S||{}),this.stream=function(N){return x=N,this._nextChunk()},this._nextChunk=function(){var N,j;if(!this._finished)return N=this._config.chunkSize,x=N?(j=x.substring(0,N),x.substring(N)):(j=x,""),this._finished=!x,this.parseChunk(j)}}function I(S){_.call(this,S=S||{});var x=[],N=!0,j=!1;this.pause=function(){_.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){_.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(B){this._input=B,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){j&&x.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),x.length?this.parseChunk(x.shift()):N=!0},this._streamData=W(function(B){try{x.push(typeof B=="string"?B:B.toString(this._config.encoding)),N&&(N=!1,this._checkIsFinished(),this.parseChunk(x.shift()))}catch(D){this._streamError(D)}},this),this._streamError=W(function(B){this._streamCleanUp(),this._sendError(B)},this),this._streamEnd=W(function(){this._streamCleanUp(),j=!0,this._streamData("")},this),this._streamCleanUp=W(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function O(S){var x,N,j,B,D=Math.pow(2,53),Q=-D,ae=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,U=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,X=0,ee=0,H=!1,ne=!1,le=[],se={data:[],errors:[],meta:{}};function he(ke){return S.skipEmptyLines==="greedy"?ke.join("").trim()==="":ke.length===1&&ke[0].length===0}function ue(){if(se&&j&&(Fe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),j=!1),S.skipEmptyLines&&(se.data=se.data.filter(function(Ze){return!he(Ze)})),ye()){let Ze=function(Et,be){q(S.transformHeader)&&(Et=S.transformHeader(Et,be)),le.push(Et)};var je=Ze;if(se)if(Array.isArray(se.data[0])){for(var ke=0;ye()&&ke<se.data.length;ke++)se.data[ke].forEach(Ze);se.data.splice(0,1)}else se.data.forEach(Ze)}function De(Ze,Et){for(var be=S.header?{}:[],Ne=0;Ne<Ze.length;Ne++){var Oe=Ne,Le=Ze[Ne],Le=((Me,Qe)=>(it=>(S.dynamicTypingFunction&&S.dynamicTyping[it]===void 0&&(S.dynamicTyping[it]=S.dynamicTypingFunction(it)),(S.dynamicTyping[it]||S.dynamicTyping)===!0))(Me)?Qe==="true"||Qe==="TRUE"||Qe!=="false"&&Qe!=="FALSE"&&((it=>{if(ae.test(it)&&(it=parseFloat(it),Q<it&&it<D))return 1})(Qe)?parseFloat(Qe):U.test(Qe)?new Date(Qe):Qe===""?null:Qe):Qe)(Oe=S.header?Ne>=le.length?"__parsed_extra":le[Ne]:Oe,Le=S.transform?S.transform(Le,Oe):Le);Oe==="__parsed_extra"?(be[Oe]=be[Oe]||[],be[Oe].push(Le)):be[Oe]=Le}return S.header&&(Ne>le.length?Fe("FieldMismatch","TooManyFields","Too many fields: expected "+le.length+" fields but parsed "+Ne,ee+Et):Ne<le.length&&Fe("FieldMismatch","TooFewFields","Too few fields: expected "+le.length+" fields but parsed "+Ne,ee+Et)),be}var qe;se&&(S.header||S.dynamicTyping||S.transform)&&(qe=1,!se.data.length||Array.isArray(se.data[0])?(se.data=se.data.map(De),qe=se.data.length):se.data=De(se.data,0),S.header&&se.meta&&(se.meta.fields=le),ee+=qe)}function ye(){return S.header&&le.length===0}function Fe(ke,De,qe,je){ke={type:ke,code:De,message:qe},je!==void 0&&(ke.row=je),se.errors.push(ke)}q(S.step)&&(B=S.step,S.step=function(ke){se=ke,ye()?ue():(ue(),se.data.length!==0&&(X+=ke.data.length,S.preview&&X>S.preview?N.abort():(se.data=se.data[0],B(se,F))))}),this.parse=function(ke,De,qe){var je=S.quoteChar||'"',je=(S.newline||(S.newline=this.guessLineEndings(ke,je)),j=!1,S.delimiter?q(S.delimiter)&&(S.delimiter=S.delimiter(ke),se.meta.delimiter=S.delimiter):((je=((Ze,Et,be,Ne,Oe)=>{var Le,Me,Qe,it;Oe=Oe||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var _t=0;_t<Oe.length;_t++){for(var Vt,kt=Oe[_t],rt=0,Ht=0,Je=0,tt=(Qe=void 0,new z({comments:Ne,delimiter:kt,newline:Et,preview:10}).parse(Ze)),mt=0;mt<tt.data.length;mt++)be&&he(tt.data[mt])?Je++:(Vt=tt.data[mt].length,Ht+=Vt,Qe===void 0?Qe=Vt:0<Vt&&(rt+=Math.abs(Vt-Qe),Qe=Vt));0<tt.data.length&&(Ht/=tt.data.length-Je),(Me===void 0||rt<=Me)&&(it===void 0||it<Ht)&&1.99<Ht&&(Me=rt,Le=kt,it=Ht)}return{successful:!!(S.delimiter=Le),bestDelimiter:Le}})(ke,S.newline,S.skipEmptyLines,S.comments,S.delimitersToGuess)).successful?S.delimiter=je.bestDelimiter:(j=!0,S.delimiter=m.DefaultDelimiter),se.meta.delimiter=S.delimiter),oe(S));return S.preview&&S.header&&je.preview++,x=ke,N=new z(je),se=N.parse(x,De,qe),ue(),H?{meta:{paused:!0}}:se||{meta:{paused:!1}}},this.paused=function(){return H},this.pause=function(){H=!0,N.abort(),x=q(S.chunk)?"":x.substring(N.getCharIndex())},this.resume=function(){F.streamer._halted?(H=!1,F.streamer.parseChunk(x,!0)):setTimeout(F.resume,3)},this.aborted=function(){return ne},this.abort=function(){ne=!0,N.abort(),se.meta.aborted=!0,q(S.complete)&&S.complete(se),x=""},this.guessLineEndings=function(Ze,je){Ze=Ze.substring(0,1048576);var je=new RegExp(M(je)+"([^]*?)"+M(je),"gm"),qe=(Ze=Ze.replace(je,"")).split("\r"),je=Ze.split(`
`),Ze=1<je.length&&je[0].length<qe[0].length;if(qe.length===1||Ze)return`
`;for(var Et=0,be=0;be<qe.length;be++)qe[be][0]===`
`&&Et++;return Et>=qe.length/2?`\r
`:"\r"}}function M(S){return S.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function z(S){var x=(S=S||{}).delimiter,N=S.newline,j=S.comments,B=S.step,D=S.preview,Q=S.fastMode,ae=null,U=!1,F=S.quoteChar==null?'"':S.quoteChar,X=F;if(S.escapeChar!==void 0&&(X=S.escapeChar),(typeof x!="string"||-1<m.BAD_DELIMITERS.indexOf(x))&&(x=","),j===x)throw new Error("Comment character same as delimiter");j===!0?j="#":(typeof j!="string"||-1<m.BAD_DELIMITERS.indexOf(j))&&(j=!1),N!==`
`&&N!=="\r"&&N!==`\r
`&&(N=`
`);var ee=0,H=!1;this.parse=function(ne,le,se){if(typeof ne!="string")throw new Error("Input must be a string");var he=ne.length,ue=x.length,ye=N.length,Fe=j.length,ke=q(B),De=[],qe=[],je=[],Ze=ee=0;if(!ne)return rt();if(Q||Q!==!1&&ne.indexOf(F)===-1){for(var Et=ne.split(N),be=0;be<Et.length;be++){if(je=Et[be],ee+=je.length,be!==Et.length-1)ee+=N.length;else if(se)return rt();if(!j||je.substring(0,Fe)!==j){if(ke){if(De=[],it(je.split(x)),Ht(),H)return rt()}else it(je.split(x));if(D&&D<=be)return De=De.slice(0,D),rt(!0)}}return rt()}for(var Ne=ne.indexOf(x,ee),Oe=ne.indexOf(N,ee),Le=new RegExp(M(X)+M(F),"g"),Me=ne.indexOf(F,ee);;)if(ne[ee]===F)for(Me=ee,ee++;;){if((Me=ne.indexOf(F,Me+1))===-1)return se||qe.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:De.length,index:ee}),Vt();if(Me===he-1)return Vt(ne.substring(ee,Me).replace(Le,F));if(F===X&&ne[Me+1]===X)Me++;else if(F===X||Me===0||ne[Me-1]!==X){Ne!==-1&&Ne<Me+1&&(Ne=ne.indexOf(x,Me+1));var Qe=_t((Oe=Oe!==-1&&Oe<Me+1?ne.indexOf(N,Me+1):Oe)===-1?Ne:Math.min(Ne,Oe));if(ne.substr(Me+1+Qe,ue)===x){je.push(ne.substring(ee,Me).replace(Le,F)),ne[ee=Me+1+Qe+ue]!==F&&(Me=ne.indexOf(F,ee)),Ne=ne.indexOf(x,ee),Oe=ne.indexOf(N,ee);break}if(Qe=_t(Oe),ne.substring(Me+1+Qe,Me+1+Qe+ye)===N){if(je.push(ne.substring(ee,Me).replace(Le,F)),kt(Me+1+Qe+ye),Ne=ne.indexOf(x,ee),Me=ne.indexOf(F,ee),ke&&(Ht(),H))return rt();if(D&&De.length>=D)return rt(!0);break}qe.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:De.length,index:ee}),Me++}}else if(j&&je.length===0&&ne.substring(ee,ee+Fe)===j){if(Oe===-1)return rt();ee=Oe+ye,Oe=ne.indexOf(N,ee),Ne=ne.indexOf(x,ee)}else if(Ne!==-1&&(Ne<Oe||Oe===-1))je.push(ne.substring(ee,Ne)),ee=Ne+ue,Ne=ne.indexOf(x,ee);else{if(Oe===-1)break;if(je.push(ne.substring(ee,Oe)),kt(Oe+ye),ke&&(Ht(),H))return rt();if(D&&De.length>=D)return rt(!0)}return Vt();function it(Je){De.push(Je),Ze=ee}function _t(Je){var tt=0;return tt=Je!==-1&&(Je=ne.substring(Me+1,Je))&&Je.trim()===""?Je.length:tt}function Vt(Je){return se||(Je===void 0&&(Je=ne.substring(ee)),je.push(Je),ee=he,it(je),ke&&Ht()),rt()}function kt(Je){ee=Je,it(je),je=[],Oe=ne.indexOf(N,ee)}function rt(Je){if(S.header&&!le&&De.length&&!U){var tt=De[0],mt=Object.create(null),qt=new Set(tt);let on=!1;for(let mn=0;mn<tt.length;mn++){let Ut=tt[mn];if(mt[Ut=q(S.transformHeader)?S.transformHeader(Ut,mn):Ut]){let ln,gn=mt[Ut];for(;ln=Ut+"_"+gn,gn++,qt.has(ln););qt.add(ln),tt[mn]=ln,mt[Ut]++,on=!0,(ae=ae===null?{}:ae)[ln]=Ut}else mt[Ut]=1,tt[mn]=Ut;qt.add(Ut)}on&&console.warn("Duplicate headers found and renamed."),U=!0}return{data:De,errors:qe,meta:{delimiter:x,linebreak:N,aborted:H,truncated:!!Je,cursor:Ze+(le||0),renamedHeaders:ae}}}function Ht(){B(rt()),De=[],qe=[]}},this.abort=function(){H=!0},this.getCharIndex=function(){return ee}}function Y(S){var x=S.data,N=f[x.workerId],j=!1;if(x.error)N.userError(x.error,x.file);else if(x.results&&x.results.data){var B={abort:function(){j=!0,K(x.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:J,resume:J};if(q(N.userStep)){for(var D=0;D<x.results.data.length&&(N.userStep({data:x.results.data[D],errors:x.results.errors,meta:x.results.meta},B),!j);D++);delete x.results}else q(N.userChunk)&&(N.userChunk(x.results,B,x.file),delete x.results)}x.finished&&!j&&K(x.workerId,x.results)}function K(S,x){var N=f[S];q(N.userComplete)&&N.userComplete(x),N.terminate(),delete f[S]}function J(){throw new Error("Not implemented.")}function oe(S){if(typeof S!="object"||S===null)return S;var x,N=Array.isArray(S)?[]:{};for(x in S)N[x]=oe(S[x]);return N}function W(S,x){return function(){S.apply(x,arguments)}}function q(S){return typeof S=="function"}return m.parse=function(S,x){var N=(x=x||{}).dynamicTyping||!1;if(q(N)&&(x.dynamicTypingFunction=N,N={}),x.dynamicTyping=N,x.transform=!!q(x.transform)&&x.transform,!x.worker||!m.WORKERS_SUPPORTED)return N=null,m.NODE_STREAM_INPUT,typeof S=="string"?(S=(j=>j.charCodeAt(0)!==65279?j:j.slice(1))(S),N=new(x.download?E:C)(x)):S.readable===!0&&q(S.read)&&q(S.on)?N=new I(x):(i.File&&S instanceof File||S instanceof Object)&&(N=new b(x)),N.stream(S);(N=(()=>{var j;return!!m.WORKERS_SUPPORTED&&(j=(()=>{var B=i.URL||i.webkitURL||null,D=t.toString();return m.BLOB_URL||(m.BLOB_URL=B.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",D,")();"],{type:"text/javascript"})))})(),(j=new i.Worker(j)).onmessage=Y,j.id=p++,f[j.id]=j)})()).userStep=x.step,N.userChunk=x.chunk,N.userComplete=x.complete,N.userError=x.error,x.step=q(x.step),x.chunk=q(x.chunk),x.complete=q(x.complete),x.error=q(x.error),delete x.worker,N.postMessage({input:S,config:x,workerId:N.id})},m.unparse=function(S,x){var N=!1,j=!0,B=",",D=`\r
`,Q='"',ae=Q+Q,U=!1,F=null,X=!1,ee=((()=>{if(typeof x=="object"){if(typeof x.delimiter!="string"||m.BAD_DELIMITERS.filter(function(le){return x.delimiter.indexOf(le)!==-1}).length||(B=x.delimiter),typeof x.quotes!="boolean"&&typeof x.quotes!="function"&&!Array.isArray(x.quotes)||(N=x.quotes),typeof x.skipEmptyLines!="boolean"&&typeof x.skipEmptyLines!="string"||(U=x.skipEmptyLines),typeof x.newline=="string"&&(D=x.newline),typeof x.quoteChar=="string"&&(Q=x.quoteChar),typeof x.header=="boolean"&&(j=x.header),Array.isArray(x.columns)){if(x.columns.length===0)throw new Error("Option columns is empty");F=x.columns}x.escapeChar!==void 0&&(ae=x.escapeChar+Q),x.escapeFormulae instanceof RegExp?X=x.escapeFormulae:typeof x.escapeFormulae=="boolean"&&x.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(M(Q),"g"));if(typeof S=="string"&&(S=JSON.parse(S)),Array.isArray(S)){if(!S.length||Array.isArray(S[0]))return H(null,S,U);if(typeof S[0]=="object")return H(F||Object.keys(S[0]),S,U)}else if(typeof S=="object")return typeof S.data=="string"&&(S.data=JSON.parse(S.data)),Array.isArray(S.data)&&(S.fields||(S.fields=S.meta&&S.meta.fields||F),S.fields||(S.fields=Array.isArray(S.data[0])?S.fields:typeof S.data[0]=="object"?Object.keys(S.data[0]):[]),Array.isArray(S.data[0])||typeof S.data[0]=="object"||(S.data=[S.data])),H(S.fields||[],S.data||[],U);throw new Error("Unable to serialize unrecognized input");function H(le,se,he){var ue="",ye=(typeof le=="string"&&(le=JSON.parse(le)),typeof se=="string"&&(se=JSON.parse(se)),Array.isArray(le)&&0<le.length),Fe=!Array.isArray(se[0]);if(ye&&j){for(var ke=0;ke<le.length;ke++)0<ke&&(ue+=B),ue+=ne(le[ke],ke);0<se.length&&(ue+=D)}for(var De=0;De<se.length;De++){var qe=(ye?le:se[De]).length,je=!1,Ze=ye?Object.keys(se[De]).length===0:se[De].length===0;if(he&&!ye&&(je=he==="greedy"?se[De].join("").trim()==="":se[De].length===1&&se[De][0].length===0),he==="greedy"&&ye){for(var Et=[],be=0;be<qe;be++){var Ne=Fe?le[be]:be;Et.push(se[De][Ne])}je=Et.join("").trim()===""}if(!je){for(var Oe=0;Oe<qe;Oe++){0<Oe&&!Ze&&(ue+=B);var Le=ye&&Fe?le[Oe]:Oe;ue+=ne(se[De][Le],Oe)}De<se.length-1&&(!he||0<qe&&!Ze)&&(ue+=D)}}return ue}function ne(le,se){var he,ue;return le==null?"":le.constructor===Date?JSON.stringify(le).slice(1,25):(ue=!1,X&&typeof le=="string"&&X.test(le)&&(le="'"+le,ue=!0),he=le.toString().replace(ee,ae),(ue=ue||N===!0||typeof N=="function"&&N(le,se)||Array.isArray(N)&&N[se]||((ye,Fe)=>{for(var ke=0;ke<Fe.length;ke++)if(-1<ye.indexOf(Fe[ke]))return!0;return!1})(he,m.BAD_DELIMITERS)||-1<he.indexOf(B)||he.charAt(0)===" "||he.charAt(he.length-1)===" ")?Q+he+Q:he)}},m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!l&&!!i.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=z,m.ParserHandle=O,m.NetworkStreamer=E,m.FileStreamer=b,m.StringStreamer=C,m.ReadableStreamStreamer=I,i.jQuery&&((s=i.jQuery).fn.parse=function(S){var x=S.config||{},N=[];return this.each(function(D){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var Q=0;Q<this.files.length;Q++)N.push({file:this.files[Q],inputElem:this,instanceConfig:s.extend({},x)})}),j(),this;function j(){if(N.length===0)q(S.complete)&&S.complete();else{var D,Q,ae,U,F=N[0];if(q(S.before)){var X=S.before(F.file,F.inputElem);if(typeof X=="object"){if(X.action==="abort")return D="AbortError",Q=F.file,ae=F.inputElem,U=X.reason,void(q(S.error)&&S.error({name:D},Q,ae,U));if(X.action==="skip")return void B();typeof X.config=="object"&&(F.instanceConfig=s.extend(F.instanceConfig,X.config))}else if(X==="skip")return void B()}var ee=F.instanceConfig.complete;F.instanceConfig.complete=function(H){q(ee)&&ee(H,F.file,F.inputElem),B()},m.parse(F.file,F.instanceConfig)}}function B(){N.splice(0,1),j()}}),c&&(i.onmessage=function(S){S=S.data,m.WORKER_ID===void 0&&S&&(m.WORKER_ID=S.workerId),typeof S.input=="string"?i.postMessage({workerId:m.WORKER_ID,results:m.parse(S.input,S.config),finished:!0}):(i.File&&S.input instanceof File||S.input instanceof Object)&&(S=m.parse(S.input,S.config))&&i.postMessage({workerId:m.WORKER_ID,results:S,finished:!0})}),(E.prototype=Object.create(_.prototype)).constructor=E,(b.prototype=Object.create(_.prototype)).constructor=b,(C.prototype=Object.create(C.prototype)).constructor=C,(I.prototype=Object.create(_.prototype)).constructor=I,m})}(Bf)),Bf.exports}var oV=aV();const lV=zh(oV);function uV(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(i){if(i!=="default"&&!(i in n)){var s=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:function(){return t[i]}})}})}),Object.freeze(n)}function vx(n,e){return new Promise(function(t,i){let s;return cV(n).then(function(l){try{return s=l,t(new Blob([e.slice(0,2),s,e.slice(2)],{type:"image/jpeg"}))}catch(c){return i(c)}},i)})}const cV=n=>new Promise((e,t)=>{const i=new FileReader;i.addEventListener("load",({target:{result:s}})=>{const l=new DataView(s);let c=0;if(l.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const f=l.getUint16(c);if(f===65498)break;const p=l.getUint16(c+2);if(f===65505&&l.getUint32(c+4)===1165519206){const m=c+10;let _;switch(l.getUint16(m)){case 18761:_=!0;break;case 19789:_=!1;break;default:return t("TIFF header contains invalid endian")}if(l.getUint16(m+2,_)!==42)return t("TIFF header contains invalid version");const E=l.getUint32(m+4,_),b=m+E+2+12*l.getUint16(m+E,_);for(let C=m+E+2;C<b;C+=12)if(l.getUint16(C,_)==274){if(l.getUint16(C+2,_)!==3)return t("Orientation data type is invalid");if(l.getUint32(C+4,_)!==1)return t("Orientation data count is invalid");l.setUint16(C+8,1,_);break}return e(s.slice(c,c+2+p))}c+=2+p}return e(new Blob)}),i.readAsArrayBuffer(n)});var vp={},hV={get exports(){return vp},set exports(n){vp=n}};(function(n){var e,t,i={};hV.exports=i,i.parse=function(s,l){for(var c=i.bin.readUshort,f=i.bin.readUint,p=0,m={},_=new Uint8Array(s),E=_.length-4;f(_,E)!=101010256;)E--;p=E,p+=4;var b=c(_,p+=4);c(_,p+=2);var C=f(_,p+=2),I=f(_,p+=4);p+=4,p=I;for(var O=0;O<b;O++){f(_,p),p+=4,p+=4,p+=4,f(_,p+=4),C=f(_,p+=4);var M=f(_,p+=4),z=c(_,p+=4),Y=c(_,p+2),K=c(_,p+4);p+=6;var J=f(_,p+=8);p+=4,p+=z+Y+K,i._readLocal(_,J,m,C,M,l)}return m},i._readLocal=function(s,l,c,f,p,m){var _=i.bin.readUshort,E=i.bin.readUint;E(s,l),_(s,l+=4),_(s,l+=2);var b=_(s,l+=2);E(s,l+=2),E(s,l+=4),l+=4;var C=_(s,l+=8),I=_(s,l+=2);l+=2;var O=i.bin.readUTF8(s,l,C);if(l+=C,l+=I,m)c[O]={size:p,csize:f};else{var M=new Uint8Array(s.buffer,l);if(b==0)c[O]=new Uint8Array(M.buffer.slice(l,l+f));else{if(b!=8)throw"unknown compression method: "+b;var z=new Uint8Array(p);i.inflateRaw(M,z),c[O]=z}}},i.inflateRaw=function(s,l){return i.F.inflate(s,l)},i.inflate=function(s,l){return s[0],s[1],i.inflateRaw(new Uint8Array(s.buffer,s.byteOffset+2,s.length-6),l)},i.deflate=function(s,l){l==null&&(l={level:6});var c=0,f=new Uint8Array(50+Math.floor(1.1*s.length));f[c]=120,f[c+1]=156,c+=2,c=i.F.deflateRaw(s,f,c,l.level);var p=i.adler(s,0,s.length);return f[c+0]=p>>>24&255,f[c+1]=p>>>16&255,f[c+2]=p>>>8&255,f[c+3]=p>>>0&255,new Uint8Array(f.buffer,0,c+4)},i.deflateRaw=function(s,l){l==null&&(l={level:6});var c=new Uint8Array(50+Math.floor(1.1*s.length)),f=i.F.deflateRaw(s,c,f,l.level);return new Uint8Array(c.buffer,0,f)},i.encode=function(s,l){l==null&&(l=!1);var c=0,f=i.bin.writeUint,p=i.bin.writeUshort,m={};for(var _ in s){var E=!i._noNeed(_)&&!l,b=s[_],C=i.crc.crc(b,0,b.length);m[_]={cpr:E,usize:b.length,crc:C,file:E?i.deflateRaw(b):b}}for(var _ in m)c+=m[_].file.length+30+46+2*i.bin.sizeUTF8(_);c+=22;var I=new Uint8Array(c),O=0,M=[];for(var _ in m){var z=m[_];M.push(O),O=i._writeHeader(I,O,_,z,0)}var Y=0,K=O;for(var _ in m)z=m[_],M.push(O),O=i._writeHeader(I,O,_,z,1,M[Y++]);var J=O-K;return f(I,O,101010256),O+=4,p(I,O+=4,Y),p(I,O+=2,Y),f(I,O+=2,J),f(I,O+=4,K),O+=4,O+=2,I.buffer},i._noNeed=function(s){var l=s.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(l)!=-1},i._writeHeader=function(s,l,c,f,p,m){var _=i.bin.writeUint,E=i.bin.writeUshort,b=f.file;return _(s,l,p==0?67324752:33639248),l+=4,p==1&&(l+=2),E(s,l,20),E(s,l+=2,0),E(s,l+=2,f.cpr?8:0),_(s,l+=2,0),_(s,l+=4,f.crc),_(s,l+=4,b.length),_(s,l+=4,f.usize),E(s,l+=4,i.bin.sizeUTF8(c)),E(s,l+=2,0),l+=2,p==1&&(l+=2,l+=2,_(s,l+=6,m),l+=4),l+=i.bin.writeUTF8(s,l,c),p==0&&(s.set(b,l),l+=b.length),l},i.crc={table:function(){for(var s=new Uint32Array(256),l=0;l<256;l++){for(var c=l,f=0;f<8;f++)1&c?c=3988292384^c>>>1:c>>>=1;s[l]=c}return s}(),update:function(s,l,c,f){for(var p=0;p<f;p++)s=i.crc.table[255&(s^l[c+p])]^s>>>8;return s},crc:function(s,l,c){return 4294967295^i.crc.update(4294967295,s,l,c)}},i.adler=function(s,l,c){for(var f=1,p=0,m=l,_=l+c;m<_;){for(var E=Math.min(m+5552,_);m<E;)p+=f+=s[m++];f%=65521,p%=65521}return p<<16|f},i.bin={readUshort:function(s,l){return s[l]|s[l+1]<<8},writeUshort:function(s,l,c){s[l]=255&c,s[l+1]=c>>8&255},readUint:function(s,l){return 16777216*s[l+3]+(s[l+2]<<16|s[l+1]<<8|s[l])},writeUint:function(s,l,c){s[l]=255&c,s[l+1]=c>>8&255,s[l+2]=c>>16&255,s[l+3]=c>>24&255},readASCII:function(s,l,c){for(var f="",p=0;p<c;p++)f+=String.fromCharCode(s[l+p]);return f},writeASCII:function(s,l,c){for(var f=0;f<c.length;f++)s[l+f]=c.charCodeAt(f)},pad:function(s){return s.length<2?"0"+s:s},readUTF8:function(s,l,c){for(var f,p="",m=0;m<c;m++)p+="%"+i.bin.pad(s[l+m].toString(16));try{f=decodeURIComponent(p)}catch{return i.bin.readASCII(s,l,c)}return f},writeUTF8:function(s,l,c){for(var f=c.length,p=0,m=0;m<f;m++){var _=c.charCodeAt(m);if((4294967168&_)==0)s[l+p]=_,p++;else if((4294965248&_)==0)s[l+p]=192|_>>6,s[l+p+1]=128|_>>0&63,p+=2;else if((4294901760&_)==0)s[l+p]=224|_>>12,s[l+p+1]=128|_>>6&63,s[l+p+2]=128|_>>0&63,p+=3;else{if((4292870144&_)!=0)throw"e";s[l+p]=240|_>>18,s[l+p+1]=128|_>>12&63,s[l+p+2]=128|_>>6&63,s[l+p+3]=128|_>>0&63,p+=4}}return p},sizeUTF8:function(s){for(var l=s.length,c=0,f=0;f<l;f++){var p=s.charCodeAt(f);if((4294967168&p)==0)c++;else if((4294965248&p)==0)c+=2;else if((4294901760&p)==0)c+=3;else{if((4292870144&p)!=0)throw"e";c+=4}}return c}},i.F={},i.F.deflateRaw=function(s,l,c,f){var p=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][f],m=i.F.U,_=i.F._goodIndex;i.F._hash;var E=i.F._putsE,b=0,C=c<<3,I=0,O=s.length;if(f==0){for(;b<O;)E(l,C,b+(j=Math.min(65535,O-b))==O?1:0),C=i.F._copyExact(s,b,j,l,C+8),b+=j;return C>>>3}var M=m.lits,z=m.strt,Y=m.prev,K=0,J=0,oe=0,W=0,q=0,S=0;for(O>2&&(z[S=i.F._hash(s,0)]=0),b=0;b<O;b++){if(q=S,b+1<O-2){S=i.F._hash(s,b+1);var x=b+1&32767;Y[x]=z[S],z[S]=x}if(I<=b){(K>14e3||J>26697)&&O-b>100&&(I<b&&(M[K]=b-I,K+=2,I=b),C=i.F._writeBlock(b==O-1||I==O?1:0,M,K,W,s,oe,b-oe,l,C),K=J=W=0,oe=b);var N=0;b<O-2&&(N=i.F._bestMatch(s,b,Y,q,Math.min(p[2],O-b),p[3]));var j=N>>>16,B=65535&N;if(N!=0){B=65535&N;var D=_(j=N>>>16,m.of0);m.lhst[257+D]++;var Q=_(B,m.df0);m.dhst[Q]++,W+=m.exb[D]+m.dxb[Q],M[K]=j<<23|b-I,M[K+1]=B<<16|D<<8|Q,K+=2,I=b+j}else m.lhst[s[b]]++;J++}}for(oe==b&&s.length!=0||(I<b&&(M[K]=b-I,K+=2,I=b),C=i.F._writeBlock(1,M,K,W,s,oe,b-oe,l,C),K=0,J=0,K=J=W=0,oe=b);(7&C)!=0;)C++;return C>>>3},i.F._bestMatch=function(s,l,c,f,p,m){var _=32767&l,E=c[_],b=_-E+32768&32767;if(E==_||f!=i.F._hash(s,l-b))return 0;for(var C=0,I=0,O=Math.min(32767,l);b<=O&&--m!=0&&E!=_;){if(C==0||s[l+C]==s[l+C-b]){var M=i.F._howLong(s,l,b);if(M>C){if(I=b,(C=M)>=p)break;b+2<M&&(M=b+2);for(var z=0,Y=0;Y<M-2;Y++){var K=l-b+Y+32768&32767,J=K-c[K]+32768&32767;J>z&&(z=J,E=K)}}}b+=(_=E)-(E=c[_])+32768&32767}return C<<16|I},i.F._howLong=function(s,l,c){if(s[l]!=s[l-c]||s[l+1]!=s[l+1-c]||s[l+2]!=s[l+2-c])return 0;var f=l,p=Math.min(s.length,l+258);for(l+=3;l<p&&s[l]==s[l-c];)l++;return l-f},i.F._hash=function(s,l){return(s[l]<<8|s[l+1])+(s[l+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(s,l,c,f,p,m,_,E,b){var C,I,O,M,z,Y,K,J,oe,W=i.F.U,q=i.F._putsF,S=i.F._putsE;W.lhst[256]++,I=(C=i.F.getTrees())[0],O=C[1],M=C[2],z=C[3],Y=C[4],K=C[5],J=C[6],oe=C[7];var x=32+((b+3&7)==0?0:8-(b+3&7))+(_<<3),N=f+i.F.contSize(W.fltree,W.lhst)+i.F.contSize(W.fdtree,W.dhst),j=f+i.F.contSize(W.ltree,W.lhst)+i.F.contSize(W.dtree,W.dhst);j+=14+3*K+i.F.contSize(W.itree,W.ihst)+(2*W.ihst[16]+3*W.ihst[17]+7*W.ihst[18]);for(var B=0;B<286;B++)W.lhst[B]=0;for(B=0;B<30;B++)W.dhst[B]=0;for(B=0;B<19;B++)W.ihst[B]=0;var D=x<N&&x<j?0:N<j?1:2;if(q(E,b,s),q(E,b+1,D),b+=3,D==0){for(;(7&b)!=0;)b++;b=i.F._copyExact(p,m,_,E,b)}else{var Q,ae;if(D==1&&(Q=W.fltree,ae=W.fdtree),D==2){i.F.makeCodes(W.ltree,I),i.F.revCodes(W.ltree,I),i.F.makeCodes(W.dtree,O),i.F.revCodes(W.dtree,O),i.F.makeCodes(W.itree,M),i.F.revCodes(W.itree,M),Q=W.ltree,ae=W.dtree,S(E,b,z-257),S(E,b+=5,Y-1),S(E,b+=5,K-4),b+=4;for(var U=0;U<K;U++)S(E,b+3*U,W.itree[1+(W.ordr[U]<<1)]);b+=3*K,b=i.F._codeTiny(J,W.itree,E,b),b=i.F._codeTiny(oe,W.itree,E,b)}for(var F=m,X=0;X<c;X+=2){for(var ee=l[X],H=ee>>>23,ne=F+(8388607&ee);F<ne;)b=i.F._writeLit(p[F++],Q,E,b);if(H!=0){var le=l[X+1],se=le>>16,he=le>>8&255,ue=255&le;S(E,b=i.F._writeLit(257+he,Q,E,b),H-W.of0[he]),b+=W.exb[he],q(E,b=i.F._writeLit(ue,ae,E,b),se-W.df0[ue]),b+=W.dxb[ue],F+=H}}b=i.F._writeLit(256,Q,E,b)}return b},i.F._copyExact=function(s,l,c,f,p){var m=p>>>3;return f[m]=c,f[m+1]=c>>>8,f[m+2]=255-f[m],f[m+3]=255-f[m+1],m+=4,f.set(new Uint8Array(s.buffer,l,c),m),p+(c+4<<3)},i.F.getTrees=function(){for(var s=i.F.U,l=i.F._hufTree(s.lhst,s.ltree,15),c=i.F._hufTree(s.dhst,s.dtree,15),f=[],p=i.F._lenCodes(s.ltree,f),m=[],_=i.F._lenCodes(s.dtree,m),E=0;E<f.length;E+=2)s.ihst[f[E]]++;for(E=0;E<m.length;E+=2)s.ihst[m[E]]++;for(var b=i.F._hufTree(s.ihst,s.itree,7),C=19;C>4&&s.itree[1+(s.ordr[C-1]<<1)]==0;)C--;return[l,c,b,p,_,C,f,m]},i.F.getSecond=function(s){for(var l=[],c=0;c<s.length;c+=2)l.push(s[c+1]);return l},i.F.nonZero=function(s){for(var l="",c=0;c<s.length;c+=2)s[c+1]!=0&&(l+=(c>>1)+",");return l},i.F.contSize=function(s,l){for(var c=0,f=0;f<l.length;f++)c+=l[f]*s[1+(f<<1)];return c},i.F._codeTiny=function(s,l,c,f){for(var p=0;p<s.length;p+=2){var m=s[p],_=s[p+1];f=i.F._writeLit(m,l,c,f);var E=m==16?2:m==17?3:7;m>15&&(i.F._putsE(c,f,_,E),f+=E)}return f},i.F._lenCodes=function(s,l){for(var c=s.length;c!=2&&s[c-1]==0;)c-=2;for(var f=0;f<c;f+=2){var p=s[f+1],m=f+3<c?s[f+3]:-1,_=f+5<c?s[f+5]:-1,E=f==0?-1:s[f-1];if(p==0&&m==p&&_==p){for(var b=f+5;b+2<c&&s[b+2]==p;)b+=2;(C=Math.min(b+1-f>>>1,138))<11?l.push(17,C-3):l.push(18,C-11),f+=2*C-2}else if(p==E&&m==p&&_==p){for(b=f+5;b+2<c&&s[b+2]==p;)b+=2;var C=Math.min(b+1-f>>>1,6);l.push(16,C-3),f+=2*C-2}else l.push(p,0)}return c>>>1},i.F._hufTree=function(s,l,c){var f=[],p=s.length,m=l.length,_=0;for(_=0;_<m;_+=2)l[_]=0,l[_+1]=0;for(_=0;_<p;_++)s[_]!=0&&f.push({lit:_,f:s[_]});var E=f.length,b=f.slice(0);if(E==0)return 0;if(E==1){var C=f[0].lit;return b=C==0?1:0,l[1+(C<<1)]=1,l[1+(b<<1)]=1,1}f.sort(function(J,oe){return J.f-oe.f});var I=f[0],O=f[1],M=0,z=1,Y=2;for(f[0]={lit:-1,f:I.f+O.f,l:I,r:O,d:0};z!=E-1;)I=M!=z&&(Y==E||f[M].f<f[Y].f)?f[M++]:f[Y++],O=M!=z&&(Y==E||f[M].f<f[Y].f)?f[M++]:f[Y++],f[z++]={lit:-1,f:I.f+O.f,l:I,r:O};var K=i.F.setDepth(f[z-1],0);for(K>c&&(i.F.restrictDepth(b,c,K),K=c),_=0;_<E;_++)l[1+(b[_].lit<<1)]=b[_].d;return K},i.F.setDepth=function(s,l){return s.lit!=-1?(s.d=l,l):Math.max(i.F.setDepth(s.l,l+1),i.F.setDepth(s.r,l+1))},i.F.restrictDepth=function(s,l,c){var f=0,p=1<<c-l,m=0;for(s.sort(function(E,b){return b.d==E.d?E.f-b.f:b.d-E.d}),f=0;f<s.length&&s[f].d>l;f++){var _=s[f].d;s[f].d=l,m+=p-(1<<c-_)}for(m>>>=c-l;m>0;)(_=s[f].d)<l?(s[f].d++,m-=1<<l-_-1):f++;for(;f>=0;f--)s[f].d==l&&m<0&&(s[f].d--,m++);m!=0&&console.log("debt left")},i.F._goodIndex=function(s,l){var c=0;return l[16|c]<=s&&(c|=16),l[8|c]<=s&&(c|=8),l[4|c]<=s&&(c|=4),l[2|c]<=s&&(c|=2),l[1|c]<=s&&(c|=1),c},i.F._writeLit=function(s,l,c,f){return i.F._putsF(c,f,l[s<<1]),f+l[1+(s<<1)]},i.F.inflate=function(s,l){var c=Uint8Array;if(s[0]==3&&s[1]==0)return l||new c(0);var f=i.F,p=f._bitsF,m=f._bitsE,_=f._decodeTiny,E=f.makeCodes,b=f.codes2map,C=f._get17,I=f.U,O=l==null;O&&(l=new c(s.length>>>2<<3));for(var M,z,Y=0,K=0,J=0,oe=0,W=0,q=0,S=0,x=0,N=0;Y==0;)if(Y=p(s,N,1),K=p(s,N+1,2),N+=3,K!=0){if(O&&(l=i.F._check(l,x+(1<<17))),K==1&&(M=I.flmap,z=I.fdmap,q=511,S=31),K==2){J=m(s,N,5)+257,oe=m(s,N+5,5)+1,W=m(s,N+10,4)+4,N+=14;for(var j=0;j<38;j+=2)I.itree[j]=0,I.itree[j+1]=0;var B=1;for(j=0;j<W;j++){var D=m(s,N+3*j,3);I.itree[1+(I.ordr[j]<<1)]=D,D>B&&(B=D)}N+=3*W,E(I.itree,B),b(I.itree,B,I.imap),M=I.lmap,z=I.dmap,N=_(I.imap,(1<<B)-1,J+oe,s,N,I.ttree);var Q=f._copyOut(I.ttree,0,J,I.ltree);q=(1<<Q)-1;var ae=f._copyOut(I.ttree,J,oe,I.dtree);S=(1<<ae)-1,E(I.ltree,Q),b(I.ltree,Q,M),E(I.dtree,ae),b(I.dtree,ae,z)}for(;;){var U=M[C(s,N)&q];N+=15&U;var F=U>>>4;if(!(F>>>8))l[x++]=F;else{if(F==256)break;var X=x+F-254;if(F>264){var ee=I.ldef[F-257];X=x+(ee>>>3)+m(s,N,7&ee),N+=7&ee}var H=z[C(s,N)&S];N+=15&H;var ne=H>>>4,le=I.ddef[ne],se=(le>>>4)+p(s,N,15&le);for(N+=15&le,O&&(l=i.F._check(l,x+(1<<17)));x<X;)l[x]=l[x++-se],l[x]=l[x++-se],l[x]=l[x++-se],l[x]=l[x++-se];x=X}}}else{(7&N)!=0&&(N+=8-(7&N));var he=4+(N>>>3),ue=s[he-4]|s[he-3]<<8;O&&(l=i.F._check(l,x+ue)),l.set(new c(s.buffer,s.byteOffset+he,ue),x),N=he+ue<<3,x+=ue}return l.length==x?l:l.slice(0,x)},i.F._check=function(s,l){var c=s.length;if(l<=c)return s;var f=new Uint8Array(Math.max(c<<1,l));return f.set(s,0),f},i.F._decodeTiny=function(s,l,c,f,p,m){for(var _=i.F._bitsE,E=i.F._get17,b=0;b<c;){var C=s[E(f,p)&l];p+=15&C;var I=C>>>4;if(I<=15)m[b]=I,b++;else{var O=0,M=0;I==16?(M=3+_(f,p,2),p+=2,O=m[b-1]):I==17?(M=3+_(f,p,3),p+=3):I==18&&(M=11+_(f,p,7),p+=7);for(var z=b+M;b<z;)m[b]=O,b++}}return p},i.F._copyOut=function(s,l,c,f){for(var p=0,m=0,_=f.length>>>1;m<c;){var E=s[m+l];f[m<<1]=0,f[1+(m<<1)]=E,E>p&&(p=E),m++}for(;m<_;)f[m<<1]=0,f[1+(m<<1)]=0,m++;return p},i.F.makeCodes=function(s,l){for(var c,f,p,m,_=i.F.U,E=s.length,b=_.bl_count,C=0;C<=l;C++)b[C]=0;for(C=1;C<E;C+=2)b[s[C]]++;var I=_.next_code;for(c=0,b[0]=0,f=1;f<=l;f++)c=c+b[f-1]<<1,I[f]=c;for(p=0;p<E;p+=2)(m=s[p+1])!=0&&(s[p]=I[m],I[m]++)},i.F.codes2map=function(s,l,c){for(var f=s.length,p=i.F.U.rev15,m=0;m<f;m+=2)if(s[m+1]!=0)for(var _=m>>1,E=s[m+1],b=_<<4|E,C=l-E,I=s[m]<<C,O=I+(1<<C);I!=O;)c[p[I]>>>15-l]=b,I++},i.F.revCodes=function(s,l){for(var c=i.F.U.rev15,f=15-l,p=0;p<s.length;p+=2){var m=s[p]<<l-s[p+1];s[p]=c[m]>>>f}},i.F._putsE=function(s,l,c){c<<=7&l;var f=l>>>3;s[f]|=c,s[f+1]|=c>>>8},i.F._putsF=function(s,l,c){c<<=7&l;var f=l>>>3;s[f]|=c,s[f+1]|=c>>>8,s[f+2]|=c>>>16},i.F._bitsE=function(s,l,c){return(s[l>>>3]|s[1+(l>>>3)]<<8)>>>(7&l)&(1<<c)-1},i.F._bitsF=function(s,l,c){return(s[l>>>3]|s[1+(l>>>3)]<<8|s[2+(l>>>3)]<<16)>>>(7&l)&(1<<c)-1},i.F._get17=function(s,l){return(s[l>>>3]|s[1+(l>>>3)]<<8|s[2+(l>>>3)]<<16)>>>(7&l)},i.F._get25=function(s,l){return(s[l>>>3]|s[1+(l>>>3)]<<8|s[2+(l>>>3)]<<16|s[3+(l>>>3)]<<24)>>>(7&l)},i.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var s=i.F.U,l=0;l<32768;l++){var c=l;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,s.rev15[l]=(c>>>16|c<<16)>>>17}function f(p,m,_){for(;m--!=0;)p.push(0,_)}for(l=0;l<32;l++)s.ldef[l]=s.of0[l]<<3|s.exb[l],s.ddef[l]=s.df0[l]<<4|s.dxb[l];f(s.fltree,144,8),f(s.fltree,112,9),f(s.fltree,24,7),f(s.fltree,8,8),i.F.makeCodes(s.fltree,9),i.F.codes2map(s.fltree,9,s.flmap),i.F.revCodes(s.fltree,9),f(s.fdtree,32,5),i.F.makeCodes(s.fdtree,5),i.F.codes2map(s.fdtree,5,s.fdmap),i.F.revCodes(s.fdtree,5),f(s.itree,19,0),f(s.ltree,286,0),f(s.dtree,30,0),f(s.ttree,320,0)}()})();var dV=uV({__proto__:null,default:vp},[vp]);const Es=function(){var n={nextZero(_,E){for(;_[E]!=0;)E++;return E},readUshort:(_,E)=>_[E]<<8|_[E+1],writeUshort(_,E,b){_[E]=b>>8&255,_[E+1]=255&b},readUint:(_,E)=>16777216*_[E]+(_[E+1]<<16|_[E+2]<<8|_[E+3]),writeUint(_,E,b){_[E]=b>>24&255,_[E+1]=b>>16&255,_[E+2]=b>>8&255,_[E+3]=255&b},readASCII(_,E,b){let C="";for(let I=0;I<b;I++)C+=String.fromCharCode(_[E+I]);return C},writeASCII(_,E,b){for(let C=0;C<b.length;C++)_[E+C]=b.charCodeAt(C)},readBytes(_,E,b){const C=[];for(let I=0;I<b;I++)C.push(_[E+I]);return C},pad:_=>_.length<2?`0${_}`:_,readUTF8(_,E,b){let C,I="";for(let O=0;O<b;O++)I+=`%${n.pad(_[E+O].toString(16))}`;try{C=decodeURIComponent(I)}catch{return n.readASCII(_,E,b)}return C}};function e(_,E,b,C){const I=E*b,O=l(C),M=Math.ceil(E*O/8),z=new Uint8Array(4*I),Y=new Uint32Array(z.buffer),{ctype:K}=C,{depth:J}=C,oe=n.readUshort;if(K==6){const ee=I<<2;if(J==8)for(var W=0;W<ee;W+=4)z[W]=_[W],z[W+1]=_[W+1],z[W+2]=_[W+2],z[W+3]=_[W+3];if(J==16)for(W=0;W<ee;W++)z[W]=_[W<<1]}else if(K==2){const ee=C.tabs.tRNS;if(ee==null){if(J==8)for(W=0;W<I;W++){var q=3*W;Y[W]=255<<24|_[q+2]<<16|_[q+1]<<8|_[q]}if(J==16)for(W=0;W<I;W++)q=6*W,Y[W]=255<<24|_[q+4]<<16|_[q+2]<<8|_[q]}else{var S=ee[0];const H=ee[1],ne=ee[2];if(J==8)for(W=0;W<I;W++){var x=W<<2;q=3*W,Y[W]=255<<24|_[q+2]<<16|_[q+1]<<8|_[q],_[q]==S&&_[q+1]==H&&_[q+2]==ne&&(z[x+3]=0)}if(J==16)for(W=0;W<I;W++)x=W<<2,q=6*W,Y[W]=255<<24|_[q+4]<<16|_[q+2]<<8|_[q],oe(_,q)==S&&oe(_,q+2)==H&&oe(_,q+4)==ne&&(z[x+3]=0)}}else if(K==3){const ee=C.tabs.PLTE,H=C.tabs.tRNS,ne=H?H.length:0;if(J==1)for(var N=0;N<b;N++){var j=N*M,B=N*E;for(W=0;W<E;W++){x=B+W<<2;var D=3*(Q=_[j+(W>>3)]>>7-((7&W)<<0)&1);z[x]=ee[D],z[x+1]=ee[D+1],z[x+2]=ee[D+2],z[x+3]=Q<ne?H[Q]:255}}if(J==2)for(N=0;N<b;N++)for(j=N*M,B=N*E,W=0;W<E;W++)x=B+W<<2,D=3*(Q=_[j+(W>>2)]>>6-((3&W)<<1)&3),z[x]=ee[D],z[x+1]=ee[D+1],z[x+2]=ee[D+2],z[x+3]=Q<ne?H[Q]:255;if(J==4)for(N=0;N<b;N++)for(j=N*M,B=N*E,W=0;W<E;W++)x=B+W<<2,D=3*(Q=_[j+(W>>1)]>>4-((1&W)<<2)&15),z[x]=ee[D],z[x+1]=ee[D+1],z[x+2]=ee[D+2],z[x+3]=Q<ne?H[Q]:255;if(J==8)for(W=0;W<I;W++){var Q;x=W<<2,D=3*(Q=_[W]),z[x]=ee[D],z[x+1]=ee[D+1],z[x+2]=ee[D+2],z[x+3]=Q<ne?H[Q]:255}}else if(K==4){if(J==8)for(W=0;W<I;W++){x=W<<2;var ae=_[U=W<<1];z[x]=ae,z[x+1]=ae,z[x+2]=ae,z[x+3]=_[U+1]}if(J==16)for(W=0;W<I;W++){var U;x=W<<2,ae=_[U=W<<2],z[x]=ae,z[x+1]=ae,z[x+2]=ae,z[x+3]=_[U+2]}}else if(K==0)for(S=C.tabs.tRNS?C.tabs.tRNS:-1,N=0;N<b;N++){const ee=N*M,H=N*E;if(J==1)for(var F=0;F<E;F++){var X=(ae=255*(_[ee+(F>>>3)]>>>7-(7&F)&1))==255*S?0:255;Y[H+F]=X<<24|ae<<16|ae<<8|ae}else if(J==2)for(F=0;F<E;F++)X=(ae=85*(_[ee+(F>>>2)]>>>6-((3&F)<<1)&3))==85*S?0:255,Y[H+F]=X<<24|ae<<16|ae<<8|ae;else if(J==4)for(F=0;F<E;F++)X=(ae=17*(_[ee+(F>>>1)]>>>4-((1&F)<<2)&15))==17*S?0:255,Y[H+F]=X<<24|ae<<16|ae<<8|ae;else if(J==8)for(F=0;F<E;F++)X=(ae=_[ee+F])==S?0:255,Y[H+F]=X<<24|ae<<16|ae<<8|ae;else if(J==16)for(F=0;F<E;F++)ae=_[ee+(F<<1)],X=oe(_,ee+(F<<1))==S?0:255,Y[H+F]=X<<24|ae<<16|ae<<8|ae}return z}function t(_,E,b,C){const I=l(_),O=Math.ceil(b*I/8),M=new Uint8Array((O+1+_.interlace)*C);return E=_.tabs.CgBI?s(E,M):i(E,M),_.interlace==0?E=c(E,_,0,b,C):_.interlace==1&&(E=function(Y,K){const J=K.width,oe=K.height,W=l(K),q=W>>3,S=Math.ceil(J*W/8),x=new Uint8Array(oe*S);let N=0;const j=[0,0,4,0,2,0,1],B=[0,4,0,2,0,1,0],D=[8,8,8,4,4,2,2],Q=[8,8,4,4,2,2,1];let ae=0;for(;ae<7;){const F=D[ae],X=Q[ae];let ee=0,H=0,ne=j[ae];for(;ne<oe;)ne+=F,H++;let le=B[ae];for(;le<J;)le+=X,ee++;const se=Math.ceil(ee*W/8);c(Y,K,N,ee,H);let he=0,ue=j[ae];for(;ue<oe;){let ye=B[ae],Fe=N+he*se<<3;for(;ye<J;){var U;if(W==1&&(U=(U=Y[Fe>>3])>>7-(7&Fe)&1,x[ue*S+(ye>>3)]|=U<<7-((7&ye)<<0)),W==2&&(U=(U=Y[Fe>>3])>>6-(7&Fe)&3,x[ue*S+(ye>>2)]|=U<<6-((3&ye)<<1)),W==4&&(U=(U=Y[Fe>>3])>>4-(7&Fe)&15,x[ue*S+(ye>>1)]|=U<<4-((1&ye)<<2)),W>=8){const ke=ue*S+ye*q;for(let De=0;De<q;De++)x[ke+De]=Y[(Fe>>3)+De]}Fe+=W,ye+=X}he++,ue+=F}ee*H!=0&&(N+=H*(1+se)),ae+=1}return x}(E,_)),E}function i(_,E){return s(new Uint8Array(_.buffer,2,_.length-6),E)}var s=function(){const _={H:{}};return _.H.N=function(E,b){const C=Uint8Array;let I,O,M=0,z=0,Y=0,K=0,J=0,oe=0,W=0,q=0,S=0;if(E[0]==3&&E[1]==0)return b||new C(0);const x=_.H,N=x.b,j=x.e,B=x.R,D=x.n,Q=x.A,ae=x.Z,U=x.m,F=b==null;for(F&&(b=new C(E.length>>>2<<5));M==0;)if(M=N(E,S,1),z=N(E,S+1,2),S+=3,z!=0){if(F&&(b=_.H.W(b,q+(1<<17))),z==1&&(I=U.J,O=U.h,oe=511,W=31),z==2){Y=j(E,S,5)+257,K=j(E,S+5,5)+1,J=j(E,S+10,4)+4,S+=14;let ee=1;for(var X=0;X<38;X+=2)U.Q[X]=0,U.Q[X+1]=0;for(X=0;X<J;X++){const le=j(E,S+3*X,3);U.Q[1+(U.X[X]<<1)]=le,le>ee&&(ee=le)}S+=3*J,D(U.Q,ee),Q(U.Q,ee,U.u),I=U.w,O=U.d,S=B(U.u,(1<<ee)-1,Y+K,E,S,U.v);const H=x.V(U.v,0,Y,U.C);oe=(1<<H)-1;const ne=x.V(U.v,Y,K,U.D);W=(1<<ne)-1,D(U.C,H),Q(U.C,H,I),D(U.D,ne),Q(U.D,ne,O)}for(;;){const ee=I[ae(E,S)&oe];S+=15&ee;const H=ee>>>4;if(!(H>>>8))b[q++]=H;else{if(H==256)break;{let ne=q+H-254;if(H>264){const ye=U.q[H-257];ne=q+(ye>>>3)+j(E,S,7&ye),S+=7&ye}const le=O[ae(E,S)&W];S+=15&le;const se=le>>>4,he=U.c[se],ue=(he>>>4)+N(E,S,15&he);for(S+=15&he;q<ne;)b[q]=b[q++-ue],b[q]=b[q++-ue],b[q]=b[q++-ue],b[q]=b[q++-ue];q=ne}}}}else{(7&S)!=0&&(S+=8-(7&S));const ee=4+(S>>>3),H=E[ee-4]|E[ee-3]<<8;F&&(b=_.H.W(b,q+H)),b.set(new C(E.buffer,E.byteOffset+ee,H),q),S=ee+H<<3,q+=H}return b.length==q?b:b.slice(0,q)},_.H.W=function(E,b){const C=E.length;if(b<=C)return E;const I=new Uint8Array(C<<1);return I.set(E,0),I},_.H.R=function(E,b,C,I,O,M){const z=_.H.e,Y=_.H.Z;let K=0;for(;K<C;){const J=E[Y(I,O)&b];O+=15&J;const oe=J>>>4;if(oe<=15)M[K]=oe,K++;else{let W=0,q=0;oe==16?(q=3+z(I,O,2),O+=2,W=M[K-1]):oe==17?(q=3+z(I,O,3),O+=3):oe==18&&(q=11+z(I,O,7),O+=7);const S=K+q;for(;K<S;)M[K]=W,K++}}return O},_.H.V=function(E,b,C,I){let O=0,M=0;const z=I.length>>>1;for(;M<C;){const Y=E[M+b];I[M<<1]=0,I[1+(M<<1)]=Y,Y>O&&(O=Y),M++}for(;M<z;)I[M<<1]=0,I[1+(M<<1)]=0,M++;return O},_.H.n=function(E,b){const C=_.H.m,I=E.length;let O,M,z,Y;const K=C.j;for(var J=0;J<=b;J++)K[J]=0;for(J=1;J<I;J+=2)K[E[J]]++;const oe=C.K;for(O=0,K[0]=0,M=1;M<=b;M++)O=O+K[M-1]<<1,oe[M]=O;for(z=0;z<I;z+=2)Y=E[z+1],Y!=0&&(E[z]=oe[Y],oe[Y]++)},_.H.A=function(E,b,C){const I=E.length,O=_.H.m.r;for(let M=0;M<I;M+=2)if(E[M+1]!=0){const z=M>>1,Y=E[M+1],K=z<<4|Y,J=b-Y;let oe=E[M]<<J;const W=oe+(1<<J);for(;oe!=W;)C[O[oe]>>>15-b]=K,oe++}},_.H.l=function(E,b){const C=_.H.m.r,I=15-b;for(let O=0;O<E.length;O+=2){const M=E[O]<<b-E[O+1];E[O]=C[M]>>>I}},_.H.M=function(E,b,C){C<<=7&b;const I=b>>>3;E[I]|=C,E[I+1]|=C>>>8},_.H.I=function(E,b,C){C<<=7&b;const I=b>>>3;E[I]|=C,E[I+1]|=C>>>8,E[I+2]|=C>>>16},_.H.e=function(E,b,C){return(E[b>>>3]|E[1+(b>>>3)]<<8)>>>(7&b)&(1<<C)-1},_.H.b=function(E,b,C){return(E[b>>>3]|E[1+(b>>>3)]<<8|E[2+(b>>>3)]<<16)>>>(7&b)&(1<<C)-1},_.H.Z=function(E,b){return(E[b>>>3]|E[1+(b>>>3)]<<8|E[2+(b>>>3)]<<16)>>>(7&b)},_.H.i=function(E,b){return(E[b>>>3]|E[1+(b>>>3)]<<8|E[2+(b>>>3)]<<16|E[3+(b>>>3)]<<24)>>>(7&b)},_.H.m=function(){const E=Uint16Array,b=Uint32Array;return{K:new E(16),j:new E(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new E(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new b(32),J:new E(512),_:[],h:new E(32),$:[],w:new E(32768),C:[],v:[],d:new E(32768),D:[],u:new E(512),Q:[],r:new E(32768),s:new b(286),Y:new b(30),a:new b(19),t:new b(15e3),k:new E(65536),g:new E(32768)}}(),function(){const E=_.H.m;for(var b=0;b<32768;b++){let I=b;I=(2863311530&I)>>>1|(1431655765&I)<<1,I=(3435973836&I)>>>2|(858993459&I)<<2,I=(4042322160&I)>>>4|(252645135&I)<<4,I=(4278255360&I)>>>8|(16711935&I)<<8,E.r[b]=(I>>>16|I<<16)>>>17}function C(I,O,M){for(;O--!=0;)I.push(0,M)}for(b=0;b<32;b++)E.q[b]=E.S[b]<<3|E.T[b],E.c[b]=E.p[b]<<4|E.z[b];C(E._,144,8),C(E._,112,9),C(E._,24,7),C(E._,8,8),_.H.n(E._,9),_.H.A(E._,9,E.J),_.H.l(E._,9),C(E.$,32,5),_.H.n(E.$,5),_.H.A(E.$,5,E.h),_.H.l(E.$,5),C(E.Q,19,0),C(E.C,286,0),C(E.D,30,0),C(E.v,320,0)}(),_.H.N}();function l(_){return[1,null,3,1,2,null,4][_.ctype]*_.depth}function c(_,E,b,C,I){let O=l(E);const M=Math.ceil(C*O/8);let z,Y;O=Math.ceil(O/8);let K=_[b],J=0;if(K>1&&(_[b]=[0,0,1][K-2]),K==3)for(J=O;J<M;J++)_[J+1]=_[J+1]+(_[J+1-O]>>>1)&255;for(let oe=0;oe<I;oe++)if(z=b+oe*M,Y=z+oe+1,K=_[Y-1],J=0,K==0)for(;J<M;J++)_[z+J]=_[Y+J];else if(K==1){for(;J<O;J++)_[z+J]=_[Y+J];for(;J<M;J++)_[z+J]=_[Y+J]+_[z+J-O]}else if(K==2)for(;J<M;J++)_[z+J]=_[Y+J]+_[z+J-M];else if(K==3){for(;J<O;J++)_[z+J]=_[Y+J]+(_[z+J-M]>>>1);for(;J<M;J++)_[z+J]=_[Y+J]+(_[z+J-M]+_[z+J-O]>>>1)}else{for(;J<O;J++)_[z+J]=_[Y+J]+f(0,_[z+J-M],0);for(;J<M;J++)_[z+J]=_[Y+J]+f(_[z+J-O],_[z+J-M],_[z+J-O-M])}return _}function f(_,E,b){const C=_+E-b,I=C-_,O=C-E,M=C-b;return I*I<=O*O&&I*I<=M*M?_:O*O<=M*M?E:b}function p(_,E,b){b.width=n.readUint(_,E),E+=4,b.height=n.readUint(_,E),E+=4,b.depth=_[E],E++,b.ctype=_[E],E++,b.compress=_[E],E++,b.filter=_[E],E++,b.interlace=_[E],E++}function m(_,E,b,C,I,O,M,z,Y){const K=Math.min(E,I),J=Math.min(b,O);let oe=0,W=0;for(let ae=0;ae<J;ae++)for(let U=0;U<K;U++)if(M>=0&&z>=0?(oe=ae*E+U<<2,W=(z+ae)*I+M+U<<2):(oe=(-z+ae)*E-M+U<<2,W=ae*I+U<<2),Y==0)C[W]=_[oe],C[W+1]=_[oe+1],C[W+2]=_[oe+2],C[W+3]=_[oe+3];else if(Y==1){var q=_[oe+3]*.00392156862745098,S=_[oe]*q,x=_[oe+1]*q,N=_[oe+2]*q,j=C[W+3]*(1/255),B=C[W]*j,D=C[W+1]*j,Q=C[W+2]*j;const F=1-q,X=q+j*F,ee=X==0?0:1/X;C[W+3]=255*X,C[W+0]=(S+B*F)*ee,C[W+1]=(x+D*F)*ee,C[W+2]=(N+Q*F)*ee}else if(Y==2)q=_[oe+3],S=_[oe],x=_[oe+1],N=_[oe+2],j=C[W+3],B=C[W],D=C[W+1],Q=C[W+2],q==j&&S==B&&x==D&&N==Q?(C[W]=0,C[W+1]=0,C[W+2]=0,C[W+3]=0):(C[W]=S,C[W+1]=x,C[W+2]=N,C[W+3]=q);else if(Y==3){if(q=_[oe+3],S=_[oe],x=_[oe+1],N=_[oe+2],j=C[W+3],B=C[W],D=C[W+1],Q=C[W+2],q==j&&S==B&&x==D&&N==Q)continue;if(q<220&&j>20)return!1}return!0}return{decode:function(E){const b=new Uint8Array(E);let C=8;const I=n,O=I.readUshort,M=I.readUint,z={tabs:{},frames:[]},Y=new Uint8Array(b.length);let K,J=0,oe=0;const W=[137,80,78,71,13,10,26,10];for(var q=0;q<8;q++)if(b[q]!=W[q])throw"The input is not a PNG file!";for(;C<b.length;){const ae=I.readUint(b,C);C+=4;const U=I.readASCII(b,C,4);if(C+=4,U=="IHDR")p(b,C,z);else if(U=="iCCP"){for(var S=C;b[S]!=0;)S++;I.readASCII(b,C,S-C),b[S+1];const F=b.slice(S+2,C+ae);let X=null;try{X=i(F)}catch{X=s(F)}z.tabs[U]=X}else if(U=="CgBI")z.tabs[U]=b.slice(C,C+4);else if(U=="IDAT"){for(q=0;q<ae;q++)Y[J+q]=b[C+q];J+=ae}else if(U=="acTL")z.tabs[U]={num_frames:M(b,C),num_plays:M(b,C+4)},K=new Uint8Array(b.length);else if(U=="fcTL"){oe!=0&&((Q=z.frames[z.frames.length-1]).data=t(z,K.slice(0,oe),Q.rect.width,Q.rect.height),oe=0);const F={x:M(b,C+12),y:M(b,C+16),width:M(b,C+4),height:M(b,C+8)};let X=O(b,C+22);X=O(b,C+20)/(X==0?100:X);const ee={rect:F,delay:Math.round(1e3*X),dispose:b[C+24],blend:b[C+25]};z.frames.push(ee)}else if(U=="fdAT"){for(q=0;q<ae-4;q++)K[oe+q]=b[C+q+4];oe+=ae-4}else if(U=="pHYs")z.tabs[U]=[I.readUint(b,C),I.readUint(b,C+4),b[C+8]];else if(U=="cHRM")for(z.tabs[U]=[],q=0;q<8;q++)z.tabs[U].push(I.readUint(b,C+4*q));else if(U=="tEXt"||U=="zTXt"){z.tabs[U]==null&&(z.tabs[U]={});var x=I.nextZero(b,C),N=I.readASCII(b,C,x-C),j=C+ae-x-1;if(U=="tEXt")D=I.readASCII(b,x+1,j);else{var B=i(b.slice(x+2,x+2+j));D=I.readUTF8(B,0,B.length)}z.tabs[U][N]=D}else if(U=="iTXt"){z.tabs[U]==null&&(z.tabs[U]={}),x=0,S=C,x=I.nextZero(b,S),N=I.readASCII(b,S,x-S);const F=b[S=x+1];var D;b[S+1],S+=2,x=I.nextZero(b,S),I.readASCII(b,S,x-S),S=x+1,x=I.nextZero(b,S),I.readUTF8(b,S,x-S),j=ae-((S=x+1)-C),F==0?D=I.readUTF8(b,S,j):(B=i(b.slice(S,S+j)),D=I.readUTF8(B,0,B.length)),z.tabs[U][N]=D}else if(U=="PLTE")z.tabs[U]=I.readBytes(b,C,ae);else if(U=="hIST"){const F=z.tabs.PLTE.length/3;for(z.tabs[U]=[],q=0;q<F;q++)z.tabs[U].push(O(b,C+2*q))}else if(U=="tRNS")z.ctype==3?z.tabs[U]=I.readBytes(b,C,ae):z.ctype==0?z.tabs[U]=O(b,C):z.ctype==2&&(z.tabs[U]=[O(b,C),O(b,C+2),O(b,C+4)]);else if(U=="gAMA")z.tabs[U]=I.readUint(b,C)/1e5;else if(U=="sRGB")z.tabs[U]=b[C];else if(U=="bKGD")z.ctype==0||z.ctype==4?z.tabs[U]=[O(b,C)]:z.ctype==2||z.ctype==6?z.tabs[U]=[O(b,C),O(b,C+2),O(b,C+4)]:z.ctype==3&&(z.tabs[U]=b[C]);else if(U=="IEND")break;C+=ae,I.readUint(b,C),C+=4}var Q;return oe!=0&&((Q=z.frames[z.frames.length-1]).data=t(z,K.slice(0,oe),Q.rect.width,Q.rect.height)),z.data=t(z,Y,z.width,z.height),delete z.compress,delete z.interlace,delete z.filter,z},toRGBA8:function(E){const b=E.width,C=E.height;if(E.tabs.acTL==null)return[e(E.data,b,C,E).buffer];const I=[];E.frames[0].data==null&&(E.frames[0].data=E.data);const O=b*C*4,M=new Uint8Array(O),z=new Uint8Array(O),Y=new Uint8Array(O);for(let J=0;J<E.frames.length;J++){const oe=E.frames[J],W=oe.rect.x,q=oe.rect.y,S=oe.rect.width,x=oe.rect.height,N=e(oe.data,S,x,E);if(J!=0)for(var K=0;K<O;K++)Y[K]=M[K];if(oe.blend==0?m(N,S,x,M,b,C,W,q,0):oe.blend==1&&m(N,S,x,M,b,C,W,q,1),I.push(M.buffer.slice(0)),oe.dispose!=0){if(oe.dispose==1)m(z,S,x,M,b,C,W,q,0);else if(oe.dispose==2)for(K=0;K<O;K++)M[K]=Y[K]}}return I},_paeth:f,_copyTile:m,_bin:n}}();(function(){const{_copyTile:n}=Es,{_bin:e}=Es,t=Es._paeth;var i={table:function(){const S=new Uint32Array(256);for(let x=0;x<256;x++){let N=x;for(let j=0;j<8;j++)1&N?N=3988292384^N>>>1:N>>>=1;S[x]=N}return S}(),update(S,x,N,j){for(let B=0;B<j;B++)S=i.table[255&(S^x[N+B])]^S>>>8;return S},crc:(S,x,N)=>4294967295^i.update(4294967295,S,x,N)};function s(S,x,N,j){x[N]+=S[0]*j>>4,x[N+1]+=S[1]*j>>4,x[N+2]+=S[2]*j>>4,x[N+3]+=S[3]*j>>4}function l(S){return Math.max(0,Math.min(255,S))}function c(S,x){const N=S[0]-x[0],j=S[1]-x[1],B=S[2]-x[2],D=S[3]-x[3];return N*N+j*j+B*B+D*D}function f(S,x,N,j,B,D,Q){Q==null&&(Q=1);const ae=j.length,U=[];for(var F=0;F<ae;F++){const ue=j[F];U.push([ue>>>0&255,ue>>>8&255,ue>>>16&255,ue>>>24&255])}for(F=0;F<ae;F++){let ue=4294967295;for(var X=0,ee=0;ee<ae;ee++){var H=c(U[F],U[ee]);ee!=F&&H<ue&&(ue=H,X=ee)}}const ne=new Uint32Array(B.buffer),le=new Int16Array(x*N*4),se=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(F=0;F<se.length;F++)se[F]=255*((se[F]+.5)/16-.5);for(let ue=0;ue<N;ue++)for(let ye=0;ye<x;ye++){var he;F=4*(ue*x+ye),Q!=2?he=[l(S[F]+le[F]),l(S[F+1]+le[F+1]),l(S[F+2]+le[F+2]),l(S[F+3]+le[F+3])]:(H=se[4*(3&ue)+(3&ye)],he=[l(S[F]+H),l(S[F+1]+H),l(S[F+2]+H),l(S[F+3]+H)]),X=0;let Fe=16777215;for(ee=0;ee<ae;ee++){const qe=c(he,U[ee]);qe<Fe&&(Fe=qe,X=ee)}const ke=U[X],De=[he[0]-ke[0],he[1]-ke[1],he[2]-ke[2],he[3]-ke[3]];Q==1&&(ye!=x-1&&s(De,le,F+4,7),ue!=N-1&&(ye!=0&&s(De,le,F+4*x-4,3),s(De,le,F+4*x,5),ye!=x-1&&s(De,le,F+4*x+4,1))),D[F>>2]=X,ne[F>>2]=j[X]}}function p(S,x,N,j,B){B==null&&(B={});const{crc:D}=i,Q=e.writeUint,ae=e.writeUshort,U=e.writeASCII;let F=8;const X=S.frames.length>1;let ee,H=!1,ne=33+(X?20:0);if(B.sRGB!=null&&(ne+=13),B.pHYs!=null&&(ne+=21),B.iCCP!=null&&(ee=pako.deflate(B.iCCP),ne+=21+ee.length+4),S.ctype==3){for(var le=S.plte.length,se=0;se<le;se++)S.plte[se]>>>24!=255&&(H=!0);ne+=8+3*le+4+(H?8+1*le+4:0)}for(var he=0;he<S.frames.length;he++)X&&(ne+=38),ne+=(ke=S.frames[he]).cimg.length+12,he!=0&&(ne+=4);ne+=12;const ue=new Uint8Array(ne),ye=[137,80,78,71,13,10,26,10];for(se=0;se<8;se++)ue[se]=ye[se];if(Q(ue,F,13),F+=4,U(ue,F,"IHDR"),F+=4,Q(ue,F,x),F+=4,Q(ue,F,N),F+=4,ue[F]=S.depth,F++,ue[F]=S.ctype,F++,ue[F]=0,F++,ue[F]=0,F++,ue[F]=0,F++,Q(ue,F,D(ue,F-17,17)),F+=4,B.sRGB!=null&&(Q(ue,F,1),F+=4,U(ue,F,"sRGB"),F+=4,ue[F]=B.sRGB,F++,Q(ue,F,D(ue,F-5,5)),F+=4),B.iCCP!=null){const De=13+ee.length;Q(ue,F,De),F+=4,U(ue,F,"iCCP"),F+=4,U(ue,F,"ICC profile"),F+=11,F+=2,ue.set(ee,F),F+=ee.length,Q(ue,F,D(ue,F-(De+4),De+4)),F+=4}if(B.pHYs!=null&&(Q(ue,F,9),F+=4,U(ue,F,"pHYs"),F+=4,Q(ue,F,B.pHYs[0]),F+=4,Q(ue,F,B.pHYs[1]),F+=4,ue[F]=B.pHYs[2],F++,Q(ue,F,D(ue,F-13,13)),F+=4),X&&(Q(ue,F,8),F+=4,U(ue,F,"acTL"),F+=4,Q(ue,F,S.frames.length),F+=4,Q(ue,F,B.loop!=null?B.loop:0),F+=4,Q(ue,F,D(ue,F-12,12)),F+=4),S.ctype==3){for(Q(ue,F,3*(le=S.plte.length)),F+=4,U(ue,F,"PLTE"),F+=4,se=0;se<le;se++){const De=3*se,qe=S.plte[se],je=255&qe,Ze=qe>>>8&255,Et=qe>>>16&255;ue[F+De+0]=je,ue[F+De+1]=Ze,ue[F+De+2]=Et}if(F+=3*le,Q(ue,F,D(ue,F-3*le-4,3*le+4)),F+=4,H){for(Q(ue,F,le),F+=4,U(ue,F,"tRNS"),F+=4,se=0;se<le;se++)ue[F+se]=S.plte[se]>>>24&255;F+=le,Q(ue,F,D(ue,F-le-4,le+4)),F+=4}}let Fe=0;for(he=0;he<S.frames.length;he++){var ke=S.frames[he];X&&(Q(ue,F,26),F+=4,U(ue,F,"fcTL"),F+=4,Q(ue,F,Fe++),F+=4,Q(ue,F,ke.rect.width),F+=4,Q(ue,F,ke.rect.height),F+=4,Q(ue,F,ke.rect.x),F+=4,Q(ue,F,ke.rect.y),F+=4,ae(ue,F,j[he]),F+=2,ae(ue,F,1e3),F+=2,ue[F]=ke.dispose,F++,ue[F]=ke.blend,F++,Q(ue,F,D(ue,F-30,30)),F+=4);const De=ke.cimg;Q(ue,F,(le=De.length)+(he==0?0:4)),F+=4;const qe=F;U(ue,F,he==0?"IDAT":"fdAT"),F+=4,he!=0&&(Q(ue,F,Fe++),F+=4),ue.set(De,F),F+=le,Q(ue,F,D(ue,qe,F-qe)),F+=4}return Q(ue,F,0),F+=4,U(ue,F,"IEND"),F+=4,Q(ue,F,D(ue,F-4,4)),F+=4,ue.buffer}function m(S,x,N){for(let j=0;j<S.frames.length;j++){const B=S.frames[j];B.rect.width;const D=B.rect.height,Q=new Uint8Array(D*B.bpl+D);B.cimg=C(B.img,D,B.bpp,B.bpl,Q,x,N)}}function _(S,x,N,j,B){const D=B[0],Q=B[1],ae=B[2],U=B[3],F=B[4],X=B[5];let ee=6,H=8,ne=255;for(var le=0;le<S.length;le++){const Oe=new Uint8Array(S[le]);for(var se=Oe.length,he=0;he<se;he+=4)ne&=Oe[he+3]}const ue=ne!=255,ye=function(Le,Me,Qe,it,_t,Vt){const kt=[];for(var rt=0;rt<Le.length;rt++){const on=new Uint8Array(Le[rt]),mn=new Uint32Array(on.buffer);var Ht;let Ut=0,ln=0,gn=Me,Sn=Qe,Lr=it?1:0;if(rt!=0){const Li=Vt||it||rt==1||kt[rt-2].dispose!=0?1:2;let is=0,Is=1e9;for(let Ki=0;Ki<Li;Ki++){var Je=new Uint8Array(Le[rt-1-Ki]);const $i=new Uint32Array(Le[rt-1-Ki]);let Mn=Me,yi=Qe,Kn=-1,cr=-1;for(let Ei=0;Ei<Qe;Ei++)for(let Jn=0;Jn<Me;Jn++)mn[mt=Ei*Me+Jn]!=$i[mt]&&(Jn<Mn&&(Mn=Jn),Jn>Kn&&(Kn=Jn),Ei<yi&&(yi=Ei),Ei>cr&&(cr=Ei));Kn==-1&&(Mn=yi=Kn=cr=0),_t&&((1&Mn)==1&&Mn--,(1&yi)==1&&yi--);const hr=(Kn-Mn+1)*(cr-yi+1);hr<Is&&(Is=hr,is=Ki,Ut=Mn,ln=yi,gn=Kn-Mn+1,Sn=cr-yi+1)}Je=new Uint8Array(Le[rt-1-is]),is==1&&(kt[rt-1].dispose=2),Ht=new Uint8Array(gn*Sn*4),n(Je,Me,Qe,Ht,gn,Sn,-Ut,-ln,0),Lr=n(on,Me,Qe,Ht,gn,Sn,-Ut,-ln,3)?1:0,Lr==1?b(on,Me,Qe,Ht,{x:Ut,y:ln,width:gn,height:Sn}):n(on,Me,Qe,Ht,gn,Sn,-Ut,-ln,0)}else Ht=on.slice(0);kt.push({rect:{x:Ut,y:ln,width:gn,height:Sn},img:Ht,blend:Lr,dispose:0})}if(it)for(rt=0;rt<kt.length;rt++){if((qt=kt[rt]).blend==1)continue;const on=qt.rect,mn=kt[rt-1].rect,Ut=Math.min(on.x,mn.x),ln=Math.min(on.y,mn.y),gn={x:Ut,y:ln,width:Math.max(on.x+on.width,mn.x+mn.width)-Ut,height:Math.max(on.y+on.height,mn.y+mn.height)-ln};kt[rt-1].dispose=1,rt-1!=0&&E(Le,Me,Qe,kt,rt-1,gn,_t),E(Le,Me,Qe,kt,rt,gn,_t)}let tt=0;if(Le.length!=1)for(var mt=0;mt<kt.length;mt++){var qt;tt+=(qt=kt[mt]).rect.width*qt.rect.height}return kt}(S,x,N,D,Q,ae),Fe={},ke=[],De=[];if(j!=0){const Oe=[];for(he=0;he<ye.length;he++)Oe.push(ye[he].img.buffer);const Le=function(_t){let Vt=0;for(var kt=0;kt<_t.length;kt++)Vt+=_t[kt].byteLength;const rt=new Uint8Array(Vt);let Ht=0;for(kt=0;kt<_t.length;kt++){const Je=new Uint8Array(_t[kt]),tt=Je.length;for(let mt=0;mt<tt;mt+=4){let qt=Je[mt],on=Je[mt+1],mn=Je[mt+2];const Ut=Je[mt+3];Ut==0&&(qt=on=mn=0),rt[Ht+mt]=qt,rt[Ht+mt+1]=on,rt[Ht+mt+2]=mn,rt[Ht+mt+3]=Ut}Ht+=tt}return rt.buffer}(Oe),Me=O(Le,j);for(he=0;he<Me.plte.length;he++)ke.push(Me.plte[he].est.rgba);let Qe=0;for(he=0;he<ye.length;he++){const it=(je=ye[he]).img.length;var qe=new Uint8Array(Me.inds.buffer,Qe>>2,it>>2);De.push(qe);const _t=new Uint8Array(Me.abuf,Qe,it);X&&f(je.img,je.rect.width,je.rect.height,ke,_t,qe),je.img.set(_t),Qe+=it}}else for(le=0;le<ye.length;le++){var je=ye[le];const Oe=new Uint32Array(je.img.buffer);var Ze=je.rect.width;for(se=Oe.length,qe=new Uint8Array(se),De.push(qe),he=0;he<se;he++){const Le=Oe[he];if(he!=0&&Le==Oe[he-1])qe[he]=qe[he-1];else if(he>Ze&&Le==Oe[he-Ze])qe[he]=qe[he-Ze];else{let Me=Fe[Le];if(Me==null&&(Fe[Le]=Me=ke.length,ke.push(Le),ke.length>=300))break;qe[he]=Me}}}const Et=ke.length;for(Et<=256&&F==0&&(H=Et<=2?1:Et<=4?2:Et<=16?4:8,H=Math.max(H,U)),le=0;le<ye.length;le++){(je=ye[le]).rect.x,je.rect.y,Ze=je.rect.width;const Oe=je.rect.height;let Le=je.img;new Uint32Array(Le.buffer);let Me=4*Ze,Qe=4;if(Et<=256&&F==0){Me=Math.ceil(H*Ze/8);var be=new Uint8Array(Me*Oe);const it=De[le];for(let _t=0;_t<Oe;_t++){he=_t*Me;const Vt=_t*Ze;if(H==8)for(var Ne=0;Ne<Ze;Ne++)be[he+Ne]=it[Vt+Ne];else if(H==4)for(Ne=0;Ne<Ze;Ne++)be[he+(Ne>>1)]|=it[Vt+Ne]<<4-4*(1&Ne);else if(H==2)for(Ne=0;Ne<Ze;Ne++)be[he+(Ne>>2)]|=it[Vt+Ne]<<6-2*(3&Ne);else if(H==1)for(Ne=0;Ne<Ze;Ne++)be[he+(Ne>>3)]|=it[Vt+Ne]<<7-1*(7&Ne)}Le=be,ee=3,Qe=1}else if(ue==0&&ye.length==1){be=new Uint8Array(Ze*Oe*3);const it=Ze*Oe;for(he=0;he<it;he++){const _t=3*he,Vt=4*he;be[_t]=Le[Vt],be[_t+1]=Le[Vt+1],be[_t+2]=Le[Vt+2]}Le=be,ee=2,Qe=3,Me=3*Ze}je.img=Le,je.bpl=Me,je.bpp=Qe}return{ctype:ee,depth:H,plte:ke,frames:ye}}function E(S,x,N,j,B,D,Q){const ae=Uint8Array,U=Uint32Array,F=new ae(S[B-1]),X=new U(S[B-1]),ee=B+1<S.length?new ae(S[B+1]):null,H=new ae(S[B]),ne=new U(H.buffer);let le=x,se=N,he=-1,ue=-1;for(let Fe=0;Fe<D.height;Fe++)for(let ke=0;ke<D.width;ke++){const De=D.x+ke,qe=D.y+Fe,je=qe*x+De,Ze=ne[je];Ze==0||j[B-1].dispose==0&&X[je]==Ze&&(ee==null||ee[4*je+3]!=0)||(De<le&&(le=De),De>he&&(he=De),qe<se&&(se=qe),qe>ue&&(ue=qe))}he==-1&&(le=se=he=ue=0),Q&&((1&le)==1&&le--,(1&se)==1&&se--),D={x:le,y:se,width:he-le+1,height:ue-se+1};const ye=j[B];ye.rect=D,ye.blend=1,ye.img=new Uint8Array(D.width*D.height*4),j[B-1].dispose==0?(n(F,x,N,ye.img,D.width,D.height,-D.x,-D.y,0),b(H,x,N,ye.img,D)):n(H,x,N,ye.img,D.width,D.height,-D.x,-D.y,0)}function b(S,x,N,j,B){n(S,x,N,j,B.width,B.height,-B.x,-B.y,2)}function C(S,x,N,j,B,D,Q){const ae=[];let U,F=[0,1,2,3,4];D!=-1?F=[D]:(x*j>5e5||N==1)&&(F=[0]),Q&&(U={level:0});const X=dV;for(var ee=0;ee<F.length;ee++){for(let le=0;le<x;le++)I(B,S,le,j,N,F[ee]);ae.push(X.deflate(B,U))}let H,ne=1e9;for(ee=0;ee<ae.length;ee++)ae[ee].length<ne&&(H=ee,ne=ae[ee].length);return ae[H]}function I(S,x,N,j,B,D){const Q=N*j;let ae=Q+N;if(S[ae]=D,ae++,D==0)if(j<500)for(var U=0;U<j;U++)S[ae+U]=x[Q+U];else S.set(new Uint8Array(x.buffer,Q,j),ae);else if(D==1){for(U=0;U<B;U++)S[ae+U]=x[Q+U];for(U=B;U<j;U++)S[ae+U]=x[Q+U]-x[Q+U-B]+256&255}else if(N==0){for(U=0;U<B;U++)S[ae+U]=x[Q+U];if(D==2)for(U=B;U<j;U++)S[ae+U]=x[Q+U];if(D==3)for(U=B;U<j;U++)S[ae+U]=x[Q+U]-(x[Q+U-B]>>1)+256&255;if(D==4)for(U=B;U<j;U++)S[ae+U]=x[Q+U]-t(x[Q+U-B],0,0)+256&255}else{if(D==2)for(U=0;U<j;U++)S[ae+U]=x[Q+U]+256-x[Q+U-j]&255;if(D==3){for(U=0;U<B;U++)S[ae+U]=x[Q+U]+256-(x[Q+U-j]>>1)&255;for(U=B;U<j;U++)S[ae+U]=x[Q+U]+256-(x[Q+U-j]+x[Q+U-B]>>1)&255}if(D==4){for(U=0;U<B;U++)S[ae+U]=x[Q+U]+256-t(0,x[Q+U-j],0)&255;for(U=B;U<j;U++)S[ae+U]=x[Q+U]+256-t(x[Q+U-B],x[Q+U-j],x[Q+U-B-j])&255}}}function O(S,x){const N=new Uint8Array(S),j=N.slice(0),B=new Uint32Array(j.buffer),D=M(j,x),Q=D[0],ae=D[1],U=N.length,F=new Uint8Array(U>>2);let X;if(N.length<2e7)for(var ee=0;ee<U;ee+=4)X=z(Q,H=N[ee]*(1/255),ne=N[ee+1]*(1/255),le=N[ee+2]*(1/255),se=N[ee+3]*(1/255)),F[ee>>2]=X.ind,B[ee>>2]=X.est.rgba;else for(ee=0;ee<U;ee+=4){var H=N[ee]*.00392156862745098,ne=N[ee+1]*(1/255),le=N[ee+2]*(1/255),se=N[ee+3]*(1/255);for(X=Q;X.left;)X=Y(X.est,H,ne,le,se)<=0?X.left:X.right;F[ee>>2]=X.ind,B[ee>>2]=X.est.rgba}return{abuf:j.buffer,inds:F,plte:ae}}function M(S,x,N){N==null&&(N=1e-4);const j=new Uint32Array(S.buffer),B={i0:0,i1:S.length,bst:null,est:null,tdst:0,left:null,right:null};B.bst=oe(S,B.i0,B.i1),B.est=W(B.bst);const D=[B];for(;D.length<x;){let ae=0,U=0;for(var Q=0;Q<D.length;Q++)D[Q].est.L>ae&&(ae=D[Q].est.L,U=Q);if(ae<N)break;const F=D[U],X=K(S,j,F.i0,F.i1,F.est.e,F.est.eMq255);if(F.i0>=X||F.i1<=X){F.est.L=0;continue}const ee={i0:F.i0,i1:X,bst:null,est:null,tdst:0,left:null,right:null};ee.bst=oe(S,ee.i0,ee.i1),ee.est=W(ee.bst);const H={i0:X,i1:F.i1,bst:null,est:null,tdst:0,left:null,right:null};for(H.bst={R:[],m:[],N:F.bst.N-ee.bst.N},Q=0;Q<16;Q++)H.bst.R[Q]=F.bst.R[Q]-ee.bst.R[Q];for(Q=0;Q<4;Q++)H.bst.m[Q]=F.bst.m[Q]-ee.bst.m[Q];H.est=W(H.bst),F.left=ee,F.right=H,D[U]=ee,D.push(H)}for(D.sort((ae,U)=>U.bst.N-ae.bst.N),Q=0;Q<D.length;Q++)D[Q].ind=Q;return[B,D]}function z(S,x,N,j,B){if(S.left==null)return S.tdst=function(ee,H,ne,le,se){const he=H-ee[0],ue=ne-ee[1],ye=le-ee[2],Fe=se-ee[3];return he*he+ue*ue+ye*ye+Fe*Fe}(S.est.q,x,N,j,B),S;const D=Y(S.est,x,N,j,B);let Q=S.left,ae=S.right;D>0&&(Q=S.right,ae=S.left);const U=z(Q,x,N,j,B);if(U.tdst<=D*D)return U;const F=z(ae,x,N,j,B);return F.tdst<U.tdst?F:U}function Y(S,x,N,j,B){const{e:D}=S;return D[0]*x+D[1]*N+D[2]*j+D[3]*B-S.eMq}function K(S,x,N,j,B,D){for(j-=4;N<j;){for(;J(S,N,B)<=D;)N+=4;for(;J(S,j,B)>D;)j-=4;if(N>=j)break;const Q=x[N>>2];x[N>>2]=x[j>>2],x[j>>2]=Q,N+=4,j-=4}for(;J(S,N,B)>D;)N-=4;return N+4}function J(S,x,N){return S[x]*N[0]+S[x+1]*N[1]+S[x+2]*N[2]+S[x+3]*N[3]}function oe(S,x,N){const j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],B=[0,0,0,0],D=N-x>>2;for(let Q=x;Q<N;Q+=4){const ae=S[Q]*.00392156862745098,U=S[Q+1]*(1/255),F=S[Q+2]*(1/255),X=S[Q+3]*(1/255);B[0]+=ae,B[1]+=U,B[2]+=F,B[3]+=X,j[0]+=ae*ae,j[1]+=ae*U,j[2]+=ae*F,j[3]+=ae*X,j[5]+=U*U,j[6]+=U*F,j[7]+=U*X,j[10]+=F*F,j[11]+=F*X,j[15]+=X*X}return j[4]=j[1],j[8]=j[2],j[9]=j[6],j[12]=j[3],j[13]=j[7],j[14]=j[11],{R:j,m:B,N:D}}function W(S){const{R:x}=S,{m:N}=S,{N:j}=S,B=N[0],D=N[1],Q=N[2],ae=N[3],U=j==0?0:1/j,F=[x[0]-B*B*U,x[1]-B*D*U,x[2]-B*Q*U,x[3]-B*ae*U,x[4]-D*B*U,x[5]-D*D*U,x[6]-D*Q*U,x[7]-D*ae*U,x[8]-Q*B*U,x[9]-Q*D*U,x[10]-Q*Q*U,x[11]-Q*ae*U,x[12]-ae*B*U,x[13]-ae*D*U,x[14]-ae*Q*U,x[15]-ae*ae*U],X=F,ee=q;let H=[Math.random(),Math.random(),Math.random(),Math.random()],ne=0,le=0;if(j!=0)for(let he=0;he<16&&(H=ee.multVec(X,H),le=Math.sqrt(ee.dot(H,H)),H=ee.sml(1/le,H),!(he!=0&&Math.abs(le-ne)<1e-9));he++)ne=le;const se=[B*U,D*U,Q*U,ae*U];return{Cov:F,q:se,e:H,L:ne,eMq255:ee.dot(ee.sml(255,se),H),eMq:ee.dot(H,se),rgba:(Math.round(255*se[3])<<24|Math.round(255*se[2])<<16|Math.round(255*se[1])<<8|Math.round(255*se[0])<<0)>>>0}}var q={multVec:(S,x)=>[S[0]*x[0]+S[1]*x[1]+S[2]*x[2]+S[3]*x[3],S[4]*x[0]+S[5]*x[1]+S[6]*x[2]+S[7]*x[3],S[8]*x[0]+S[9]*x[1]+S[10]*x[2]+S[11]*x[3],S[12]*x[0]+S[13]*x[1]+S[14]*x[2]+S[15]*x[3]],dot:(S,x)=>S[0]*x[0]+S[1]*x[1]+S[2]*x[2]+S[3]*x[3],sml:(S,x)=>[S*x[0],S*x[1],S*x[2],S*x[3]]};Es.encode=function(x,N,j,B,D,Q,ae){B==null&&(B=0),ae==null&&(ae=!1);const U=_(x,N,j,B,[!1,!1,!1,0,ae,!1]);return m(U,-1),p(U,N,j,D,Q)},Es.encodeLL=function(x,N,j,B,D,Q,ae,U){const F={ctype:0+(B==1?0:2)+(D==0?0:4),depth:Q,frames:[]},X=(B+D)*Q,ee=X*N;for(let H=0;H<x.length;H++)F.frames.push({rect:{x:0,y:0,width:N,height:j},img:new Uint8Array(x[H]),blend:0,dispose:1,bpp:Math.ceil(X/8),bpl:Math.ceil(ee/8)});return m(F,0,!0),p(F,N,j,ae,U)},Es.encode.compress=_,Es.encode.dither=f,Es.quantize=O,Es.quantize.getKDtree=M,Es.quantize.getNearest=z})();const yx={toArrayBuffer(n,e){const t=n.width,i=n.height,s=t<<2,l=n.getContext("2d").getImageData(0,0,t,i),c=new Uint32Array(l.data.buffer),f=(32*t+31)/32<<2,p=f*i,m=122+p,_=new ArrayBuffer(m),E=new DataView(_),b=1<<20;let C,I,O,M,z=b,Y=0,K=0,J=0;function oe(S){E.setUint16(K,S,!0),K+=2}function W(S){E.setUint32(K,S,!0),K+=4}function q(S){K+=S}oe(19778),W(m),q(4),W(122),W(108),W(t),W(-i>>>0),oe(1),oe(32),W(3),W(p),W(2835),W(2835),q(8),W(16711680),W(65280),W(255),W(4278190080),W(1466527264),function S(){for(;Y<i&&z>0;){for(M=122+Y*f,C=0;C<s;)z--,I=c[J++],O=I>>>24,E.setUint32(M+C,I<<8|O),C+=4;Y++}J<c.length?(z=b,setTimeout(S,yx._dly)):e(_)}()},toBlob(n,e){this.toArrayBuffer(n,t=>{e(new Blob([t],{type:"image/bmp"}))})},_dly:9};var rr={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},fV={[rr.CHROME]:16384,[rr.FIREFOX]:11180,[rr.DESKTOP_SAFARI]:16384,[rr.IE]:8192,[rr.IOS]:4096,[rr.ETC]:8192};const By=typeof window<"u",Ex=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,yp=By&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),pV=(By||Ex)&&(yp&&yp.getOriginalSymbol(window,"File")||typeof File<"u"&&File),bx=(By||Ex)&&(yp&&yp.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Fy(n,e,t=Date.now()){return new Promise(i=>{const s=n.split(","),l=s[0].match(/:(.*?);/)[1],c=globalThis.atob(s[1]);let f=c.length;const p=new Uint8Array(f);for(;f--;)p[f]=c.charCodeAt(f);const m=new Blob([p],{type:l});m.name=e,m.lastModified=t,i(m)})}function wx(n){return new Promise((e,t)=>{const i=new bx;i.onload=()=>e(i.result),i.onerror=s=>t(s),i.readAsDataURL(n)})}function Tx(n){return new Promise((e,t)=>{const i=new Image;i.onload=()=>e(i),i.onerror=s=>t(s),i.src=n})}function Vl(){if(Vl.cachedResult!==void 0)return Vl.cachedResult;let n=rr.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?n=rr.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?n=rr.IOS:/Safari/i.test(e)?n=rr.DESKTOP_SAFARI:/Firefox/i.test(e)?n=rr.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(n=rr.IE),Vl.cachedResult=n,Vl.cachedResult}function Ax(n,e){const t=Vl(),i=fV[t];let s=n,l=e,c=s*l;const f=s>l?l/s:s/l;for(;c>i*i;){const p=(i+s)/2,m=(i+l)/2;p<m?(l=m,s=m*f):(l=p*f,s=p),c=s*l}return{width:s,height:l}}function hm(n,e){let t,i;try{if(t=new OffscreenCanvas(n,e),i=t.getContext("2d"),i===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),i=t.getContext("2d")}return t.width=n,t.height=e,[t,i]}function Sx(n,e){const{width:t,height:i}=Ax(n.width,n.height),[s,l]=hm(t,i);return e&&/jpe?g/.test(e)&&(l.fillStyle="white",l.fillRect(0,0,s.width,s.height)),l.drawImage(n,0,0,s.width,s.height),s}function Ff(){return Ff.cachedResult!==void 0||(Ff.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ff.cachedResult}function Ep(n,e={}){return new Promise(function(t,i){let s,l;var c=function(){try{return l=Sx(s,e.fileType||n.type),t([s,l])}catch(p){return i(p)}},f=function(p){try{var m=function(_){try{throw _}catch(E){return i(E)}};try{let _;return wx(n).then(function(E){try{return _=E,Tx(_).then(function(b){try{return s=b,function(){try{return c()}catch(C){return i(C)}}()}catch(C){return m(C)}},m)}catch(b){return m(b)}},m)}catch(_){m(_)}}catch(_){return i(_)}};try{if(Ff()||[rr.DESKTOP_SAFARI,rr.MOBILE_SAFARI].includes(Vl()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(n).then(function(p){try{return s=p,c()}catch{return f()}},f)}catch{f()}})}function bp(n,e,t,i,s=1){return new Promise(function(l,c){let f;if(e==="image/png"){let E,b,C;return E=n.getContext("2d"),{data:b}=E.getImageData(0,0,n.width,n.height),C=Es.encode([b.buffer],n.width,n.height,4096*s),f=new Blob([C],{type:e}),f.name=t,f.lastModified=i,p.call(this)}{let E=function(){return p.call(this)};var m=E;if(e==="image/bmp")return new Promise(b=>yx.toBlob(n,b)).then((function(b){try{return f=b,f.name=t,f.lastModified=i,E.call(this)}catch(C){return c(C)}}).bind(this),c);{let b=function(){return E.call(this)};var _=b;if(typeof OffscreenCanvas=="function"&&n instanceof OffscreenCanvas)return n.convertToBlob({type:e,quality:s}).then((function(C){try{return f=C,f.name=t,f.lastModified=i,b.call(this)}catch(I){return c(I)}}).bind(this),c);{let C;return C=n.toDataURL(e,s),Fy(C,t,i).then((function(I){try{return f=I,b.call(this)}catch(O){return c(O)}}).bind(this),c)}}}function p(){return l(f)}})}function $s(n){n.width=0,n.height=0}function Gu(){return new Promise(function(n,e){let t,i,s,l;return Gu.cachedResult!==void 0?n(Gu.cachedResult):Fy("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(c){try{return t=c,Ep(t).then(function(f){try{return i=f[1],bp(i,t.type,t.name,t.lastModified).then(function(p){try{return s=p,$s(i),Ep(s).then(function(m){try{return l=m[0],Gu.cachedResult=l.width===1&&l.height===2,n(Gu.cachedResult)}catch(_){return e(_)}},e)}catch(m){return e(m)}},e)}catch(p){return e(p)}},e)}catch(f){return e(f)}},e)})}function xx(n){return new Promise((e,t)=>{const i=new bx;i.onload=s=>{const l=new DataView(s.target.result);if(l.getUint16(0,!1)!=65496)return e(-2);const c=l.byteLength;let f=2;for(;f<c;){if(l.getUint16(f+2,!1)<=8)return e(-1);const p=l.getUint16(f,!1);if(f+=2,p==65505){if(l.getUint32(f+=2,!1)!=1165519206)return e(-1);const m=l.getUint16(f+=6,!1)==18761;f+=l.getUint32(f+4,m);const _=l.getUint16(f,m);f+=2;for(let E=0;E<_;E++)if(l.getUint16(f+12*E,m)==274)return e(l.getUint16(f+12*E+8,m))}else{if((65280&p)!=65280)break;f+=l.getUint16(f,!1)}}return e(-1)},i.onerror=s=>t(s),i.readAsArrayBuffer(n)})}function Cx(n,e){const{width:t}=n,{height:i}=n,{maxWidthOrHeight:s}=e;let l,c=n;return isFinite(s)&&(t>s||i>s)&&([c,l]=hm(t,i),t>i?(c.width=s,c.height=i/t*s):(c.width=t/i*s,c.height=s),l.drawImage(n,0,0,c.width,c.height),$s(n)),c}function Rx(n,e){const{width:t}=n,{height:i}=n,[s,l]=hm(t,i);switch(e>4&&e<9?(s.width=i,s.height=t):(s.width=t,s.height=i),e){case 2:l.transform(-1,0,0,1,t,0);break;case 3:l.transform(-1,0,0,-1,t,i);break;case 4:l.transform(1,0,0,-1,0,i);break;case 5:l.transform(0,1,1,0,0,0);break;case 6:l.transform(0,1,-1,0,i,0);break;case 7:l.transform(0,-1,-1,0,i,t);break;case 8:l.transform(0,-1,1,0,0,t)}return l.drawImage(n,0,0,t,i),$s(n),s}function rT(n,e,t=0){return new Promise(function(i,s){let l,c,f,p,m,_,E,b,C,I,O,M,z,Y,K,J,oe,W,q,S;function x(j=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;l+=j,e.onProgress(Math.min(l,100))}function N(j){if(e.signal&&e.signal.aborted)throw e.signal.reason;l=Math.min(Math.max(j,l),100),e.onProgress(l)}return l=t,c=e.maxIteration||10,f=1024*e.maxSizeMB*1024,x(),Ep(n,e).then((function(j){try{return[,p]=j,x(),m=Cx(p,e),x(),new Promise(function(B,D){var Q;if(!(Q=e.exifOrientation))return xx(n).then((function(U){try{return Q=U,ae.call(this)}catch(F){return D(F)}}).bind(this),D);function ae(){return B(Q)}return ae.call(this)}).then((function(B){try{return _=B,x(),Gu().then((function(D){try{return E=D?m:Rx(m,_),x(),b=e.initialQuality||1,C=e.fileType||n.type,bp(E,C,n.name,n.lastModified,b).then((function(Q){try{{let X=function(){if(c--&&(K>f||K>z)){let H,ne;return H=S?.95*q.width:q.width,ne=S?.95*q.height:q.height,[oe,W]=hm(H,ne),W.drawImage(q,0,0,H,ne),b*=C==="image/png"?.85:.95,bp(oe,C,n.name,n.lastModified,b).then(function(le){try{return J=le,$s(q),q=oe,K=J.size,N(Math.min(99,Math.floor((Y-K)/(Y-f)*100))),X}catch(se){return s(se)}},s)}return[1]},ee=function(){return $s(q),$s(oe),$s(m),$s(E),$s(p),N(100),i(J)};var U=X,F=ee;if(I=Q,x(),O=I.size>f,M=I.size>n.size,!O&&!M)return N(100),i(I);var ae;return z=n.size,Y=I.size,K=Y,q=E,S=!e.alwaysKeepResolution&&O,(ae=(function(H){for(;H;){if(H.then)return void H.then(ae,s);try{if(H.pop){if(H.length)return H.pop()?ee.call(this):H;H=X}else H=H.call(this)}catch(ne){return s(ne)}}}).bind(this))(X)}}catch(X){return s(X)}}).bind(this),s)}catch(Q){return s(Q)}}).bind(this),s)}catch(D){return s(D)}}).bind(this),s)}catch(B){return s(B)}}).bind(this),s)})}const mV=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let E_;function gV(n,e){return new Promise((t,i)=>{E_||(E_=function(c){const f=[];return f.push(c),URL.createObjectURL(new Blob(f))}(mV));const s=new Worker(E_);s.addEventListener("message",function(c){if(e.signal&&e.signal.aborted)s.terminate();else if(c.data.progress===void 0){if(c.data.error)return i(new Error(c.data.error)),void s.terminate();t(c.data.file),s.terminate()}else e.onProgress(c.data.progress)}),s.addEventListener("error",i),e.signal&&e.signal.addEventListener("abort",()=>{i(e.signal.reason),s.terminate()}),s.postMessage({file:n,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function Ii(n,e){return new Promise(function(t,i){let s,l,c,f,p,m;if(s={...e},c=0,{onProgress:f}=s,s.maxSizeMB=s.maxSizeMB||Number.POSITIVE_INFINITY,p=typeof s.useWebWorker!="boolean"||s.useWebWorker,delete s.useWebWorker,s.onProgress=C=>{c=C,typeof f=="function"&&f(c)},!(n instanceof Blob||n instanceof pV))return i(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(n.type))return i(new Error("The file given is not an image"));if(m=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!p||typeof Worker!="function"||m)return rT(n,s).then((function(C){try{return l=C,b.call(this)}catch(I){return i(I)}}).bind(this),i);var _=(function(){try{return b.call(this)}catch(C){return i(C)}}).bind(this),E=function(C){try{return rT(n,s).then(function(I){try{return l=I,_()}catch(O){return i(O)}},i)}catch(I){return i(I)}};try{return s.libURL=s.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",gV(n,s).then(function(C){try{return l=C,_()}catch{return E()}},E)}catch{E()}function b(){try{l.name=n.name,l.lastModified=n.lastModified}catch{}try{s.preserveExif&&n.type==="image/jpeg"&&(!s.fileType||s.fileType&&s.fileType===n.type)&&(l=vx(n,l))}catch{}return t(l)}})}Ii.getDataUrlFromFile=wx,Ii.getFilefromDataUrl=Fy,Ii.loadImage=Tx,Ii.drawImageInCanvas=Sx,Ii.drawFileInCanvas=Ep,Ii.canvasToFile=bp,Ii.getExifOrientation=xx,Ii.handleMaxWidthOrHeight=Cx,Ii.followExifOrientation=Rx,Ii.cleanupCanvasMemory=$s,Ii.isAutoOrientationInBrowser=Gu,Ii.approximateBelowMaximumCanvasSizeOfBrowser=Ax,Ii.copyExifWithoutOrientation=vx,Ii.getBrowserName=Vl,Ii.version="2.0.2";const sT={nomeCompleto:"",cpf:"",rg:"",telefone:"",status:"Disponível",fotoURL:"",dossieURL:"",dataNascimento:"",tipoChavePix:"",chavePix:""};function _V(){const[n,e]=te.useState([]),[t,i]=te.useState(!0),[s,l]=te.useState(!1),[c,f]=te.useState(sT),[p,m]=te.useState(""),[_,E]=te.useState(""),[b,C]=te.useState(""),[I,O]=te.useState([]),[M,z]=te.useState(null),[Y,K]=te.useState(!1),[J,oe]=te.useState(null),[W,q]=te.useState({foto:null,dossie:null}),S=te.useRef(null),x=Mr(Xt,"chapas_b2b"),N=async()=>{i(!0);try{const be=ts(x,$l("dataImportacao","desc")),Oe=(await up(be)).docs.map(Le=>({...Le.data(),id:Le.id}));e(Oe)}catch(be){console.error("Erro ao buscar trabalhadores:",be)}finally{i(!1)}};te.useEffect(()=>{N()},[]),te.useEffect(()=>{const be=b.toLowerCase().trim();if(!n)return;const Ne=n.filter(Oe=>(Oe.nomeCompleto||"").toLowerCase().includes(be)||(Oe.cpf||"").toString().includes(be)||(Oe.rg||"").toString().includes(be));O(Ne)},[b,n]),te.useEffect(()=>{c.tipoChavePix==="CPF"&&c.cpf?f(be=>({...be,chavePix:be.cpf})):c.tipoChavePix==="Telefone"&&c.telefone&&f(be=>({...be,chavePix:be.telefone}))},[c.tipoChavePix,c.cpf,c.telefone]);const j=be=>{const{name:Ne,value:Oe}=be.target;f(Le=>({...Le,[Ne]:Oe}))},B=be=>{if(!be||!be.toDate)return"";const Ne=be.toDate();return new Date(Ne.getTime()-Ne.getTimezoneOffset()*6e4).toISOString().split("T")[0]},D=()=>{z(null),f(sT),q({foto:null,dossie:null}),E(""),l(!0)},Q=be=>{z(be),f({nomeCompleto:be.nomeCompleto||"",cpf:be.cpf||"",rg:be.rg||"",telefone:be.telefone||"",status:be.status||"Disponível",fotoURL:be.fotoURL||"",dossieURL:be.dossieURL||"",dataNascimento:B(be.dataNascimento),tipoChavePix:be.dadosBancarios?.tipoChave||"",chavePix:be.dadosBancarios?.chave||""}),q({foto:null,dossie:null}),E(""),l(!0)},ae=()=>{l(!1),z(null),q({foto:null,dossie:null})},U=be=>{if(!be)return null;const Ne=new Date(be),Oe=Ne.getTimezoneOffset()*6e4;return zt.fromDate(new Date(Ne.getTime()+Oe))},F={11:"SP (Capital)",12:"SP (Vale do Paraíba)",13:"SP (Baixada Santista)",14:"SP (Bauru/Marília)",15:"SP (Sorocaba)",16:"SP (Ribeirão Preto)",17:"SP (São José do Rio Preto)",18:"SP (Presidente Prudente)",19:"SP (Campinas)",21:"RJ (Capital)",22:"RJ (Norte Fluminense)",24:"RJ (Serra/Sul Fluminense)",27:"ES (Vitória e Região)",28:"ES (Sul)",31:"MG (Belo Horizonte)",32:"MG (Juiz de Fora)",33:"MG (Governador Valadares)",34:"MG (Uberlândia)",35:"MG (Sul de Minas)",37:"MG (Centro-Oeste)",38:"MG (Norte de Minas)",41:"PR (Curitiba)",42:"PR (Ponta Grossa)",43:"PR (Londrina)",44:"PR (Maringá)",45:"PR (Foz do Iguaçu)",46:"PR (Sudoeste)",47:"SC (Joinville/Itajaí)",48:"SC (Florianópolis)",49:"SC (Oeste)",51:"RS (Porto Alegre)",53:"RS (Pelotas)",54:"RS (Caxias do Sul)",55:"RS (Central)",61:"DF (Brasília)",62:"GO (Goiânia)",63:"TO (Palmas)",64:"GO (Sudoeste)",65:"MT (Cuiabá)",66:"MT (Norte)",67:"MS (Campo Grande)",68:"AC (Rio Branco)",69:"RO (Porto Velho)",71:"BA (Salvador)",73:"BA (Sul)",74:"BA (Juazeiro)",75:"BA (Feira de Santana)",77:"BA (Oeste)",79:"SE (Aracaju)",81:"PE (Recife)",82:"AL (Maceió)",83:"PB (João Pessoa)",84:"RN (Natal)",85:"CE (Fortaleza)",86:"PI (Teresina)",87:"PE (Sertão)",88:"CE (Interior)",89:"PI (Sudeste)",91:"PA (Belém)",92:"AM (Manaus)",93:"PA (Oeste)",94:"PA (Sudeste)",95:"RR (Boa Vista)",96:"AP (Macapá)",97:"AM (Sudoeste)",98:"MA (São Luís)",99:"MA (Sul)"},X=be=>{if(!be||typeof be!="string")return"Não identificado";const Ne=be.replace(/\D/g,"");if(Ne.length<2)return"Não identificado";const Oe=Ne.substring(0,2);return F[Oe]||"Outra Região"},ee=be=>{const Ne=c[be];Ne&&(q(Oe=>({...Oe,[be.replace("URL","")]:Ne})),f(Oe=>({...Oe,[be]:""})))},H=async be=>{if(be)try{const Ne=c_(h_,be);await F4(Ne)}catch(Ne){Ne.code!=="storage/object-not-found"&&console.error("Erro ao excluir arquivo antigo: ",Ne)}},ne=async be=>{const Ne=be.target.files[0];if(Ne){c.fotoURL&&ee("fotoURL"),E("Comprimindo...");try{const Oe=await Ii(Ne,{maxSizeMB:1,maxWidthOrHeight:800});E("Enviando...");const Le=c_(h_,`fotos_chapas/${Date.now()}_${Oe.name}`),Me=await Cw(Le,Oe),Qe=await Rw(Me.ref);f(it=>({...it,fotoURL:Qe})),E("Foto enviada!")}catch(Oe){console.error("Erro no upload: ",Oe)}}},le=async be=>{const Ne=be.target.files[0];if(Ne){c.dossieURL&&ee("dossieURL"),E("Enviando...");try{const Oe=c_(h_,`dossies_chapas/${Date.now()}_${Ne.name}`),Le=await Cw(Oe,Ne),Me=await Rw(Le.ref);f(Qe=>({...Qe,dossieURL:Me})),E("Dossiê enviado!")}catch(Oe){console.error("Erro no upload: ",Oe)}}},se=async be=>{if(be.preventDefault(),E("Validando dados..."),!c.cpf){alert("Erro: O campo CPF é obrigatório."),E("");return}const Ne=ts(x,es("cpf","==",c.cpf)),Oe=await up(Ne);let Le=!1;if(Oe.empty||(M?Oe.forEach(Me=>{Me.id!==M.id&&(Le=!0)}):Le=!0),Le){alert("Erro: Já existe um trabalhador cadastrado com este CPF."),E("");return}M?await ye():await ue()},he=()=>{const{tipoChavePix:be,chavePix:Ne,...Oe}=c,Le=U(Oe.dataNascimento),Me={...Oe,dataNascimento:Le,regiao:X(Oe.telefone)};return Ne&&be?Me.dadosBancarios={tipoChave:be,chave:Ne}:Me.dadosBancarios=null,Me},ue=async()=>{if(c.nomeCompleto){E("Salvando...");try{await H(W.foto),await H(W.dossie);const be={...he(),dataImportacao:zt.now()};await Qp(x,be),ae(),N()}catch(be){console.error("Erro ao criar: ",be)}finally{E("")}}},ye=async()=>{if(M?.id){E("Atualizando...");try{await H(W.foto),await H(W.dossie);const be=he(),Ne=_i(Xt,"chapas_b2b",M.id);await Qu(Ne,be),ae(),N()}catch(be){console.error("Erro ao atualizar: ",be)}finally{E("")}}},Fe=be=>{oe(be),K(!0)},ke=()=>{oe(null),K(!1)},De=async()=>{if(J){await H(J.fotoURL),await H(J.dossieURL);try{await gy(_i(Xt,"chapas_b2b",J.id)),ke(),N()}catch(be){console.error("Erro ao excluir: ",be)}}},qe=()=>{S.current.click()},je=be=>be,Ze=be=>{const Ne=be.target.files[0];Ne&&(m("Lendo arquivo..."),lV.parse(Ne,{header:!0,skipEmptyLines:!0,complete:async Oe=>{m(`Encontrados ${Oe.data.length} registros. Processando...`);const Le=$S(Xt);Oe.data.forEach(Me=>{const Qe=Me["Data de Nascimento"]?U(Me["Data de Nascimento"].split("/").reverse().join("-")):null,it=Me.Telefone?je(Me.Telefone):"",_t={nomeCompleto:Me.Nome||"",cpf:Me.CPF||"",telefone:it,status:"Disponível",dataNascimento:Qe,regiao:X(it),dataImportacao:zt.now(),fotoURL:"",dossieURL:""},Vt=_i(Mr(Xt,"chapas_b2b"));Le.set(Vt,_t)});try{await Le.commit(),m(`Sucesso! ${Oe.data.length} trabalhadores importados.`),N()}catch(Me){m("Erro ao importar."),console.error("Erro na importação: ",Me)}}}))},Et=()=>{switch(c.tipoChavePix){case"CPF":return"000.000.000-00";case"Telefone":return"(00) 00000-0000";default:return}};return T.jsxs("div",{children:[T.jsxs("div",{className:"gestao-header",children:[T.jsxs("div",{children:[T.jsxs("div",{className:"title-with-counter",children:[T.jsx("h1",{className:"gestao-title",children:"Gestão de Trabalhadores"}),!t&&T.jsxs("span",{className:"total-counter",children:[" ",T.jsx(x2,{size:16})," ",n.length," Perfis Cadastrados "]})]}),T.jsx("p",{className:"gestao-subtitle",children:"Adicione e gerencie os Chapas de elite disponíveis para seus clientes."})]}),T.jsxs("div",{className:"action-buttons-group",children:[T.jsx("input",{type:"file",accept:".csv",ref:S,onChange:Ze,style:{display:"none"}}),T.jsxs("button",{className:"import-button-csv",onClick:qe,children:[" ",T.jsx(Z6,{size:20})," Importar via Planilha "]}),T.jsxs("button",{className:"import-button",onClick:D,children:[" ",T.jsx(ky,{size:20})," Adicionar Manualmente "]})]})]}),p&&T.jsx("p",{className:"import-status-feedback",children:p}),T.jsxs("div",{className:"filtro-container",children:[" ",T.jsx("input",{type:"text",placeholder:"Buscar por Nome, CPF ou RG...",className:"filtro-input",value:b,onChange:be=>C(be.target.value)})," "]}),T.jsx("div",{className:"table-container",children:T.jsxs("table",{className:"talentos-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Trabalhador"}),T.jsx("th",{children:"Status"}),T.jsx("th",{children:"Telefone / Região"}),T.jsx("th",{children:"Ações"})]})}),T.jsx("tbody",{children:t?T.jsx("tr",{children:T.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem"},children:"Carregando trabalhadores..."})}):I.length>0?I.map(be=>T.jsxs("tr",{children:[T.jsxs("td",{children:[" ",T.jsxs("div",{className:"user-cell",children:[" ",T.jsxs("div",{className:"user-avatar",children:[" ",be.fotoURL?T.jsx("img",{src:be.fotoURL,alt:be.nomeCompleto,className:"avatar-image"}):T.jsx(ud,{size:18})," "]})," ",T.jsxs("div",{children:[" ",T.jsx("span",{className:"user-name",children:be.nomeCompleto})," ",T.jsx("span",{className:"user-cpf",children:be.cpf})," "]})," "]})," "]}),T.jsxs("td",{children:[" ",T.jsxs("span",{className:`status-badge status-${(be.status||"disponível").toLowerCase().replace(/ /g,"-")}`,children:[" ",be.status," "]})," "]}),T.jsxs("td",{children:[" ",T.jsxs("div",{className:"contact-cell",children:[" ",T.jsx("span",{children:be.telefone})," ",T.jsx("span",{className:"region-tag",children:be.regiao})," "]})," "]}),T.jsxs("td",{children:[" ",T.jsxs("div",{className:"acoes-cell",children:[" ",T.jsxs("button",{className:"action-button-details",title:be.dossieURL?"Ver Dossiê":"Dossiê não disponível",onClick:()=>be.dossieURL&&window.open(be.dossieURL,"_blank","noopener,noreferrer"),disabled:!be.dossieURL,children:[" ",T.jsx(Ny,{size:18})," "]})," ",T.jsxs("button",{className:"action-button-edit",title:"Editar Perfil",onClick:()=>Q(be),children:[" ",T.jsx(Py,{size:18})," "]})," ",T.jsxs("button",{className:"action-button-delete",title:"Excluir Perfil",onClick:()=>Fe(be),children:[" ",T.jsx(My,{size:18})," "]})," "]})," "]})]},be.id)):T.jsx("tr",{children:T.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"2rem"},children:"Nenhum trabalhador encontrado."})})})]})}),T.jsx(Zo,{isOpen:s,onClose:ae,title:M?"Editar Dados do Trabalhador":"Adicionar Novo Trabalhador",children:T.jsxs("form",{onSubmit:se,className:"modal-form",children:[T.jsxs("div",{className:"form-section",children:[T.jsxs("div",{className:"input-group",children:[" ",T.jsx("label",{htmlFor:"nomeCompleto",children:"Nome Completo"})," ",T.jsx("input",{id:"nomeCompleto",name:"nomeCompleto",type:"text",value:c.nomeCompleto,onChange:j,required:!0})," "]}),T.jsxs("div",{className:"form-row",children:[T.jsxs("div",{className:"input-group",children:[" ",T.jsx("label",{htmlFor:"cpf",children:"CPF"})," ",T.jsx(Eh,{mask:"000.000.000-00",id:"cpf",name:"cpf",value:c.cpf,onAccept:be=>j({target:{name:"cpf",value:be}}),required:!0})," "]}),T.jsxs("div",{className:"input-group",children:[" ",T.jsx("label",{htmlFor:"rg",children:"RG"})," ",T.jsx(Eh,{mask:"00.000.000-0",id:"rg",name:"rg",value:c.rg,onAccept:be=>j({target:{name:"rg",value:be}})})," "]})]}),T.jsxs("div",{className:"form-row",children:[T.jsxs("div",{className:"input-group",children:[" ",T.jsx("label",{htmlFor:"telefone",children:"Telefone"})," ",T.jsx(Eh,{mask:"(00) 00000-0000",id:"telefone",name:"telefone",value:c.telefone,onAccept:be=>j({target:{name:"telefone",value:be}}),required:!0})," "]}),T.jsxs("div",{className:"input-group",children:[" ",T.jsx("label",{htmlFor:"dataNascimento",children:"Data de Nascimento"})," ",T.jsx("input",{type:"date",id:"dataNascimento",name:"dataNascimento",value:c.dataNascimento,onChange:j})," "]})]})]}),T.jsxs("div",{className:"form-section",children:[T.jsxs("h3",{className:"form-section-title",children:[" ",T.jsx(Y3,{size:20})," Dados de Pagamento (PIX) "]}),T.jsxs("div",{className:"form-row",children:[T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"tipoChavePix",children:"Tipo de Chave"}),T.jsxs("select",{id:"tipoChavePix",name:"tipoChavePix",value:c.tipoChavePix,onChange:j,children:[T.jsx("option",{value:"",children:"Nenhum"}),T.jsx("option",{value:"CPF",children:"CPF"}),T.jsx("option",{value:"Telefone",children:"Celular"}),T.jsx("option",{value:"E-mail",children:"E-mail"}),T.jsx("option",{value:"Aleatória",children:"Chave Aleatória"})]})]}),T.jsxs("div",{className:"input-group",children:[T.jsx("label",{htmlFor:"chavePix",children:"Chave PIX"}),T.jsx(Eh,{mask:Et(),id:"chavePix",name:"chavePix",value:c.chavePix,onAccept:be=>j({target:{name:"chavePix",value:be}}),disabled:!c.tipoChavePix,placeholder:c.tipoChavePix?"":"Selecione um tipo de chave"})]})]})]}),T.jsxs("div",{className:"form-section",children:[T.jsxs("div",{className:"input-group",children:[" ",T.jsx("label",{htmlFor:"status",children:"Status"})," ",T.jsxs("select",{id:"status",name:"status",value:c.status,onChange:j,children:[" ",T.jsx("option",{value:"Disponível",children:"Disponível"})," ",T.jsx("option",{value:"Em Serviço",children:"Em Serviço"})," ",T.jsx("option",{value:"De Férias",children:"De Férias"})," ",T.jsx("option",{value:"Bloqueado",children:"Bloqueado"})," "]})," "]}),T.jsxs("div",{className:"upload-section",children:[T.jsxs("div",{className:"upload-item",children:[T.jsxs("label",{htmlFor:"fotoUpload",className:"upload-button",children:[" ",T.jsx(t6,{size:18})," ",c.fotoURL?"Alterar Foto":"Carregar Foto"," "]}),T.jsx("input",{id:"fotoUpload",type:"file",accept:"image/*",onChange:ne,style:{display:"none"}}),c.fotoURL&&T.jsxs("div",{className:"file-feedback",children:[" ",T.jsx("img",{src:c.fotoURL,alt:"Preview",className:"upload-preview"})," ",T.jsx("button",{type:"button",onClick:()=>ee("fotoURL"),className:"remove-file-btn",children:T.jsx(dp,{size:16})})," "]})]}),T.jsxs("div",{className:"upload-item",children:[T.jsxs("label",{htmlFor:"dossieUpload",className:"upload-button",children:[" ",T.jsx(N6,{size:18})," ",c.dossieURL?"Alterar Dossiê":"Carregar Dossiê"," "]}),T.jsx("input",{id:"dossieUpload",type:"file",accept:".pdf",onChange:le,style:{display:"none"}}),c.dossieURL&&T.jsxs("div",{className:"file-feedback",children:[" ",T.jsx("span",{children:"PDF Carregado"})," ",T.jsx("button",{type:"button",onClick:()=>ee("dossieURL"),className:"remove-file-btn",children:T.jsx(dp,{size:16})})," "]})]})]})]}),_&&T.jsx("p",{className:"upload-progress-feedback",children:_}),T.jsxs("div",{className:"form-actions",children:[T.jsx("button",{type:"button",className:"cancel-button",onClick:ae,children:"Cancelar"}),T.jsx("button",{type:"submit",className:"add-button",children:M?"Salvar Alterações":"Salvar Trabalhador"})]})]})}),T.jsxs(Uy,{isOpen:Y,onClose:ke,onConfirm:De,title:"Confirmar Exclusão",children:[T.jsxs("p",{children:["Você tem certeza que deseja excluir o trabalhador ",T.jsx("strong",{children:J?.nomeCompleto}),"?"]})," ",T.jsx("p",{children:"Esta ação não pode ser desfeita."})]})]})}const ch={nomeCompleto:"",cpf:"",rg:"",dataNascimento:"",cnh:"",telefone:"",veiculo:{modelo:"",placa:""},enderecoMotorista:{cep:"",rua:"",numero:"",bairro:"",cidade:"",estado:""},lojaId:"",ativo:!0};function vV(){const[n,e]=te.useState([]),[t,i]=te.useState([]),[s,l]=te.useState(!0),[c,f]=te.useState(!1),[p,m]=te.useState(!1),[_,E]=te.useState(ch),[b,C]=te.useState(null),[I,O]=te.useState(!1),[M,z]=te.useState(null);te.useEffect(()=>{if(!ir.currentUser)return;l(!0);const D=Mr(Xt,"frota"),Q=ts(D,es("empresaId","==",ir.currentUser.uid),$l("nomeCompleto")),ae=nc(Q,U=>{const F=U.docs.map(X=>({id:X.id,...X.data()}));e(F),l(!1)},U=>{console.error("Erro ao buscar frota: ",U),l(!1)});return()=>ae()},[]),te.useEffect(()=>{if(!ir.currentUser)return;const D=Mr(Xt,"lojas"),Q=ts(D,es("empresaId","==",ir.currentUser.uid),$l("nomeUnidade")),ae=nc(Q,U=>{const F=U.docs.map(X=>({id:X.id,nomeUnidade:X.data().nomeUnidade}));i(F)});return()=>ae()},[]);const Y=D=>{const{name:Q,value:ae}=D.target;E(U=>({...U,[Q]:ae}))},K=D=>{const{name:Q,value:ae}=D.target;E(U=>({...U,veiculo:{...U.veiculo,[Q]:ae}}))},J=D=>{const{name:Q,value:ae}=D.target;E(U=>({...U,enderecoMotorista:{...U.enderecoMotorista,[Q]:ae}}))},oe=async D=>{const Q=D.target.value.replace(/\D/g,""),ae=Q.replace(/(\d{5})(\d)/,"$1-$2").slice(0,9);if(E(U=>({...U,enderecoMotorista:{...U.enderecoMotorista,cep:ae}})),Q.length===8)try{const{data:U}=await On.get(`https://viacep.com.br/ws/${Q}/json/`);U.erro||E(F=>({...F,enderecoMotorista:{...F.enderecoMotorista,rua:U.logradouro,bairro:U.bairro,cidade:U.localidade,estado:U.uf}}))}catch(U){console.error("Erro ao buscar CEP:",U)}},W=()=>{E(ch),C(null),f(!0)},q=D=>{const Q={...ch,...D,veiculo:{...ch.veiculo,...D.veiculo},enderecoMotorista:{...ch.enderecoMotorista,...D.enderecoMotorista}};E(Q),C(D.id),f(!0)},S=()=>{p||f(!1)},x=D=>{z(D),O(!0)},N=async D=>{if(D.preventDefault(),!ir.currentUser){alert("Erro de autenticação. Por favor, faça login novamente.");return}m(!0);try{if(b){const Q=_i(Xt,"frota",b);await Qu(Q,_),alert("Membro da frota atualizado com sucesso!")}else{const Q={..._,empresaId:ir.currentUser.uid};await Qp(Mr(Xt,"frota"),Q),alert("Novo membro adicionado à frota com sucesso!")}S()}catch(Q){console.error("Erro ao salvar membro: ",Q),alert("Ocorreu um erro ao salvar. Verifique o console.")}finally{m(!1)}},j=async()=>{if(M)try{await gy(_i(Xt,"frota",M.id)),alert("Membro excluído com sucesso.")}catch(D){console.error("Erro ao excluir membro: ",D),alert("Ocorreu um erro ao excluir.")}finally{O(!1),z(null)}},B=D=>{const Q=t.find(ae=>ae.id===D);return Q?Q.nomeUnidade:"Não vinculada"};return T.jsxs("div",{className:"frota-container",children:[T.jsxs("div",{className:"frota-header",children:[T.jsx("h1",{className:"frota-title",children:"Minha Frota"}),T.jsxs("button",{className:"add-button",onClick:W,children:[T.jsx(ky,{size:20}),"Adicionar Motorista"]})]}),T.jsx("div",{className:"table-container",children:T.jsxs("table",{className:"frota-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Motorista"}),T.jsx("th",{children:"Veículo"}),T.jsx("th",{children:"Telefone"}),T.jsx("th",{children:"Loja Vinculada"}),T.jsx("th",{children:"Ações"})]})}),T.jsx("tbody",{children:s?T.jsx("tr",{children:T.jsxs("td",{colSpan:"5",className:"table-message",children:[T.jsx(Dr,{className:"animate-spin"})," Carregando frota..."]})}):n.length>0?n.map(D=>T.jsxs("tr",{children:[T.jsx("td",{children:D.nomeCompleto||D.nome}),T.jsxs("td",{children:[D.veiculo?.modelo||"N/A"," (",D.veiculo?.placa||D.placa,")"]}),T.jsx("td",{children:D.telefone}),T.jsx("td",{children:B(D.lojaId)}),T.jsxs("td",{className:"actions-cell",children:[T.jsx("button",{title:"Editar",className:"action-button edit-button",onClick:()=>q(D),children:T.jsx(Py,{size:16})}),T.jsx("button",{title:"Excluir",className:"action-button delete-button",onClick:()=>x(D),children:T.jsx(My,{size:16})})]})]},D.id)):T.jsx("tr",{children:T.jsx("td",{colSpan:"5",className:"table-message",children:"Nenhum motorista cadastrado para esta empresa."})})})]})}),T.jsx(Zo,{isOpen:c,onClose:S,title:b?"Editar Motorista":"Adicionar Novo Motorista",children:T.jsxs("form",{onSubmit:N,className:"modal-form-frota",children:[T.jsxs("h4",{className:"form-subtitle",children:[T.jsx(ud,{size:16})," Dados Pessoais"]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Nome Completo"}),T.jsx("input",{name:"nomeCompleto",value:_.nomeCompleto,onChange:Y,required:!0})]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"CPF"}),T.jsx("input",{name:"cpf",value:_.cpf,onChange:Y})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"RG"}),T.jsx("input",{name:"rg",value:_.rg,onChange:Y})]})]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Data de Nascimento"}),T.jsx("input",{name:"dataNascimento",type:"date",value:_.dataNascimento,onChange:Y})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"CNH"}),T.jsx("input",{name:"cnh",value:_.cnh,onChange:Y,required:!0})]})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Telefone"}),T.jsx("input",{name:"telefone",type:"tel",value:_.telefone,onChange:Y,required:!0})]}),T.jsxs("h4",{className:"form-subtitle",children:[T.jsx(q6,{size:16})," Dados do Veículo"]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Modelo"}),T.jsx("input",{name:"modelo",value:_.veiculo.modelo,onChange:K,placeholder:"Ex: Scania R450"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Placa"}),T.jsx("input",{name:"placa",value:_.veiculo.placa,onChange:K,required:!0})]})]}),T.jsxs("h4",{className:"form-subtitle",children:[T.jsx(Oy,{size:16})," Endereço do Motorista"]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"CEP"}),T.jsx("input",{name:"cep",value:_.enderecoMotorista.cep,onChange:oe,maxLength:"9"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Rua"}),T.jsx("input",{name:"rua",value:_.enderecoMotorista.rua,onChange:J})]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Número"}),T.jsx("input",{name:"numero",value:_.enderecoMotorista.numero,onChange:J})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Bairro"}),T.jsx("input",{name:"bairro",value:_.enderecoMotorista.bairro,onChange:J})]})]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Cidade"}),T.jsx("input",{name:"cidade",value:_.enderecoMotorista.cidade,onChange:J})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Estado"}),T.jsx("input",{name:"estado",value:_.enderecoMotorista.estado,onChange:J,maxLength:"2"})]})]}),T.jsxs("h4",{className:"form-subtitle",children:[T.jsx(w2,{size:16})," Vínculo Operacional"]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Loja / Unidade"}),T.jsxs("select",{name:"lojaId",value:_.lojaId,onChange:Y,required:!0,children:[T.jsx("option",{value:"",disabled:!0,children:"-- Selecione uma loja --"}),t.map(D=>T.jsx("option",{value:D.id,children:D.nomeUnidade},D.id))]})]}),T.jsxs("div",{className:"form-actions",children:[T.jsx("button",{type:"button",className:"cancel-button",onClick:S,disabled:p,children:"Cancelar"}),T.jsx("button",{type:"submit",className:"add-button",disabled:p,children:p?T.jsx(Dr,{className:"animate-spin"}):b?"Salvar Alterações":"Adicionar Motorista"})]})]})}),T.jsxs(Uy,{isOpen:I,onClose:()=>O(!1),onConfirm:j,title:"Confirmar Exclusão",children:[T.jsx("p",{children:"Você tem certeza que deseja excluir o membro da frota permanentemente?"}),M&&T.jsx("p",{className:"membro-destaque",children:M.nomeCompleto||M.nome})]})]})}const hh={nomeUnidade:"",cnpj:"",endereco:{rua:"",numero:"",bairro:"",cidade:"",estado:"",cep:""},responsavel:{nome:"",email:"",telefone:""},ativo:!0};function yV(){const{currentUser:n,userRole:e,loading:t}=Wp(),[i,s]=te.useState([]),[l,c]=te.useState(!0),[f,p]=te.useState(!1),[m,_]=te.useState(!1),[E,b]=te.useState(hh),[C,I]=te.useState(null),[O,M]=te.useState(!1),[z,Y]=te.useState(null),[K,J]=te.useState(null);te.useEffect(()=>{!t&&n&&(async()=>{const ae=_i(Xt,"empresas",n.uid),U=await lp(ae);U.exists()?J(U.data()):console.error("Documento da empresa não encontrado para o UID:",n.uid)})()},[n,t]),te.useEffect(()=>{if(!n){c(!1);return}c(!0);const Q=Mr(Xt,"lojas"),ae=ts(Q,es("empresaId","==",n.uid),$l("nomeUnidade")),U=nc(ae,F=>{const X=F.docs.map(ee=>({id:ee.id,...ee.data()}));s(X),c(!1)},F=>{console.error("Erro ao buscar lojas: ",F),c(!1)});return()=>U()},[n]);const W=t||l?!0:e==="superAdmin"?!1:K?i.length>=K.limits.lojas:!0,q=(Q,ae=null)=>{const{name:U,value:F}=Q.target;b(ae?X=>({...X,[ae]:{...X[ae],[U]:F}}):X=>({...X,[U]:F}))},S=()=>{b(hh),I(null),p(!0)},x=Q=>{const ae={...hh,...Q};ae.endereco={...hh.endereco,...Q.endereco},ae.responsavel={...hh.responsavel,...Q.responsavel},b(ae),I(Q.id),p(!0)},N=()=>{m||p(!1)},j=Q=>{Y(Q),M(!0)},B=async Q=>{if(Q.preventDefault(),!n){console.error("Erro de autenticação.");return}_(!0);try{if(C){const ae=_i(Xt,"lojas",C);await Qu(ae,E),console.log("Loja atualizada com sucesso!")}else{const ae={...E,empresaId:n.uid};await Qp(Mr(Xt,"lojas"),ae),console.log("Nova loja adicionada com sucesso!")}N()}catch(ae){console.error("Erro ao salvar loja: ",ae)}finally{_(!1)}},D=async()=>{if(z)try{await gy(_i(Xt,"lojas",z.id)),console.log("Loja excluída com sucesso.")}catch(Q){console.error("Erro ao excluir loja: ",Q)}finally{M(!1),Y(null)}};return T.jsxs("div",{className:"gestao-lojas-container",children:[T.jsxs("div",{className:"gestao-header",children:[T.jsx("h1",{className:"gestao-title",children:"Gestão de Lojas"}),T.jsxs("button",{className:"add-button",onClick:S,disabled:W,title:e==="superAdmin"?"Adicionar loja (Modo Super Admin)":W?`Você atingiu o limite de ${K?.limits.lojas||"..."} loja(s) do seu plano.`:"Adicionar nova loja",children:[e==="superAdmin"?T.jsx(T2,{size:20}):T.jsx(ky,{size:20}),"Adicionar Loja"]})]}),e!=="superAdmin"&&K&&W&&T.jsxs("div",{className:"limite-aviso",children:["Você atingiu o limite de ",K.limits.lojas," loja(s) permitido pelo seu plano (",K.plan,"). Para adicionar mais lojas, considere fazer um upgrade."]}),T.jsx("div",{className:"table-container",children:T.jsxs("table",{className:"lojas-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Nome da Unidade"}),T.jsx("th",{children:"CNPJ"}),T.jsx("th",{children:"Cidade/Estado"}),T.jsx("th",{children:"Responsável"}),T.jsx("th",{children:"Ações"})]})}),T.jsx("tbody",{children:l?T.jsx("tr",{children:T.jsxs("td",{colSpan:"5",className:"table-message",children:[T.jsx(Dr,{className:"animate-spin"})," Carregando lojas..."]})}):i.length>0?i.map(Q=>T.jsxs("tr",{children:[T.jsx("td",{children:Q.nomeUnidade}),T.jsx("td",{children:Q.cnpj}),T.jsxs("td",{children:[Q.endereco?.cidade,"/",Q.endereco?.estado]}),T.jsx("td",{children:Q.responsavel?.nome}),T.jsxs("td",{className:"actions-cell",children:[T.jsx("button",{title:"Editar",className:"action-button edit-button",onClick:()=>x(Q),children:T.jsx(Py,{size:16})}),T.jsx("button",{title:"Excluir",className:"action-button delete-button",onClick:()=>j(Q),children:T.jsx(My,{size:16})})]})]},Q.id)):T.jsx("tr",{children:T.jsx("td",{colSpan:"5",className:"table-message",children:"Nenhuma loja cadastrada para esta empresa."})})})]})}),T.jsx(Zo,{isOpen:f,onClose:N,title:C?"Editar Loja":"Adicionar Nova Loja",children:T.jsxs("form",{onSubmit:B,className:"modal-form-frota",children:[T.jsxs("h4",{className:"form-subtitle",children:[T.jsx(b6,{size:16})," Dados da Loja"]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Nome da Unidade"}),T.jsx("input",{name:"nomeUnidade",value:E.nomeUnidade,onChange:q,required:!0})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"CNPJ da Unidade"}),T.jsx("input",{name:"cnpj",value:E.cnpj,onChange:q})]}),T.jsxs("h4",{className:"form-subtitle",children:[T.jsx(Oy,{size:16})," Endereço"]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"CEP"}),T.jsx("input",{name:"cep",value:E.endereco.cep,onChange:Q=>q(Q,"endereco"),maxLength:"9"})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Rua"}),T.jsx("input",{name:"rua",value:E.endereco.rua,onChange:Q=>q(Q,"endereco")})]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Número"}),T.jsx("input",{name:"numero",value:E.endereco.numero,onChange:Q=>q(Q,"endereco")})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Bairro"}),T.jsx("input",{name:"bairro",value:E.endereco.bairro,onChange:Q=>q(Q,"endereco")})]})]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Cidade"}),T.jsx("input",{name:"cidade",value:E.endereco.cidade,onChange:Q=>q(Q,"endereco")})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Estado"}),T.jsx("input",{name:"estado",value:E.endereco.estado,onChange:Q=>q(Q,"endereco"),maxLength:"2"})]})]}),T.jsxs("h4",{className:"form-subtitle",children:[T.jsx(ud,{size:16})," Contato Responsável"]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Nome do Responsável"}),T.jsx("input",{name:"nome",value:E.responsavel.nome,onChange:Q=>q(Q,"responsavel")})]}),T.jsxs("div",{className:"form-row-2-col",children:[T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Email"}),T.jsx("input",{name:"email",type:"email",value:E.responsavel.email,onChange:Q=>q(Q,"responsavel")})]}),T.jsxs("div",{className:"form-group",children:[T.jsx("label",{children:"Telefone"}),T.jsx("input",{name:"telefone",type:"tel",value:E.responsavel.telefone,onChange:Q=>q(Q,"responsavel")})]})]}),T.jsxs("div",{className:"form-actions",children:[T.jsx("button",{type:"button",className:"cancel-button",onClick:N,disabled:m,children:"Cancelar"}),T.jsx("button",{type:"submit",className:"add-button",disabled:m,children:m?T.jsx(Dr,{className:"animate-spin"}):C?"Salvar Alterações":"Adicionar Loja"})]})]})}),T.jsxs(Uy,{isOpen:O,onClose:()=>M(!1),onConfirm:D,title:"Confirmar Exclusão",children:[T.jsx("p",{children:"Você tem certeza que deseja excluir esta loja permanentemente?"}),z&&T.jsx("p",{className:"item-destaque",children:z.nomeUnidade})]})]})}const EV=({item:n,onVerDetalhes:e,onImprimir:t})=>T.jsxs("tr",{children:[T.jsx("td",{children:T.jsxs("div",{className:"cliente-info",children:[T.jsx("span",{className:"cliente-nome",children:n.cliente}),T.jsxs("span",{className:"cliente-os-id",children:["ID: ",n.id]})]})}),T.jsx("td",{children:T.jsx("div",{className:"alocado-info",children:n.chapaAlocadoNome||"N/A"})}),T.jsx("td",{children:T.jsxs("div",{className:"valor-info",children:["R$ ",n.valorServicoBruto?n.valorServicoBruto.toFixed(2).replace(".",","):"0,00"]})}),T.jsx("td",{children:T.jsx("div",{className:"data-info",children:n.timestampFim?n.timestampFim.toDate().toLocaleDateString("pt-BR"):"Data Indisponível"})}),T.jsx("td",{children:T.jsx("div",{className:`status-info status-${n.status}`,children:n.status.charAt(0).toUpperCase()+n.status.slice(1)})}),T.jsx("td",{children:T.jsxs("div",{className:"acoes-historico",children:[T.jsxs("button",{onClick:()=>e(n),className:"acao-btn ver-btn",children:[T.jsx(Ny,{size:16})," Ver"]}),T.jsxs("button",{onClick:()=>t(n),className:"acao-btn imprimir-btn",children:[T.jsx(P6,{size:16})," Imprimir"]})]})})]});function bV(){const[n,e]=te.useState("arquivados"),[t,i]=te.useState([]),[s,l]=te.useState(!1),[c,f]=te.useState(!1),[p,m]=te.useState(null),_=te.useCallback(async()=>{l(!0);try{if(n==="arquivados"){const O=Mr(Xt,"solicitacoes"),M=ts(O,es("status","in",["finalizado","arquivado"]),$l("timestampFim","desc")),Y=(await up(M)).docs.map(K=>({id:K.id,...K.data()}));i(Y)}}catch(O){console.error("Erro ao buscar histórico! Verifique os índices do Firestore:",O)}finally{l(!1)}},[n]);te.useEffect(()=>{_()},[_]);const E=O=>{m(O),f(!0)},b=()=>{f(!1),m(null)},C=async O=>{let M="";try{const z=await fetch("/CartaoOS.css");if(z.ok)M=await z.text();else throw new Error("Falha ao carregar CSS de impressão.")}catch(z){console.error(z),alert("Não foi possível carregar os estilos para impressão. A impressão pode não sair como esperado.")}m(O),f(!0),setTimeout(()=>{const z=document.getElementById("cartao-os-para-exportar")?.outerHTML;if(!z){b();return}const Y=document.createElement("iframe");Y.style.display="none",document.body.appendChild(Y);const K=Y.contentWindow.document;K.open(),K.write(`
                <html>
                    <head>
                        <title>Imprimir Ticket</title>
                        <style>
                            /* Injetamos os estilos que buscamos via fetch */
                            ${M}
                            /* E adicionamos os controles de impressão aqui, com segurança */
                            @media print {
                                @page { size: A4; margin: 10mm; }
                                body { margin: 0; }
                            }
                        </style>
                    </head>
                    <body>
                        ${z}
                    </body>
                </html>
            `),K.close(),Y.contentWindow.focus(),Y.contentWindow.print(),document.body.removeChild(Y),b()},200)},I=()=>s?T.jsxs("div",{className:"loading-container",children:[T.jsx(Dr,{className:"animate-spin",size:32}),T.jsx("p",{children:"Carregando dados..."})]}):n==="arquivados"?T.jsx("div",{className:"table-wrapper",children:T.jsxs("table",{className:"historico-table",children:[T.jsx("thead",{children:T.jsxs("tr",{children:[T.jsx("th",{children:"Cliente / OS"}),T.jsx("th",{children:"Trabalhador"}),T.jsx("th",{children:"Valor Bruto"}),T.jsx("th",{children:"Finalização"}),T.jsx("th",{children:"Status"}),T.jsx("th",{children:"Ações"})]})}),T.jsx("tbody",{children:t.length>0?t.map(O=>T.jsx(EV,{item:O,onVerDetalhes:E,onImprimir:C},O.id)):T.jsx("tr",{children:T.jsx("td",{colSpan:"6",className:"no-results",children:"Nenhum serviço finalizado ou arquivado encontrado."})})})]})}):null;return T.jsxs("div",{className:"historico-container",children:[T.jsxs("div",{className:"gestao-header",children:[T.jsx("h1",{className:"gestao-title",children:"Central de Inteligência"}),T.jsx("p",{className:"gestao-subtitle",children:"Analise o histórico de operações e os motivos de recusa de convites."})]}),T.jsxs("div",{className:"abas-container",children:[T.jsxs("button",{className:`aba-button ${n==="arquivados"?"active":""}`,onClick:()=>e("arquivados"),children:[T.jsx(Iy,{size:16}),T.jsx("span",{children:"Serviços Concluídos"})]}),T.jsxs("button",{className:`aba-button ${n==="recusados"?"active":""}`,onClick:()=>e("recusados"),children:[T.jsx(dp,{size:16}),T.jsx("span",{children:"Convites Recusados"})]})]}),T.jsx("div",{className:"conteudo-abas",children:I()}),T.jsx(Zo,{isOpen:c,onClose:b,title:"Detalhes do Serviço",children:p&&T.jsx(lv,{solicitacao:p})})]})}const wV=({publicKey:n,plan:e,onSuccess:t,onError:i})=>{const[s,l]=te.useState(!1),[c,f]=te.useState({scriptLoaded:!1,brickReady:!1}),p=te.useRef(null);return te.useEffect(()=>{if(document.querySelector('script[src="https://sdk.mercadopago.com/js/v2"]')){f(E=>({...E,scriptLoaded:!0}));return}const _=document.createElement("script");return _.src="https://sdk.mercadopago.com/js/v2",_.async=!0,_.onload=()=>{console.log("✅ SDK do Mercado Pago injetado e carregado com sucesso."),f(E=>({...E,scriptLoaded:!0}))},_.onerror=()=>{console.error("❌ Falha ao carregar o script do Mercado Pago."),i("Não foi possível carregar o SDK de pagamento.")},document.body.appendChild(_),()=>{const E=document.querySelector('script[src="https://sdk.mercadopago.com/js/v2"]');E&&document.body.removeChild(E)}},[i]),te.useEffect(()=>{if(!c.scriptLoaded||!e||p.current)return;const m=setTimeout(()=>{_()},100),_=async()=>{try{if(!window.MercadoPago){console.error("❌ MercadoPago não está disponível no window"),i("SDK do MercadoPago não foi carregado corretamente.");return}const E=new window.MercadoPago(n,{locale:"pt-BR"}),b=document.getElementById("cardPaymentBrick_container");if(!b){console.error("❌ Contêiner do Brick não encontrado no DOM."),i("Contêiner do formulário não encontrado.");return}b.innerHTML="";const C=E.bricks();if(!C||typeof C.create!="function"){console.error("❌ Método create não encontrado no bricksBuilder:",C),i("Erro na inicialização do formulário de pagamento.");return}const I=await C.create("cardPayment","cardPaymentBrick_container",{initialization:{amount:parseFloat(e.price),payer:{email:"test_user_12345@test.com"}},customization:{visual:{style:{theme:"default"}},paymentMethods:{maxInstallments:1,types:{included:["credit_card"]}}},callbacks:{onReady:()=>{console.log("✅ Brick pronto para uso."),f(O=>({...O,brickReady:!0}))},onError:O=>{console.error("❌ Erro completo do Brick:",JSON.stringify(O,null,2)),i(`Erro no formulário: ${O.message||"Causa desconhecida"}`)},onSubmit:async O=>{console.log("📝 Dados brutos recebidos do formulário. Enviando para o backend...",O),l(!0);try{if(!O||!O.token)throw console.error("❌ Dados do formulário inválidos:",O),new Error("Dados do cartão inválidos. Tente novamente.");const M=p2(),Y=await m2(M,"createSubscription")({planId:e.id,cardData:{token:O.token,...O.payment_method_id&&{payment_method_id:O.payment_method_id},...O.issuer_id&&{issuer_id:O.issuer_id},...O.installments&&{installments:O.installments}}});if(console.log("📊 Resposta do backend:",Y),Y.data&&Y.data.success)console.log("✅ Assinatura criada com sucesso pelo backend!"),t(Y.data.subscriptionId);else throw new Error(Y.data?.error||"Falha no backend.")}catch(M){console.error("❌ Erro ao chamar a Cloud Function:",M),i(M.message||"Não foi possível completar a assinatura."),l(!1)}}}});p.current=I,console.log("✅ Brick inicializado com sucesso:",I)}catch(E){console.error("❌ Erro CRÍTICO ao inicializar o Brick:",E),i("Não foi possível carregar o formulário de pagamento.")}};return()=>{if(clearTimeout(m),p.current){try{p.current.unmount()}catch(E){console.warn("Erro ao desmontar brick:",E)}p.current=null}}},[c.scriptLoaded,e,n,i,t]),T.jsxs("div",{className:"payment-form-container",children:[(!c.brickReady||s)&&T.jsxs("div",{className:"payment-overlay",children:[T.jsx(Dr,{className:"animate-spin",size:48}),T.jsx("p",{children:s?"Processando sua assinatura...":"Carregando formulário de pagamento seguro..."})]}),T.jsx("div",{id:"cardPaymentBrick_container"})]})};function TV({isOpen:n,onClose:e,plan:t,publicKey:i}){const[s,l]=te.useState("form"),[c,f]=te.useState(""),[p,m]=te.useState(""),_=I=>{f(I),l("success")},E=I=>{console.error("❌ Erro no PaymentModal:",I),m(I)},b=()=>{l("form"),m(""),f(""),e()},C=()=>{b(),window.location.reload()};return n?T.jsxs(Zo,{isOpen:n,onClose:b,title:`Assinar Plano ${t?.nome}`,children:[s==="form"&&T.jsxs(T.Fragment,{children:[p&&T.jsx("p",{className:"payment-error-modal",children:p}),T.jsx(wV,{publicKey:i,plan:t,onSuccess:_,onError:E},`${t.id}-${Date.now()}`)]}),s==="success"&&T.jsxs("div",{className:"payment-success-container",children:[T.jsx("h2",{children:"Assinatura Realizada com Sucesso!"}),T.jsxs("p",{children:["Bem-vindo ao Plano ",t.nome,"."]}),T.jsxs("p",{children:["ID da sua assinatura: ",T.jsx("strong",{children:c})]}),T.jsx("button",{onClick:C,className:"botao-plano upgrade",children:"Fechar"})]})]}):null}const AV="APP_USR-6454c285-7cb6-403c-ab24-112914e42994",dh={essencial:{nome:"Essencial",id:"essencial",price:0,displayPrice:"Grátis",periodo:"",icone:T.jsx(A2,{size:24}),destaque:!1,caracteristicas:["1 Loja","Até 20 veículos na frota","Até 3 usuários","Ordens de Serviço Ilimitadas","Suporte via Email"]},profissional:{nome:"Profissional",id:"profissional",price:0,displayPrice:"Carregando...",periodo:"/mês",icone:T.jsx(T2,{size:24}),destaque:!0,caracteristicas:["Até 10 Lojas","Até 100 veículos na frota","Até 50 usuários","Relatórios Básicos de Operação","Suporte Prioritário"]},corporativo:{nome:"Corporativo",id:"corporativo",price:0,displayPrice:"Carregando...",periodo:"/mês",icone:T.jsx(Dw,{size:24}),destaque:!1,caracteristicas:["Até 50 Lojas","Até 1.000 veículos na frota","Até 250 usuários","Relatórios Avançados com IA","Suporte Dedicado"]},master:{nome:"Master",id:"master",price:0,displayPrice:"Sob Consulta",periodo:"",icone:T.jsx(Dw,{size:24}),destaque:!1,caracteristicas:["Lojas Ilimitadas","Frota Ilimitada","Usuários Ilimitados","Acesso via API","Suporte Premium com SLA"]}};function SV(){const{currentUser:n,authLoading:e}=Wp(),[t,i]=te.useState(null),[s,l]=te.useState(!0),[c,f]=te.useState(!1),[p,m]=te.useState(null),[_,E]=te.useState(dh);te.useEffect(()=>{const C=async()=>{try{const M=_i(Xt,"configuracoes","precosPlanos"),z=await lp(M);if(z.exists()){const Y=z.data(),K={essencial:{...dh.essencial},profissional:{...dh.profissional},corporativo:{...dh.corporativo},master:{...dh.master}},J=(oe,W)=>oe.toLocaleString("pt-BR",{style:"currency",currency:W||"BRL"});typeof Y.precoProfissional=="number"?(K.profissional.price=Y.precoProfissional,K.profissional.displayPrice=J(Y.precoProfissional,Y.moeda)):(console.warn("Preço do plano 'Profissional' não encontrado ou não é um número."),K.profissional.displayPrice="Indisponível"),typeof Y.precoCorporativo=="number"?(K.corporativo.price=Y.precoCorporativo,K.corporativo.displayPrice=J(Y.precoCorporativo,Y.moeda)):(console.warn("Preço do plano 'Corporativo' não encontrado ou não é um número."),K.corporativo.displayPrice="Indisponível"),E(K)}else console.error("Documento de preços 'precosPlanos' não encontrado!")}catch(M){console.error("Erro CRÍTICO ao buscar preços dos planos:",M)}},I=async()=>{if(n)try{const M=_i(Xt,"empresas",n.uid),z=await lp(M);z.exists()&&i(z.data())}catch(M){console.error("Erro CRÍTICO ao buscar dados da empresa:",M)}};e||(async()=>{l(!0);try{await Promise.all([C(),I()])}catch(M){console.error("Falha na execução paralela de buscas:",M)}finally{l(!1)}})()},[n,e]);const b=C=>{if(C.id==="master"||C.displayPrice==="Indisponível"){window.location.href="mailto:contato@chapaamigo.com.br?subject=Interesse em Plano";return}m(C),f(!0)};return s||e?T.jsxs("div",{className:"loading-container-planos",children:[T.jsx(Dr,{className:"animate-spin"}),"Carregando informações..."]}):T.jsxs(T.Fragment,{children:[T.jsx(TV,{isOpen:c,onClose:()=>f(!1),plan:p,publicKey:AV,userEmail:n?.email,userDoc:t?.cnpj}),T.jsxs("div",{className:"planos-page-container",children:[T.jsxs("div",{className:"planos-header",children:[T.jsx("h1",{children:"Nossos Planos"}),T.jsx("p",{children:"Escolha o plano que melhor se adapta ao crescimento da sua empresa."})]}),T.jsx("div",{className:"planos-grid",children:Object.entries(_).map(([C,I])=>T.jsxs("div",{className:`plano-card ${I.destaque?"destaque":""} ${t?.plan===C?"plano-atual":""}`,children:[I.destaque&&T.jsx("div",{className:"destaque-badge",children:"Mais Popular"}),t?.plan===C&&T.jsx("div",{className:"plano-atual-badge",children:"Seu Plano Atual"}),T.jsxs("div",{className:"plano-card-header",children:[T.jsx("div",{className:"plano-icone",children:I.icone}),T.jsx("h2",{children:I.nome})]}),T.jsxs("div",{className:"plano-preco",children:[T.jsx("span",{className:"valor",children:I.displayPrice}),T.jsx("span",{className:"periodo",children:I.periodo})]}),T.jsx("ul",{className:"plano-caracteristicas",children:I.caracteristicas.map((O,M)=>T.jsx("li",{children:O},M))}),T.jsx("div",{className:"plano-card-footer",children:t?.plan===C?T.jsx("button",{className:"botao-plano",disabled:!0,children:"Ativo"}):T.jsx("button",{className:"botao-plano upgrade",onClick:()=>b(I),disabled:I.displayPrice==="Indisponível",children:I.id==="master"?"Entrar em Contato":"Fazer Upgrade"})})]},C))})]})]})}const xV=864e5,aT=Symbol.for("constructDateFrom");function Ix(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&aT in n?n[aT](e):n instanceof Date?new n.constructor(e):new Date(e)}function kx(n,e){return Ix(n,n)}function oT(n){const e=kx(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function CV(n,...e){const t=Ix.bind(null,e.find(i=>typeof i=="object"));return e.map(t)}function lT(n,e){const t=kx(n);return t.setHours(0,0,0,0),t}function RV(n,e,t){const[i,s]=CV(t?.in,n,e),l=lT(i),c=lT(s),f=+l-oT(l),p=+c-oT(c);return Math.round((f-p)/xV)}const IV=({status:n,trialEndDate:e})=>{const t=oc();if(n!=="trialing"||!e)return null;const i=new Date,s=e.toDate(),l=RV(s,i);let c="";return l>1?c=`Seu período de teste termina em ${l} dias.`:l===1?c="Seu período de teste termina amanhã!":l===0?c="Seu período de teste termina hoje!":c="Seu período de teste expirou.",T.jsx("div",{className:"trial-banner",children:T.jsxs("p",{children:[c,T.jsx("button",{onClick:()=>t("/planos"),className:"trial-button",children:"Escolher um Plano"})]})})},kV=n=>{switch(n){case"/dashboard":return"Dashboard";case"/operacoes":return"Mesa de Operações";case"/talentos":return"Gestão de Trabalhadores";case"/frota":return"Minha Frota";case"/historico":return"Histórico";case"/lojas":return"Gestão de Lojas";case"/planos":return"Meu Plano e Assinatura";default:return"Painel"}};function NV(){const n=oc(),e=Fa(),{currentUser:t,userRole:i,loading:s,empresaData:l}=Wp(),c=t?t.email:"Carregando...",f=async()=>{const p=Nv();try{await cO(p),n("/login")}catch(m){console.error("Erro ao fazer logout:",m)}};return s?T.jsx("div",{className:"loading-container",children:"Carregando Painel..."}):T.jsxs("div",{className:"main-layout",children:[T.jsxs("aside",{className:"sidebar",children:[T.jsxs("div",{className:"sidebar-header",children:[T.jsx("img",{src:"/images/branca.svg",alt:"Chapa Amigo Empresas Logo",className:"logo"}),T.jsx("h1",{children:"Chapa Amigo Empresas"})]}),T.jsxs("nav",{className:"sidebar-nav",children:[T.jsxs(Mo,{to:"/dashboard",className:"nav-link",children:[T.jsx(S6,{size:20}),T.jsx("span",{children:"Dashboard"})]}),T.jsxs(Mo,{to:"/operacoes",className:"nav-link",children:[T.jsx(u6,{size:20}),T.jsx("span",{children:"Mesa de Operações"})]}),i==="superAdmin"&&T.jsxs(Mo,{to:"/talentos",className:"nav-link",children:[T.jsx(K3,{size:20}),T.jsx("span",{children:"Gestão de Trabalhadores"})]}),T.jsxs(Mo,{to:"/frota",className:"nav-link",children:[T.jsx(x2,{size:20}),T.jsx("span",{children:"Minha Frota"})]}),T.jsxs(Mo,{to:"/lojas",className:"nav-link",children:[T.jsx(w2,{size:20}),T.jsx("span",{children:"Gestão de Lojas"})]}),T.jsxs(Mo,{to:"/historico",className:"nav-link",children:[T.jsx(Iy,{size:20}),T.jsx("span",{children:"Histórico"})]}),T.jsxs(Mo,{to:"/planos",className:"nav-link",children:[T.jsx(f6,{size:20}),T.jsx("span",{children:"Meu Plano"})]})]}),T.jsxs("div",{className:"sidebar-footer",children:[T.jsx("div",{className:"user-info",children:T.jsx("span",{className:"user-email",children:c})}),T.jsxs("button",{onClick:f,className:"logout-button",children:[T.jsx(R6,{size:20}),T.jsx("span",{children:"Sair"})]})]})]}),T.jsxs("main",{className:"content",children:[T.jsx(IV,{status:l?.status,trialEndDate:l?.trialEndDate}),T.jsx("header",{className:"content-header",children:T.jsx("h2",{className:"page-title",children:kV(e.pathname)})}),T.jsx("div",{className:"page-content",children:T.jsx(ZR,{})})]})]})}function OV({children:n}){const{currentUser:e,loading:t}=Wp();return t?T.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:T.jsx(Dr,{size:48,className:"animate-spin"})}):e?n:T.jsx(w_,{to:"/login",replace:!0})}function PV(){return T.jsx(vI,{children:T.jsxs($R,{children:[T.jsx(kr,{path:"/login",element:T.jsx(p3,{})}),T.jsx(kr,{path:"/register",element:T.jsx(g3,{})}),T.jsxs(kr,{path:"/",element:T.jsx(OV,{children:T.jsx(NV,{})}),children:[T.jsx(kr,{index:!0,element:T.jsx(w_,{to:"/dashboard",replace:!0})}),T.jsx(kr,{path:"dashboard",element:T.jsx(W6,{})}),T.jsx(kr,{path:"operacoes",element:T.jsx(rV,{})}),T.jsx(kr,{path:"talentos",element:T.jsx(_V,{})}),T.jsx(kr,{path:"frota",element:T.jsx(vV,{})}),T.jsx(kr,{path:"lojas",element:T.jsx(yV,{})}),T.jsx(kr,{path:"historico",element:T.jsx(bV,{})}),T.jsx(kr,{path:"planos",element:T.jsx(SV,{})})," "]}),T.jsx(kr,{path:"*",element:T.jsx(w_,{to:"/login",replace:!0})})]})})}eR.createRoot(document.getElementById("root")).render(T.jsx(Kt.StrictMode,{children:T.jsx(kL,{children:T.jsx(PV,{})})}));
